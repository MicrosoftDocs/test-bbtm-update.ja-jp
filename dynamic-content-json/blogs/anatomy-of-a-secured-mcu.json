{
    "Slug": "anatomy-of-a-secured-mcu",
    "Title": "セキュリティで保護された MCU の構造",
    "Summary": "Azure Sphere is an end-to-end solution containing three complementary components that provide a secured IoT platform. They include an Azure Sphere microcontroller unit (MCU), an operating system optimized for IoT scenarios that is managed by Microsoft, and a suite of secured, scalable online services. ",
    "Content": "<h2>セキュリティで保護されたシリコン</h2>\n\n<p>Azure Sphere は、セキュリティで保護された IoT プラットフォームを提供する 3 つの補完的なコンポーネントを含むエンド ツー エンドのソリューションです。 これには、Azure Sphere マイクロコントローラー ユニット (MCU)、Microsoft によって管理される IoT シナリオ用に最適化されたオペレーティング システム、セキュリティで保護されたスケーラブルな一連のオンライン サービスが含まれます。 Microsoft は、オペレーティング システムに対して 10 年以上のサポートを提供し、ビジネス計画を簡素化するために、デバイスごとに 1 つの料金でセキュリティ サービスを使用しています。</p>\n\n<p>Microsoft はその名前をソフトウェアに組み込みますが、シリコンに関する専門知識は深く掘り下げられています。 過去 15 年間、Microsoft は、さまざまな Microsoft 製品用のカスタム シリコンを設計することで、ハードウェア ベースのセキュリティに深く投資してきました。 Azure Spheres&rsquo; のシリコン アーキテクチャは、これらの長年の経験の集大成であり、Pluton セキュリティ サブシステムはセキュリティ ストーリーの中心です。 このブログ記事では、レイヤーをドリルダウンして、&rsquo;セキュリティで保護された Azure Sphere MCU にセキュリティで保護&rdquo;されているもの&ldquo;について説明します。 具体的には、プル&rsquo;トン&rsquo;の設計の詳細と、その他の一般的なシリコン セキュリティの強化について詳しく説明します。</p>\n\n<p>広く、MCU ベースのデバイスは、インターネットに接続できるデバイスと、インターネットに接続しないように設計されたデバイスの 2 つのカテゴリ &ndash; のいずれかに属しています。 最近まで、事実上すべての MCU ベースのデバイスが切断され、デバイスの価値を考慮したセキュリティ モデル、物理脅威モデル (デバイスはケージ内でロックされていますか? 一般の人はそれとやり取りしますか?)、デバイスが攻撃されるリスク (例: 自動ペーパー タオル ディスペンサーと MRI マシン)。 したがって、セキュリティは単純なモデル &ndash; でより多くを支払い、より多くを得ました。</p>\n\n<p>MCUベースのデバイスをインターネットに接続することは、任意のMCUが攻撃者の手の中で潜在的な汎用デジタル武器になる可能性があるため、流域の瞬間です。 みらいボットネットは、わずか10万台の接続カメラで構成されていました。 1億個のペーパータオルディスペンサーによって開始された分散型サービス拒否(DDOS)攻撃について考えたことがない場合&rsquo;は、このブログ投稿を検討してください。</p>\n\n<p>インターネット接続とは、セキュリティのためのテーブルのステークを変更する必要があることを意味します。 セキュリティに関する会話をリセットするために、 <a href=\"https://aka.ms/7properties\" target=\"_blank\">高度にセキュリティで保護された接続デバイスの 7 つのプロパティ</a> に関するホワイト ペーパーを作成しました。 ただし、Azure Sphere 認定の MCU は、MCU で使用される一般的な信頼のハードウェア ルートを超えています。</p>\n\n<h2>プルトン キーの管理</h2>\n\n<p>プルトンは、製造プロセス中にシリコンで独自のキーペアを生成します。 セキュリティで保護されたその他のチップは、多くの場合、キーを生成するために工場のハードウェア セキュリティ モジュール (HSM) に依存します。 プルトンは、そのキーをシリコンでプライベートに生成し、それらのキーを電子ヒューズに永続的に格納することでさらに進めます。 秘密キーはソフトウェアに表示されません。 デバイス上で最も信頼できるファームウェアであっても、秘密キーにアクセスできません。 プルトンは、2 つの異なるパブリック/プライベート楕円曲線暗号化 (ECC) キーペアを生成します。 1 つはリモート構成証明専用に使用され (詳細については後で説明します)、もう 1 つは汎用暗号化で使用できます。 チップ&rsquo; の公開キーは、秘密キーではなく、シリコン製造元から Microsoft に送信されます。つまり、Microsoft はチップが製造された時点からすべての Azure Sphere チップについて認識し、信頼関係を確立します。</p>\n\n<h2>プルトン&rsquo;乱数ジェネレーター</h2>\n\n<p>プルトンは真の乱数ジェネレーターを実装します。 プルトン&rsquo;乱数ジェネレーターは、環境からエントロピー (つまりランダム性) を収集して乱数を生成します。 この乱数ジェネレーターは、製造プロセス中に独自のキーを生成する各 MCU にとって重要であるため、防御する必要がある重要な攻撃領域です。 プルトン&rsquo;真乱数ジェネレーターは、収集するエントロピを測定し、エントロピがその設計の一部として定義されている特定の標準を満たしていない場合、乱数ジェネレーターは乱数の配信を拒否します。</p>\n\n<h2>Plutons&rsquo; 暗号化ヘルパー</h2>\n\n<p>プルトンは、一般的な暗号化タスクを高速化します。 Pluton は、ハッシュ (SHA2 経由)、ECC、高度な暗号化標準 (AES) 暗号化操作などの暗号化タスクを高速化します。</p>\n\n<h2>セキュア ブートの利点</h2>\n\n<p>プルトンはサプライチェーンのリスクを最小限に抑えます。 ECDSA は、ECC キーペアを使用してデジタル署名をチェックするためのアルゴリズムです。 Azure Sphere デバイス上のすべてのソフトウェアは、Microsoft によって署名されている必要があります。 Microsoft は、Microsoft の最も重要な製品の一部の秘密キーを保護する同じインフラストラクチャである、独自の&rsquo;実証済みの署名インフラストラクチャを使用しているため、秘密キーがセキュリティで保護された HSM に保持され、このキーのすべての使用が厳格で文書化されたプロセスに従っていることを保証します。</p>\n\n<h2>リモート構成証明の活用</h2>\n\n<p>Pluton では、シリコンでの測定ブートとリモート構成証明のサポートが実装されています。 Azure Sphere デバイスが Azure Sphere Security Service (AS3) に接続すると、ローカルに格納された証明書を使用してサーバー認証が完了します。 ただし、AS3 はデバイス自体も認証する必要があります。 これは、リモート構成証明と呼ばれるプロトコルを介して行います。</p>\n\n<p>1. AS3 は、デバイスに nonce を送信します。これは、ブートされたソフトウェア コンポーネントの暗号化ハッシュで構成される測定されたブート値と組み合わされます。</p>\n\n<p>2. デバイスは、Plutons&rsquo; プライベート ECC 構成証明キーを使用してこれらの値に署名し、AS3 に送信します。</p>\n\n<p>3. AS3 には既にデバイス&rsquo;公開 ECC 構成証明キーがあるため、デバイスが本物かどうか、正規のソフトウェアで起動されたかどうか、および正規のソフトウェアが信頼されているかどうかを判断できます。</p>\n\n<p>このメジャー ブート値を偽造または変更できないことが重要です。そのため、チップ全体がリセットされた場合にのみリセットできる蓄積レジスタに保持されます。 シリコンでは署名が行われるため、ソフトウェアが完全に侵害されたデバイスであっても、構成証明の値を偽造することはできません。</p>\n\n<p>4. デバイスが最新の状態の場合は、任意のオンライン サービスに提示できるクライアント証明書と、AS3 サービスでのみ使用される AS3 証明書が提供されます。 証明書チェーンが有効な場合は、チップの正常性を保証する AS3 を表します。 証明書は約 1 日有効です。つまり、インターネットへの接続を維持する場合、デバイスは定期的にその正常性を証明する必要があります。</p>\n\n<p>デバイスが正常でない場合、クライアント証明書は発行されず、実質的にデバイスは AS3 にのみ接続し、ソフトウェア更新プログラムを実行できます。</p>\n\n<p>継続的な更新によるシリコンベースの構成証明により、デバイスの偽装と偽造が防止されます。 今後のブログ記事では、このトピックについて詳しく説明しますが、すべて Pluton から始まります。</p>\n\n<h2>プルトン以外のシリコン セキュリティ</h2>\n\n<p>プルトンを構成するシリコンファブリックではセキュリティが停止しません&rsquo;。 実際、Azure Sphere の MCU は、プラットフォーム&rsquo;の多層防御戦略を改善する追加のセキュリティ機能を実装することで、Pluton を超えています。 例として、5 つのコアで構成されるチップである MT3620 を使用します&rsquo;。 1 つのコアは、Pluton 内で操作を呼び出すランタイム専用です。 次に、チップのWi-Fi RFコンポーネントと対話するWi-Fi専用のコアです。 A7 コアは Azure Sphere オペレーティング システムの実行専用であり、リアルタイム処理には 2 つの M4 コアを使用できます。 A7 コアは Arms&rsquo; Trust Zone テクノロジを利用し、Azure Sphere セキュリティ モニターは Secure World で実行され、Linux カーネルとその他の OS コンポーネントは Normal World で実行されます。&nbsp;</p>\n\n<p>すべてのコアと周辺機器の間には、ファイアウォールと呼ばれる &ldquo;ものがあります。&rdquo; これらはネットワークの意味でのファイアウォールではなく、リソースとコアのマッピングのセットです。 実際、内部的にはこれをコア マッピング機能と呼びます。 デバイス上のすべてのリソースはこのようにマップされ、既定ではすべてのリソース (A7 SRAM、周辺機器、フラッシュ) は Secure World にのみマップされ、Normal World で実行されているソフトウェアへのアクセスは拒否されます。 Secure World では、周辺機器へのアクセスを選択的に許可でき、それらの選択は固定されています &ldquo;。&rdquo; スティッキーは、シリコンについて話し合うときによく見られる用語ではありません。 この場合、コア マッピングは &ldquo;一度設定されるとロック&rdquo; されます。つまり、攻撃者がファイアウォールをプログラムするコードを侵害した場合でも、攻撃者は、最初に実行しているコア&rsquo;に割り当てられていたリソースにアクセスできません。</p>\n\n<p>周辺アクセスが制限されると、攻撃を受ける可能性がある領域が減少します。 スティッキー選択により、サーフェス領域がさらに減少します。 デバイスが展開された後、攻撃者はコードを悪用して不正な Web サービスと通信したり、デバイスの別の部分を制御したりすることはできません。 その結果、個々のデバイスだけでなく、サプライ チェーン全体のセキュリティも強化されます。</p>\n\n<p>これらは、Azure Sphere MCU を一意にするシリコン機能のほんの一部であり、攻撃者が Azure Sphere デバイスを制御することが困難になります。 各追加機能は、攻撃者がデバイス&rsquo;の機能を侵害するために克服しなければならないもう 1 つの複雑さを提供し、Pluton は、ハードウェアの信頼のルートに存在しない多くの場合、シリコン セキュリティ機能の豊富なセットを提供します。 Microsoft は、Pluton の利点を強く信じているので、Azure Sphere チップを作成したいシリコンメーカーに対して Pluton のライセンスを無料で提供しています。 セキュリティの向上は間違いありませんが、IoT でバーを上げると、デバイスの侵害がはるかに困難になります。</p>\n"
}