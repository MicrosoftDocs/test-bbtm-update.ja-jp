{
    "Slug": "announcing-general-availability-of-mobile-offline-sync",
    "Title": "モバイル オフライン同期マネージド SDK の一般提供のお知らせ",
    "Summary": "The best mobile apps handle network interruptions gracefully, allowing users to be productive despite the lack of connectivity. Learn how you can use the offline sync feature of Azure Mobile Services, to create responsive apps that work, even when the network doesn’t. ",
    "Content": "最新のモバイル アプリを記述する場合、開発者は、エンド ユーザーが常にネットワーク にアクセスできるわけではないという現実を考慮する必要があります。 これは、一時的なネットワークの問題が原因である可能性があります。または、接続が少ないリモートエリアでよく使用されるモバイル アプリである可能性があります。 また、モバイル データ プランは非常にコストがかかる場合があるため、ユーザーはネットワーク呼び出しを制限するアプリに感謝します。 ただし、正しい同期動作を実装する課題があるため、多くのアプリはオフラインで動作しません。\n\n幸いなことに、Azure Mobile Servicesを使用すると、iOS、Android、Windows アプリ全体でネイティブ同期エクスペリエンスを簡単に提供できます。 この機能は、JavaScript バックエンドと .NET バックエンドの両方で使用でき、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-windows-store-dotnet-get-started-offline-data\">ユニバーサル</a>、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-ios-get-started-offline-data/\">iOS</a>、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-xamarin-ios-get-started-offline-data\">Xamarin iOS</a>、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-xamarin-android-get-started-offline-data\">Xamarin Android</a>、Android Windows複数のクライアントをサポート<a href=\"https://azure.microsoft.com/blog/2014/08/07/offline-support-in-azure-mobile-services-android-sdk/\">しています</a>。\n\nWindowsと Xamarin でサポートされている<a href=\"https://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore\" target=\"_blank\">オフライン マネージド クライアント SDK</a> の一般提供についてお知らせします。 iOS SDK と Android SDK の GA は近日公開予定です。\n\nオフライン同期にはさまざまな利点があります。\n<ul>\n    <li>サーバー データをデバイスにローカルでキャッシュすることにより、アプリケーションの応答性を向上させる。</li>\n    <li>ネットワークの問題がある場合でも使用可能な信頼性の高いアプリを作成する。</li>\n    <li>エンド ユーザーがネットワークにアクセスできなくてもデータを作成および変更できるようにすることで、接続がほとんどまたはまったく得られないような状況をサポートする。</li>\n    <li>複数のデバイス間でデータを同期させ、同じレコードが 2 つのデバイスによって変更されたときに競合を検出する。</li>\n    <li>無制限のデータ プランを持っていないお客様のネットワーク使用を制限する</li>\n</ul>\nアプリがオフライン モードの場合でもユーザーはデータを作成および変更できますが、それらのデータはローカル ストアに保存されます。 アプリがオンラインに戻ると、ローカルの変更を Mobile Services バックエンドと同期できます。 この機能には、クライアントとバックエンドの両方で同じレコードが変更された場合の競合検出のサポートも含まれています。 検出された競合は、サーバーまたはクライアントのどちらでも処理することができます。\n\nアプリにオフライン サポートをさらに簡単に追加できるように、Azure portalのクイック スタートを更新しました。 Xamarin.iOS と Xamarin.Android のクイック スタートがオフラインで有効になりました。 Windows<a href=\"https://www.sqlite.org/download.html\" target=\"_blank\">では SQLite VSIX</a> をインストールする必要があるため、Windows クイック スタートにはオフライン コードがすべて含まれていますが、コメントアウトされています。\n\nMobile Servicesを既に使用している場合は、アプリをオフラインで有効にするのは簡単です。 <a href=\"https://www.nuget.org/packages/WindowsAzure.MobileServices.SQLiteStore\" target=\"_blank\">NuGet パッケージ WindowsAzure.MobileServices.SQLiteStore</a><b></b> を追加するだけです。 次に、モバイル サービスに接続するときは、<b>GetTable</b> ではなく <b>GetSyncTable</b> メソッドを使用します。\n<pre class=\"prettyprint\">IMobileServiceSyncTable todoTable = App.MobileService.GetSyncTable(); // offline access</pre>\n次に、ローカル同期ストアを設定します。 このコードは、 <strong>たとえば OnNavigatedTo</strong> のイベント ハンドラーで実行できます。 独自の同期ストアを定義することも、提供されている SQLite ベースの実装を使用することもできます。\n<pre class=\"prettyprint\">if (!App.MobileService.SyncContext.IsInitialized)\n{\n    var store = new MobileServiceSQLiteStore(\"localsync.db\");\n    store.DefineTable&lt;TodoItem&gt;();\n    await App.MobileService.SyncContext.\n    InitializeAsync(store, new MobileServiceSyncHandler());\n}</pre>\nアプリでは、CRUD 操作に <b>IMobileServiceSyncTable</b> ( <b>IMobileServiceTable</b> ではなく) を使用する必要があります。 これにより、ローカル データベースへの変更が保存され、変更のログも保持されます。 アプリが変更を Mobile Service と同期する準備ができたら、 <b>PushAsync</b> と <b>PullAsync</b> のメソッドを使用します。\n<pre class=\"prettyprint\">await App.MobileService.SyncContext.PushAsync();\n\nawait todoTable.PullAsync(\"queryID\", myQuery);</pre>\n<strong>PullAsync</strong> メソッドは、最初のパラメーターとしてクエリ ID を受け取ります。これは、アプリ内のクエリを一意に識別する文字列です。 クエリ ID は増分同期に使用され、最後のプル操作の結果から最後に更新されたタイムスタンプを格納するために使用されます。\n\n増分同期をオプトアウトする場合は、クエリ ID として <b>null を</b> 渡します。 この場合、 <strong>PullAsync</strong> の呼び出しごとにすべてのレコードが取得されるため、非効率的になる可能性があります。\n\n<strong>PullAsync</strong> にクエリを渡して、デバイスにレコードのサブセットのみを格納することもできます。 ただし、クエリにパラメーターがある場合は、同じパラメーター値がクエリ ID の一部である必要があります。\n\n詳細については、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-windows-store-dotnet-get-started-offline-data/\">Windows</a>と <a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-xamarin-ios-get-started-offline-data/\">Xamarin</a> オフラインのチュートリアルを参照してください。\n\n上記のコードではユニバーサル アプリについて説明しましたが、 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-ios-get-started-offline-data/\">iOS</a> と <a href=\"https://azure.microsoft.com/blog/2014/08/07/offline-support-in-azure-mobile-services-android-sdk/\">Android</a> 用のアプリにオフライン同期のサポートを追加するのと同じくらい簡単です。\n\nこの機能の詳細については、次のリソースを確認する必要があります。\n<ul>\n    <li>チュートリアル: <a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-windows-store-dotnet-get-started-offline-data/\">Windows</a>、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-xamarin-ios-get-started-offline-data/\">Xamarin iOS</a>、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-xamarin-android-get-started-offline-data\">Xamarin Android</a>、<a href=\"https://azure.microsoft.com/en-us/documentation/articles/mobile-services-ios-get-started-offline-data/\">iOS</a>、<a href=\"https://azure.microsoft.com/blog/2014/08/07/offline-support-in-azure-mobile-services-android-sdk/\">Android</a>。</li>\n    <li>ビデオ: <a href=\"https://azure.microsoft.com/en-us/documentation/videos/azure-mobile-services-offline-enabled-apps-with-donna-malayeri/\" target=\"_blank\">オフライン同期の Azure Friday ビデオ</a>、 <a href=\"https://channel9.msdn.com/Shows/Cloud+Cover/Episode-155-Offline-Storage-with-Donna-Malayeri\" target=\"_blank\">オフライン同期時の Cloud Cover エピソード</a></li>\n    <li>Xamarin サンプル: <a href=\"https://github.com/lindydonna/mobile-demos/tree/master/XamarinOffline.iOS\">iOS</a>、 <a href=\"https://github.com/lindydonna/mobile-demos/tree/master/XamarinOffline.Android\">Android</a>、 <a href=\"https://github.com/lindydonna/mobile-demos/tree/master/XamarinFormsOffline\">Xamarin Forms</a></li>\n    <li>ソリューション アクセラレータ – <a href=\"https://code.msdn.microsoft.com/windowsazure/Field-Engineer-501df99d\">フィールド エンジニア</a> (Windows ストア)</li>\n</ul>"
}