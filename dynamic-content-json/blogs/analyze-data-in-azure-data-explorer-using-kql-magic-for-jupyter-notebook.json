{
    "Slug": "analyze-data-in-azure-data-explorer-using-kql-magic-for-jupyter-notebook",
    "Title": "Jupyter Notebookのマジックを使用して Azure Data Explorer のデータKQL分析する",
    "Summary": "Exploring data is like solving a puzzle. You create queries and receive instant satisfaction when you discover insights, just like adding pieces to complete a puzzle.",
    "Content": "<p>データの探索は、パズルを解くようなものです。 パズルを完成させるためにピースを追加するのと同じように、クエリを作成し、分析情報を見つけたときにすぐに満足を得ることができます。 同じ分析を複数回繰り返し実行し、オープンソース コミュニティのライブラリを使用し、ステップと出力を他のユーザーと共有し、成果物として作業を保存する必要があるImagine。 ノートブックは、クエリの記述、ドキュメントの追加、再利用可能な形式での出力としての作業の保存を行う 1 つの場所を作成するのに役立ちます。</p>\n\n<p><a href=\"https://jupyter.org/\" target=\"_blank\">Jupyter Notebook</a>を使用すると、ライブ コード、数式、視覚化、説明テキストを含むドキュメントを作成して共有できます。 これには、データのクリーニングと変換、数値シミュレーション、統計モデリング、機械学習が含まれます。</p>\n\n<p>Jupyter Notebookの Python カーネルの機能を拡張するKQLマジック コマンドをお知らせします。 KQLマジックを使用すると、KQLクエリをネイティブに記述し、Microsoft Azure Data Explorerからデータをクエリできます。 Python とKQLを簡単に交換し、KQLレンダリング コマンドと統合された豊富な Plot.ly ライブラリを使用してデータを視覚化できます。 KQLマジックでは、クエリを実行するデータ ソースとして Azure Data Explorer、アプリケーション インサイト、Log Analytics がサポートされます。</p>\n\n<p>単一のマジック &ldquo;%kql&rdquo; を使用して 1 行のクエリを実行するか、セル マジック &ldquo;%%kql&rdquo; を使用して複数行のクエリを実行します。 次の例では、複数行のクエリを実行し、ploy.ly Python ライブラリを使用して円グラフをレンダリングします。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4918bc62-3905-49d9-9e0d-3e2f171aa035.png\"><img alt=\"Screenshot of multi line query and render of pie chart using ploy.ly\" border=\"0\" height=\"554\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/02a47d86-007f-4bb6-8ec7-61f67a87eebb.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"ploy.ly を使用した複数行クエリと円グラフのレンダリングのスクリーンショット\" width=\"750\"></a></p>\n\n<p>Python ユーザーの場合は、結果セットを <a href=\"https://pandas.pydata.org/\" target=\"_blank\">pandas データフレーム</a>に配置できます。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/945b0f96-a791-45a7-b3dd-e36c16671b40.png\"><img alt=\"Screenshot pf placing result set into a pandas dataframe\" border=\"0\" height=\"210\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1bfdfca5-9008-4f31-9dc5-f9526ef30403.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"結果セットを pandas データフレームに配置するスクリーンショット\" width=\"750\"></a></p>\n\n<h2>一般的なユース ケース</h2>\n\n<ul>\n <li><strong>データ サイエンス</strong>: データ サイエンティストは、KQLマジックを使用して Azure Data Explorer からのデータを分析および視覚化し、Python コードと KQL クエリを簡単に交換して、実験、トレーニング、機械学習モデルのスコア付け、ノートブックを成果物として保存します。</li>\n <li><strong>データ分析</strong>: KQLマジックを使用して、Python の知識を必要とせず、データのクエリ、分析、視覚化を行います。 Python ユーザーの場合は、Azure Data Explorerのデータに簡単にクエリを実行し、Python エコシステムのさまざまなオープン ソース ライブラリを使用します。</li>\n <li><strong>ビジネス レビュー: ビジネス</strong> レビューと製品レビューにKQLマジックを使用します。 ノートブックを 1 回作成し、使用するたびに新しい値で更新します。</li>\n <li><strong>インシデント対応</strong>: KQLマジックを使用して運用ドキュメントを作成し、簡単に調査できるようにクエリをチェーンアップし、ノートブックを保存して再現性を高め、リモート接続アナライザー (RCA) の成果物を保存します。</li>\n <li><strong>セキュリティ分析</strong>: Azure Data Explorerのデータに対してクエリを実行し、セキュリティ分析に豊富な Python エコシステムを使用してデータを分析および視覚化します。 たとえば、Microsoft の内部セキュリティ チームの 1 つは、標準的な分析パターンに Juypter でKQLマジックを使用してセキュリティ アラートをトリアージし、インシデント対応プレイブックをパラメーター化された Jupyter Notebook に変換して、繰り返しの調査ワークフローを自動化しています。 サンプル ノートブックは<a href=\"https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fnotebooks.azure.com%2Fashwinrp%2Fprojects%2Fthreat-hunting-with-notebooks%2Fhtml%2FAzure%2520Data%2520Explorer-%2520Kqlmagic%2520Demo.ipynb&amp;data=02%7C01%7Cv-jujame%40microsoft.com%7C46cb98f84c534546f9b608d680b5c92d%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636837915587417837&amp;sdata=1l5Xf3daONbE2Rz%2Fp3d1f7yrrxymlNjPzO6UE%2BLPuD4%3D&amp;reserved=0\" target=\"_blank\">、Azure Data Explorer KQL magic Demo</a> と GitHub Repo の <a href=\"https://github.com/ashwin-patil/threat-hunting-with-notebooks\" target=\"_blank\">Threat-hunting-with-notebooks</a> で入手できます。</li>\n</ul>\n\n<h2>作業の開始</h2>\n\n<p>Microsoft のエキサイティングな機能を使用すると、データ分析を楽しむことができます。 KQLマジックのその他のドキュメントと例については、 &ldquo; Jupyter Notebook<a href=\"https://docs.microsoft.com/en-us/azure/data-explorer/kqlmagic\" target=\"_blank\">とKQLマジックを使用したデータの分析</a>に関するドキュメントをご覧ください。&rdquo;</p>\n"
}