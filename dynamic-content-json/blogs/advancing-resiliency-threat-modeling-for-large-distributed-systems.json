{
    "Slug": "advancing-resiliency-threat-modeling-for-large-distributed-systems",
    "Title": "大規模な分散システムの回復性の脅威モデリングを進める",
    "Summary": "All service engineering teams in Azure are already familiar with postmortems as a tool for better understanding what went wrong, how it went wrong, and the customer impact of the related outage. For today’s post in our Advancing Reliability blog series, we share insights into our journey as we work towards advancing our postmortem and resiliency threat modeling processes.",
    "Content": "<p>&ldquo;<em>Azure のすべてのサービス エンジニアリング チームは、問題の原因、問題の発生、および関連する停止の顧客への影響をより深く理解するためのツールとして事後分析に既に精通しています。私たちの事後分析プロセスの重要な部分は、関連するすべてのチームが、同じ種類の停止が再び起こるのを防ぐことを目的とした修復項目を作成することですが、&nbsp;リアクティブなアプローチは結果を生み出すことができますが、これを左側&mdash;に移動したいと考えました。後ではなく、お客様に影響を与える前に、リスクの発見を改善したいと考えました。高<a href=\"https://www.aka.ms/AdvancingReliability\" target=\"_blank\">次信頼性ブログ シリーズ</a>の今日&rsquo;の投稿では、Azure&rsquo; 問題管理チームのプリンシパル プログラム マネージャー<strong>である Richie Costleigh</strong> に、事後分析と回復性&nbsp;のモデリング プロセスの推進に向けて取り組む過程に関する分析情報を共有するよう依頼しました。</em>&rdquo;&mdash;Mark Russinovich、CTO、Azure</p>\n\n<hr>\n<p>&nbsp;</p>\n\n<p>大まかに言えば、私たちの目標は、自傷的な停止や回避可能な停止を回避することですが、&nbsp;さらにすぐに、お客様への影響の可能性を可能な限り減らすことが目標です。 このコンテキストでは、サービスが内部と外部の両方で顧客の期待を満たさなかった (またはワークロードに悪影響を与える) インシデントが停止します。 この問題を回避するには、 <a href=\"https://azure.microsoft.com/en-us/\" target=\"_blank\">Azure</a> 上の顧客ワークロードに影響を与える前に、リスクを明らかにする方法を改善する必要があります。 しかし、Azure 自体は大規模で複雑な分散システム&mdash;であり、組織が数百&ldquo;のサービスで構成される数千のソリューションを提供し、それぞれが 50&nbsp; 人から 50 人のエンジニアのチームを持ち、&rdquo;組織の複数の異なる部分に分散し、それぞれ独自のプロセス、ツール、優先順位、目標を持つソリューションを提供している場合は、回復性&nbsp;の高いモデル化にアプローチする必要がありますか? これらの個々のリスク評価全体で、回復性の脅威モデリング プロセスをスケールアウトし、理由を示す方法を説明します。 これらの課題に対処するために、事後対応型アプローチとより積極的なアプローチを組み合わせるために、いくつかの大きな変更が必要でした。</p>\n\n<h2>私たちの旅を始める</h2>\n\n<p>私たちは、前死パイロットプログラムで左シフトを開始しました。 過去の停止を振り返り、議論を始めるだけでなく、構造を提供するのに役立つアンケートを作成しました。 次に、さまざまな目的とアーキテクチャ&mdash;のいくつかのサービスを選択しました。チームと一緒に座って、新しいことを学び、リスクの特定に関する改善と改善を行い、プロセスにチームからのフィードバックを組み込み、次のチームでもう一度試しました。 最終的に、このプロセスを生産的でインパクトのあるものにするために必要なその他の要素と同様に、質問する適切な質問を特定し始めました。 これらの要素の中には既に存在するものもあれば、回復性&nbsp;の脅威のモデリングに対する一元的なアプローチをサポートするために作成する必要がある要素もあります。&nbsp;存在する多くは、目標を達成する全体的なソリューションへの変更や統合も必要です。 以下は、私たちのアプローチの概要であり、私たちが発見した要素は、空間を改善し続けるために必要でした。</p>\n\n<h2>継続的で恐れのないリスクドキュメントの文化を作成しました</h2>\n\n<p>リスクがどこにあるかを知るために、大きな先行投資が必要であることを認識しました。 徹底的な事前分析には時間&mdash;がかかり、貴重&quot;で需要&nbsp;&quot;の高いエンジニアの種類の時間では、私たちは顧客価値&rsquo;を提供し、&quot;この&quot;&nbsp;kindof&nbsp;エンジニア&nbsp;タイムを行うために停止するために厳しいタイムライン内で働いています。 サービスが 2 年間で 1 回しか停止していなくても、ソリューションの依存関係チェーンには他にも数十のサービスがあり、過去 2 年間に 1 回しか停止していなかったことを理解してもらう必要がありました。 ポイントは、お客様&rsquo;の観点から見ると、2 つ以上&ldquo;&rdquo;の障害が発生したことです。</p>\n\n<p>リスクが低いことが無視できる点に懐疑的である必要があります。 障害に対する&nbsp;リスクのインベントリを、異常で恐れ知らずに検索し始める必要があります。 残りの問題の詳細な議論と、報復を恐れずにリスクを評価するだけでなく、数百または数千のサービスで構成される大規模な組織の複数のサービス全体で広く活用できる一般的なソリューションと軽減策への投資を通知するプロセスが必要でした。</p>\n\n<p>目標は、リスクを継続的に検索し、X か月ごとにのみ更新される静的モデルではなく、生きたリスク&quot;&nbsp;を受け取るモデルを持つこと&quot;です。 最初のリスクセットを見つけるための最初の投資が始まったら、明確に定義されたプロセスで物事を最新の状態に保ちたいと考えました。 最初の鍵は、私たちと目標の間で最初の投資 &quot;moat&quot;&nbsp; がどれだけ大きかったかによって阻止されることではなかったです。 私たちが今見ている本当の利点は、リスク収集が私たちの文化に組み込まれているということです。 これにより、さまざまなソースからリスクを収集し、組織のプロセスに組み込むことができます。</p>\n\n<p>では、リスクを特定するプロセスを開始するにはどうすれば良いでしょうか。</p>\n\n<h2>リアクティブアプローチとプロアクティブアプローチの両方を使用してリスクを明らかにしました</h2>\n\n<h3>事後分析プログラムを活用しました。</h3>\n\n<p>リスクを探しながら、過去に起こったことを見て、将来何が起こるかの手がかりを探&nbsp;すのが理にかなっています。 この点では、固体事後分析プログラムが重要でした。 私たちはすでに事後分析チームを持っていました, 共通のテーマを探し、より深い分析のためにそれらを表面化し、投資を通知します. 彼らの分析は、リスクに対処するのに役立つ質の高いプログラムやイニシアチブにチームをルーティングするのに役立っただけでなく、リスクがどの程度広がっているかを見るまで、必要とは知らなかった他の投資の必要性を強調しました。 事後分析から識別されたリスク カテゴリの種類は、まだ発生していないリスクを探したときに、焦点領域のサブセットになりました。 死後分析は事後分析自体と同じくらい良いことはここで注目に値します。</p>\n\n<h3>私たちは、事後品質レビュープログラムを活用しました</h3>\n\n<p>事後分析の品質は、その有用性を決定します, したがって、我々はポストモーテム品質レビュープログラムに投資しました. ガイダンスが公開され、トレーニングが利用可能になり、大規模なレビュー担当者のプールは、書かれた後の各 &quot;高い影響&quot;&nbsp;度の事後分析を評価します。&nbsp;評価が低かった、またはより明確にする必要があった事後分析は、著者に送り返されました。 影響の大きい事後分析は、他のチームや上級リーダーのエンジニアを含む会議で毎週レビューされます。両方とも、適切なアクション プランに関する質問やフィードバックを行います。 このプログラムを使用すると、事後データから学び、行動する能力が大幅に向上しました。</p>\n\n<p>しかし、リスクの検索を過去に限定することはできないと分かっていました。</p>\n\n<h3>事前分析の方がプロアクティブになるのが良くなりました</h3>\n\n<p>障害モード分析 (FMA) と同様のプロセスである前&rdquo;死という用語&ldquo;を聞いたことがある人もいます。</p>\n\n<p>&nbsp;Harvardビジネスレビュー(<a href=\"https://hbr.org/2007/09/performing-a-project-premortem\" target=\"_blank\">2007年9月、問題1</a>)&nbsp;&ldquo;によると、前死は事後分析の仮定の反対です。 医療現場での事後分析は、医療専門家と家族が患者&rsquo;の死の原因を学ぶことができます。 もちろん、患者を除いて誰もが利益を得る。 ビジネス設定の前置きは、プロジェクトの先頭ではなく、プロジェクトの先頭に来るので、プロジェクトを autopsied ではなく改善できます。 プロジェクト チーム メンバーに何が問題があるかを尋ねられる一般的な批判セッションとは異なり、前死は患者&rdquo;が死亡したという&ldquo;仮定に基づいて動作するため、何が間違っていたかを尋ねます。 チーム メンバー&rsquo; タスクは、プロジェクト&rsquo;の失敗に対して妥当な理由を生成することです。&rdquo;</p>\n\n<p>Azure のコンテキストでは、事前分析の目的は、何が問題になる可能性があるかを予測し、潜在的なリスクを特定し、トリガー イベントが停止する前にそれらを軽減または削除することです。 <a href=\"https://www.bing.com/search?q=How+to+Catch+a+Black+Swan%3A+Measuring+the+Benefits+of+the+Premortem+Technique+for+Risk+Identification&amp;cvid=f50e92c95f1a41128032072c88eede4d&amp;aqs=edge..69i57.631j0j1&amp;pglt=2083&amp;FORM=ANNAB1&amp;PC=NMTS\" target=\"_blank\">黒いスワンをキャッチする方法によると:リスク識別のための前死技術の利点を測定</a>し、前死技術はより質の高いリスクを特定し、より品質の変化を提案することができます。これは、他のリスク管理手法と比較して、より効果的なリスク管理手法です。</p>\n\n<p>前世を行うのは非常に難しい努力ではありませんが、正しい人々を巻き込む必要があります。 特定の顧客ソリューションに関しては、そのソリューションに関して最も知識の豊富なエンジニアを集め、さらに良い結果を得て、学習できるように新しいエンジニアを導き出しました。 次に、顧客が軽減しなければならない停止が発生しているため、4:00 AM&nbsp; に起こされる可能性がある理由をできるだけ多くの理由でブレーンストーミングしました。 私たちは仮定の質問から始めるのが好きです。&ldquo;Imagineあなたは2週間休暇中で、あなたのサービスが停止したことを聞いて戻ってきました。 その停止の原因を見つける前に、考えられる原因として考えられるものをできるだけ多く列挙してください。&rdquo; これらはそれぞれ、障害の原因となるトリガー、顧客への影響、発生する可能性を文書化するなど、リスク&nbsp;としてキャプチャされました。</p>\n\n<p>リスクを特定した&nbsp;後、それらに対処するためのアクション プランを用意する必要があります。</p>\n\n<h3>リスク脅威モデルを作成しました&ldquo;&rdquo;</h3>\n\n<p>事前分析がリスクの検索と恐れのないインベントリである場合、リスク脅威モデルはアクション プランと組み合わせたものです。 チームが障害モード分析または定期的なリスク レビューを行っている場合、&nbsp;この作業は簡単です。 リスク脅威モデルは、リスクの一覧を取得し、顧客の痛みを軽減するために期待される内容を組み込みます。</p>\n\n<p>リスクを特定した&nbsp;後は、適切な修正プログラムについて共通の理解を得て、同様のリスクがあるすべての場所でこれらのパターンを使用できるようにする必要があります。 これらの修正プログラムが長期的なものである場合、お客様&rdquo;への可能性や影響を減らすために、それまでの間に何ができるかを自問&ldquo;しました。&nbsp;次に、いくつかの質問を示します。</p>\n\n<ul>\n    <li>トリガーされたときにリスクを認識するために、どのようなテレメトリが存在しますか?&nbsp;</li>\n    <li>これが明日起こった場合はどうなりますか? 最終的な修正が完了するまで、どのようなガードレールまたはプロセスが実施されていますか?</li>\n    <li>この暫定的な軽減策の実行にはどのくらいの時間がかかり、自動化されますか? 自動化できますか? なぜでしょうか。</li>\n    <li>軽減策はテストされていますか?&nbsp;最後にテストしたのはいつですか?</li>\n    <li>重要な依存関係に障害が発生した場合など、可能な限り回復性を最大限に高めるために、何を行いましたか? その依存関係を使用して、ガイダンスに従い、最新のライブラリを使用していることを確認しましたか?</li>\n    <li>COGS の増加に対して回復力を高めてもらうよう求めることができる場所はありますか?</li>\n    <li>コストや複雑さ、またはリソースがないために、どのような軽減策を行っていませんか?</li>\n</ul>\n\n<p>リスク軽減計画が文書化され、一般的なソリューションに沿って追跡されました。&nbsp;軽減策を示すチームには、必要な軽減策を実装するために、より多くの開発者や資金が必要であると示されたチームには、回復性と品質のコンテキストでそれを求めるフォーラムが用意されていました。&nbsp;作業項目は、サービスを可能な限り回復性のあるものにするために必要なすべてのタスクに対して作成され、文書化したリスクにリンクされているため、完了をフォローアップできます。</p>\n\n<p>しかし、リスクを正しく排除していることをどのようにして知るのでしょうか。 正しい&quot;&nbsp;送金戦略を&quot;知る方法 必要な作業量を減らし、すべてのユーザーがカスタムの方法で同じ問題を解決できないようにするにはどうすればよいですか?</p>\n\n<h2>すべてのサービスのすべてのリスクの一元化されたリポジトリを作成しました</h2>\n\n<h3>リスク脅威モデルは、一元的にキャプチャおよび分析した場合により効果的です</h3>\n\n<p>すべてのチームが退場し、事後分析を行い、事前分析を行い、リスク脅威モデルを作成し、すべてを個別に文書化すれば、停止の数を減らすことは間違いありません。 しかし、チームが見つけたものを他のユーザーと共有する方法がないため、リスク データのより広範なパターンを理解する機会を逃していました。 1 つのサービスのリスクは、多くの場合、他のサービスでもリスクでしたが、何かの理由で、危険にさらされているすべてのサービスのリスク脅威モデルにはなりませんでした。 また、1つのサービスで未完了の修理やリスクが他のサービスに対するリスクであることに気付かないでしょう。 新しいサービスがスピンアップされたときに、このリスクが他の場所に表示されるのを防ぐパターンを文書化する機会を逃していたでしょう。 事前分析の範囲を個々のサービス境界に限定するのではなく、特定の顧客シナリオで連携するすべてのサービス全体で行う必要があることを認識したわけではありません。 一般的な軽減戦略を提案し、同じ軽減計画を使用して大規模な軽減策に対処するための広範な取り組みに投資する機会を逃していました。 要するに、サービスの境界を越えて多数の投資を通知する多くの機会を逃していました。</p>\n\n<h3>リスクを分類する一般的な方法を実装しました</h3>\n\n<p>場合によっては、見つけたリスクの種類&quot;&nbsp;を理解&quot;する必要があるとわかっていました。&nbsp;単一障害点でしたか? 不十分に構成された調整? そのために、焦点を当てたい問題のカテゴリを記述するために使用される短縮 &ldquo;形タグ&rdquo; の階層システムを作成しました。 これらのタグは、一般的なパターンを識別するために事後分析に使用され、個々のリスクをマークして、同じカテゴリ内のリスクをより適切なアクション プランを特定できるようにしました。</p>\n\n<h3>リスク脅威モデルの定期的なレビューを行いました</h3>\n\n<p>完成したリスク脅威モデルを使用すると、上級リーダー、アーキテクト、専用のクロス Azure 品質チームのメンバーなどの前でレビューをスケジュールできます。 これらの会議は単なるレビュー&nbsp;だけではありませんでした。彼らは、一般的なソリューション、軽減策、フォローアップアクションが必要な領域を特定するために、多様なチームとして集まる機会を提供しました。 アクション 項目が収集され、所有者が割り当てられ、リスクがアクション プランにリンクされたので、チームがどのように進行したかを判断するための道をフォローアップできます。</p>\n\n<h2>それはすべて一緒に来て、次のレベルにそれを取り、何百ものサービスのためにこれを行う時間!</h2>\n\n<p>要約すると、リスクを特定して文書化するためにプログラムをスピンアップする以上の時間がかかりました。 私たちはインスピレーションを与える必要がありますが、その努力を最大限に活用するための適切なプロセスも用意されています。 多くのプログラム間で調整を行い、他の多くのプログラムを作成しました。 サービス間のコミュニケーションとコミットメントが多く必要でした。</p>\n\n<p>回復性の脅威モデリング プログラムを高速化すると、重要な Azure サービスに多くの利点が既にもたらされているため、このプロセスを Azure 内のすべてのサービスに対応できるように拡張します。 そのために、プロセス、ドキュメント、ガイダンスを継続的に改良し、過去のリスクディスカッションを活用して新しいリスクに対処しています。&nbsp;はい、これは多くの作業であり、銀の箇条書きはありません。そして、我々はまだこの努力にますます多くのリソースを持って来ていますが、信頼性に関しては、私たちは大きく&rdquo;行くと信じています&ldquo;!&nbsp;</p>\n"
}