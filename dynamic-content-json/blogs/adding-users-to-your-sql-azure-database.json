{
    "Slug": "adding-users-to-your-sql-azure-database",
    "Title": "SQL Azure データベースへのユーザーの追加",
    "Summary": "[This article was contributed by the SQL Azure team.]When you generate a SQL Azure server via the SQL Azure portal, you generate a user name and password at the same time. This is your administrative…",
    "Content": "<p>[この記事は、SQL Azure チームによって投稿されました。</p>\n\n<div style=\"background:#eee;border:1px solid #ccc;padding:5px 10px;\"><em><strong>2021 年 9 月 30 日更新:&nbsp;</strong>データベースへのユーザー アカウントとログインの追加、ユーザー アカウントのアクセス許可の構成など、Azure SQL Databaseのデータベース アクセスを承認する方法の更新情報については、<a href=\"https://docs.microsoft.com/en-us/azure/azure-sql/database/logins-create-manage\" target=\"_blank\">このドキュメント</a>を参照してください。</em></div>\n\n<p><a href=\"https://sql.azure.com/\">SQL Azure ポータル</a>を使用してSQL Azure サーバーを生成すると、ユーザー名とパスワードが同時に生成されます。 これは、そのサーバー上のすべてのデータベースにアクセスできる管理アカウントです。 ただし、他のユーザーに、そのサーバー上のデータベースの一部またはすべてを、完全または制限されたアクセス許可でアクセスできるようにすることができます。 この記事では、SQL Azure データベースに追加のユーザー アカウントを生成する方法について説明します。</p>\n\n<p>現時点では、SQL Azure ポータルでは追加のユーザーとログインを管理できません。そのためには、Transact-SQL を使用する必要があります。 SQL Azureに対して Transact -SQL を実行する最も簡単な方法は、SQL Server Management Studio 2008 R2 を使用する方法です。 SQL Azureにアタッチする方法の詳細については、こちらを参照してください。 SQL Server Management Studio 2008 R2 では、データベースに関連付けられているユーザーとログインが一覧表示されますが、現時点では、ユーザーとログインを作成するためのグラフィカル ユーザー インターフェイスは提供されていません。</p>\n\n<h4>ログインの生成</h4>\n\n<p>ログインはサーバー全体のログインとパスワードのペアであり、ログインのパスワードはすべてのデータベースについて同じです。 ログインを作成する Transact-SQL のサンプルを次に示します。</p>\n\n<pre class=\"csharpcode\">\nCREATE LOGIN readonlylogin WITH password=&#39;1231!#ASDF!a&#39;;</pre>\n\n<p>CREATE LOGIN コマンドを実行するには、管理者ログイン (SQL Azure ポータルから取得したもの) を使用して SQL Azure の master データベースに接続している必要があります。 sa、Admin、root などの一般的な SQL Server ログインの一部を使用できます。完全な一覧については、<a href=\"https://msdn.microsoft.com/en-us/library/ee336235.aspx\">こちら</a>をクリックしてください。</p>\n\n<h4>ユーザーの作成</h4>\n\n<p>ユーザーはデータベースごとに作成され、ログインに関連付けられます。 ユーザーを作成するデータベースに接続されている必要があります。 ほとんどの場合、これは master データベースではありません。 ユーザーを作成する Transact-SQL のサンプルを次に示します</p>\n\n<pre class=\"csharpcode\">\nCREATE USER readonlyuser FROM LOGIN readonlylogin;</pre>\n\n<h4>ユーザーのアクセス許可</h4>\n\n<p>ユーザーを作成するだけでは、データベースに対するアクセス許可は付与されません。 アクセス権を付与する必要があります。 Transact-SQL の例では、readonlyuser には、db_datareader ロールを介してデータベースに対する読み取り専用アクセス許可が付与されています。</p>\n\n<pre class=\"csharpcode\">\nEXEC sp_addrolemember &#39;db_datareader&#39;, &#39;readonlyuser&#39;;</pre>\n\n<h4>ユーザーとログインの削除</h4>\n\n<p>幸いにも、SQL Server Management Studio 2008 R2 では、ユーザーとログインを削除できます。 これを行うには、オブジェクト エクスプローラー ツリーを走査し、[セキュリティ] ノードを見つけるには、ユーザーまたはログインを右クリックして [削除] を選択します。</p>\n\n<h4>詳細情報</h4>\n\n<p>注意すべき点の 1 つは、SQL Azureでは USE Transact-SQL ステートメントを使用できないことです。つまり、CREATE LOGIN ステートメントと CREATE USER ステートメントの両方を実行する 1 つのスクリプトを作成することはできません。これらのステートメントは異なるデータベースで実行する必要があるためです。</p>\n\n<p>MSDN の<a href=\"https://msdn.microsoft.com/en-us/library/ee336235.aspx\">SQL Azureでのデータベースとログインの管理</a>に関する追加情報があります。</p>\n\n<h4>まとめ</h4>\n\n<p>質問、懸念事項、コメントはありますか? 以下にそれらを投稿し、我々はそれらに対処しようとします。</p>\n"
}