{
    "Slug": "announcing-improved-in-place-updates",
    "Title": "インプレース更新プログラムの改善を発表する",
    "Summary": "  Based on your feedback, today we are making some helpful updates to Windows Azure that provide developers flexibility for making in-place updates to deployed services. Best of all, these updates…",
    "Content": "<div>  <p>皆様のフィードバックに基づいて、現在、デプロイされたサービスに対してインプレース更新を行う柔軟性を開発者に提供する <a target=\"_blank\" href=\"https://azure.microsoft.com/\">Azure Windows</a>に関する有用な更新が行われています。 何より、これらの更新は、サービスのパブリック IP を変更することなく簡単に行えます。</p>  </div>  <p>Windows Azure では、VIP スワップの使用やサービスの完全な削除と再デプロイを必要とせずに、デプロイされたサービスに対するより広範な変更がサポートされるようになりました。 インプレース更新によって次の変更が許可されたので、VIP スワップや再デプロイを必要とせずに、ほぼすべての可能な更新を行うことが許可されます。</p>  <p>新しく許可されるインプレース更新は次のとおりです。</p>  <ul>  <li>仮想マシンのサイズを変更する (スケールアップまたはスケールダウン)</li>  <li>ローカル ストレージを増やす</li>  <li>デプロイにロールを追加または削除する</li>  <li>エンドポイントの数または種類を変更する</li>  </ul>  <h4>許可された変更の概要</h4>  <table rules=\"all\" style=\"border-color: #000000; border-width: 0pt; border-style: solid; width: 585px; height: 738px;\" frame=\"border\" border=\"0\" cellpadding=\"2\" cellspacing=\"0\">  <thead>  <tr>  <td valign=\"top\" width=\"124\">  <p><b>ホスティング、サービス、ロールに対して許可される変更</b></p>  </td>  <td valign=\"top\" width=\"138\">  <p><b>インプレース更新</b></p>  </td>  <td valign=\"top\" width=\"107\">  <p><b>ステージング (VIP スワップ)</b></p>  </td>  <td valign=\"top\" width=\"107\">  <p><b>削除と </b></p>  <p><b>再デプロイ</b></p>  </td>  </tr>  </thead>  <tbody>  <tr>  <td valign=\"top\" width=\"124\">  <p>オペレーティング システムのバージョン</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>.NET 信頼レベル</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>仮想マシンのサイズ</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  <p class=\"alertlabel\">警告</p>  <p class=\"alerttext\">仮想マシンのサイズを変更すると、ローカル データが破棄されます。 サービス管理 API を使用してこの変更を行う場合 <a href=\"https://msdn.microsoft.com/en-us/library/ee460793.aspx\">は、強制フラグが必要です</a></p>  <p class=\"alertlabel\">注意</p>  <p class=\"alerttext\">Azure SDK 1.5 以降Windows必要</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>Yes</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>ローカル ストレージの設定</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  <p>増加のみ。</p>  <p class=\"alertlabel\">注意</p>  <p class=\"alerttext\">Azure SDK 1.5 以降Windows必要</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>サービス内のロールの追加または削除</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>特定のロールのインスタンスの数</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>Yes</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>サービスのエンドポイントの数または種類</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  <p class=\"alertlabel\">注意</p>  <p>Azure SDK 1.5 以降Windows必要です。</p>  <p>&nbsp;</p>  <p class=\"alertlabel\">注意</p>  <p class=\"alerttext\">エンドポイントが更新されると、可用性が一時的に失われる可能性があります</p>  </td>  <td valign=\"top\" width=\"107\">  <p>いいえ</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>構成設定の名前と値</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>構成設定の値 (名前は不可)</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>新しい証明書の追加</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>既存の証明書の変更</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"124\">  <p>新しいコードのデプロイ</p>  </td>  <td valign=\"top\" width=\"138\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  <td valign=\"top\" width=\"107\">  <p>はい</p>  </td>  </tr>  </tbody>  </table>  <h4>&nbsp;</h4>  <h4>仮想マシン サイズの変更の例</h4>  <p>次の例では、Windows Azure portalを使用して仮想マシンのサイズを変更する方法を示します。</p>  <p style=\"text-align: left;\" align=\"center\"><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2158.InPlace1.png\" alt=\"\" border=\"0\"></p>  <p align=\"center\">  <p align=\"center\"><i>図 1: デプロイの初期状態</i></p>  <p>[VM のサイズまたはロール数の更新&rdquo;を許可する] チェック ボックスをオン&ldquo;にせずに VM のサイズを変更しようとすると、次のエラーが表示されます。</p>  <p style=\"text-align: center;\" align=\"center\"><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5102.InPlace2.png\" alt=\"\" border=\"0\"></p>  <p style=\"text-align: center;\" align=\"center\"><i>図 2: ロール数を変更しようとするときのエラー メッセージ</i></p>  <p>[VM のサイズまたはロール数の更新&rdquo;を許可する] &ldquo;チェック ボックスをオンにして同じ操作を試行すると、VM サイズが更新されます。</p>  <p style=\"text-align: center;\" align=\"center\"><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3858.InPlace3.png\" alt=\"\" border=\"0\"></p>  <p align=\"center\"><i>図 3: チェック ボックスをオンにして更新する</i></p>  <p>&nbsp;<img style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2110.InPlace4.png\" alt=\"\" border=\"0\"></p>  <p style=\"text-align: center;\" align=\"center\"><i>図 4: 更新が完了した後のデプロイ</i></p>  <h4>インプレース更新の詳細な制御</h4>  <p>インプレース更新プログラムの適用性が広がるだけでなく、進行中の更新プログラムをロールバックしたり、2 回目の更新を開始したりすることで、更新プロセス自体をより詳細に制御できるようになりました。 更新が進行中 (サービスの少なくとも 1 つのインスタンスによって定義され、新しいバージョンに更新されていない場合) は、 <a href=\"https://msdn.microsoft.com/en-us/library/hh403977.aspx\" target=\"_blank\">更新のロールバックまたはアップグレード</a> 操作を使用して更新プログラムをロールバックできます。</p>  <p>ロールバック操作が自動モードに指定されている場合、ロールバックは、現在オフラインになっているアップグレード ドメイン内のすべてのインスタンスが準備完了状態に戻るのを待たずに、最初のアップグレード ドメインですぐに開始されます。 複数のアップグレード ドメインが同時にオフラインにならないように、ロールバックを手動モードで実行できます。 手動モードでは、最初のアップグレード ドメインに対して <a href=\"https://msdn.microsoft.com/en-us/library/ee460800.aspx\" target=\"_blank\">Walk Upgrade Domain</a> が呼び出されるまで、最初のアップグレード ドメインはロールバックされません。</p>  <h4>複数の更新操作</h4>  <p>最初の更新の進行中に 2 つ目の更新操作を開始すると、ロールバック操作と似た方法で処理が実行されます。 2 番目の更新が自動モードである場合、最初のアップグレード ドメインが直ちにアップグレードされ、複数のアップグレード ドメインのインスタンスが同時にオフラインになる可能性があります。 ロールバック操作の使用または複数の変更操作の開始の詳細については、こちらを参照してください。</p>  <h4>更新オプションの概要</h4>  <p>ホステッド サービスを更新するための 3 つのオプションのいずれかを使用してほとんどの変更を実行できるようになったので、各オプションが最も適切なタイミングを説明するのに時間がかかります。 これは、次の長所と短所の表で最もよく説明されています。</p>  <table rules=\"all\" style=\"border-color: #000000; border-width: 0pt; border-style: solid; width: 543px; height: 412px;\" frame=\"border\" border=\"0\" cellpadding=\"5\" cellspacing=\"0\">  <thead>  <tr>  <td valign=\"top\" width=\"90\">  <p><b>更新オプション</b></p>  </td>  <td valign=\"top\" width=\"140\">  <p><b>説明</b></p>  </td>  <td valign=\"top\" width=\"113\">  <p><b>長所</b></p>  </td>  <td valign=\"top\" width=\"135\">  <p><b>短所</b></p>  </td>  </tr>  </thead>  <tbody>  <tr>  <td valign=\"top\" width=\"90\">  <p><a href=\"https://msdn.microsoft.com/en-us/library/ee517255.aspx\" target=\"_blank\">インプレース更新</a></p>  </td>  <td valign=\"top\" width=\"140\">  <p>新しいパッケージがアップロードされ、サービスの実行中のインスタンスに適用されます。</p>  </td>  <td valign=\"top\" width=\"113\">  <p>1 つの実行中のデプロイのみが必要です。</p>  <p>&nbsp;</p>  <p>各ロールに少なくとも 2 つのインスタンスがある限り、サービスの可用性を維持できます。</p>  </td>  <td valign=\"top\" width=\"135\">  <p>インスタンスの停止、更新、再起動中は、サービス容量が制限されます。</p>  <p>  <p>サービス コードは、インスタンスの更新時に異なるインスタンスで実行されているコードの複数のバージョンをサポートできる必要があります</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"90\">  <p><a href=\"https://msdn.microsoft.com/en-us/library/windowsazure/ee517253.aspx\" target=\"_blank\">ステージング (VIP スワップ)</a></p>  </td>  <td valign=\"top\" width=\"140\">  <p>新しいパッケージをアップロードし、既存の実稼働バージョンと交換します。 これは、サービスの目に見える IP アドレスを単にスワップするため、VIP スワップと呼ばれます。&nbsp;</p>  </td>  <td valign=\"top\" width=\"113\">  <p>サービスのダウンタイムや容量の損失はありません。</p>  </td>  <td valign=\"top\" width=\"135\">  <p>少なくとも更新中に 2 つのデプロイを実行する必要があります。</p>  </td>  </tr>  <tr>  <td valign=\"top\" width=\"90\">  <p>サービスの再展開</p>  </td>  <td valign=\"top\" width=\"140\">  <p>サービスを中断してから削除し、新しいバージョンをデプロイします。</p>  </td>  <td valign=\"top\" width=\"113\">  <p>1 つの実行中のデプロイのみが必要です。</p>  </td>  <td valign=\"top\" width=\"135\">  <p>サービスの削除とサービスの再デプロイの間にサービスが停止します。</p>  <p>&nbsp;</p>  <p>仮想 IP (VIP) は、サービスの再デプロイ時に変更されることがよくあります。</p>  </td>  </tr>  </tbody>  </table>  <p>Windows Azure サービスの更新の詳細については、こちらを参照してください。&nbsp;</p>"
}