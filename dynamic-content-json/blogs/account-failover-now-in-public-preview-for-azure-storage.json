{
    "Slug": "account-failover-now-in-public-preview-for-azure-storage",
    "Title": "Azure Storageのパブリック プレビューでアカウントのフェールオーバーが開始されました",
    "Summary": "Today we are excited to share the preview for account failover for customers with geo-redundant storage (GRS) enabled storage accounts. Customers using GRS or RA-GRS accounts can take advantage of this functionality to control when to failover from the primary region to the secondary region for their storage accounts.",
    "Content": "<div style=\"background:#eee;border:1px solid #ccc;padding:5px 10px;\"><em><strong>2020 年 5 月 6 日の更新:</strong>&nbsp;Azure ストレージ アカウントのフェールオーバーが、すべてのパブリック リージョンで一般公開されました。最新の詳細については、<a href=\"https://docs.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance\" target=\"_blank\">Microsoft のドキュメント</a>を参照してください。</em></div>\n\n<p>現在、geo 冗長ストレージ (GRS) が有効なストレージ アカウントを使用しているお客様のアカウント フェールオーバーのプレビューを共有することに興奮しています。 GRS または RA-GRS アカウントを使用しているお客様は、この機能を利用して、ストレージ アカウントのプライマリ リージョンからセカンダリ リージョンにフェールオーバーするタイミングを制御できます。</p>\n\n<p>お客様は、ストレージ アカウントの書き込みアクセスが必要なタイミングとセカンダリ レプリケーションの状態を把握できるように、ストレージ アカウントのフェールオーバーを制御したいとお伝えしています。&nbsp;</p>\n\n<p>geo 冗長ストレージ アカウントのプライマリ リージョンが長期間使用できなくなった場合は、アカウントのフェールオーバーを強制できます。 フェールオーバーを実行すると、ストレージ アカウント内のすべてのデータがセカンダリ リージョンにフェールオーバーされ、セカンダリ リージョンが新しいプライマリ リージョンになります。 すべてのストレージ サービス エンドポイント &ndash; BLOB、Azure Data Lake Storage Gen2、ファイル、キュー、およびテーブル&ndash;の DNS レコードは、新しいプライマリ リージョンを指すよう更新されます。 フェールオーバーが完了すると、クライアントは、コードを変更することなく、新しいプライマリ リージョンのサービス エンドポイントを使用してストレージ アカウントへのデータの書き込みを自動的に開始できます。</p>\n\n<p>次の図は、アカウントのフェールオーバーのしくみを示しています。 通常の状況では、クライアントはプライマリ リージョンの geo 冗長ストレージ アカウント (GRS または RA-GRS) にデータを書き込み、そのデータはセカンダリ リージョンに非同期的にレプリケートされます。 プライマリ リージョンへの書き込み操作が一貫して失敗した場合は、フェールオーバーをトリガーできます。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dd11e86a-5584-4a8f-8686-825659beacb5.png\"><img alt=\"Account failover diagram\" border=\"0\" height=\"371\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/57083c9c-93dc-46df-9f2b-6ea323d699bc.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"アカウントのフェールオーバーの図\" width=\"640\"></a></p>\n\n<p>フェールオーバーが完了すると、新しいプライマリ サービス エンドポイントに対して書き込み操作を再開できます。</p>\n\n<p>フェールオーバー後、ストレージ アカウントはローカル冗長 (LRS) に構成されます。 新しいセカンダリ リージョンへのレプリケーションを再開するには、geo 冗長ストレージを再度使用するようにアカウントを構成します (RA-GRS または GRS)。 ローカル冗長 (LRS) アカウントを RA-GRS または GRS に変換すると、コストが発生することに注意してください。</p>\n\n<p>アカウント のフェールオーバーは、RA-GRS と GRS 用に構成された新規および既存の Azure Resource Manager ストレージ アカウントに対してプレビューでサポートされます。 Storageアカウントには、汎用 v1 (GPv1)、汎用 v2 (GPv2)、または BLOB Storage アカウントがあります。 アカウントのフェールオーバーは現在、米国西部 2、米国中西部でサポートされています。</p>\n\n<p>アカウントのフェールオーバーは、<a href=\"https://portal.azure.com/\" target=\"_blank\">Azure portal</a>、<a href=\"https://docs.microsoft.com/en-us/powershell/azure/overview?view=azps-1.2.0\" target=\"_blank\">Azure PowerShell</a>、<a href=\"https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest\" target=\"_blank\">Azure CLI</a>、または <a href=\"https://docs.microsoft.com/en-us/rest/api/storagerp/\" target=\"_blank\">Azure Storage リソース プロバイダー API</a> を使用して開始できます。 このプロセスはシンプルで簡単に実行できます。 次の図は、1 つの手順でAzure portalでアカウントのフェールオーバーをトリガーする方法を示しています。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/41e56e62-8c25-4186-950d-38e5faf386ff.png\"><img alt=\"Geo-replication in the Azure portal\" border=\"0\" height=\"711\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e0ddf1cc-433d-48ed-91c1-90af29032295.png\" style=\"border: 0px currentcolor; border-image: none; display: inline; background-image: none;\" title=\"Azure portalでの geo レプリケーション\" width=\"1030\"></a></p>\n\n<p>ほとんどのプレビューの場合と同様に、運用ワークロードではアカウント のフェールオーバーを使用しないでください。 この機能が一般公開されるまで、運用 SLA はありません。</p>\n\n<p>geo レプリケーションには常に待機時間が関係するため、アカウントのフェールオーバーでは多くの場合、データが失われることに注意&#39;重要です。 通常、セカンダリ エンドポイントはプライマリ エンドポイントの背後にあります。 そのため、フェールオーバーを開始すると、セカンダリ リージョンにまだレプリケートされていないデータはすべて失われます。</p>\n\n<p>フェールオーバーを開始する前に、常に <strong>最終同期時刻</strong> プロパティを確認して、セカンダリがプライマリの背後にある距離を評価することをお勧めします。 アカウントのフェールオーバーの影響を理解し、機能の詳細については、&ldquo;<a href=\"https://docs.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance\" target=\"_blank\">ドキュメント「Azure Storageの停止が発生した場合の操作</a>」を参照してください。&rdquo;</p>\n\n<p>プレビューへの参加またはアカウントのフェールオーバーに関する質問については、お問い合わせください xstoredr@microsoft.com。 アカウントのフェールオーバー機能とドキュメントに関するフィードバックをお待ちしております。</p>\n"
}