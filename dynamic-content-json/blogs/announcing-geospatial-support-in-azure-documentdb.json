{
    "Slug": "announcing-geospatial-support-in-azure-documentdb",
    "Title": "Azure DocumentDB での地理空間のサポートについてお知らせします。",
    "Summary": "The latest DocumentDB service update includes support for automatic indexing of geospatial data, as well as SQL support for performing proximity queries stored in DocumentDB.",
    "Content": "<p>Azure DocumentDB での <strong>地理空間インデックス作成とクエリの</strong>&nbsp;サポートについてお知らせします。 最新の DocumentDB サービス更新プログラムには、地理空間データの自動インデックス作成のサポートと、DocumentDB に格納されている近接クエリの実行に対するSQLのサポートが含まれています。 <a href=\"https://www.nuget.org/packages/Microsoft.Azure.DocumentDB/\">.NET SDK のバージョン 1.4.0</a> をダウンロードする場合は、ポイントとポリゴンを表す新しい型、DocumentDB コレクションでの空間インデックス作成と有効化のサポート、空間クエリを実行するための新しい LINQ クエリ演算子も&#39;。 Azure DocumentDB を使用した&quot;<a href=\"https://www.vldb.org/pvldb/vol8/p1668-shukla.pdf\">スキーマに依存しないインデックス作成</a>に関するホワイト ペーパーで説明したように、DocumentDBs &quot;&rsquo;データベース エンジンは真にスキーマに依存せず、JSON に対するファースト クラスのサポートを提供するように設計しました。 DocumentDB の書き込み最適化データベース エンジンも<strong><a href=\"https://geojson.org/geojson-spec.html\">、GeoJSON</a>&nbsp; 標準で表される空間データを&nbsp;ネイティブに理解</strong>するようになりました。</p>\n\n<h2>SQLを使用して地理空間&nbsp;データにクエリを実行する</h2>\n\n<p><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/08/12/Geo-spatial-150-01.png\"><img alt=\"Geo-spatial 150-01\" class=\"alignnone size-medium wp-image-329531\" height=\"369\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-spatial-150-01-548x369.png\" width=\"548\"></a><strong>&nbsp;</strong> DocumentDB で実行できるクエリの種類 <a href=\"https://www.documentdb.com/sql/demo#geospatial\">DocumentDB プレイグラウンド</a>で自分&nbsp;で試してみてください。 火山に関する JSON データを含む科学データセットを使用して、プレイグラウンドに DocumentDB コレクションを事前に作成&#39;。 たとえば、ここでは、Redmond の 100 km に存在するすべての火山を&nbsp;返すクエリ&#39;、&nbsp;組み込みの関数&nbsp;<strong>、ST_DISTANCE</strong>を使用します。 <strong>特定の半径内の場所を検索します。</strong> <a href=\"https://www.documentdb.com/sql/demo#geospatial\"><img alt=\"GeospatialDistance\" class=\"alignnone size-medium wp-image-329561\" height=\"275\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/GeospatialDistance-636x275.png\" width=\"636\"></a>またST_WITHIN使用して、&nbsp;ポイントが多角形内にあるかどうかを確認することもできます<strong>&nbsp;</strong>。 一般的に、多角形は、郵便番号、州の境界、自然形成などの境界を表すために使用されます。 ここでも、インデックス作成ポリシーに空間インデックス作成を含める場合は、 &quot;クエリ内&quot; でインデックスを介して効率的に処理されます。 <strong>ポリゴン境界内の位置を検索します。</strong> <a href=\"https://www.documentdb.com/sql/demo#geospatial\"><img alt=\"GeospatialWithin\" class=\"alignnone size-medium wp-image-329541\" height=\"269\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/GeospatialWithin-636x269.png\" width=\"636\"></a>ここで&#39;、お客様の 1 人がこの機能について語らなければならなかったことを示します。<em>LINQ を介して地理空間データのクエリを実行することで、バックエンドで場所と距離&rdquo;の&ldquo;計算を大量に行うと、DocumentDB は最新の場所ベースのアプリケーションに最適なバックエンドになります。&rdquo;-Ryan Groom、Founder、Trekkit.com&quot;</em></p>\n\n<h2>&nbsp;</h2>\n\n<h2>Azure DocumentDB での空間インデックス作成&nbsp;のしくみ</h2>\n\n<p>簡単に言うと、ジオメトリは測地座標から 2D 平面に投影され、&nbsp;<strong>四角形</strong>を使用して徐々にセルに分割されます。 これらのセルは、その位置に基づき、<strong>ヒルベルト空間充填曲線</strong>内で一次元にマッピングされ、ポイントの局所性が維持されます。 さらに、位置情報データのインデックスを作成するとき、そのデータに、<strong>テセレーション</strong>と呼ばれるプロセスが適用されます。つまり、特定の位置と交差するすべてのセルが特定され、キーとして DocumentDB のインデックスに保存されます。 クエリの実行時、ポイントやポリゴンなどの引数は、同様にテセレーションを経て関連するセル ID 範囲が抽出された後、インデックスからデータを取得するために使用されます。 この機能の詳細については <a href=\"https://azure.microsoft.com/en-us/documentation/articles/documentdb-geospatial\">、こちらを参照してください</a>。</p>\n\n<h2>SDK を使用して概要する</h2>\n\n<p>&nbsp;ここで Nuget から DocumentDB .NET SDK のバージョン 1.4.0 をダウンロードするか、<a href=\"https://www.nuget.org/packages/Microsoft.Azure.DocumentDB/\">ここで</a>サポートされている他のプラットフォーム (Node.js、Java、Python、または JavaScript<a href=\"https://msdn.microsoft.com/en-us/library/azure/dn781482.aspx\">) のいずれかを</a>ダウンロードして、データ&nbsp;に対する空間クエリを概要します。 また、空間データのインデックス作成とクエリを行うコード サンプルを含む <a href=\"https://github.com/Azure/azure-documentdb-net/tree/master/samples/code-samples/Queries.Spatial\">Github プロジェクト</a> も作成しました。 サポートが必要な場合や質問がある場合は、<a href=\"https://stackoverflow.com/questions/tagged/azure-documentdb\">スタック オーバーフローに関する開発者フォーラム</a>に&nbsp;連絡するか、DocumentDB エンジニアリング チームと 1 対 1 のチャットをスケジュールしてください。 Twitter<a href=\"https://twitter.com/DocumentDB\">@DocumentDB</a>でフォロー&nbsp;することで、DocumentDBの最新のニュースや機能を最新の状態に保つことができます。</p>\n"
}