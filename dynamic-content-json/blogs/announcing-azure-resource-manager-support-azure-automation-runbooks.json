{
    "Slug": "announcing-azure-resource-manager-support-azure-automation-runbooks",
    "Title": "Azure Automation Runbook での Azure Resource Manager サポートの発表",
    "Summary": "Learn about the new out of box support for Azure Resource Manager in Azure Automation runbooks.",
    "Content": "<p><strong>Update 2/22/2016: </strong>一般的なユーザーの質問に答えるために、現時点では、追加のモジュール/新しいバージョンのモジュールが Automation サービスにすぐに出荷されるタイミングに関するタイムラインはありません。 現在グローバルに出荷されているもの以外に追加の要件がある場合は、これらのモジュール/モジュールバージョンをユーザーモジュールとしてインポートする必要があります。 <strong>新しいガイダンスでは、Azure/AzureRM モジュールの最新バージョンをユーザー モジュールとして Automation アカウントにインポートする場合、現在または将来発生する可能性があるバージョンの不一致の問題を回避するために、すべての Azure/AzureRM モジュールの最新バージョン (Azure Automationに付属しているモジュールだけでなく) を Automation アカウントにインポートする必要</strong>があることに<strong>注意してください</strong>。Azure Automation後で、追加 (またはそれ以降のバージョン) の Azure/AzureRM モジュールがグローバル モジュールとして出荷されます。 ユーザー モジュールとして Azure/AzureRM モジュールをインポートする手順については、こちらを参照してください。</p>\n\n<p><strong>Update 2/1/2016: </strong>次の投稿&nbsp;では、Azure Automationですぐに出荷される AzureRM モジュールは AzureRM.Compute と AzureRM.profile のみです。 AzureRM.Storage、Azure.Storage、AzureRM.Automation、AzureRM.Resources、AzureRM.Sql など、いくつかの追加の AzureRM モジュール&nbsp;がすぐに出荷されます。 これらのモジュールは、追加の作業なしで Automation アカウント内で使用できる必要があります。 これらのモジュールのいずれかの独自のバージョンを Automation アカウントにインポートしている場合&nbsp;は、それらを削除して、Automation アカウントでこれらのモジュール&nbsp;のグローバル バージョンの使用を開始できます。</p>\n\n<p>&nbsp;</p>\n\n<p>Azure の新しい <a href=\"https://azure.microsoft.com/en-us/documentation/articles/resource-group-overview/\">Azure Resource Manager</a> 管理レイヤーを介して Azure の機能がますます導入されるにつれて、Azure Automation チームでは、Azure Automationの Azure Resource Manager コマンドレットのすぐに使用できるように<a href=\"https://feedback.azure.com/forums/246290-azure-automation/suggestions/6634825-enable-azureresourcemanager-module-in-azure-automa\"></a>サポートを求められます。を使用すると、すべての新しい Azure 機能を簡単に自動化できます。 Weve では、ユーザーが自分自身のブロックを解除し、Azure Automationで Azure Resource Managerを使用できるように、過去<a href=\"https://azure.microsoft.com/en-us/blog/using-azure-resource-manager-in-azure-automation-runbooks/\">にモジュールを手動でインポートする方法を示</a>しましたが、現時点ではすぐに使用できるサポートがありませんでした。&hellip;&rsquo; Azure Automation&rsquo;で&rsquo; Azure Resource Manager コマンドレットの発送が開始されました。</p>\n\n<p>しかし、十分な話をして、実際の例を見てみましょう&rsquo;か? たとえば、(Azure Service Management を使用して) Azure クラシック仮想マシンと、同じ Runbook から (Azure Resource Manager 経由で) クールな新しい V2 仮想マシンの両方に対するアクションを自動化したいとします。 これで&rsquo;、Azure Automationで非常に簡単になりました。 次の PowerShell スクリプト Runbook を例として使用します&rsquo;。</p>\n\n<pre>\n# TODO: update to the name of the credential asset in your Automation account\n$AutomationCredentialAssetName = &quot;AzureCreds&quot;\n\n# Get the credential asset with access to my Azure subscription\n$Cred = Get-AutomationPSCredential -Name $AutomationCredentialAssetName\n\n# Authenticate to Azure Service Management and Azure Resource Manager\nAdd-AzureAccount -Credential $Cred | Out-Null\nAdd-AzureRmAccount -Credential $Cred | Out-Null\n\n# Get and output Azure classic VMs\n$VMs = Get-AzureVM\n$VMs.Name\n&quot;`n--------------`n&quot;\n\n# Get and output Azure v2 VMs\n$VMsv2 = Get-AzureRmVM\n$VMsv2.Name</pre>\n\n<p>モジュールを自分でインポートせずに、Azure サブスクリプションの出力に対してこれを実行します。</p>\n\n<p><img alt=\"Announcing Azure Resource Manager support in Azure Automation runbooks\" border=\"0\" height=\"300\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/61391a23-5ca4-4555-96d0-bcd0019f2e16.png\" style=\"border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto\" title=\"Azure Automation Runbook での Azure Resource Manager サポートの発表\" width=\"360\"></p>\n\n<p>Azure サブスクリプション内の VM を考えると、これは正しいように見えます。</p>\n\n<p><img alt=\"Announcing Azure Resource Manager support in Azure Automation runbooks\" border=\"0\" height=\"200\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/066d3dbd-08cc-4dd6-b02d-4633cdfc7fe3.png\" style=\"border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto\" title=\"Azure Automation Runbook での Azure Resource Manager サポートの発表\" width=\"360\"></p>\n\n<p>&nbsp;</p>\n\n<p><img alt=\"Announcing Azure Resource Manager support in Azure Automation runbooks\" border=\"0\" height=\"360\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/50b7409c-fe8e-49d5-aa31-3403b4cc7db2.png\" style=\"border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto\" title=\"Azure Automation Runbook での Azure Resource Manager サポートの発表\" width=\"326\"></p>\n\n<p>Azure サービス管理コマンドレットと同様に、Azure Resource Manager コマンドレットでは<a href=\"https://azure.microsoft.com/en-us/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/\">、ユーザー プリンシパルの組織 ID を</a>&ndash;使用した認証がサポートされます。このコマンドレットでは、その認証を行うために少し異なるコマンドレット (Add-AzureAccount ではなく Add-AzureRmAccount) を使用するだけです。 Azure Resource Manager コマンドレットでは<a href=\"https://blog.davidebbo.com/2014/12/azure-service-principal.html\">サービス プリンシパル認証</a>もサポートされていますが、<a href=\"https://github.com/Azure/azure-powershell/issues/655\">Azure Automationではバグ</a>がまだサポートされていないためです。</p>\n\n<p>現時点では、<a href=\"https://www.powershellgallery.com/packages/AzureRM.profile/\">azureRM.profile</a> モジュールと <a href=\"https://www.powershellgallery.com/packages/AzureRM.Compute/\">AzureRM.Compute</a> PowerShell モジュールのみが、Azure Automationのグローバル モジュールとしてすぐに出荷されますが、今後数か月間にグローバル モジュールとして Azure Resource Manager モジュールがますます導入される予定です。 現時点では、Azure V2 仮想マシンの管理を自動化しようとしている場合 (営業時間後に VM を自動的にシャットダウンし、営業時間が始まる直前に VM を自動的に起動することでコストを節約するなど)、これを行うことができます。 引き続き次の手順に従って、シナリオに必要な追加 (またはそれ以降のバージョン)&nbsp; の Azure/Azure Resource Manager モジュールを手動でインポートできます。 <strong>新しいガイダンスでは、Azure/AzureRM モジュールの最新バージョンをユーザー モジュールとして Automation アカウントにインポートする場合、現在または将来発生する可能性があるバージョンの不一致の問題を回避するために、すべての Azure/AzureRM モジュールの最新バージョン (Azure Automationに付属しているモジュールだけでなく) を Automation アカウントにインポートする必要</strong>があることに<b>注意してください</b>。Azure Automation後で、追加 (またはそれ以降のバージョン) の Azure/AzureRM モジュールがグローバル モジュールとして出荷されます。</p>\n\n<p>Azure Automationで利用できる特定の Azure Resource Manager機能をお探しですか? お探しのモジュール/機能&rsquo;をコメントに投稿して、出荷するモジュールの順序をより適切に優先順位付けできるようにします。</p>\n\n<p>Azure Automationを使い始めたばかりですか? サービスの詳細については、<a href=\"https://aka.ms/Q2p1ap\">Twitter</a> <a href=\"https://twitter.com/AzureAutomation\">でAzure Automation</a>を参照してください。</p>\n"
}