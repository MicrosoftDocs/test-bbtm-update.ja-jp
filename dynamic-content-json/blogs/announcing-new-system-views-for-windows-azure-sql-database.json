{
    "Slug": "announcing-new-system-views-for-windows-azure-sql-database",
    "Title": "発表: Windows Azure SQL Databaseの新しいシステム ビュー",
    "Summary": "We are happy to announce the immediate availability of two new system views for Windows Azure SQL Database that provide diagnostic tracking information for your cloud databases.&nbsp;  Within the…",
    "Content": "<p>クラウド データベースの診断追跡情報を提供する、Windows Azure SQL Database用の 2 つの新しいシステム ビューがすぐに利用可能であることをお知らせします。&nbsp;</p>  <p>SQL Database サーバーの<strong>マスター</strong> データベース内に、次の newsystem&nbsp; viewsavailable&nbsp; が追加されました。</p>  <table class=\"MsoNormalTable\" style=\"border-collapse: collapse; mso-yfti-tbllook: 1184; mso-padding-alt: 0in 0in 0in 0in;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">  <tbody>  <tr>  <td style=\"width: 159.6pt; border: solid windowtext 1.0pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"160\">  <p class=\"MsoNormal\"><strong>表示</strong></p>  </td>  <td style=\"width: 159.6pt; border: solid windowtext 1.0pt; border-left: none; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"160\">  <p class=\"MsoNormal\"><strong>場所</strong></p>  </td>  <td style=\"width: 350.9pt; border: solid windowtext 1.0pt; border-left: none; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"351\">  <p class=\"MsoNormal\"><strong>詳細</strong></p>  </td>  </tr>  <tr>  <td style=\"width: 159.6pt; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"160\">  <p class=\"MsoNormal\">sys.event_log</p>  </td>  <td style=\"width: 159.6pt; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"160\">  <p class=\"MsoNormal\">master</p>  </td>  <td style=\"width: 350.9pt; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"351\">  <p class=\"MsoNormal\">システムから、そのサーバーでホストされている各データベースに関するログ情報を顧客に公開します。</p>  </td>  </tr>  <tr>  <td style=\"width: 159.6pt; border: solid windowtext 1.0pt; border-top: none; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"160\">  <p class=\"MsoNormal\">sys.database_connection_stats</p>  </td>  <td style=\"width: 159.6pt; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"160\">  <p class=\"MsoNormal\">master</p>  </td>  <td style=\"width: 350.9pt; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0in 5.4pt 0in 5.4pt;\" valign=\"top\" width=\"351\">  <p class=\"MsoNormal\">接続の成功と失敗に関する接続統計の詳細を公開します。&nbsp;</p>  </td>  </tr>  </tbody>  </table>  <p>この機能強化により、システム管理者は、クラウド用に設計されたシステム ビューを使用して、オンプレミスのSQL Serverで使用するのと同じツールと手法を使用して、接続統計と調整イベントを照会できるようになりました。</p>  <h4>sys.event_log ビュー</h4>  <p>現時点では、sys.event_log ビューでは、次の主要なシナリオが有効になります。</p>  <ul>  <li>  <p>接続統計情報の公開</p>  </li>  <li>  <p>デッドロック グラフを顧客に公開する</p>  </li>  </ul>  <p>コア接続情報は、SQL Server Management Studio 2012 内で次に示すようにsys.event_logで確認できます (<strong>マスター</strong> データベースに対してsys.event_logから選択 * を実行します)。</p>  <p><a href=\"\" target=\"_blank\"><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1055.1.png\" alt=\"\" border=\"0\"></a></p>  <p>さらに、デッドロック グラフは<strong>、sys.event_logの additional_data</strong> フィールドに公開されます (<strong>master</strong> データベースに対してevent_type = &lsquo;デッドロック&rsquo;が発生したsys.event_logから select * を実行します)。</p>  <p><br> <a href=\"\" target=\"_blank\"><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3542.2.png\" alt=\"\" border=\"0\"></a></p>  <h4>sys.database_connection_stats ビュー</h4>  <p>データベース接続の統計では、時間の経過と伴う各データベースのキーエラーのロールアップが公開されます。&nbsp; sys.database_connection_stats ビューでは、成功、終了、または調整された受信 TDS 接続の数に関する分析情報が表示されます。失敗は 5 分のウィンドウに集計されます。&nbsp;</p>  <p>この表のデータの種類の例を次に示します ( <strong>master</strong> データベースに対してsys.database_connection_statsから select * を実行します)。</p>  <p><a href=\"\" target=\"_blank\"><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8272.3.png\" alt=\"\" border=\"0\"></a></p>  <p>さらに、Windows Azure 管理ポータルでは、データベースごとに接続情報がグラフィカルに公開され、Windows Azure SQL データベースの管理が容易になりました。</p>  <p><a href=\"\" target=\"_blank\"><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5826.4.png\" alt=\"\" border=\"0\"></a></p>  <h4>アクセス許可</h4>  <p>2 つの新しい&nbsp;システム ビュー&nbsp;は、マスター データベースに接続することでアクセスでき、マスター データベースにアクセスする権限を<strong></strong>持つ管理者のみがビューにアクセスできます (読み取り専用)。&nbsp;&nbsp;このデータはマスター データベースに格納されるため、このデータを格納するルームはユーザー&rsquo;の請求書の一部としてカウントされません。</p>  <h4>Latency</h4>  <p>接続が確立されたときから、接続の増分が sys.database_connection_stats ビューに表示されるタイミングまで、多少のラグがあります。&nbsp;その間、1 つの行内の情報は、行が最初に書き込まれた後に更新される可能性があります。&nbsp;SQL Databaseは、接続の処理に関与する多数のノードを持つマルチテナント システムであり、これらのノードのそれぞれで行にデータを追加できます。 &nbsp;</p>  <h4>詳細情報</h4>  <p>新しいビューが、データベースの管理とより詳細な診断情報の取得に役立つことを願っています。 これらのビューの詳細については、MSDN の以下のリンクを参照してください。</p>  <ul>  <li>sys.event_log</li>  <li>sys.database_connection_stats</li>  </ul>  <p>さらに、Wayne Berry は、これらの新しいビューで構築できる便利なクエリを含む詳細情報を含む <a href=\"https://blogs.msdn.com/b/wayneb/archive/2012/11/02/introducing-sys-database-connection-stats-for-troubleshooting-windows-azure-sql-database.aspx\" target=\"_blank\">MSDN ブログ</a> を投稿しました。</p>  <p>これらの機能に関する質問については、SQL Database MSDN サポート フォーラムに投稿してください。</p>  <p>機能を有効にご活用ください。</p>  <p>-Windows Azure SQL Database チーム</p>"
}