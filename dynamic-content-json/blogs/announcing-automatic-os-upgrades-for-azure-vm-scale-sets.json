{
    "Slug": "announcing-automatic-os-upgrades-for-azure-vm-scale-sets",
    "Title": "Azure VM スケール セットの OS の自動アップグレードの発表",
    "Summary": "Infrastructure scale and complexityWhen Azure virtual machine scale sets were introduced, we made it easy to deploy and manage cloud infrastructure at very large scale. We are continually looking for…",
    "Content": "<h2>インフラストラクチャの規模と複雑さ</h2>\n\n<p>Azure <a href=\"https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview\" target=\"_blank\">仮想マシン スケール セット</a> が導入されたとき、クラウド インフラストラクチャを非常に大規模に簡単にデプロイおよび管理できるようにしました。 クラウド インフラストラクチャを管理する全体的なコストを削減する方法を継続的に探しています。 スケールによって増加するコストの 1 つの領域は、アプリケーションを実行したまま、各仮想マシンに最新の OS バージョンに修正プログラムを適用して維持することです。 つまり、一度に 1 つの VM のバッチでアップグレードをスムーズにロールアウトする方法を見つけることです。 多くの OS プロバイダーは、毎月、または重要なセキュリティ修正プログラムのためにより頻繁に VM イメージの修正プログラムが適用された新しいバージョンを作成しますが、これらのアップグレードをチェックして手動でロールアウトすると、クラウド インフラストラクチャ管理コストが増えます。</p>\n\n<h2>スケール セットの新しいオートメーション機能の発表</h2>\n\n<p>本日は、スケール セットの OS イメージのアップグレードを簡略化する自動化機能の新しいセットを発表します。これにより、OS ライフサイクル メンテナンス <em>に set-it-and-forget-it</em> アプローチを採用できます。</p>\n\n<h2>OS イメージの自動アップグレード プレビュー</h2>\n\n<p>プレビュー段階では、Azure スケール セットの OS イメージの自動アップグレード機能により、スケール セット内のすべての VM が最新バージョンに自動的にアップグレードされます。 構成が完了すると、イメージパブリッシャーによって発行された最新の OS イメージが、ユーザーの介入なしにスケール セットに自動的に適用されます。</p>\n\n<p>アプリケーションのダウンタイムを最小限に抑えるために、アップグレードはマシンのバッチで行われ、スケール セットの 20% 以下がいつでもアップグレードされます。 さらに、Azure Load Balancer アプリケーションの正常性プローブを統合するオプションもあります。 これは、アプリケーションのハートビートを組み込み、アップグレード プロセスの各バッチのアップグレードの成功を検証することを強くお勧めします。</p>\n\n<p>アプリケーション全体で最新の OS バージョンの整合性と準拠を維持するために、&rsquo;Azure Resource Manager ポリシーを構成することも可能です (推奨されます)。このポリシーでは、サブスクリプション内のすべてのスケール セットに対してイメージの自動アップグレードが適用されます。</p>\n\n<p>アップグレードは、VM の OS ディスクを、最新のイメージ バージョンを使用して作成された新しいものに置き換えるによって機能します。 永続化されているデータ ディスクは保持されたまま、すべての構成済みの拡張機能とカスタム データ スクリプトが実行されます。 自動アップグレードはいつでも無効にすることも、手動でアップグレードを開始することもできます。</p>\n\n<p><strong>メモ：</strong>仮想マシンまたはスケール セットのサイズに制限はなく、自動 OS アップグレードは Windows VM と Linux VM の両方に対して機能します。</p>\n\n<h2>OS の自動アップグレードの対象となるオペレーティング システムはどれですか?</h2>\n\n<p>最初は、次のオペレーティング システムが OS の自動アップグレード プレビューの対象となります。</p>\n\n<ul>\n    <li>Windows Server 2016 Datacenter</li>\n    <li>Windows Server 2012 Datacenter R2</li>\n    <li>Ubuntu Server 16.04-LTS</li>\n</ul>\n\n<p>一&rsquo;緒に進むにつれて、より多くのOSファミリを追加します。</p>\n\n<h2>OS の自動アップグレードはいつ行われますか?</h2>\n\n<p>OS の自動アップグレードは、OS の発行元が新しいイメージ バージョンをリリースした直後にトリガーされます。</p>\n\n<h2>イメージの自動アップグレードは、Windows Updateなどの VM 内アップグレード オプションとどのように異なりますか?</h2>\n\n<p>イメージのアップグレードにより、各 VM のオペレーティング システム ディスクが一度に 1 つのバッチに置き換えられます。 これは、OS ディスクにアプリケーションの状態を保持しないステートレス アプリケーションや、状態データの冗長コピーを保持するアプリケーションに適しています。 新しいイメージは、発行元が管理し、認定されます。 更新プログラムは、たとえば、Azure リージョン間でセーフデプロイ プラクティスを使用して適用され、geo ペアのリージョンでは同時に行われません。</p>\n\n<p>WINDOWS UPDATEなどの &ldquo;VM 内アップグレード オプションでは、OS ディスクを&rdquo;交換せずにオペレーティング システムの修正プログラムを適用できます。 これは、OS ディスク上のアプリケーションの状態を維持するステートフル アプリケーションに適していますが、パッチをすべての VM に同時に適用できるため、アプリケーションのダウンタイムも危険にさらされます。 また、仮想マシン OS ディスクはスケール セット&rsquo;のソース イメージよりもさらに進むようになり、新しい VM (スケール セットがスケールアウトされた場合など) は、作成時にパッチ サイクルが長くなります。</p>\n\n<h2>作業の開始</h2>\n\n<p>プレビュー用にサブスクリプションを登録する方法と開始する方法の詳細については、 <a href=\"https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-automatic-upgrade\" target=\"_blank\"><em>Azure 仮想マシン スケール セットの OS の自動アップグレード</em></a>に関するページを参照してください。</p>\n\n<p>ロード バランサーの正常性プローブを構成し、アップグレード ポリシーを適用し、アップグレードの状態を確認し、Azure テンプレートの例を確認して作業を開始する手順について説明します。</p>\n"
}