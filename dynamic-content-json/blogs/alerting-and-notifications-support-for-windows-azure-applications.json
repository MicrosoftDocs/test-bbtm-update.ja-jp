{
    "Slug": "alerting-and-notifications-support-for-windows-azure-applications",
    "Title": "Windows Azure アプリケーションのアラートと通知のサポート",
    "Summary": "Editor's Note: This post comes from the Windows&nbsp;Azure Monitoring Team.  Today we are excited to announce the ability to configure threshold based alerts on monitoring metrics within the Azure.…",
    "Content": "<p><strong>エディターの注: </strong>この投稿は、Windows&nbsp; Azure 監視チームから送信されます。</p>  <p>今日は、Azure 内のメトリックの監視に関するしきい値ベースのアラートを構成する機能をお知らせします。 この機能は、コンピューティング サービス (クラウド サービス、VM、Web サイト、モバイル サービス) で使用できます。&nbsp; アラートを使用すると、アプリケーション内でアクティブまたは差し迫った問題の通知を受け取ることができます。 この機能を使用すると、メトリックの監視に関するアラート ルールを作成できます。 ルールで定義された条件に違反すると、アラートが作成されます。 アラート ルールを作成するときに、サービス管理者と共同管理者の電子メール アドレスに電子メール通知を送信するオプションと、追加の管理者の電子メール アドレスを 1 つ選択できます。</p>  <p>次のアラート ルールを定義できます。</p>  <ol>  <li>ホスト オペレーティング システムから収集された仮想マシン監視メトリック (CPU 使用率、ネットワークイン/アウト、ディスク読み取りバイト/秒、ディスク書き込みバイト数/秒) と、構成した Web エンドポイント URL の監視 (応答時間とアップタイム) からのメトリック。</li>  <li>ホスト オペレーティング システム (VM と同じ) から収集されたクラウド サービス監視メトリック、ゲスト VM からのメトリックの監視 (VM 内のパフォーマンス カウンターから)、および構成した Web エンドポイント URL の監視 (応答時間とアップタイム) からのメトリックのオンとオン。</li>  <li>Web サイトと Mobile Service のアラート ルールの場合は、構成済みの Web エンドポイント URL (応答時間とアップタイム) の監視からのメトリックに対して構成できます。</li>  </ol>  <h4><span style=\"font-size: medium;\">アラート ルールの作成</span></h4>  <p>監視メトリックのアラート ルールを追加するには、ポータルの <strong>[設定 -&gt; アラート</strong> ] タブに移動する必要があります。 [ルールの <strong>追加 </strong>] ボタンをクリックして、アラート ルールを作成します。</p>  <p><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0550.alerts-1.png\" alt=\"\" border=\"0\"></p>  <p>アラート ルールに名前を付け、必要に応じて説明を追加します。 アラート ルールを定義するサービスを選択します。アラート作成ウィザードの次の手順では、選択されたサービスに基づいて監視メトリックがフィルター処理されます。</p>  <p><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8611.alert-2-row.png\" alt=\"\" height=\"274\">&nbsp;&nbsp;<img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7853.alerts-2-row-2.png\" alt=\"\" height=\"274\"></p>  <p>各アラートは、アラート評価ウィンドウの値に基づいて計算されます。 上記の例では、評価期間が 5 分でしきい値が 50% の CPU ベースのアラートのルールを作成しました。&nbsp; このルールは、5 分間の CPU 使用率を評価するモニターをバックエンドに作成します。 &nbsp;最初にアラートが&ldquo;アクティブ&rdquo;<em>化されていない</em>状態です。条件に違反すると、アラートは<em>アクティブ</em>&rdquo;状態に&ldquo;移行し、アラート条件が解決されると、アラート ルールは<em>非アクティブ</em>&rdquo;状態に&ldquo;戻ります。<br> CPU 使用率の各データ ポイントは、過去 5 分間の平均値です。 バックエンドでは、アラート エンジンによって各データ ポイントが評価され、条件に違反または解決されたときに状態変更イベントがトリガーされます。</p>  <p>上記のルールで定義されている条件に対するアクティブなアラートを次に示します。</p>  <p><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727.settings-.png\" alt=\"\" border=\"0\"></p>  <p>アラート ルールの詳細を取得するには、ルール名をクリックしてアラートの詳細ページに移動します。</p>  <p><img src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5852.catalogapp.png\" alt=\"\" border=\"0\"></p>  <p>ここでは、このアラートがアクティブ化された最近の時間の履歴を取得できます。ルールが頻繁にアクティブ化されているかどうかと、アラート条件に違反しないように実行する必要があるアクションを判断するのに役立ちます。 アラート ルールを編集して条件を変更することもできます。 また、アラート ルールを無効にすることもできます。これにより、バックエンドでのこのルールの処理が停止されます。</p>  <h4><strong>アラート通知</strong></h4>  <p>アラートがアクティブ化されると、電子メール通知を受信することを選択した場合、Azure Alerts (<a href=\"mailto:alerts-noreply@mail.windowsazure.com\" target=\"_blank\">alerts-noreply@mail.windowsazure.com</a>) Windowsのメール アドレスからサービスまたは共同管理者の電子メール アドレス、またはアラート ルールで定義されている 1 つの追加の管理者電子メール アドレスに電子メールが送信されます。 アラート メールを受信するには、このメール アドレスをメール ホワイトリストに追加する必要がある場合があります。 電子メール通知は、状態遷移 (アラートがアクティブ化されたとき、またはアラートが解決されたとき) に送信されます。アラートが長期間アクティブになっている場合は、しきい値に違反し、解決のみが状態の変更と見なされるため、メールが送信されない場合に注意してください。</p>  <h4><strong>アラートと監視メトリック</strong></h4>  <p>サブスクリプションごとに、最大 10 個のアラート ルールを作成できます。 すべてのコンピューティング サービスに対して、Web エンドポイントの可用性監視メトリックにアラート ルールを作成できます。 URL の可用性監視を有効にしている場合は、アラートを送信する地理的分散場所から測定された稼働時間または応答時間を選択できます。 たとえば、Web サイトの場合、ヨーロッパの場所から 15 分間に測定された Web サイトの応答時間が 1 秒を超えたときにアラートを受け取ることができます。 このルールを定義するには、アラート ルールを作成し、Web サイトを選択し、応答時間メトリックを選択し、条件と評価ウィンドウを 15 分で指定します。 Web サイトを Web エンドポイント監視用に既に構成する必要があることに注意してください。これは、Web サイトが標準モードにスケールアップされた後、Web サイトの構成ページで構成できます。</p>  <p>Virtual MachinesおよびCloud Servicesアラート ルールの場合は、ホスト オペレーティング システムから出力されるメトリックに対して構成できます。 さらに、クラウド サービスの場合は、ゲスト ロール インスタンスから収集されるパフォーマンス カウンターから派生したメトリックに対して監視メトリックを構成できます。 クラウド サービスのアラートは、ロール レベルに集計されるメトリック (ロール レベルまで集計された各ロール インスタンス メトリックのメトリックの値) に対して定義されます。 パフォーマンス カウンター&ldquo;に基づいてメトリックにアラートを送信するには、クラウド サービスのデプロイに対して<em>詳細監視</em>&rdquo;を有効にする必要があります。 詳細については、 <a href=\"https://azure.microsoft.com/en-us/manage/services/cloud-services/how-to-monitor-a-cloud-service/\" target=\"_blank\">クラウド サービスを監視する方法を参照してください。</a></p>  <h4><strong>まとめ</strong></h4>  <p>この更新プログラムを使用すると、監視メトリックに基づいてアラート ルールを簡単に作成でき、アプリケーション内で注意が必要なアクティブまたは差し迫った問題に関する通知を受け取ることができます。 プレビュー期間中、各サブスクリプションは 10 個のアラート ルールに制限されます。 この制限が発生した場合は、新しいルールを作成する前に、そのサブスクリプション内の 1 つ以上のアラート ルールを削除する必要があります。</p>"
}