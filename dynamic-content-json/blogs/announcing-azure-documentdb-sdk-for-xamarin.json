{
    "Slug": "announcing-azure-documentdb-sdk-for-xamarin",
    "Title": "Xamarin と DocumentDB を使用して Planet Scale モバイル アプリを数分で構築する方法",
    "Summary": "Today we are excited to announce Azure DocumentDB SDK for Xamarin mobile platform, enabling mobile apps to interact directly with DocumentDB.",
    "Content": "<p><strong>2017年5月10日現在、</strong></p>\n\n<p><strong>Azure Cosmos DB は、Microsofts&rsquo; のグローバル分散マルチモデル データベースです。Azure Cosmos DB は、グローバル分散と水平スケールを中心にゼロから構築されました。ユーザーがどこにいてもデータを透過的にスケーリングおよびレプリケートすることで、任意の数の Azure リージョンにターンキーグローバル分散を提供します。スループットとストレージを世界規模で弾力的にスケーリングし、必要なスループットとストレージに対してのみ料金を支払います。Azure Cosmos DB は、世界のどこでも 99 パーセンタイルで 1 桁ミリ秒の待機時間を保証し、パフォーマンスを微調整するための明確に定義された複数の整合性モデルを提供し、業界をリードするサービス レベル アグリーメント (SLA) によってサポートされるマルチホーム機能&mdash;を使用して高可用性を保証します。&nbsp;</strong></p>\n\n<p><strong>Azure Cosmos DB は本当にスキーマに依存しません。スキーマとインデックス管理に対処しなくても、すべてのデータのインデックスが自動的に作成されます。また&rsquo;、ドキュメント、キー値、グラフ、列ファミリのデータ モデルをネイティブにサポートするマルチモデルです。Azure Cosmos DB では、DocumentDB SQL (ドキュメント)、MongoDB (ドキュメント)、Azure Table Storage (キー値)、Gremlin (グラフ) がすべてネイティブにサポートされるため、任意の API を使用してデータにアクセスできます。</strong></p>\n\n<hr>\n<p>ほとんどのモバイル アプリはクラウドにデータを格納する必要があり&nbsp;、<a href=\"https://azure.microsoft.com/services/documentdb/\">Azure DocumentDB</a> はモバイル アプリ用の優れたクラウド データベースです。 モバイル開発者が必要とするすべてのもの、オンデマンドでスケーリングするサービスとしてのフル マネージドの NoSQL データベース、およびユーザーが世界中を移動する場所で、アプリケーションに対して完全に透過的にデータ&nbsp;を提供します&nbsp;。&nbsp;本日は、Xamarin モバイル プラットフォーム用の Azure DocumentDB SDK を発表し、中間層なしで DocumentDB を使用してモバイル アプリ&nbsp;&nbsp;を直接対話できるようにします。</p>\n\n<p>モバイル開発者が DocumentDB を使用してすぐに使用できる内容を次に示します。</p>\n\n<p><a href=\"file:///C:/Users/kirillg/AppData/Local/Temp/WindowsLiveWriter1286139640/supfilesDBC6246/DocDB%20Xamrin_300[10].png\"><img alt=\"DocDB Xamrin_300\" border=\"0\" height=\"307\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/40d64dd3-e8a7-428b-a7a5-451346b2a055.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"DocDB Xamrin_300\" width=\"542\"></a></p>\n\n<ul>\n <li><strong>スキーマレス データに対する豊富なクエリ</strong>。 DocumentDB は、異種コレクションにスキーマレス JSON ドキュメントとしてデータを格納し、スキーマやインデックスを気にすることなく <a href=\"https://docs.microsoft.com/en-us/azure/documentdb/documentdb-sql-query\">、豊富で高速なクエリ </a>を提供します。</li>\n <li><strong>高 速。保証。</strong>&nbsp;DocumentDB を使用した&nbsp;ドキュメント&nbsp;の読み取りと書き込みにかかる時間はミリ秒単位です&nbsp;。 開発者は&nbsp;必要なスループットを指定&nbsp;でき、DocumentDB は 99.99% の SLA でこれを受け入れます。</li>\n <li><strong>無制限のスケール。</strong> <a href=\"https://docs.microsoft.com/en-us/azure/documentdb/documentdb-partition-data\">DocumentDB コレクションは、アプリの成長に合わせて拡大します</a>。 小さいデータ サイズと 1 秒あたり数百件の要求から開始し、大きいデータ サイズ、1 秒あたり数千万や数億件の要求のスループット、ペタバイトのデータに任意に拡張できます。</li>\n <li><strong>グローバル分散。</strong> モバイル アプリ ユーザーは外に出かけ、世界中を飛び回ることもよくあります。 DocumentDB は、<a href=\"https://docs.microsoft.com/en-us/azure/documentdb/documentdb-distribute-data-globally\">グローバル分散データベース</a>です。地図上で 1 回クリックするだけで、ユーザーがどこにいてもデータが提供されます。</li>\n <li><strong>組み込みの豊富な承認機能。</strong> DocumentDB を使用すると、<a href=\"https://github.com/Azure/azure-cosmosdb-dotnet/tree/master/samples/xamarin/UserItems\">ユーザーごとのデータ</a>や、カスタムの複雑な承認コードを使用しないマルチユーザー共有データなどの一般的なパターンを簡単&nbsp;に実装できます。</li>\n <li><strong>地理空間クエリ。</strong> 現在、多くのモバイル アプリが地理的な場所に応じたエクスペリエンスを提供しています。 <a href=\"https://docs.microsoft.com/en-us/azure/documentdb/documentdb-geospatial\">Geo 空間型</a> DocumentDB の最初のクラスのサポートにより、これらのエクスペリエンスは非常に簡単に実現できます。</li>\n <li><strong>バイナリの添付ファイル。</strong> アプリ データには、バイナリ BLOB が含まれていることがよくあります。 添付ファイルがネイティブでサポートされているため、DocumentDB をアプリ データのワンストップ ショップとして簡単に使用できます。</li>\n</ul>\n\n<p>&#39;一緒にアプリを構築しましょう。</p>\n\n<h3>手順 1. 作業を開始する</h3>\n\n<p>DocumentDB を使い始めるのは簡単&#39;、Azure portalに移動し、新しい DocumentDB アカウントを作成し、[&nbsp;クイック スタート] タブに移動して、既に DocumentDB アカウントに接続されている Xamarin Formstodo&nbsp; リスト サンプルをダウンロードします。&nbsp;</p>\n\n<p><a href=\"file:///C:/Users/kirillg/AppData/Local/Temp/WindowsLiveWriter1286139640/supfilesDBC6246/image[23].png\"><img alt=\"image\" border=\"0\" height=\"407\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e02f5429-4209-495e-98fe-718fc11970d6.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"イメージ\" width=\"543\"></a></p>\n\n<p>または、既存の Xamarin アプリがある場合は、この <a href=\"https://docs.microsoft.com/en-us/azure/documentdb/documentdb-sdk-dotnet-core\" target=\"_blank\"><u>DocumentDB NuGet パッケージ</u></a>を追加するだけです。 現在、Xamarin.IOS、Xamarin.Android、Xamarin Forms 共有ライブラリがサポートされています。</p>\n\n<h3>手順 2. データの処理</h3>\n\n<p>データ&nbsp; レコードは、異種コレクション内のスキーマレス JSON ドキュメントとして DocumentDB に格納されます。 同じコレクションに異なる構造のドキュメントを格納できます。</p>\n\n<p><a href=\"file:///C:/Users/kirillg/AppData/Local/Temp/WindowsLiveWriter1286139640/supfilesDBC6246/Screenshot%202017-01-23%2014.44.12[5].png\"><img alt=\"Screenshot 2017-01-23 14.44.12\" border=\"0\" height=\"29\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9e3eb8d4-c7e2-4f1c-a51f-f6f44aaa685e.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"スクリーンショット 2017-01-23 14.44.12\" width=\"764\"></a></p>\n\n<p>Xamarin プロジェクトでは、スキーマレス データに対して言語を使用したクエリを使用できます。</p>\n\n<p><a href=\"file:///C:/Users/kirillg/AppData/Local/Temp/WindowsLiveWriter1286139640/supfilesDBC6246/Screenshot%202017-01-23%2014.47.29[4].png\"><img alt=\"Screenshot 2017-01-23 14.47.29\" border=\"0\" height=\"157\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/94ff379a-5e0f-4981-bb02-5efd0c970a2c.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"スクリーンショット 2017-01-23 14.47.29\" width=\"725\"></a></p>\n\n<h3>手順 3. AddUsers&nbsp;</h3>\n\n<p>多くの入門サンプルと同様に、上記でダウンロードした DocumentDB サンプルは、アプリのコードでハードコーディングされたマスター キーを使用してサービス&#39;認証します。 これはもちろん、ローカル エミュレーター以外の任意の場所で実行する&nbsp;予定のアプリには適していません。 攻撃者がマスター キーを入手すると、DocumentDB アカウントの全データのセキュリティが侵害されます。</p>\n\n<p>代わりに&nbsp;、アプリがログインしている&nbsp;ユーザーのレコード&nbsp;にのみアクセスできるようにする必要&nbsp;があります。 DocumentDB を使用すると、開発者はニーズに応じて、すべてのドキュメント&nbsp;への&nbsp;読み取りまたは読み取り/書き込みアクセス権を&nbsp;アプリケーションに付与できます。</p>\n\n<p>たとえば、todo リスト アプリをマルチユーザーの todolist アプリに変更する方法を次に示します。サンプルの完全なバージョンは <a href=\"https://github.com/Azure/azure-cosmosdb-dotnet/tree/master/samples/xamarin/UserItems\">、ここで入手できます</a>。&nbsp;</p>\n\n<ul>\n <li>Facebook、Active Directory、またはその他のプロバイダーを使用して、アプリにログインを追加します。</li>\n <li>DocumentDB UserItems コレクション&nbsp;を&nbsp;パーティション キーとして作成します。 collectionallowsDocumentDBto&nbsp;&nbsp;&nbsp; のパーティション キーを指定すると、アプリ ユーザーの増加に応じて無限にスケーリングされ、高速クエリが提供されます。</li>\n <li>DocumentDB リソース トークン ブローカーを追加します。これは、ユーザーを認証&nbsp;し、ユーザーの&nbsp;パーティション内のドキュメントにのみアクセスできる、ログインしているユーザーに有効期間の短いトークン&#39;します。 この例では、App Serviceでリソース トークン ブローカーをホストします。</li>\n <li>Facebook でリソース トークン ブローカーに対する認証を行い、ログインしている Facebook ユーザーのリソース トークンを要求するようにアプリを変更し、UserItems コレクション内のユーザー データにアクセスします。&nbsp;&nbsp;</li>\n</ul>\n\n<p>この図は、ソリューションを示しています&nbsp;。 &nbsp;OAuthinDocumentDB&nbsp;&nbsp; のファースト クラスをサポートすることで、Resource トークン ブローカーの必要性&nbsp;を排除することを提案しています。この <a href=\"https://feedback.azure.com/forums/263030-documentdb/suggestions/17824504-built-in-oauth-support\">uservoice アイテム</a>をアップヴォイテしてください(&#39;良いアイデアだと思う場合)。</p>\n\n<p><a href=\"file:///C:/Users/kirillg/AppData/Local/Temp/WindowsLiveWriter1286139640/supfilesDBC6246/tokenbroker[4].png\"><img alt=\"tokenbroker\" border=\"0\" height=\"462\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/cd40d5fa-bf7b-49e7-a7d5-d7f90a6b8cef.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"tokenbroker\" width=\"476\"></a></p>\n\n<p>&nbsp;2 人のユーザーが同じ todolist にアクセスできるようにする場合&nbsp;は、Resource Token Broker のアクセス トークンにアクセス許可を追加するだけです。&nbsp;完全なサンプル<a href=\"https://github.com/Azure/azure-cosmosdb-dotnet/tree/master/samples/xamarin/UserItems\">については、こちらを参照してください</a>。</p>\n\n<h3>手順 4. オンデマンドでスケールできます。</h3>\n\n<p>DocumentDB は、サービスとしてのマネージド データベースです。&nbsp;ユーザー ベースの拡大に伴い、VM のプロビジョニングや&nbsp;コアの作成について心配する必要&#39;はありません。 DocumentDB に伝える必要があるのは、&nbsp;1 秒あたりの多くの&nbsp;操作 (スループット) です&nbsp;。 <a href=\"https://docs.microsoft.com/en-us/azure/documentdb/documentdb-manage#request-units-and-database-operations\" rel=\"nofollow\"><u>1 秒あたりの要求ユニット</u></a>数 (RU) と呼ばれるスループットのメジャーを使用して、ポータルの [スケール] タブでスループットを指定できます。 たとえば、1 KB のドキュメントに対する読み取り操作には 1 RU が必要です。&nbsp;また、スループット&quot; メトリックの追加&nbsp;機能を使用&quot;して、トラフィックの増加を監視し、アラートが発生したスループット&nbsp;をプログラムで変更することもできます。</p>\n\n<p><a href=\"file:///C:/Users/kirillg/AppData/Local/Temp/WindowsLiveWriter1286139640/supfilesDBC6246/image[13].png\"><img alt=\"image\" border=\"0\" height=\"263\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/03d46429-0b0f-4cb8-8252-9c27856a5632.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"イメージ\" width=\"557\"></a>&nbsp;&nbsp;</p>\n\n<h3>手順 5. Go Planet Scale!</h3>\n\n<p>アプリが人気を集めるにつれて、世界中のユーザーを獲得できます。 または、&nbsp;&nbsp;DocumentDB コレクション&#39;作成した Azure データ センターを隕石が攻撃する場合に、ガードを受けたくない場合もあります。 Azure portal、DocumentDB アカウントに移動し、マップをクリックして、世界中の任意の数のリージョンにデータを継続的にレプリケートします。 これにより、ユーザーがどこにいてもデータを使用できるようになり、雨の日に備えてフェールオーバー ポリシーを追加できます。</p>\n\n<p><a href=\"file:///C:/Users/kirillg/AppData/Local/Temp/WindowsLiveWriter1286139640/supfilesDBC6246/image[18].png\"><img alt=\"image\" border=\"0\" height=\"347\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/497caddf-0d3f-4ebf-bfc2-e3a4927e2133.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"イメージ\" width=\"559\"></a></p>\n\n<p>このブログとサンプルは、Xamarin アプリケーションで DocumentDB を活用するのに役立つことを願っています。 DocumentDB JavaScript SDK を使用する Cordova アプリや、DocumentDB REST API を使用するネイティブ iOS/Android アプリでも同様のパターンを使用できます。</p>\n\n<p>これまでと同様に、 <a href=\"https://feedback.azure.com/forums/263030-documentdb\"><u>UserVoice</u></a>、StackOverflow <a href=\"https://stackoverflow.com/questions/tagged/azure-documentdb\"><u>#azure-documentdb</u></a>、または Twitter <a href=\"https://twitter.com/documentdb\"><u>@DocumentDB</u></a>を使用して DocumentDB の今後の予定を確認&#39;、どのような改善を行っているかをお知らせください。</p>\n"
}