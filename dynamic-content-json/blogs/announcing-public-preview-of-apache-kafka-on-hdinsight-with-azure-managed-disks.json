{
    "Slug": "announcing-public-preview-of-apache-kafka-on-hdinsight-with-azure-managed-disks",
    "Title": "Azure マネージド ディスクを使用した HDInsight での Apache Kafka のパブリック プレビューの発表",
    "Summary": "HDInsight set a firm goal of helping enterprises build secure, robust, scalable open source streaming pipelines on Azure. To meet this goal, a few months ago we announced a limited preview of Managed Kafka on Azure HDInsight.",
    "Content": "<p>HDInsight は、企業が Azure でセキュリティで保護された堅牢でスケーラブルなオープンソース ストリーミング パイプラインを構築するのを支援するという強固な目標を設定しました。 この目標を達成するために、数か月前に<a href=\"https://azure.microsoft.com/en-us/services/hdinsight/apache-kafka/\">、Azure HDInsight での Managed Kafka</a> の限定プレビューを<a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=5&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwi2ge_F-LrUAhUhS5oKHWZFAg4QFghCMAQ&amp;url=https%3A%2F%2Fchannel9.msdn.com%2FShows%2FAzure-Friday%2FIntroducing-Apache-Kafka-on-Azure-HDInsight&amp;usg=AFQjCNE9K8XAt-z0ppbTkFYk6bgbsEbduw&amp;sig2=1JR8uoivaE9PURAqCjqeSg\">発表しました</a>。 HDInsight に Kafka を追加すると、Azure でのスケーラブルなオープンソース ストリーミングのためのインジェスト部分が完了します。 HDInsight Kafka のお客様は、Apache Kafka のスケールとパフォーマンスの利点に加えて、次の利点を享受できます。</p>\n\n<ul>\n <li><a href=\"https://azure.microsoft.com/en-us/support/legal/sla/hdinsight/v1_0/?v=17.23h\">99.9%</a> のアップタイム SLA によってサポートされるマネージド オープンソース Kafka の約束\n\n <ul>\n  <li>これには、オープンソース コンポーネントのインストール、構成、管理が含まれます</li>\n  <li>HDInsight では、クラスターシェイプの一部として Zookeeper クォーラムが追加でプロビジョニングおよび監視されます。</li>\n </ul>\n </li>\n <li>Azure 更新ドメインと障害ドメイン間でのレプリカとパーティションの管理された再調整。 これにより、ラックの多次元ビューを使用した環境での Kafka パーティションの高可用性が確保されます。 このツールは、 <a href=\"https://github.com/hdinsight/hdinsight-kafka-tools\">ここでもオープン ソースです</a>。</li>\n <li>SOC、PCI、DSS などの認定を受け、 <a href=\"https://www.microsoft.com/en-us/TrustCenter/Compliance\">Azure</a> と <a href=\"https://azure.microsoft.com/en-us/services/hdinsight/?v=17.23h\">HDInsight の</a> セキュリティとコンプライアンスの利点。</li>\n <li>ARM テンプレートの事前構築済みアーキテクチャを使用して、マネージドおよびセキュリティで保護されたストリーミング パイプライン (Kafka、Storm、または Spark ストリーミング) を数分以内にデプロイするための統合されたエクスペリエンス。</li>\n</ul>\n\n<p>本日は、HDInsight プラットフォーム上の <a href=\"https://azure.microsoft.com/en-us/services/managed-disks/\">Azure Managed Disks</a> を使用した Apache Kafka のパブリック プレビューをお知らせします。 ユーザーは、サインアップを必要とせず、Azure portalから直接マネージド ディスクを使用して Kafka クラスターをデプロイできるようになりました。 これにより、ワークロードのスケールに応じて指数関数的に低いコストと共に、指数関数的に高いスケーラビリティの強力な利点が得られます。 この機能については、以下で詳しく説明します。</p>\n\n<h2>お客様の成功事例:トヨタコネクテッド</h2>\n\n<p>昨年、HDInsightはトヨタ社と非常に密接に協力して、世界最大&rsquo;かつ最も分散型のコネクテッドカーストリーミングプラットフォームの1つを構築してきました。 このプラットフォームは、HDInsight Kafka 上の運用環境で 1 日に数百万件の大規模なイベントを処理し、リアルタイムで分析情報をロック解除します。 この規模のプラットフォームは、HDInsight のセキュリティで保護され、管理され、弾力的にスケーラブルな性質によって可能になりました。 利点は、以下のトヨタコネクテッドの最高製品所有者によって最もよく説明されています。</p>\n\n<blockquote>\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a5a7e242-6d34-4d43-8091-6f19cd664dea.png\"><img align=\"left\" alt=\"image\" border=\"0\" height=\"121\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2a321347-6588-4d17-aa18-cc96ac94e872.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; float: left; display: inline; background-image: none;\" title=\"imageToyota\" width=\"189\"></a>&quot;は世界中で走る数百万台の自動車を製造しており、トヨタ規模でリアルタイムデータを処理するコネクテッドカープラットフォームの構築は大きな課題です。 トヨタ&rsquo;の規模でイベントを処理するには、Kafkaなどの技術を活用する必要があります。 HDInsight は、99.9% の SLA で Kafka をマネージド サービスとして提供する唯一のマネージド プラットフォームであるため、トヨタは Azure HDInsight で Kafka、Storm、Spark のスケーラブルなテクノロジを活用できました。 HDInsight プラットフォームを使用して、エンタープライズ グレードのストリーミング パイプラインをデプロイして、毎秒数百万台の自動車からのイベントを処理することができました。 これは表面を傷つけるだけです。Azure HDInsight のグローバルコネクテッド カーの未来は明るく、ストアに&#39;することに興奮しています。&quot;&nbsp;&nbsp; -トヨタコネクテッド・プロダクトオーナー、ヴィジェイ・チェムトゥリ</p>\n</blockquote>\n\n<p>コネクテッド カー アーキテクチャの大まかなアーキテクチャを次に示します。 Vijayが述べているように、これは &ndash; 私たちが今後数ヶ月でこの強力なストリーミングプラットフォームを構築することに非常に興奮しています。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ca4cbb01-9e0e-428b-8a5f-0dca84d4bcc5.png\"><img alt=\"Toyota-Blog-Arch-3\" border=\"0\" height=\"576\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f1c6418d-6f86-4cdb-bc82-548ef84c25f0.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"トヨタ-ブログ-Arch-3\" width=\"1024\"></a></p>\n\n<p>同様の IoT シナリオの設計の詳細については、今後の一連のブログで説明します。</p>\n\n<h2>HDInsight Kafka と Azure Managed Disks の統合</h2>\n\n<p>このパブリック プレビューでは、HDInsight Kafka も Azure Managed Disks とのネイティブ統合をリリースしています。</p>\n\n<p>Azure Managed Disks は、お客様のストレージ アカウントの仕様を抽象化する新機能であり、ディスクを使用するより簡単で管理されたルートを可能にします。 ストレージ アカウントの IOPS 制限を廃止すると共に、一元化されたストレージ アカウント内の特定の VHD から数百の VM を作成できるため、より高いスケールが提供されます。 ディスクは、プレミアム (SSD) または Standard (HDD) のいずれかであり、サイズは 1 TB です。 この機能の詳細については、こちらを参照してください。</p>\n\n<p>Kafka は、I/O 負荷の高い高スループットで待機時間の短いメッセージング サービスです。 Azure Managed Disksより前の HDInsight Kafkas&rsquo; の元のプレビュー オファリングは、ノードの最大の永続化されたディスクにデータを格納しました。 これは、各ノードの制限が 1 TB であることを意味します。 Kafkas&rsquo; I/O の負荷が高い性質を考えると、ディスクはボトルネックになることが多く、ストレージを増やすために追加のノードを追加する必要がありました。 その結果、コストが高く、クラスター上の CPU とメモリの使用率が大きくなっています。 このリリースでは、以下に示すManaged Disks機能を使用して HDInsight Kafka を実装しています。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0f8c2c1c-5f39-487a-b862-04fd60c560fb.png\"><img alt=\"Kafka-MD-Diagram\" border=\"0\" height=\"576\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e753a130-ce6b-47cc-b104-27cad7858d30.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Kafka-MD-Diagram\" width=\"1024\"></a></p>\n\n<p>この機能を使用すると、永続化されたデータとスケーラブルなデータの両方を持つことができます。ノードあたり最大 16 TB です。 これにより、ワークロードの増加に応じて、指数関数的に低いコスト、高いスケーラビリティ、およびパフォーマンスが向上します。 ディスクのコストはノードのコストのほんの一部であるため、次の図は、スケーリングのニーズが高まるにつれて、ノードの数とコストがどのように指数関数的にスケールダウンするかを示しています。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b55a01bf-8195-4e48-9b90-4dc5b8dfb657.png\"><img alt=\"KafkaBlogScale\" border=\"0\" height=\"384\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/31a8586e-a27d-486b-abf7-83e822639d9e.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"KafkaBlogScale\" width=\"1024\"></a></p>\n\n<p>この機能は自動的に有効になり、この機能を利用するのは簡単です。ユーザーは、特定のノードに接続するディスクの数を指定するだけで済 &ndash; みます。 これは、次の図に示すように、ポータルを使用するか、ARM テンプレートで 1 つのプロパティを指定することで実行できます。 ディスク &ndash; プレミアムまたは Standard の種類は、ワーカー ノードを選択した VM の種類によって決まります。 プレミアムディスクは <strong>DS</strong> および <strong>GS</strong> シリーズの VM に接続されますが、標準は他のすべての VM の種類にアタッチされます。 これらのクラスターを作成する方法の例を含むエンド ツー エンド テンプレートについては、次のセクションで詳しく説明します。 詳細については、 <a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-kafka-get-started\">ドキュメントを参照してください</a>。</p>\n\n<table border=\"0\" cellpadding=\"2\" cellspacing=\"0\" width=\"533\">\n <tbody>\n  <tr>\n   <td valign=\"top\" width=\"222\"><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/04067fd1-0ee6-42e4-abef-140cd1483dd7.png\"><img alt=\"KafkaBlogPortal\" border=\"0\" height=\"354\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/93bc6b29-3f05-4a4c-a7b4-fe344ee1011d.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"KafkaBlogPortal\" width=\"350\"></a></td>\n   <td valign=\"top\" width=\"309\"><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/44335bed-7ad3-44cb-89ec-afc0a4662bf6.png\"><img align=\"left\" alt=\"image\" border=\"0\" height=\"356\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/74cc5a47-5d3a-4a11-8863-ffcb0805c584.png\" style=\"border-width: 0px; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; float: left; display: inline; background-image: none;\" title=\"イメージ\" width=\"350\"></a></td>\n  </tr>\n  <tr>\n   <td valign=\"top\" width=\"222\">\n   <p align=\"left\"><em>ポータル 1 を使用したディスクの仕様</em></p>\n   </td>\n   <td valign=\"top\" width=\"309\">\n   <p align=\"left\"><em>ARM テンプレート 1 を使用したディスクの仕様</em></p>\n   </td>\n  </tr>\n </tbody>\n</table>\n\n<h2>HDInsight でのManaged Disksを使用した Spark、Storm、Kafka のデプロイと使用を数分以内に開始する</h2>\n\n<p>HDInsight にスケーラブルなオープンソース ストリーミング ソリューションをデプロイできるように、ドキュメントとサンプルを更新しました。 これらの各例では、クラスターの作成手順を順を追って説明し、強力なパイプラインを有効にするためにワンクリックで ARM テンプレートをデプロイします。 さらに、構造化ストリーミングの新しい例を含むように Spark ストリーミングの例を更新し、Twitter、Kafka、Spark Streaming を使用してエンド ツー エンド パイプラインを作成しました。</p>\n\n<ul>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-kafka-get-started\">HDInsight 用 Kafka を使用したはじめに</a></li>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-with-kafka\">HDInsight Kafka + Spark ストリーミングをデプロイする</a></li>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-storm-with-kafka\">HDInsight Kafka + Storm のデプロイ</a></li>\n <li><a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-kafka-connect-vpn-gateway\">オンプレミスからクラウドの HDInsight Kafka にデータをストリーミングする</a></li>\n <li><a href=\"https://docs.microsoft.com/azure/hdinsight/hdinsight-apache-kafka-spark-structured-streaming\">ツイートを HDInsight Kafka にストリーミングし、Spark 構造化ストリーミングを使用して処理する</a></li>\n</ul>\n\n<p>ご質問、ご提案、フィードバックについては、お気軽にお問い <a href=\"mailto:HDIFeedback@microsoft.com\">HDIFeedback@microsoft.com</a>合わせください。 私たちはあなたがオンボードして本当に興奮しており、あなたから聞いてみたいです。</p>\n"
}