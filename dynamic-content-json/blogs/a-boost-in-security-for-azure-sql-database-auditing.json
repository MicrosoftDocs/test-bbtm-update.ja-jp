{
    "Slug": "a-boost-in-security-for-azure-sql-database-auditing",
    "Title": "Azure SQL Databaseのセキュリティ強化: 監査",
    "Summary": "Auditing feature is now available for Azure SQL DB, in a preview offering. This is a key security enhancement that removes barriers from businesses wanting to manage their databases in the cloud.",
    "Content": "<p>お客様が話し、&rsquo;聞き取りを行っています。Azure SQL DB では、予想される監査機能がプレビュー オファリングで利用できるようになりました。 これは、クラウドでデータベースを管理する企業からの障壁を取り除く重要なセキュリティ強化です。 数週間前にプレビューに導入されたSQL Database監査により、データに対する更新やクエリなど、データベース内で発生したイベントや変更に関する詳細な分析情報を得る組織&rsquo;の能力が向上します。 非常にシンプルで直感的な構成インターフェイスを使用して、数分以内にデータベースで監査を実行できるようになりました。</p>\n\n<p>デモを確認し、この活発で有益な <a href=\"https://channel9.msdn.com/Shows/Data-Exposed/Auditing-in-Azure-SQL-Database\">Channel 9 ビデオ</a> で監査の利点について学習します。このビデオでは、Eyal Carmel と Scott クラインがこの新機能について説明しています。 監査はすべての Basic データベース、Standard データベース、プレミアム データベースで使用でき、新しい <a href=\"https://portal.azure.com/\">Azure プレビュー ポータル</a>または標準 API を使用して構成できます。 データベースの監査を設定する方法の更新された情報については、SQLデータベース<a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-database-auditing-get-started/\">監査のはじめに</a>を参照してください。</p>\n\n<h1>監査が必要な理由</h1>\n\n<p>データベースで監査を有効にすると、さまざまな目的に対応できる貴重なデータのリポジトリがすぐに作成されます。</p>\n\n<ul>\n <li><strong>コンプライアンス関連の活動を効率化する</strong></li>\n</ul>\n\n<blockquote>監査は、PCI-DSS、SOX、HIPAA などのさまざまな業界のコンプライアンス要件と規制を組織が満たすのに役立つ貴重なツールです。 このような規制の多くは、基になるデータベースに対するデータ関連アクティビティの監査証跡を必要とします。</blockquote>\n\n<ul>\n <li><strong>データベース アクティビティに関する分析情報を取得する</strong></li>\n</ul>\n\n<blockquote>監査証跡を保持すると、データベースで <i>どのようなアクティビティ</i> が行われているのか、 <i>だれ</i> が <i>いつ</i>行われているのかを正確に把握できるようになります。 これは、ビジネスの可視性を高めるためにすぐに使用できます。このようなデータは、ビジネスの傾向を特定したり、ビジネス上の懸念を示したりするのに役立ちます。 たとえば、データの分析では、特定の地理的な場所にあるデータベース内の時間の経過に伴うアクティビティ レベルの低下を特定し、ビジネスで対処できます。</blockquote>\n\n<ul>\n <li><strong>セキュリティ違反の疑いを特定する</strong></li>\n</ul>\n\n<blockquote>監査データを分析すると、組織全体のデータ関連アクティビティの不一致や異常が明らかになる可能性があります。 これにより、潜在的なセキュリティ インシデントが特定される可能性があります。</blockquote>\n\n<p>監査やその他のセキュリティ機能を使用すると、規制コンプライアンスを満たすアプリケーションを簡単に構築できますが、コンプライアンスを保証できないことを指摘することが重要です。 アプリケーションの設計とデータベースのプラクティスが、必要な企業または業界のセキュリティとコンプライアンスの標準に準拠するように実装されていることを確認する責任は、組織&rsquo;に残っています。</p>\n\n<h1>監査では、自分のSQL Databaseに対するイベントはどのように追跡されますか?</h1>\n\n<p>有効にして構成すると、監査エンジンは、指定されたSQL Databaseからのすべての受信イベントと送信イベントを追跡します。&nbsp;ログに記録されるデータベース アクションとイベントのカテゴリを構成し、関連する各イベントがAzure Storageの監査ログに書き込まれます。 &lsquo;各監査エントリで参照されるユーザー&rsquo; (またはプリンシパル) は、SQL データベースにログインしているデータベース &ndash; ユーザーであり、必ずしもアプリケーション ユーザーではないことに注意してください。</p>\n\n<h1>実際にログに記録されているデータは何ですか? そのデータはどこに保存されていますか。</h1>\n\n<p>監査を構成するときに、監査ログの書き込み先となるAzure Storage アカウントを指定します (Azure Storageレートが適用されることに注意してください)。 監査が有効になると、その指定されたストレージ アカウントに Azure テーブルが自動的に作成され、(構成した内容に基づいて) 選択したイベントのレコードがそのテーブルに書き込まれます。 監査アーキテクチャの下の図を参照してください。 書き込まれた監査エントリは、定義済みのフィールドを持つスキーマに準拠しています。このスキーマの<a href=\"https://go.microsoft.com/fwlink/?LinkId=506733\">詳細な仕様</a><a href=\"https://go.microsoft.com/fwlink/?LinkId=506732\">は、ここで</a>ダウンロードできます。</p>\n\n<blockquote><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/audit-p1.png\"><img alt=\"audit p1\" border=\"0\" height=\"428\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/audit-p1_thumb.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;\" title=\"audit p1\" width=\"559\"></a></blockquote>\n\n<p>監査ログはAzure Storage アカウントに直接書き込まれるので、このデータへのアクセスは完全に制御できます。 ログを表示するには、Azure Storage Explorerなどの任意のツールを使用するか、定義済みの<a href=\"https://go.microsoft.com/fwlink/?LinkId=403540\">Excel ダッシュボードとレポート テンプレート</a>を使用<a href=\"https://azurestorageexplorer.codeplex.com/\"></a>してAzure Storage アカウントに接続できます。このテンプレートを使用すると、PowerQuery を使用してAzure Storage アカウントからログを取得できます。 Excel アドインのPower Queryは、2013 年Officeすべてのお客様に無料<a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=39379\">でダウンロード</a>できます。</p>\n\n<h1>SQL DB の監査を設定操作方法</h1>\n\n<p>次に示すように、Azure プレビュー ポータルで直感的な構成インターフェイスを使用して、いくつかの簡単な手順でデータベースの監査を構成できます。 監査を設定するには、Basic、Standard、または プレミアム データベースから開始する必要があります。 <a href=\"https://portal.azure.com/\">Azure プレビュー ポータル</a>でターゲット データベースに移動し、[<strong>監査の有効化とセットアップ</strong>] をクリックして [監査の構成] ブレードを起動します。 監査ログを保存するAzure Storageアカウントを選択し、ログに記録するイベントのセットを指定します。</p>\n\n<blockquote><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/audit-p2.png\"><img alt=\"audit p2\" class=\"alignnone size-medium wp-image-176991\" height=\"369\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/audit-p2-146x369.png\" style=\"width: 150px; height: 308px;\" width=\"146\"></a></blockquote>\n\n<p>&rsquo;監査設定を構成したら、データベースに接続している既存のクライアント アプリケーションを更新して、セキュリティが有効な接続文字列を使用する必要があります。 これにより、データベース上のこれらのアプリケーションのアクティビティがログに記録されます。 <strong>セキュリティが有効な接続文字列</strong> の形式は少し異なり、以前に使用した接続文字列を置き換えます。</p>\n\n<blockquote><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/clip_image001.png\"><img alt=\"clip_image001\" border=\"0\" height=\"134\" hspace=\"24\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/clip_image001_thumb.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;\" title=\"clip_image001\" vspace=\"24\" width=\"626\"></a></blockquote>\n\n<p>監査が設定され、機能したら、次に示す監査ダッシュボードを表示できます。このダッシュボードでは、Azure portalから直接データベース アクティビティをすばやく一目で確認できます。 過去 24 時間以内に発生した、監査されたデータベース イベントの更新された数 (最大 15 分の鮮度) が表示されます。 また、種類別のイベントの内訳も表示されるため、データベースで発生するイベントの分布をすばやく把握し、異常または予期しないアクティビティを特定することもできます。</p>\n\n<blockquote><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/audit-p3.png\"><img alt=\"audit p3\" class=\"alignnone size-medium wp-image-177011\" height=\"369\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/audit-p3-636x369.png\" width=\"636\"></a></blockquote>\n\n<h1>&nbsp;</h1>\n\n<h1>すべてのデータベース&ndash;を監査する場合、一度に複数のSQL DB の監査を設定できますか?</h1>\n\n<p>特定のデータベース サーバー内のすべてのデータベースに対して、1 つの監査ポリシーを簡単に定義できます。 これを行うには、そのサーバーの <strong>既定のポリシーとしてポリシー</strong> を指定します。 このようなポリシーを作成するには、そのサーバー上のいずれかのデータベースの監査を構成し、[ <strong>既定として保存</strong> ] をクリックして、明示的な監査構成がまだ定義されていない DB サーバー上のすべてのデータベースにこれらの同じ設定を自動的に適用する必要があります。 この特定の構成ワークフローを次に示します。</p>\n\n<blockquote><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/audit-p4.png\"><img alt=\"audit p4\" class=\"alignnone size-medium wp-image-177013\" height=\"369\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/audit-p4-196x369.png\" width=\"196\"></a></blockquote>\n\n<p>サーバー上のすべてのデータベースに対して既定の設定を作成する機能は、間もなく DB サーバー コンテキストからも使用できるようになります。</p>\n\n<h1>&nbsp;</h1>\n\n<h1>Im&rsquo; がデータベース内のアクティビティに関するデータを収集したら、どのように分析すればよいですか?</h1>\n\n<p>Azure Storageから監査レコードを CSV 形式のファイルとしてエクスポートすることで、任意のアプリケーションを使用して監査ログを分析できます (他のファイル形式も使用できます)。 また、<a href=\"https://go.microsoft.com/fwlink/?LinkId=403540\">定義済みのダッシュボードとレポート</a>を含む対話型のExcel テンプレートの形式で、監査データ用の事前に作成された分析ツールも提供します。 Excel アドインのPower Queryを使用して、Azure Storage から監査ログ データを直接取得できます。 レポートは、Storage アカウントから読み込まれた監査ログに基づいてデータベース アクティビティを反映するように自動的に更新されます。 レポート テンプレートを監査ログ ストレージにアタッチする手順と、Excel テンプレートを操作するための手順に関するドキュメントの組み込みの分析<a href=\"https://go.microsoft.com/fwlink/?LinkId=403540\">テンプレート</a>を使用する方法の詳細な手順を参照してください。 (同じStorage アカウントに対して) 複数のデータベースが監査されている場合は、組み込みのレポートを使用して、データベース間のアクティビティと傾向を比較し、異常を検出できます。 レポート自体は対話型です。Power View と Power Pivot を使用してデータを視覚化し、データベース、イベントの種類、時間枠などに従ってビューをスライスできます。レポートもカスタマイズ可能で拡張可能です。 必要に応じて、組織&rsquo;の要件に合わせて追加のレポートとビューを作成できます。 サンプル レポートを次に示します。</p>\n\n<blockquote>&nbsp;<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/audit-p5.jpg\"><img alt=\"audit p5\" class=\"alignnone size-medium wp-image-177031\" height=\"369\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/audit-p5-508x369.jpg\" width=\"508\"></a> <a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/audit-p6.png\"><img alt=\"audit p6\" class=\"alignnone size-medium wp-image-177041\" height=\"369\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/audit-p6-457x369.png\" width=\"457\"></a> <a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/image.png\">&nbsp;</a> <a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/image.png\">&nbsp;</a></blockquote>\n\n<h1>まとめ</h1>\n\n<p>監査では、イベントとデータベース アクティビティの追跡とログ記録によって、Azure SQL Databaseのセキュリティレイヤーが提供されます。 監査データを使用して、データベース アクティビティに関する分析情報を取得し、潜在的なセキュリティ上の懸念事項を特定し、違反の疑いがあるレコードが確実に存在することを確認し、コンプライアンス関連のタスクを容易にし、合理化することができます。 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-database-auditing-get-started/\">監査の概要</a>の詳細を確認するか、<a href=\"https://channel9.msdn.com/Shows/Data-Exposed/Auditing-in-Azure-SQL-Database\">Eyal と Scott on Channel 9</a> で、監査の利点とセットアップの簡単さについて説明します。 監査機能をすぐに使い始めることができますが、Basic、Standard、または プレミアム データベースを使用して (まだ行っていない&rsquo;場合は、<a href=\"https://azure.microsoft.com/en-us/services/preview/\">新しいサービス レベルのプレビューにサインアップ</a>する)、<a href=\"https://account.windowsazure.com/PreviewFeatures?fid=datasecurity\">監査プレビューにサインアップする</a>必要があります。 <a href=\"https://portal.azure.com/\">Azure プレビュー ポータル</a>でデータベースの監査を構成できます。 フィードバック&rsquo;をお待ちしておりますので、ぜひお試しください。ご意見をお聞かせください。</p>\n"
}