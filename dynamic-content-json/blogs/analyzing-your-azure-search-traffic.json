{
    "Slug": "analyzing-your-azure-search-traffic",
    "Title": "Azure Search トラフィックの分析",
    "Summary": "You told us you'd like to be able to know what's happening inside your search service and we are happy to announce we've rolled out the first phase of Search Traffic Analytics.",
    "Content": "<p>ユーザーを理解するために必要な最適なリソースは、サイトまたはアプリの検索ボックスです。ユーザーが何かを検索するたびに、ユーザーは必要なものを正確に伝えています。 検索を使用すると、ユーザーはアプリで必要なものを簡単に見つけることができますが、アプリの所有者は、ユーザーが何を探しているか、アプリがアプリで配信しているかどうかを理解することもできます。</p>\n\n<p>e コマース アプリを使用しているImagine、最も一般的なクエリが何であるかを知ることができる場合は、ユーザーに人気のある製品に関する貴重な情報が得られるか、まったく結果を返さないクエリがある場合は、在庫に追加できる現在提供されていない製品に関するヒントが得られます。</p>\n\n<p>検索<a href=\"https://feedback.azure.com/forums/263029-azure-search/suggestions/6847144-provide-some-sort-of-usage-feedback-qps\"></a>サービス内で発生している&#39;を知りたい&#39;、検索サービスの可視性を高め、ユーザーとその行動に関する分析情報を引き出すことができる Search Traffic Analytics の最初のフェーズがロールアウトされたことをお知らせします。</p>\n\n<p>では、どのように機能しますか? 検索サービスに対する要求が行われるたびに、必要に応じてその要求をいくつかの有用な情報と共にログに記録し、集計を行っていくつかの主要なメトリックを計算できます。 Search Traffic Analytics を有効にすると、これら 2 つのデータ ストリームが独自の<a href=\"https://azure.microsoft.com/en-us/services/storage/\">Azure Storage</a> アカウントにコピーされます。 特に、次&rsquo;の 2 つの BLOB コンテナーがあります。</p>\n\n<ul>\n <li><strong>操作ログ</strong>: これらは検索サービス ログです。すべての要求はこのコンテナーで使用できます。 これにより、最も検索対象の製品&rdquo;とは何か、どの検索語句が空の結果を返しているか、インデックス作成率や &ldquo;API バージョンの使用状況などの運用面など、&rdquo;ビジネス上の質問&ldquo;に回答できます。</li>\n <li><strong>メトリック</strong>: これらは、運用面の集計計算を提供します。 現在使用可能なメトリックは Latency のみですが、近いうちに QPS などの他のメトリックを追加する予定です。</li>\n</ul>\n\n<p>検索ドメインは大きく異なる場合があり、&rsquo;その理由の一部として、データ アクセス層と消費層と分析レイヤーを分離することにしました。 最適な方法でデータを操作および分析する柔軟性を提供したいと考えています。</p>\n\n<h2>Power BIを使用したデータの分析</h2>\n\n<p>非常に簡単に開始できるようにし、Power BIと&rsquo;提携して、数分で基本的なダッシュボードを用意し、独自のニーズに合わせてカスタマイズしたり、新しい視覚化を作成したり、チームとレポートを共有したりできる<a href=\"https://go.microsoft.com/fwlink/p/?LinkId=718214\">コンテンツ パック</a>を提供しました。</p>\n\n<p>Power BIを Azure Search Analytics ストレージに接続すると、サービスは過去 30 日間のデータを収集し、サービスのさまざまなディメンションに対して 4 つのレポートを生成します。</p>\n\n<h3>1.&nbsp;&nbsp;&nbsp; 検索<img alt=\"Search report\" border=\"0\" height=\"344\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3b582aef-0d15-48d9-b0a0-0ab7715716a0.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none\" title=\"検索レポート\" width=\"610\"></h3>\n\n<p>ユーザーの検索方法を一目で確認できます。 時間の経過に伴う検索ボリューム、最も一般的な検索クエリ、および結果のないクエリを確認できます。 また、インデックス間の検索分布と、時間の経過に伴って返されるドキュメントの数を示す 2 つの視覚化も含まれています。</p>\n\n<h3>2.&nbsp;&nbsp;&nbsp; インデックス作成</h3>\n\n<p><img alt=\"Indexing report\" border=\"0\" height=\"351\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/747df87f-7900-44b3-a904-bdcfafc049ab.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none\" title=\"インデックス作成レポート\" width=\"610\">前のレポートと同様ですが、この場合はインデックス作成操作に重点を置いています。 時間の経過と共にインデックスを作成したドキュメントの数を確認でき、特にインデックス作成負荷が高いサービスの場合は特に興味深いものとして、システムに負荷がかかっているかどうかを理解するのに役立つ 503s の数を示すグラフも含まれています。</p>\n\n<h3>3.&nbsp;&nbsp;&nbsp; サービス統計</h3>\n\n<p><img alt=\"Service stats report\" border=\"0\" height=\"343\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7dc8eb9d-caa6-40b8-802f-28891759f05d.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none\" title=\"サービス統計レポート\" width=\"610\"></p>\n\n<p>このレポートには、サービスに対して実行されたすべての操作に関する情報が含まれています。 API バージョンまたは操作カテゴリをドリルダウンすると、検索サービスが特定の結果を返す原因となったクエリを確認できます。 この最後の部分は、要求が失敗するバグを追跡するのに非常に役立ちます。</p>\n\n<h3>4.&nbsp;&nbsp;&nbsp; 待機時間</h3>\n\n<p><img alt=\"Latency report\" border=\"0\" height=\"346\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/37cf3d1d-6fe0-4bb5-a721-1117a54d52c8.png\" style=\"background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none\" title=\"待機時間レポート\" width=\"610\"><br>\nこのレポートでは、待機時間メトリックに関する詳細情報が表示されます。 検索とインデックス作成の待機時間と、クエリ負荷の増加をサポートするために追加のレプリカが必要かどうかを特定するために役立つすべての操作を含むシステム全体の待機時間を個別に調べることができます。</p>\n\n<p>必要に応じてレポートとダッシュボードを編集および変更し、重要なデータを強調表示することができます。 非常に高いデータ負荷やより具体的なビジネス上の質問など、より高度なシナリオを処理できる <a href=\"https://azure.microsoft.com/en-us/services/hdinsight/\">Azure HDInsight</a> サンプルに取り組んでいるので、ご期待ください。</p>\n\n<h2>検索トラフィック分析の有効化</h2>\n\n<p>この機能を有効にするには、Azure <a href=\"https://portal.azure.com/\">Portal</a> の [Azure Search] ブレードに移動し、設定の下に Search Traffic Analytics があります。 データの格納に使用するストレージ アカウント&rsquo;を選択し、必ず [ログとメトリック] を選択します。 検索サービスと同じリージョンにストレージ アカウントが必要です。 このストレージ アカウントには標準コストが適用されます。</p>\n\n<p>有効にすると、データは 5 分から 10 分以内にストレージ アカウントへのフローを開始します。 データは BLOB ストレージに JSON BLOB として格納され、コンテナーごとに 1 時間に 1 つのファイルが存在します。 Search Traffic Analytics を有効にする方法の詳細と、ログとメトリック スキーマの完全な説明については、 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/search-traffic-analytics\">ドキュメントを参照してください</a>。</p>\n\n<h2>最後に</h2>\n\n<p>プレビュー テスト フェーズで非常に満足しているお客様がいたので、この新しい利用可能なすべてのデータを使用することをお勧めします。 サービスに関する新しい情報が得られ、ユーザーにより良いエクスペリエンスを提供し、運用上の観点から検索サービスの動作をより深く把握できるようになります。 このデータのおかげで、お客様の 1 人がインデックス作成コードのバグを見つけて修正し、もう 1 つはすべてのコードパスを最新の API バージョンに更新しました。</p>\n\n<p>&rsquo;この機能がどのように役立つかを知るのを待つ必要があります。 <a href=\"https://portal.azure.com/#create/Microsoft.Search\">Azure Search</a> サービスにConnectし、ご自分の考<a href=\"https://feedback.azure.com/forums/263029-azure-search/\">えをお聞かせください</a>。</p>\n"
}