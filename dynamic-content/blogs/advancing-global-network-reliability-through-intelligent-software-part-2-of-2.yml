### YamlMime:Yaml
ms.openlocfilehash: 8c15e6dae476c0ce0aed4d847aa55fdb1070a787
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896660"
Slug: advancing-global-network-reliability-through-intelligent-software-part-2-of-2
Title: インテリジェント ソフトウェアによるグローバル ネットワークの信頼性の向上 -パート 2/2
Summary: インテリジェント ソフトウェアによるグローバル ネットワーク信頼性の向上に関する 2 部構成のシリーズでは、ネットワーク設計に取り組む方法と、信頼性とパフォーマンスの両方を向上させるために常に取り組んでいる方法について説明します。
Content: >-
  <p>Microsoft のグローバル ネットワークは、60 を超える Azure リージョン、220 を超える Azure データ センター、170 以上のエッジ サイトに接続し、165,000 マイルを超える地球およびサブシー ファイバーで世界中にまたがっています。<i>&rsquo;&ldquo;グローバル ネットワークは、戦略的に配置された世界中のエッジ ポイント オブ プレゼンス (PoP) でピアリングを介して、インターネットの残りの部分に接続します。毎日、世界中の何百万人もの人々が Microsoft Azure、Office 365、Dynamics 365、Xbox、Bing、その他多くの Microsoft クラウド サービスにアクセスしています。これは、1 日あたり数兆件の要求と、グローバル ネットワーク上で 1 秒ごとに転送されるテラバイト単位のデータに変換されます。このグローバル ネットワーク&rsquo;の信頼性が重要であるのは言うまでもなくです。そのため、Ive はプリンシパル プログラム マネージャー<b>の Mahesh Nayak</b> とプリンシパル ソフトウェア エンジニア<b>の Umesh</b> <b>Krishnaswamy </b>に、この 2 部構成の<a href="https://www.aka.ms/AdvancingReliability" target="_blank"></a>投稿を「進む信頼性」シリーズに書いてお願いしました。ネットワーク設計に取&rsquo;り組&rsquo;む方法と、信頼性とパフォーマンスの両方を向上させるために常に取り組む方法について説明します。&rdquo;&mdash;</i>Mark Russinovich、CTO、Azure</p>


  <hr>

  <p><i>インテリジェント <a href="https://azure.microsoft.com/en-us/blog/advancing-global-network-reliability-through-intelligent-software-part-1-of-2/" target="_blank">ソフトウェアによるグローバル ネットワーク信頼性の向上パート 1 に関する記事を参照してください</a>。</i></p>


  <p>このネットワークの投稿のパート 1 では、グローバル ネットワークの主要な設計原則を提示し、変更をエミュレートする方法、ゼロ タッチ操作と変更の自動化、容量計画について説明しました。 パート 2 では、トラフィック管理から始める。 弊社のような大規模なネットワークでは、従来のハードウェアで管理されたトラフィック ルーティングを使用する方が効率的ではありません。 代わりに、グローバル ネットワークでトラフィック エンジニアリングをインテリジェントに管理するためのソフトウェア ベースのソリューションをいくつか開発しました。</p>


  <h4>&nbsp;</h4>


  <h2>SDN ベースのインターネット トラフィック エンジニアリング (ITE)</h2>


  <p>エッジは、ユーザーが&mdash; Microsofts サービスに接続する方法がエッジなので、グローバル ネットワークの最も動的な部分&rsquo;です。 Microsoft では、顧客/ネットワークの待ち時間を短縮し、Microsoft クラウド サービスの範囲を拡大するために、ユーザーの近くにエッジ PoP を戦略的にデプロイしました。</p>


  <p>たとえば、オーストラリアのシドニーのユーザーがシカゴでホストされている Azure リソースにアクセスした場合、米国のトラフィックはシドニーのエッジ PoP で Microsoft ネットワークに入り、ネットワーク上でシカゴでホストされているサービスに移動します。 シカゴの Azure からのリターン トラフィックは、Microsoft ネットワーク上のシドニーに戻されます。 ユーザーに最も近いポイントにトラフィックを受け入れて配信することで、パフォーマンスをより良く制御できます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0d0fe7d2-f92c-4707-b19b-36f9cc81236f.jpg"><img alt="Azure Edge premium routing." border="0" height="258" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f6a8b6c5-2f2b-4482-a686-128067a19cd5.jpg" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Azure Edge Premium ルーティング。" width="1248"></a></p>


  <p>各エッジ PoP は、数十または数百のピアリング ネットワークに接続されます。 ネットワークネットワークとプロバイダー ネットワーク間のルート&rsquo; は、ネットワーク ネットワーク (BGP) Border Gateway Protocol交換されます。 BGP の最適なパスの選択には、輻輳の&mdash;固有の概念はありません。または、BGP 容量に対応している必要があります。 そこで、エッジでトラフィックを制御する SDN ベースのインターネット トラフィック エンジニアリング (ITE) システムを開発しました。 &rsquo;エントリ ポイントと終了ポイントは、エッジのトラフィック負荷、インターネット パートナーの容量の制約、容量の削減または拡張、分散型サービス拒否攻撃による需要の急増、およびインターネット パートナーの待機時間のパフォーマンスに基づいて動的に変更されます。 ITE コントローラーは、これらのシグナルを常に監視し、Microsoft のインターネット パートナーや Microsoft ネットワーク内でアドバタイズされたルートにアドバタイズするルートを変更して、最適なピア エッジを選択します。</p>


  <h2>Azure Peering Service を使用した最終マイルの回復性の最適化</h2>


  <p><a href="https://docs.microsoft.com/en-us/azure/peering-service/about" target="_blank">Azure Peering Service</a> は、グローバル ネットワーク内のルートの最適化に加えて、最適化された接続をインターネット サービス プロバイダー (ISP) のネットワークの最後のマイルまで拡張します。 Azure Peering Serviceは、ユーザーから Microsoft ネットワークへの信頼性の高い高パフォーマンス接続を可能にする、プロバイダーとのコラボレーション プラットフォームです。 このパートナーシップにより、ローカルおよび geo の冗長性とエンド ユーザーとの近接性が確保されます。 ピアリングの各場所は、冗長なさまざまなピアリング リンクを使用してプロビジョニングされます。 また、プロバイダーは複数の Microsoft PoP の場所で相互接続され、エッジ ノードの 1 つでパフォーマンスが低下した場合、トラフィックは代替サイト経由で Microsoft との間でルーティングされます。 インターネットのマップ (MOI) からのインターネット パフォーマンス テレメトリは、最適化された最終マイルのパフォーマンスのためにトラフィックの運営を駆動します。</p>


  <h2>ルート異常検出と修復 (RADAR)</h2>


  <p>インターネットは BGP で実行されます。 ネットワークまたは自律システムは、その証明に疑問を持たることなく、ピアによってアドバタイズされたルートを信頼、受け入れ、伝達するためにバインドされます。 これは BGP の強みであり、インターネットを迅速に更新し、障害を回復することができます。 ただし、ネットワークが所有&mdash;するプレフィックスへのパスは、トラフィックをリダイレクト、インターセプト、またはブラックホールするために、意図が悪意を持って変更される可能性があります。 すべての主要なプロバイダーに発生するインシデントと、フロント ページのニュースを作成するインシデントがいくつかあります。 グローバル ネットワークを保護するために、グローバルルート異常検出および修復 (RADAR) システムを開発しました。</p>


  <p>RADAR は、インターネット上の Microsoft ルート ハイジャックを検出して軽減します。 BGP ルート リークは、目的のスコープを超えたルーティングアナウンスの伝達です。 RADAR は、Azure とインターネットでのルート リークを検出します。 安定したバージョンと不安定なバージョンのルートを識別し、新しいアナウンスを検証できます。 RADAR と ITE コントローラーを使用して、Microsoft プレフィックスのリアルタイム保護を構築しました。 Peering Serviceプラットフォームを使用すると、顧客の場所までの最後の 1 マイルでハイジャック、リーク、その他の BGP の誤った構成 (意図または構成されていない) に対するルートの監視と保護が拡張されます。</p>


  <h2>ソフトウェア駆動型ワイド エリア ネットワーク (AREA)</h2>


  <p>グローバル ネットワークのバックボーンは、主要都市を結ぶ高速道路システムに類似しています。 実質的に、各車両のルートを割り当てるナビゲーション システムは、すべての車両ができるだけ早く目的地に到達し、幹線道路の輻輳を引き起こさずに到達するナビゲーション システムです。 システムは、トポロジ検出、需要予測、パス計算、最適化、ルート プログラミングで構成されます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b8a68c48-2ec6-4645-97ca-c867e6812731.png"><img alt="Optimized risk diverse path computation." border="0" height="312" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5ed23a83-6aa9-4f9b-8af7-1fc0743f8b7b.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="最適化されたリスクの多様なパス計算。" width="624"></a></p>


  <p>過去 12 か月間に、ネットワークをプログラムするコントローラーの速度が桁違い向上し、ルート検索機能が 2 倍向上しました。 リンクエラーはレーン クロージャに似たものなので、コントローラーは輻輳を減らしてルートを再計算する必要があります。 コントローラーは、プライマリ ルートの障害が発生した場合にバックアップ ルートを計算するために、同じ共有リスク リンク グループ (SRLG) を使用します。 バックアップ ルートは障害が発生するとすぐにアクティブ化され、コントローラーはトラフィックの配置を再最適化する際に機能します。 連続して上下に移動するリンクは、安定するまでサービスから引き続き保持されます。</p>


  <p>信頼性の尺度の 1 つは、要求されたバイトに正常に送信されたバイトの割合です。1 時間以上に測定され、その日の平均です。 お客様のワークロードでは、99.999% 以上です。 ネットワーク間のすべての通信Microsoft サービス専用のグローバル ネットワークを介して行います。 <a href="https://marketo-web.thousandeyes.com/rs/thousandeyes/images/ThousandEyes-Cloud-Performance-Benchmark-2019-2020-Edition.pdf" target="_blank">Thousand Eyes Cloud Performance Benchmark</a> は、Azure リージョン間の待機時間の 99% を超える方がパフォーマンス ベースラインよりも速く、リージョン ペアの 60% 以上が少なくとも 10% 高速である、と報告しています。 これは、この投稿で説明されている容量拡張とソフトウェア システムの結果です。</p>


  <h2>Bandwidth Brokersoftware-driven&mdash; Network Quality of Service (QoS)</h2>


  <p>グローバル ネットワークが高速道路システムの場合、Bandwidth Broker は、高速道路のオンラムで測定ライトを制御するシステムです。 顧客の車両ごとに、高速道路を通過する複数の Microsoft 車両があります。 一部の Microsoft 車両は随意であり、顧客の車両の輻輳を回避するために延期できます。 顧客の車両には、常に高速道路に入るフリー パスがあります。 通常の操作では測定ライトは緑色ですが、障害や需要の急増が発生した場合、帯域幅ブローカーは制御された方法で測定ライトをオンにします。 Microsoft の内部ワークロードは、それぞれ優先順位が異なるトラフィック層に分割されます。 優先度の高いワークロードは、優先順位の低いワークロードよりも優先されます。</p>


  <p>ブローカーは、送信ホストで行われます。 ホストは、ホストで実行されているアプリケーションに代わって帯域幅を定期的に要求します。 要求はコントローラーによって集計され、帯域幅は予約され、許可は各ホストに送信されます。 帯域幅ブローカーと、トラフィック ボリュームを調整してルートに合わせて調整し、トラフィック ルートをボリュームに合わせて調整します。</p>


  <p>ネットワーク容量を突然削減する複数のファイバー カットまたは障害が発生する可能性があります。 回復性を高める geo レプリケーション操作により、ネットワーク トラフィックが大幅に急増する可能性があります。 Bandwidth Broker では、一般に、輻輳が差し迫っているときに随意の内部ワークロードを流し込み、これらの条件の間、カスタマー エクスペリエンスを維持できます。</p>


  <h2>継続的な監視</h2>


  <p>堅牢な監視ソリューションは、より高いネットワーク信頼性を実現するための基盤です。 検出時間と修復時間の両方が削減されます。 監視パイプラインでは、トラフィック統計、正常性シグナル、ログ、デバイス構成など、いくつかのテレメトリ ストリームが絶えず分析されます。 異常が検出されると、パイプラインにより多くのデータが自動的に収集され、一般的な障害が診断および修復されます。 これらの自動介入は、安全性チェック システムによっても保護されます。</p>


  <p>監視への主な投資は次の目的です。</p>


  <ul>
      <li>メトリック データのポーリングと取り込み (分単位の速度)。 一時的なデータをフィルター処理するにはいくつかのサンプルが必要であり、強力なシグナルを生成するにはさらにいくつかのサンプルが必要です。 これにより、検出時間が短縮されます。</li>
      <li>パケット損失または待ち時間アラートによってトリガーされる拡張診断システムは、さまざまなポイントのエージェントに対して、特定のリンクまたはデバイスへの問題の三角化と特定に役立つ追加情報の収集を指示します。</li>
      <li>強化された診断では、Clockwerk と Real Time Operation Checker (ROC) を利用して、最も一般的なインシデントの自動軽減と修復アクションがトリガーされます。 これにより、修復時間が短縮され、エンジニアが複雑なインシデントに集中し続けるという波及効果があります。</li>
  </ul>


  <p>他のパイプラインでは、ノード &ldquo;の分離についてネットワーク グラフを継続的に監視し、前述のように ROC を使用して What-if&rdquo; 意図を使用してリスクを定期的に評価します。 リージョン全体で到達可能性、待機時間、パケット損失をチェックするネットワーク全体に複数のカナリア エージェントがデプロイされています。 これには、外部からの監視を有効にするために、Azure 内のエージェントとネットワークの外部のエージェントが含まれます。 また、インターネットのマップ (MOI) テレメトリを定期的に分析して、顧客から Azure へのエンド エンド のパフォーマンスを測定します。 最後に、BGP ルート ハイジャックや分散型サービス拒否 (DDoS) などのセキュリティ攻撃からネットワークを保護するための堅牢な監視を行いました。</p>


  <h2>まとめ</h2>


  <p>これらの SDN テクノロジの一部 (SONIC など) をオープンソースで提供 <u><a href="https://github.com/Azure/SONiC/wiki" target="_blank">しています</a></u>。 SONIC とその急速に成長するハードウェアおよびソフトウェア パートナーのエコシステムにより、インテリジェントな新しい方法でネットワークを運用および管理し、ネットワーク自体をより迅速に進化できます。 また、<u><a href="https://docs.microsoft.com/en-us/azure/expressroute/expressroute-global-reach" target="_blank">ExpressRoute Global Reach</a></u>、<u><a href="https://azure.microsoft.com/en-us/services/virtual-wan/" target="_blank">Azure Virtual WAN</a></u>、<u><a href="https://azure.microsoft.com/en-us/updates/global-vnet-peering-general-availability/" target="_blank">Global VNET ピアリング</a></u>、<u><a href="https://docs.microsoft.com/en-us/azure/peering-service/about" target="_blank">Azure Peering Service</a></u> などのサービスを構築し、Microsoft グローバル ネットワーク上に独自のオーバーレイを構築することができます。</p>


  <p>ソフトウェアとハードウェアのイノベーションにより、グローバル ネットワークの回復性に継続的に投資し、強化しています。 光ファイバーへの投資により、大陸内と大陸間の両方で回復性、パフォーマンス、信頼性が向上しています。 <a href="https://news.microsoft.com/marea/" target="_blank">業界初の</a>サブ&rsquo;シー オープン ライン システム (OLS) は、業界初のケーブル システムです。 これは、OLS コンストラクトに従っている後続のすべてのケーブル ビルドのブループリントです。 これらのシステムを簡単にアップグレードし、ネットワークのすべての部分で同種のプラットフォームを維持する機能により、Microsoft は需要の増加にシームレスに対応できます。</p>


  <p><i>インテリジェント <a href="https://azure.microsoft.com/en-us/blog/advancing-global-network-reliability-through-intelligent-software-part-1-of-2/" target="_blank">ソフトウェアによるグローバル ネットワーク信頼性の向上パート 1 に関する記事を参照してください</a>。</i></p>
