### YamlMime:Yaml
ms.openlocfilehash: 5ab7d8edb31307843c431513562e851dae3ffdc0
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891274"
Slug: announcing-azure-resource-manager-support-azure-automation-runbooks
Title: Azure Automation runbook での Azure Resource Manager サポートの発表
Summary: Azure Automation runbook での Azure Resource Manager の新しい既定のサポートについて説明します。
Content: >-
  <p><strong>更新プログラム 2/22/2016: </strong>一般的なユーザーの質問に回答するために、現在、Automation サービスで追加のモジュール/新しいバージョンのモジュールがすぐに出荷されるタイミングはありません。 現在グローバルに出荷されているもの以外に追加の要件がある場合は、これらのモジュールまたはモジュールのバージョンをユーザーモジュールとしてインポートする必要があります。 新しいガイダンスとし<strong>て</strong>、 <strong>Azure/azurerm モジュールの最新バージョンがユーザーモジュールとして automation アカウントにインポートされている場合は、最新バージョンのすべての Azure/azurerm モジュール (Azure Automation のすぐに出荷されるモジュールではありません) を automation アカウントにインポート</strong>して、後で、または後で Azure Automation 後に発生する可能性があるバージョン不一致の問題を回避する必要があります (またはそれ以降のバージョン) Azure/AzureRM モジュールをグローバルモジュールとして。 ユーザーモジュールとして Azure/AzureRM モジュールをインポートする手順については、こちらを参照してください。</p>


  <p><strong>更新プログラム 2/1/2016: </strong>次の投稿 &nbsp; では、Azure Automation のボックスに同梱されていない azurerm モジュールのみが AzureRM. Compute および AzureRM. profile であることが示されています。 現在、いくつかの追加の &nbsp; azurerm モジュールをすぐにご利用いただけるようになりました。 Storage、Azure. Storage、azurerm. Automation、azurerm .resources、および azurerm .sql です。 これらのモジュールは、追加の作業を行わずに、Automation アカウント内で使用できるようにする必要があります。 &nbsp;これらのモジュールのいずれかのバージョンを既に automation アカウントにインポートしている場合は、これらのモジュールを削除して、automation アカウントでこれらのモジュール &nbsp; のグローバルバージョンの使用を開始することができます。</p>


  <p>&nbsp;</p>


  <p>Azure の新しい <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-overview/">Azure Resource Manager</a> 管理レイヤーによって導入された azure の機能の多くは、Azure Automation の Azure Resource Manager コマンドレットをすぐにサポートする <a href="https://feedback.azure.com/forums/246290-azure-automation/suggestions/6634825-enable-azureresourcemanager-module-in-azure-automa">ようになり</a> ました。 Azure Automation これにより、新しい azure のすべての機能を簡単に自動化できます。 以前は<a href="https://azure.microsoft.com/en-us/blog/using-azure-resource-manager-in-azure-automation-runbooks/">手動でモジュールをインポートする方法を説明</a>しまし &rsquo; た。これにより、ユーザー自身のブロックを解除し、Azure Automation で Azure Resource Manager を使用できるようになりますが、すぐに使用できるようになりました。 &hellip; &rsquo;Azure Automation に Azure Resource Manager コマンドレットの発送を開始したことをお知らせ &rsquo; します。</p>


  <p>でも、実際の例を見てみましょう &rsquo; 。 たとえば、azure クラシック仮想マシン (Azure サービス管理を通じて) と、同じ runbook から (Azure Resource Manager を通じて) すばらしい新しい V2 仮想マシンの両方に対するアクションを自動化するとします。 Azure Automation で非常にシンプルになりました &rsquo; 。 この PowerShell スクリプト runbook を例として使用してみましょう &rsquo; 。</p>


  <pre>

  # TODO: update to the name of the credential asset in your Automation account

  $AutomationCredentialAssetName = &quot;AzureCreds&quot;


  # Get the credential asset with access to my Azure subscription

  $Cred = Get-AutomationPSCredential -Name $AutomationCredentialAssetName


  # Authenticate to Azure Service Management and Azure Resource Manager

  Add-AzureAccount -Credential $Cred | Out-Null

  Add-AzureRmAccount -Credential $Cred | Out-Null


  # Get and output Azure classic VMs

  $VMs = Get-AzureVM

  $VMs.Name

  &quot;`n--------------`n&quot;


  # Get and output Azure v2 VMs

  $VMsv2 = Get-AzureRmVM

  $VMsv2.Name</pre>


  <p>モジュールをインポートせずに、Azure サブスクリプションの出力に対してこれを実行します。</p>


  <p><img alt="Announcing Azure Resource Manager support in Azure Automation runbooks" border="0" height="300" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/61391a23-5ca4-4555-96d0-bcd0019f2e16.png" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" title="Azure Automation runbook での Azure Resource Manager サポートの発表" width="360"></p>


  <p>これは、Azure サブスクリプション内の Vm によって正しく表示されます。</p>


  <p><img alt="Announcing Azure Resource Manager support in Azure Automation runbooks" border="0" height="200" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/066d3dbd-08cc-4dd6-b02d-4633cdfc7fe3.png" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" title="Azure Automation runbook での Azure Resource Manager サポートの発表" width="360"></p>


  <p>&nbsp;</p>


  <p><img alt="Announcing Azure Resource Manager support in Azure Automation runbooks" border="0" height="360" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/50b7409c-fe8e-49d5-aa31-3403b4cc7db2.png" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" title="Azure Automation runbook での Azure Resource Manager サポートの発表" width="326"></p>


  <p>Azure サービス管理コマンドレットと同様に、Azure Resource Manager のコマンドレットは、 <a href="https://azure.microsoft.com/en-us/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/">ユーザープリンシパルの組織 id</a> &ndash; を使用した認証をサポートしています。この認証を行うには、わずかに異なるコマンドレットを使用します (azureaccount ではなく connect-azurermaccount)。 Azure Resource Manager のコマンドレットは、Azure Automation では<a href="https://github.com/Azure/azure-powershell/issues/655">バグ</a>がまだサポートされていないため、<a href="https://blog.davidebbo.com/2014/12/azure-service-principal.html">サービスプリンシパル認証</a>もサポートしています。</p>


  <p>現時点では、 <a href="https://www.powershellgallery.com/packages/AzureRM.profile/">Azurerm. profile</a> と <a href="https://www.powershellgallery.com/packages/AzureRM.Compute/">Azurerm. Compute</a> PowerShell モジュールのみが、Azure Automation のグローバルモジュールとしてすぐに出荷されますが、今後数か月にわたってグローバルモジュールとして、より多くの Azure Resource Manager モジュールが導入される予定です。 現時点では、Azure V2 仮想マシンの管理を自動化しようとしている場合 (営業時間後に Vm を自動的にシャットダウンし、業務時間の開始前に自動的に開始することによってコストを削減する場合など)、これを行うことができます。 これらの手順に従って、お客様のシナリオに必要な追加 (またはそれ以降のバージョン) &nbsp; の Azure/Azure Resource Manager モジュールを手動でインポートすることができます。 新しいガイダンスとし<b>て</b>、 <strong>Azure/azurerm モジュールの最新バージョンがユーザーモジュールとして automation アカウントにインポートされている場合は、最新バージョンのすべての Azure/azurerm モジュール (Azure Automation のすぐに出荷されるモジュールではありません) を automation アカウントにインポート</strong>して、後で、または後で Azure Automation 後に発生する可能性があるバージョン不一致の問題を回避する必要があります (またはそれ以降のバージョン) Azure/AzureRM モジュールをグローバルモジュールとして。</p>


  <p>Azure Automation で使用できる特定の Azure Resource Manager 機能を探していますか? お探しのモジュールまたは機能をコメントに投稿してください。これにより、出荷する &rsquo; モジュールの順序に優先順位を付けることができます。</p>


  <p>Azure Automation を使い始めたばかりですか? <a href="https://aka.ms/Q2p1ap">ここで</a>サービスについて説明し、 <a href="https://twitter.com/AzureAutomation">Twitter</a>の Azure Automation に従います。</p>
