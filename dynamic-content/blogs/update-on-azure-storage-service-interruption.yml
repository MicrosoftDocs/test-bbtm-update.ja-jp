### YamlMime:Yaml
ms.openlocfilehash: 1f3fad77ffb30ac06fa630ebbffd6ec2e9ce7180
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139888920"
Slug: update-on-azure-storage-service-interruption
Title: Azure Storage サービスの中断に関する更新
Summary: Azure storage サービスでは、従来の夜の太平洋標準時に、これらのリージョンの複数のクラウドサービスに影響を与える、アジアの米国、ヨーロッパ、および部分でサービスの中断が発生しました。  まず、このような中断を切にお詫びします。
Content: >-
  <b>更新: 11/22/2014、12:41 PM PST</b>


  水曜日以降は、お客様のサブセットに対して、火曜日のストレージサービスの中断から完全に復旧するための最後の手順を実行するために取り組んでいます。 インシデントが解決され、システムに通常のアクティビティが表示されるようになりました。更新プログラムは、ステータスダッシュボード <a href="https://azure.microsoft.com/en-us/status/">https://azure.microsoft.com/en-us/status</a> で確認できます。 インシデントが原因でまだ問題が発生していると思われる場合は、にお問い合わせ <a href="mailto:azcommsm@microsoft.com">azcommsm@microsoft.com</a> ください。サポート契約があるかどうかに関係なく、お客様の支援を受けることができます。 このインシデントの通信に関するフィードバックをお送りいただき、ありがとうございます。 今後の計画にそのフィードバックを組み込むことに積極的に取り組んでいます。


  &nbsp;


  <strong>水曜日、11月、19日、2014</strong>


  Azure Storage のパフォーマンス更新プログラムの一部として、Virtual Machines、Visual Studio Online、Websites、Search などの Microsoft サービスを使用して Azure Storage を利用してサービス全体の容量を削減する問題が検出されました。 パフォーマンス更新プログラムを適用する前に、Azure テーブルの顧客向けストレージサービスのサブセットで数週間以上テストされています。 通常は、この "flighting" を呼び出します。これは、更新プログラムを広範に展開する前に問題を特定するためです。 フライトテストでは、顕著なパフォーマンス向上が実証され、ストレージサービス全体に更新プログラムがデプロイされています。 ロールアウト中に、ストレージ blob フロントエンドが無限ループになるという問題が検出されました。これは、flighting 中に検出されなくなりました。 この結果、フロントエンドがトラフィックを処理できなくなりました。さらに、上に構築された他のサービスの問題が発生していました。


  この問題が検出されると、変更はすぐにロールバックされましたが、更新を完全に元に戻すためには、ストレージフロントエンドの再起動が必要でした。 軽減手順がデプロイされると、ほとんどのお客様は、影響を受けるリージョン全体で可用性の向上を確認できました。 通常、サービスはオンラインに戻りますが、一部の顧客には断続的な問題が発生しています。また、エンジニアリングチームとサポートチームは、この時間を通じてお客様を支援するために積極的に関与しています。


  このようなインシデントが発生した場合の主な目的は、お客様の回復にかかる時間を短縮することですが、問題の原因を詳しく調査して、再度発生しないことを確認することもできます。Microsoft では、お客様のプラットフォームにおけるお客様のエクスペリエンスの向上に継続的に取り組みます。このブログを RCA (根本原因分析) で更新し、お客様が問題の対処方法と今後の改善点を理解できるようにします。

  <h2>Azure のお客様への更新:</h2>

  今後も同様の状況を避けるために、このイベントの原因を調査し、必要な改善を推進します。 それまでの間は、状態と検出されたギャップについて、現在の理解を共有することが重要であると考えています。

  <table border="0" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="623"><strong>インシデント情報</strong>

  <table border="0" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="top" width="121"><strong>インシデント ID</strong></td>

  <td valign="top" width="630">3071402</td>

  </tr>

  <tr>

  <td valign="top" width="121"><strong>インシデントのタイトル</strong></td>

  <td valign="top" width="630">Microsoft Azure サービスインシデント: 複数の Azure サービスへの接続-部分サービスの中断</td>

  </tr>

  <tr>

  <td valign="top" width="121"><strong>影響を受けたサービス</strong></td>

  <td valign="top" width="630">Azure Storage、Virtual Machines、SQL Geo リストア、SQL Import/export、Websites、Azure Search、Azure Cache、管理ポータル、Service Bus、Event Hubs、Visual Studio、Machine Learning、HDInsights、Automation、Virtual Network、Stream Analytics、Active Directory、StorSimple、および Azure Backup サービス</td>

  </tr>

  </tbody>

  </table>

  <strong>インシデントの開始日時</strong>


  11/19/2014 00:51:00 AM (UTC)


  <strong>日付と時刻のサービスが復元されました</strong>


  11/19/2014 11:45:00 AM (UTC)


  <strong>まとめ</strong>


  2014年11月19日に Azure Storage サービスは、以下の「影響を受けるリージョン」に記載されているリージョン間で断続的に使用できなくなりました。 影響を受ける Azure Storage サービスに依存関係がある Microsoft Azure サービスとカスタマーサービスも影響を受けました。 これには、Service Health ダッシュボードと管理ポータルが含まれます。 この中断は、Azure Storage フロントエンドコンポーネントで構成の変更が行われたときにトリガーされたバグが原因で発生しました。これにより、Blob Front-Ends がトラフィックを受けられなくなります。


  構成の変更は、パフォーマンスを向上させ、Azure テーブルフロントエンドの CPU フットプリントを減らすために、Azure Storage の更新の一部として導入されました。 この変更は、過去数週間にわたっていくつかの実稼働クラスターにデプロイされており、テーブルフロントエンドで想定どおりに実行されていました。


  Azure Storage サービスのパフォーマンスを向上させるための計画の一環として、運用サービス全体に対して構成の変更をプッシュすることを決定しました。


  Blob Front-Ends の構成の変更により、Blob フロントエンドのバグが公開されました。これは、以前にテーブルのフロントエンドで想定どおりに実行されています。 このバグにより、Blob Front-Ends が無限ループに入るため、トラフィックを受け取ることができなくなりました。


  しかし、この問題は、運用上のエラーによってほとんどのリージョンにわたって短時間で更新が行われていたため、規模が拡大しています。これは、増分バッチで運用環境の変更を適用するための標準のプロトコルに従うことではありません。


  問題が検出されると、構成の変更はすぐに元に戻されました。 ただし、Blob Front-Ends は、更新によってトリガーされる無限ループに入ったため、再起動せずに構成を更新できませんでした。 これにより、復旧に時間がかかるようになりました。 Azure チームは、軽減手順を調査し、検証しました。 軽減手順がデプロイされると、ほとんどのお客様は、リージョン全体で 11/19/2014 11:45:00 AM UTC で可用性が向上したことを確認できました。 IaaS Virtual Machines (Vm) を使用していたお客様のサブセットは、リモートデスクトッププロトコル (RDP) と SSH を通じて Vm に接続できないことを報告しました。


  <strong>顧客への影響</strong>


  Azure Storage Services を使用しているお客様は、Storage Blob、テーブル、およびキューに接続しようとすると、タイムアウトまたは接続の問題が発生する可能性があります。 Storage サービスに依存している Azure サービスも影響を受けましたが、影響を受けるサービスと IaaS Virtual Machines (vm) で利用できない問題が発生している可能性があります。


  <strong>通信とサポート</strong>


  Service Health ダッシュボードを使用してタイムリーに更新を行う機能に影響を与える Azure インフラストラクチャの問題が発生しました。 軽減策として、Twitter とその他のソーシャルメディアフォーラムを活用しています。 また、影響を受けるお客様のために、管理ポータルに対する対象となるコミュニケーションも提供しています。 Service Health ダッシュボードへの影響のため、障害の最初の3時間目には、タイムリーな更新プログラムは反映されませんでした。


  Service Health のダッシュボードと管理ポータルに依存関係があるダウンストリームサポートも影響を受けており、障害の初期段階で顧客を新しいサポートケースを作成することを制限しています。また、影響を受ける顧客に対する更新機能は、大文字と小文字が多いために遅れていました。


  <strong>影響を受けるリージョン</strong> 次のリージョンの顧客のサブセットが影響を受けました。

  <table border="0" cellspacing="0" cellpadding="0">

  <tbody>

  <tr>

  <td valign="bottom" width="149"><b>報酬 </b></td>

  </tr>

  <tr>

  <td valign="bottom" width="149">米国中部</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">米国東部</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">米国東部 2</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">米国中北部</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">米国中南部</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">米国西部</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">北ヨーロッパ</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">西ヨーロッパ</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">東アジア</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">東南アジア</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">東日本</td>

  </tr>

  <tr>

  <td valign="bottom" width="149">西日本</td>

  </tr>

  </tbody>

  </table>

  <strong>根本原因</strong>


  Blob Front-Ends のバグ。パフォーマンス向上のために、構成の変更によって公開されました。これにより、Blob Front-Ends が無限ループに入るようになりました。


  <strong>次の手順</strong>


  このようなインシデントが今後発生しないようにするために、Microsoft Azure プラットフォームとプロセスを改善するための手順を実行しています。この場合は、次のものが含まれます (ただし、これに限定されません)。

  <ul>
      <li>増分バッチで運用の変更を適用するための標準プロトコルを適用する展開ツールが常に実行されていることを確認します。</li>
      <li>復旧にかかる時間を最小限に抑えるために、回復方法を改善します。</li>
      <li>Blob Front-Ends からの CPU 削減による無限ループのバグを修正してから、実稼働環境に展開します。</li>
      <li>Service Health ダッシュボードのインフラストラクチャとプロトコルを改善します。</li>
  </ul>

  これによる影響と不便をお詫びします。


  敬具


  Microsoft Azure チーム


  <a href="https://go.microsoft.com/fwlink/?LinkID=131004">プライバシーに関する声明</a></td>

  </tr>

  </tbody>

  </table>
