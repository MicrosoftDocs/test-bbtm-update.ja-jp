### YamlMime:Yaml
ms.openlocfilehash: 5f17c8cb5d7fdb6ecbf7315a9e35a3b203969767
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892629"
Slug: securing-your-connection-string-in-windows-azure-part-1
Title: 'Windows Azure での接続文字列のセキュリティ保護: パート1'
Summary: '[この記事は SQL Azure チームによって提供されました。]高度にセキュリティで保護された SQL Azure 環境を実行する際に直面する課題の1つは、接続文字列を安全に SQL Azure することです。 ...'
Content: '<p>[この記事は SQL Azure チームによって提供されました。]</p><p>高度にセキュリティで保護された SQL Azure 環境を実行する際に直面する課題の1つは、接続文字列を安全に SQL Azure することです。 Windows azure を実行している場合は、この接続文字列を Windows azure コードに提供する必要がありますが、Windows azure パッケージを作成する開発スタッフに実稼働データベースのパスワードを提供する必要はありません。 この一連のブログ記事では、Windows Azure 環境で SQL Azure 接続文字列をセキュリティで保護する方法について説明します。</p>  <h2>シナリオのスコープ設定</h2>  <p>セキュリティ対策を使用しない場合、接続文字列はプレーンテキストで表示され、ログインとパスワードを実稼働データベースに含めます。 目標は、azure Windows で実行されているコードで接続文字列を読み取ることができるようにすることです。ただし、Windows azure デプロイ用のパッケージを作成する開発者は、この接続文字列を読み取ることができません。 これを行うには、接続文字列のロックを解除するための "シークレット" を Azure が認識している必要がありますが、パッケージを作成しようとしている開発者は、このようなことを Windows 必要があります。 パッケージ内のすべてのファイルにアクセスできる場合、これはどのように行われますか。</p>  <h2>Windows Azure 証明書ストアの使用</h2>  <p>azure の "認識" されているのは、azure 証明書ストア Windows に証明書を事前にデプロイすることだけであるという秘密の Windows です。 この証明書には、公開キーと秘密キーのペアの秘密キーが含まれています。 azure Windows は、この秘密キーを使用して、Windows azure パッケージの構成ファイルにデプロイされている暗号化された接続文字列の暗号化を解除します。 公開キーは、接続文字列を暗号化する必要があるユーザーに渡されます。 公開キーを持つユーザーは、それを使用して接続文字列を暗号化できますが、暗号化された接続文字列を読み取ることはできません。</p>  <p>この手法では、次の3種類のユーザーがあります。</p>  <ol>   <li>秘密キーの保有者 (Windows azure 管理者) は、秘密キーと公開キーのペアを生成し、秘密キーのバックアップを格納し、秘密キーを Azure Windows に配置する、非常に安全なユーザーです。 接続文字列をデコードできるのは、Azure Windows のみです。 </li>    <li>SQL 管理者は、接続文字列を知っており、(Windows Azure 管理者から得た) 公開キーを使用して接続文字列をエンコードしています。 エンコードされたバイトは、web.config の web 開発者に提供します。 </li>    <li>Windows Azure パッケージを作成する Web 開発者は、公開キー (すべてのユーザーがアクセスできる) を認識しますが、SQL パスワードを取得できないように、接続文字列や秘密キーは認識していません。 </li> </ol>  <h2>証明書の作成</h2>  <p>Azure 管理者 (秘密キー所有者) Windows は、まずローカルコンピューターを使用して証明書を作成する必要があります。 これを行うには Visual Studio 2008 または2010がインストールされている必要があります。 プライベートキーと公開キーのペアの作成に通常使用する手法は、makecert.exe と呼ばれるプログラムです。</p>  <p>.Pfx 形式で自己署名証明書を作成する手順を次に示します。</p>  <ol>   <li>Visual Studio コマンドプロンプト (管理者として実行) を開くと、[スタート] メニューの [Visual Studio ツール] にコマンドプロンプトが表示されます。 </li>    <li>次のコマンドを実行します。      <p><i></i></p>      <p><b>makecert-r-pe-n &quot; CN = azureconfig &quot; -空の exchange &quot; azureconfig. .cer &quot; -sv &quot; azureconfig. .pvk&quot;</b></p>      <p><b></b></p>      <p><a href=""><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image002" border="0" alt="clip_image002" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5635.clip_5F00_image002_5F00_thumb.jpg" width="644" height="333"></a><b></b></p>      <p><b></b></p>   </li>    <li>秘密キーを3回セキュリティで保護するために、パスワードの入力を求められます。 任意のパスワードを入力します。      <p><a href=""><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image003" border="0" alt="clip_image003" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6708.clip_5F00_image003_5F00_thumb.png" width="377" height="269"></a></p>   </li>    <li>これにより、 <b>azureconfig .cer</b> (公開キー証明書) と <b>azureconfig. .pvk </b>(秘密キーファイル)<b> </b>ファイルが生成されます。 </li>    <li>次のコマンドを入力して .pfx ファイルを作成します (この形式は、秘密キーを Windows Azure にインポートするために使用されます)。 <b>– Pi</b>スイッチの後に、選択したパスワードを入力します。 <b></b>      <p><b></b></p>      <p><b>&quot; &quot; pvk2pfx---spc &quot; azureconfig. .cer &quot; &quot; &quot; -pi パスワードが入力されました-前へ-入力-ステップ</b></p>   </li>    <li>Visual Studio コマンドプロンプトで現在のディレクトリを調べて、証明書が作成されたことを確認できます。      <p><a href=""><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image005" border="0" alt="clip_image005" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8877.clip_5F00_image005_5F00_thumb.jpg" width="644" height="333"></a> </p>   </li> </ol>  <h2>まとめ</h2>  <p>ブログシリーズの第2部では、Windows azure 管理者が Windows azure に秘密キー (.pfx ファイル) をインポートする方法について説明します。 質問、懸念事項、コメントがありますか。 これらを下に投稿してください。</p>'
