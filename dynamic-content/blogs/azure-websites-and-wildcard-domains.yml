### YamlMime:Yaml
ms.openlocfilehash: 9feba0e32ee6ea0716ebf23ae2047e357cf9d412
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895589"
Slug: azure-websites-and-wildcard-domains
Title: Azure Web サイトとワイルドカード ドメイン
Summary: >-
  この投稿は、Azure Web サイト チームのソフトウェア開発エンジニア、Michael Michaelo 氏によって作成された投稿です。


  一部の Web アプリケーションでは、複数のサブドメインを使用する必要があります。また、特定の状況でもが必要です。
Content: >-
  この投稿は、Azure Web サイト チームのソフトウェア開発エンジニア、Michael Michaelo 氏によって作成された投稿です。


  一部の Web アプリケーションでは、複数のサブドメインを使用する必要があります。また、特定の状況では、新しいサブドメインを動的に追加する必要があります。 たとえば、各ユーザーに個人用コンテンツ ストリームまたはダッシュボード用の独自のサブドメインを提供するマルチテナント Web アプリを考えます。


  多くのユーザーは、ポータル、PowerShell コマンドレット、または (より現実的に) 直接 API 呼び出しを使用して各サブドメインを個別に追加する必要がある場合、このプロセスは複雑だと感じていました。 SSL が必要な場合は、各サブドメインに個別の SSL バインドが必要な場合に、複雑なレイヤーが追加されます。


  この問題に対処するために、最近、ワイルドカード ドメインの使用が導入されました。 これにより、*.contoso.com などのワイルドカード ドメインを追加できます。これにより、ユーザーは任意のサブドメイン (、admin.contoso.com など) を使用してサイトにアクセスできます。


  ワイルドカード ドメインをサイトに追加するプロセスは、通常のドメインを追加するプロセスとほぼ同じです。 これを説明するために、ワイルドカード ドメイン <strong>*.lovelyazuresky.com</strong>  を  <strong>sitemyazureblog に追加する方法について説明します</strong>。


  1. 最初の手順では、ドメイン プロバイダーを使用して CNAME レコードを作成します。このレコードは、ユーザーが入力した URL を Azure Websites に解決し、ドメイン所有権の検証のために Azure Websites でも使用されます (***)。 これを行うには、DNS プロバイダーで DNS ゾーンを編集し、ドメイン (lovelyazuresky.com) の *レコードを作成して、azure Websites URL <strong>の</strong> myazureblog.azurewebsites.net に解決します。 さまざまなドメイン プロバイダーで使用される管理インターフェイスは異なりますが、GoDaddy のドメイン管理システムでは次のように表示されます。

  <div><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/6116.Michael-Candido-_2D00_-Afigure1.png"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/6116.Michael-Candido-_2D00_-Afigure1.png" alt="" border="0"></a></div>

  <div></div>

  <div><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/2605.image.png"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/2605.image.png" alt="" border="0"></a></div>

  <div></div>

  <div></div>

  <div>2. 次の手順に進む前に、NSLOOKUP ユーティリティまたは PING を使用して、ワイルドカード ドメインが Azure に正しく解決されていることを確認します (lovelyazuresky.com の下のサブドメインは、次のような Azure URL に解決されます)。 そうしない場合は、しばらく待って、もう一度やり直してください。 レコードが正しく解決されるまで、続行できません。</div>

  <div><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/8688.Michael-Candido-_2D00_--figure2.png"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/8688.Michael-Candido-_2D00_--figure2.png" alt="" border="0"></a></div>

  <div></div>

  <div>3. 次の手順では、次に示す Azure のサイト構成にドメインを追加します。</div>

  <div><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/5228.Michael-Candido-_2D00_--figure3.png"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/5228.Michael-Candido-_2D00_--figure3.png" alt="" border="0"></a></div>

  <div>


  既に CNAME レコードを構成している場合、検証は成功し、右側のチェックマークが表示され、確認されます。 エラーが発生した場合は、少し時間を与える必要があります。DNS レコードが一部のドメイン プロバイダーで作成されるには、最大で数時間かかる場合があります。 数時間後もドメインを追加できない場合は、Microsoft サポートにお問い合わせください。


  構成が保存された<strong></strong> 後、ドメインはアクションの準備が整い、ドメインのすべての第 1 レベルのサブドメイン lovelyazuresky.com サイトを指します。


  <strong>SSL の追加</strong>


  また、ワイルドカード ドメインに SSL バインディングを追加する場合は、ワイルドカード ドメイン全体をカバーするために、証明書を  <strong>awildcardcertificate</strong>  に設定する必要があります。バインド <strong>SNI SSL</strong> と <strong>IP SSL</strong> 両方がサポートされています。 すべてが完了すると、SSL 構成は次の図のようになります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/2678.Michael-Candido-_2D00_-figure4.png"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1782/2678.Michael-Candido-_2D00_-figure4.png" alt="" border="0"></a>


  &nbsp;


  1 つ以上のサブドメインで別のバインディングと証明書を使用する場合は、どうしますか? これは、(たとえば)  <strong>payments.lovelyazuresky.com</strong>  をサイトに追加し、そのサイトに SSL バインドを作成することで、自然な方法で行います。このサブドメインでは、* <strong>.lovelyazuresky.com</strong> でワイルドカード バインドがオーバーライドされます。複数のサイトでこれを行う場合でも、特定のサブドメインが異なる SSL バインディングを持つ完全に異なるサイトに移動できます。


  </div>
