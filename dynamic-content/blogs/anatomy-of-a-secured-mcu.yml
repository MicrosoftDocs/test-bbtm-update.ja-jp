### YamlMime:Yaml
ms.openlocfilehash: 2bb2c397f1933100a5d9c261197a59ac81dfc3af
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896298"
Slug: anatomy-of-a-secured-mcu
Title: セキュリティで保護された MCU の構造
Summary: 'Azure Sphere は、セキュリティで保護された IoT プラットフォームを提供する3つの補完的なコンポーネントを含むエンドツーエンドのソリューションです。 これには、Azure Sphere マイクロコントローラーユニット (MCU)、Microsoft によって管理される IoT シナリオ向けに最適化されたオペレーティングシステム、およびセキュリティで保護されたスケーラブルなオンラインサービスが含まれます。 '
Content: >-
  <h2>シリコンをセキュリティで保護する</h2>


  <p>Azure Sphere は、セキュリティで保護された IoT プラットフォームを提供する3つの補完的なコンポーネントを含むエンドツーエンドのソリューションです。 これには、Azure Sphere マイクロコントローラーユニット (MCU)、Microsoft によって管理される IoT シナリオ向けに最適化されたオペレーティングシステム、およびセキュリティで保護されたスケーラブルなオンラインサービスが含まれます。 Microsoft では、オペレーティングシステムのサポートを10年以上にわたって提供しています。また、セキュリティサービスを1デバイスあたりの料金で使用することにより、ビジネスプランニングを簡略化します。</p>


  <p>Microsoft はソフトウェアで名前を作成しましたが、シリコンの専門知識はディープになっています。 過去15年間、Microsoft は、さまざまな Microsoft 製品のカスタムシリコンを設計することにより、ハードウェアベースのセキュリティに深く投資してきました。 Azure Sphere &rsquo; s シリコンアーキテクチャは、このような長年の経験をすべて概念したものであり、Pluton セキュリティサブシステムはセキュリティに関する話題の中核です。 このブログ投稿 &rsquo; では、セキュリティが保護された AZURE SPHERE MCU でどのように保護 &rdquo; されるかについて、レイヤーを掘り下げて &ldquo; 説明します。 具体的には、 &rsquo; Pluton &rsquo; s の設計の詳細と、その他の一般的なシリコンセキュリティの向上について説明します。</p>


  <p>一般に、MCU ベースのデバイスは、インターネットに接続できる2つのカテゴリ &ndash; のデバイスと、インターネットに接続しないように設計されたデバイスのいずれかに属しています。 最近までは、ほとんどすべての MCU ベースのデバイスが切断されました。これにより、デバイスの値として考えられる、物理的な脅威モデル (ケージでデバイスがロックされている) というセキュリティモデルが作成されました。 一般に公開されていますか)、デバイスが攻撃されるリスク (たとえば、自動用紙タオルディスペンサーと MRI コンピューター)。 したがって、セキュリティには簡単なモデル &ndash; があり、さらにコストが高くなります。</p>


  <p>MCU ベースのデバイスをインターネットに接続するのは watershed 瞬間です。これは、MCU が攻撃者の手で汎用的なデジタル武器になる可能性があるためです。 Mirai ボットネットは、10万接続カメラのみで構成されています。 &rsquo;1億ペーパータオル dispensers によって起動された分散型サービス拒否 (DDOS) 攻撃を考えていない場合は、わかりやすくするために、このブログ投稿を検討してください。</p>


  <p>インターネット接続は、セキュリティのためのテーブル杭を変更する必要があることを意味します。 セキュリティに関する会話をリセットするために、 <a href="https://aka.ms/7properties" target="_blank">高度に保護された接続デバイスの7つのプロパティ</a> に関するホワイトペーパーを作成しました。 ただし、Azure Sphere の認定を受けた Mcu は、MCU で使用される信頼の典型的なハードウェアルートを超えています。</p>


  <h2>Pluton キー管理</h2>


  <p>Pluton は、製造プロセス中にシリコンで独自のキーペアを生成します。 セキュリティで保護されたその他のチップは、多くの場合、キーを生成するために工場のフロアのハードウェアセキュリティモジュール (HSM) に依存します。 Pluton は、シリコンでプライベートにキーを生成し、それらのキーを e fuses に永続的に格納することで、さらに一歩進めます。 秘密キーがソフトウェアに表示されることはありません。 デバイス上で最も信頼されているファームウェアでも、秘密キーにアクセスすることはできません。 Pluton は、2つの異なるパブリック/プライベート楕円曲線暗号 (ECC) のキーペアを生成します。 一方はリモート構成証明にのみ使用され (後で詳しく説明します)、もう1つは汎用暗号化に使用できます。 チップ &rsquo; 公開キーは、シリコンの製造元からマイクロソフトに送信されます。つまり、チップが製造された時点から、すべての Azure Sphere チップとの信頼関係をマイクロソフトが認識して確立します。</p>


  <h2>Pluton &rsquo; s 乱数ジェネレーター</h2>


  <p>Pluton は、真の乱数ジェネレーターを実装します。 Pluton &rsquo; s 乱数ジェネレーターは、乱数を生成するために、環境からエントロピ (つまり、ランダムな数値) を収集します。 この乱数ジェネレーターは、製造プロセス中に独自のキーを生成する各 MCU にとって非常に重要であり、そのため、防御する必要がある重要な攻撃対象領域です。 Pluton &rsquo; s true 乱数ジェネレーターは、収集するエントロピを測定します。エントロピが設計の一部として定義されている特定の標準を満たしていない場合、乱数ジェネレーターは乱数の提供を拒否します。</p>


  <h2>Pluton &rsquo; s 暗号化ヘルパー</h2>


  <p>Pluton は、一般的な暗号化タスクを高速化します。 Pluton は、ハッシュ (SHA2 経由)、ECC、および高度暗号化標準 (AES) の暗号化操作などの暗号化タスクを高速化します。</p>


  <h2>セキュアブートの利点</h2>


  <p>Pluton は、サプライチェーンのリスクを最小限に抑えます。 ECDSA は、ECC キーペアを使用してデジタル署名を確認するためのアルゴリズムです。 Azure Sphere デバイス上のすべてのソフトウェアは、Microsoft によって署名されている必要があります。 Microsoft は、Microsoft &rsquo; の最も重要な製品の一部の秘密キーを保護するのと同じインフラストラクチャを使用して、独自の実証済みの署名インフラストラクチャを使用するため、秘密キーが安全な hsm に保持され、このキーを使用するたびに厳密でドキュメント化されたプロセスに従います。</p>


  <h2>リモート構成証明を活用する</h2>


  <p>Pluton は、測定されたブートとリモート構成証明のサポートをシリコンで実装します。 Azure Sphere デバイスが Azure Sphere セキュリティサービス (AS3) に接続すると、ローカルに格納されている証明書を使用してサーバー認証を完了します。 ただし、AS3 はデバイス自体も認証する必要があります。 これは、リモート構成証明と呼ばれるプロトコルによって行われます。</p>


  <p>1. AS3 はデバイスに nonce を送信します。これは、起動されたソフトウェアコンポーネントの暗号化ハッシュで構成される測定ブート値と組み合わされます。</p>


  <p>2. デバイスは、これらの値に Pluton &rsquo; のプライベート ECC 構成証明キーを使用して署名し、それらを AS3 に送り返します。</p>


  <p>3. AS3 は、既にデバイス &rsquo; のパブリック ECC 構成証明キーを持っているため、デバイスが本物であるか、本物のソフトウェアで起動されたか、および正規のソフトウェアが信頼されているかどうかを判断できます。</p>


  <p>この測定値は偽造または変更できないことが重要です。そのため、チップ全体がリセットされた場合にのみリセットできる累積レジスタに保持されます。 署名はシリコンで行われるため、完全に侵害されたソフトウェアを持つデバイスでも、構成証明の値を偽造することはできません。</p>


  <p>4. デバイスが最新の場合は、任意のオンラインサービスに提示できるクライアント証明書と、AS3 サービスでのみ使用される AS3 証明書が付与されます。 証明書チェーンが有効である場合は、チップの正常性に関する AS3 保証を表します。 証明書の有効期間は約1日です。このため、インターネットへの接続を維持する必要がある場合、デバイスは定期的に正常性を証明するように強制されます。</p>


  <p>デバイスが正常でない場合は、クライアント証明書は発行されず、事実上、デバイスが AS3 にのみ接続し、ソフトウェアの更新を実行できるようにします。</p>


  <p>継続的な更新によるシリコンベースの構成証明を使用すると、デバイスの偽装を防ぐことができます。 今後のブログ記事では、このトピックについてさらに詳しく説明しますが、Pluton で始まります。</p>


  <h2>Pluton を超えるシリコンセキュリティ</h2>


  <p>&rsquo;Pluton を構成するシリコンファブリックでセキュリティが停止することはありません。 実際、Azure Sphere の Mcu は、プラットフォーム &rsquo; の防御を強化する追加のセキュリティ機能を実装することで、Pluton を超えています。 例として、5コアで構成されるチップである MT3620 を使用してみましょう &rsquo; 。 1つのコアは、Pluton 内で操作を呼び出すランタイム専用です。 次は、チップの Wi-Fi RF コンポーネントと対話する Wi-Fi 専用のコアです。 A7 コアは Azure Sphere オペレーティングシステムの実行専用であり、2つの M4 コアを使用してリアルタイム処理を行うことができます。 A7 コアは Arm &rsquo; の信頼ゾーンテクノロジを活用しており、Azure Sphere セキュリティモニターはセキュリティで保護された環境で動作し、Linux カーネルとその他の OS コンポーネントは通常の環境で動作します。&nbsp;</p>


  <p>すべてのコアと周辺機器の間には、ファイアウォールと呼ば &ldquo; れるものがあります。 &rdquo; これらはネットワーク上のファイアウォールではなく、リソースからコアへのマッピングのセットです。 実際には、これをコアマッピング機能と呼びます。 デバイス上のすべてのリソースがこのようにマップされます。既定では、すべてのリソース (A7 SRAM、周辺機器、およびフラッシュ) は、セキュリティで保護された世界にのみマップされ、通常の環境で実行されているソフトウェアへのアクセスを拒否します。 セキュリティで保護された世界では、周辺機器へのアクセスを選択的に許可することができ、それらの選択は &ldquo; 固定です。 &rdquo; 固定は、シリコンを説明する際によく見られる用語ではありません。 この場合、コアマッピングは一度設定さ &ldquo; &rdquo; れることを意味します。つまり、ファイアウォールをプログラムするコードが攻撃者によって侵害された場合でも、攻撃者が実行されているコア &rsquo; に割り当てられていなかったリソースにアクセスすることはできません。</p>


  <p>周辺機器へのアクセスが制限されると、攻撃の対象となる可能性のあるセキュリティ領域が減少します。 固定を選択すると、さらに領域が小さくなります。 デバイスを展開した後、攻撃者は、悪意のある web サービスと通信したり、デバイスの別の部分を制御したりするコードを悪用することはできません。 これにより、個々のデバイスのセキュリティが向上し、サプライチェーン全体を通じてセキュリティが強化されます。</p>


  <p>これらは、Azure Sphere MCU を一意にし、攻撃者が Azure Sphere デバイスを制御することをより困難にするシリコン機能のほんの一部です。 各機能は、デバイス &rsquo; の機能を侵害するために攻撃者が克服する必要がある1つ以上の機能を提供します。また、Pluton は、ハードウェアの信頼のルートに存在しない多くのシリコンセキュリティ機能を提供します。 マイクロソフトでは、Azure Sphere チップを作る必要があるシリコンの製造元に Pluton、Pluton のライセンスを付与することを強くお勧めしています。 セキュリティを強化することは絶対ではありませんが、IoT のバーを上げると、デバイスが危険にさらされることが非常に困難になります。</p>
