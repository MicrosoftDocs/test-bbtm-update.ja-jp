### YamlMime:Yaml
ms.openlocfilehash: 8e9255aeddc4f64b0324aa4b15e74fff014cfe6d
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892973"
Slug: introduction-to-data-sync-service-for-sql-azure
Title: SQL Azure のデータ同期サービスの概要
Summary: '[この記事は SQL Azure チームによって提供されました。]SQL Azure 用のデータ同期サービスを使用すると、2つ以上の SQL Azure データベース間で双方向同期を実行できます。 このブログの投稿は...'
Content: '<p>[この記事は SQL Azure チームによって提供されました。]</p><p><a href="https://www.sqlazurelabs.com/">SQL Azure 用のデータ同期サービス</a>を使用すると、2つ以上の SQL Azure データベース間で双方向同期を実行できます。 このブログ投稿では、SQL Azure のデータ同期 Services の基本について説明します。</p>  <h2>内部</h2>  <p>SQL Azure データ同期サービスは、 <a href="https://msdn.microsoft.com/en-us/sync/default.aspx">Microsoft Sync Framework</a>を使用して web ロールとワーカーロールを使用している Windows Azure で実行されます。 Windows Azure アカウントは、Microsoft Sync チームによって所有されており、それらによって管理されています。SQL Azure のデータ同期サービスは、Azure アカウント Windows ロール内にインストールするアプリケーションではありません。 このサービスは現在、米国中南部のデータセンターにホストされています。 同期セットの構成を管理するオンライン web インターフェイスがあります。このインターフェイスを使用すると、どのデータセンターでどのようなサーバーを同期するか、および同期する頻度を構成できます。 現時点では、SQL Azure データ同期サービスは CTP にあり、 <a href="https://www.sqlazurelabs.com/">SQL Azure Labs</a>で利用できます。</p>  <h2>作業の開始</h2>  <p>すべての同期シナリオには、1つのハブデータベースと多くのメンバーデータベースがあります。 同期グループを設定するときに、ハブデータベースを宣言し、必要な数の空のメンバーデータベースを割り当てます。</p>  <p><a href=""><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="絵" border="0" alt="image" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2626.image_5F00_thumb_5F00_121C0999.png" width="643" height="333"></a> </p>  <p>最初の同期では、データ同期 Service for SQL Azure は、ハブデータベーススキーマをコピーすることによって、メンバーデータベースをプロビジョニングします。 言い換えると、メンバーデータベースでスキーマを生成する必要はありません。これは、SQL Azure 用にサービスをデータ同期ことによって行われます。 データの変更を効率的に追跡するために、ハブデータベースも変更されました。</p>  <p>スキーマをハブデータベースからメンバーデータベースにコピーする場合、外部キー制約はコピーされません。 これにより、テーブルデータを任意の順序でメンバーデータベースに挿入できます。 メンバー SQL Azure データ同期データベースに外部キー制約を適用しないことにより、最初の同期時にハブデータベースを読み取り専用に変換する必要がなくなります。また、外部キー参照が循環しているデータスキーマでも機能します (循環参照の詳細については、このブログの投稿を参照してください)。</p>  <p>メンバーデータベースがプロビジョニングされると、最初の同期時に、ハブデータベースのすべてのデータがメンバーデータベースのテーブルごとにコピーされます。 メンバーデータベースに外部キー制約がないため、挿入の順序は関係ありません。</p>  <h2>データ転送の価格</h2>  <p>メンバーデータベースは、データ同期サービスと同じデータベースセンターに存在しないサーバー (米国中南部) に配置できます。 すべてのデータベースが異なるデータセンターにある場合は、データベースを同期するときに (データを転送)、米国中南部にないデータベースの双方向の帯域幅に対して課金されます。</p>  <p>米国中南部からのデータ同期サービスの実行のみが可能な制限は、CTP の制限事項です。 他の Windows Azure Platform サービスと同様に、すべてのデータベースが同じデータセンターにあり、データ同期サービスがそこで実行されている場合、データ交換には料金はかかりません。 </p>  <p>データベース全体ではなく、変更されたデータのみが同期時に転送されます。 ただし、そのデータはすべてのメンバーデータベースおよびハブと同期する必要があるため、メンバーの数はデータ転送のコストの乗数になります。</p>  <p>価格の詳細については、ここをクリックしてください。</p>  <h2>部分同期</h2>  <p>SQL Azure のデータ同期サービスを使用すると、同期するテーブルを選択できます。 データベース全体を同期する必要はありません。 これにより、メンバーデータベースがハブのサブセットである同期グループを作成できます。 これにより、ユーザーがデータのサブセットにアクセスできるようにするために、ハブデータベースのアクセス許可とは異なるアクセス許可をメンバーデータベースに付与できる、興味深いシナリオが作成されます。 この方法については、PowerPivot を使用した後のブログ投稿で説明します。</p>  <h2>[スキーマの変更]</h2>  <p>データ同期 Service for SQL Azure では、メンバーデータベースにスキーマが作成されるときに、ハブデータベースのスキーマのコピーになります。 同期グループが確立されたら、ハブデータベーススキーマを変更することはできません。 ハブデータベースのスキーマを変更するには、同期グループを削除し、メンバーデータベースを再割り当てする新しい同期グループを再作成する必要があります。スキーマを再生成し、データをもう一度移動します。</p>  <h2>オンデマンドまたはスケジュールされた同期</h2>  <p>同期は、必要に応じて、または設定したスケジュールに基づいて実行できます。マージレプリケーションとは異なり、リアルタイムの同期は行われません。 現在の CTP では、スケジュールレプリケーションの最小増分値は現在1時間です。このリリースバージョンでは、より頻繁な同期が行われます。 同期は、要求時に実行することもできます。</p>  <h2>Bi-Direction の同期</h2>  <p>データ同期サービスでの同期は、メンバーデータベースに書き込むことができる双方向に行われ、同期が行われると、ハブとすべてのメンバーデータベースが更新されます。 または、ハブデータベースに書き込み、メンバーデータベースを同期させることができます。 言い換えると、すべてのデータベースは読み取り/書き込みです。</p>  <p>SQL Azure のデータ同期サービスでは、 <a href="https://msdn.microsoft.com/en-us/sync/bb887608.aspx">Microsoft Sync Framework</a>と比較して、競合解決の処理をプログラムすることはできません。 このため、複数のメンバーデータベースに行を挿入する場合は、 <b>int</b> id データ型ではなく、uniqueidentifier データ型をテーブルの主キーとして使用することをお勧めします。 これにより、双方向の同期中に id の競合を防ぐことができます。 従来のデータベースで作業している場合や、uniqueidentifier データ型を使用しない場合は、すべてのデータベースで一意の主キーを確保するための他の方法がいくつかあります。 この詳細については後で説明します。</p>  <h2>まとめ</h2>  <p>質問、懸念事項、コメントがありますか。 これらを下に投稿してください。</p>'
