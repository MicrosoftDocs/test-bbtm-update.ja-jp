### YamlMime:Yaml
ms.openlocfilehash: 45c05b7d026e904651cf9e9e51a1ef26d96dc59a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895899"
Slug: introducing-cost-effective-increment-snapshots-of-azure-managed-disks-in-preview
Title: 'プレビューでの Azure マネージド ディスクのコスト効率の高い増分スナップショットの導入 '
Summary: Azure マネージド ディスクの増分スナップショットのプレビューが利用可能になります。 増分スナップショットは、マネージド ディスクのコスト効率の高いポイントインタイム バックアップです。 フル サイズに対して請求される現在のスナップショットとは異なり、増分スナップショットは、前回のスナップショット以降のディスクへの差分変更に対して請求されます。
Content: >-
  <div style="background:#eee;border:1px solid #ccc;padding:5px 10px;"><strong>2020 年 7 月 17</strong> 日に更新:Azure マネージド ディスクの増分スナップショットが一般提供されました。 詳細については、ブログ記事&nbsp;「マネージド ディスクの増分スナップショットの一般提供の発表<a href="https://azure.microsoft.com/en-us/blog/announcing-general-availability-of-incremental-snapshots-of-managed-disks/" target="_blank">」を参照してください</a>。</div>


  <p>Azure マネージド ディスクの増分スナップショット <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/managed-disks-overview">のプレビューが</a> 利用可能になります。 増分スナップショットは、 <strong>マネージド ディスクのコスト効率</strong> の高いポイントインタイム バックアップです。 フル サイズに対して請求される現在のスナップショットとは異なり、増分スナップショットは、前回のスナップショット以降のディスクへの差分変更に対して請求されます。 これらは、親ディスクのストレージの種類に関係なく、常に最もコスト効率の高いストレージ (Standard HDD) に格納されます。 さらに、信頼性を高めるには、ZRS をサポートするリージョンで既定でゾーン冗長 <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy-zrs">ストレージ (</a> ZRS) に格納されます。 Premium Storage に格納することはできません。 Premium Storage で現在のスナップショットを使用して仮想マシンのデプロイをスケールアップする場合は、Shared Image Gallery の Standard Storage でカスタム イメージ <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/shared-image-galleries">を使用することをお勧めします</a>。 これは、より低コストでさらに大規模なスケールを実現するのに役立ちます。&nbsp;</p>


  <p>増分スナップショットは差分機能 <strong>を提供します。差分機能は、Azure マネージド ディスクでのみ使用できる固有の機能です</strong>。 これにより、お客様と独立系ソリューション ベンダー (ISV) は、マネージド ディスクのバックアップおよびディザスター リカバリー ソリューションを構築できます。 これにより、同じディスクの 2 つのスナップショット間で変更を取得できます。そのため、リージョン間で 2 つのスナップショット間で変更されたデータのみをコピーし、バックアップとディザスター リカバリーの時間とコストを削減できます。 たとえば、最初の増分スナップショットは、別のリージョンのベース BLOB としてダウンロードできます。 以降の増分スナップショットについては、前回のスナップショット以降の変更分のみをベース BLOB にコピーできます。 変更をコピーした後は、別のリージョンにあるディスクのポイントインタイム バックアップを表すスナップショットを、ベース BLOB で取得できます。 ディスクの復元は、ベース BLOB から行うこともでき、別のリージョンにあるベース BLOB のスナップショットから行うこともできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/cc8e3e66-c4af-4f14-8e80-dcac45591e06.png"><img alt="image" border="0" height="167" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/377b748e-03e5-4211-a77e-5060d121c954.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="696"></a></p>


  <p>増分スナップショットは、現在のスナップショットのすべての説得力のある機能を継承します。 親マネージド ディスクとは独立した有効期間を持ち、親マネージド ディスクが削除された場合でも使用できます。 さらに、これらは瞬時に<strong></strong>アクセスできます。つまり、増分スナップショットの基になる VHD を読み取り、ディスクが作成されるとすぐにディスクを復元できます。</p>


  <p>増分スナップショットを作成するには、新しい増分プロパティを true に設定します。</p>


  <pre>

  az snapshot create \

  -g yourResourceGroupName \

  -n yourSnapshotName \

  -l westcentralus \

  --source subscriptions/yourSubscriptionId/resourceGroups/yourResourceGroupName/providers/Microsoft.Compute/disks/yourDiskName \

  --incremental</pre>


  <p>スナップショットの SourceResourceId プロパティと SourceUniqueId プロパティを使用して、同じディスクの増分スナップショットを識別できます。 SourceResourceId は、親Azure Resource Manager (ARM) リソース ID です。 SourceUniqueId は、ディスクの UniqueId プロパティから継承した値です。 ディスクを削除してから同じ名前でディスクを作成した場合、UniqueId プロパティの値は変更されます。</p>


  <pre>

  <code>az snapshot show \

  -g yourResourceGroupName \

  -n </code><code>yourSnapshotName</code><code> \

  --query [creationData.sourceResourceId] -o </code><code>tsv</code>


  <code>az snapshot show \

  -g yourResourceGroupName \

  -n </code><code>yourSnapshotName</code><code> \

  --query [creationData.sourceUniqueId] -o </code><code>tsv</code></pre>


  <h2>可用性と料金</h2>


  <p>Azure Compute Rest API バージョン 2019-03-01 を使用して、増分スナップショットを作成し、基になるデータを米国中西部リージョンで読み取る SAS URI を生成できます。 また、SDK、.Net SDK、および CLI Azure PowerShellを使用して、これらの操作を実行することもできます。 差分機能は、.NET、Python、および CPP のプレリリースバージョンの SDK Storageサポートされています。 電子メールで <a href="mailto:Azuredisks@microsoft.com" style="border-bottom-color: currentColor; border-bottom-style: none; border-bottom-width: 0px; border-image-outset: 0; border-image-repeat: stretch; border-image-slice: 100%; border-image-source: none; border-image-width: 1; border-left-color: currentColor; border-left-style: none; border-left-width: 0px; border-right-color: currentColor; border-right-style: none; border-right-width: 0px; border-top-color: currentColor; border-top-style: none; border-top-width: 0px; color: rgb(95, 151, 175); font-family: inherit; font-size: 100%; font-style: inherit; font-variant: normal; font-weight: inherit; letter-spacing: normal; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; orphans: 2; outline-color: invert; outline-style: none; outline-width: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; text-decoration: none; text-indent: 0px; text-transform: none; vertical-align: baseline; -webkit-text-stroke-width: 0px; white-space: normal; word-spacing: 0px;">AzureDisks@microsoft.com</a> これらの SDK にアクセスしてください。 他の SDK や他のリージョンのサポートを近日追加する予定です。</p>


  <p>増分スナップショットの GB あたりの価格は、現在の完全なスナップショットと同じです。 スナップショットの価格の <a href="https://azure.microsoft.com/en-us/pricing/details/managed-disks/">詳細については、マネージド</a> ディスクの価格に関するページを参照してください。</p>


  <h2>作業の開始</h2>


  <ol>
      <li><a href="https://aka.ms/createisnapshotcli">CLI を使用して増分スナップショットを作成します</a>。</li>
      <li><a href="https://aka.ms/createisnapshotpowershell">PowerShell を使用して増分スナップショットを作成します</a>。</li>
  </ol>
