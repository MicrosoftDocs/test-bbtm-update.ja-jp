### YamlMime:Yaml
ms.openlocfilehash: 4dc7e9c3e6403dd459728f9e0b475c0c127a3024
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890652"
Slug: use-azure-active-directory-with-spring-security-5-0-for-oauth-2-0
Title: OAuth 2.0 の Spring Security 5.0 で Azure Active Directory を使用する
Summary: Azure Active Directory (AD) の spring Starter が spring Security 5.0 と統合されていることを発表しました。 これにより、OAuth 2.0 の認証と承認を簡単に構築できます...
Content: >-
  <p>Azure Active Directory (AD)<a href="https://github.com/Microsoft/azure-spring-boot/blob/master/azure-spring-boot-starters/azure-active-directory-spring-boot-starter/README.md" target="_blank">の spring Starter</a>が spring Security 5.0 と統合されていることを発表しました。 このツールを使用すると、クラウド内の Java アプリの OAuth 2.0 認証と承認フローを簡単に構築でき、暗黙の型と承認の両方のコード許可の種類がサポートされます。 ほんの数行の構成で、Azure Active Directory OAuth2 で認証を実行するアプリを構築し、Azure Active Directory グループで承認を管理できます。</p>


  <p><br>

  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/40bb0361-ca06-4ab9-b782-c83deab241c1.png"><img alt="Spring Initializr" border="0" height="686" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dcb1c088-9c7a-4431-a3a7-7695660d30e7.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="スプリングの初期化 r" width="1430"></a></p>


  <h2>はじめに</h2>


  <p>開始するには、Azure portal を開き、<a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-protocols-oauth-code#register-your-application-with-your-ad-tenant" target="_blank">新しいアプリケーションを</a>Azure Active Directory (AD) に登録します。 次に、新しく作成されたアプリケーションにアクセス許可を付与します。 Azure Active Directory &rsquo; s グループとメンバーを使用して、アクセス規則を設定します。 <a href="https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-active-directory-spring-boot-starter%22" target="_blank">Spring Security Azure AD ライブラリ</a>をプロジェクトに追加します。 ビルドするアプリケーション &rsquo; の種類に応じて、次の2種類の認証を選択して oauth 2.0 認証と承認フローを構築します。 GitHub の<a href="https://github.com/Microsoft/azure-spring-boot/tree/master/azure-spring-boot-starters/azure-active-directory-spring-boot-starter" target="_blank">Azure Active Directory の Spring Starter の</a>詳細については、こちらを参照してください。</p>


  <h2>バックエンド認証</h2>


  <p>spring security Azure AD のライブラリがプロジェクトに追加されると、Azure AD グループと spring security authorization logics が自動的にマップされます。 これにより、開発者は、バックエンドで OAuth 2.0 フローを構築できます。 これを有効にするには、次の構成を追加して、OAuth2 User Service の使用を指定する必要があります。 その後、注釈 @PreAuthorize ( &quot; hasrole (&#39;GROUP_NAME&#39;) &quot; ) を使用して、ロールベースの承認を行うことができます。 詳細については、 <a href="https://github.com/Microsoft/azure-spring-boot/blob/master/azure-spring-boot-samples/azure-active-directory-spring-boot-backend-sample/README.md" target="_blank">GitHub の例</a>を参照してください。</p>


  <pre>

  @Autowired

  private OAuth2UserService&lt;OidcUserRequest, OidcUser&gt; oidcUserService;


  @Override

  protected void configure(HttpSecurity http) throws Exception {
       http
               .authorizeRequests()
               .anyRequest().authenticated()
               .and()
               .oauth2Login()
               .userInfoEndpoint()
               .oidcUserService(oidcUserService);
  }</pre>


  <h2>フロントエンド認証</h2>


  <p>シングルページアプリケーション (SPA) シナリオの場合は、JavaScript の Azure AD ライブラリを使用してフロントエンドで Azure AD 認証を処理し、Spring Boot プロジェクトの AADAuthenticationFilter を自動送信します。 その後、注釈 @PreAuthorize ( &quot; hasrole (&#39;GROUP_NAME&#39;) &quot; ) を使用して、ロールベースの承認を行うことができます。 詳細については、 <a href="https://github.com/Microsoft/azure-spring-boot/tree/master/azure-spring-boot-samples/azure-active-directory-spring-boot-sample" target="_blank">Azure Active Directory Spring Boot サンプル</a>を参照してください。</p>


  <h2>次の手順</h2>


  <p><a href="https://github.com/Microsoft/azure-spring-boot" target="_blank">GitHub でプロジェクト</a>を確認し、Azure サービスを使用した Spring integration について説明します。</p>


  <ul>
   <li>GitHub: <a href="https://github.com/Microsoft/azure-spring-boot" target="_blank">Azure サービスの Spring Boot</a> starter</li>
   <li>デベロッパーセンター: <a href="https://docs.microsoft.com/en-us/java/azure/spring-framework/" target="_blank">Azure での Spring</a></li>
   <li>デベロッパーセンター: <a href="https://docs.microsoft.com/en-us/java/azure/" target="_blank">Azure での Java サポート</a>&nbsp;</li>
  </ul>


  <h2>フィードバック</h2>


  <p>ご意見やご感想をお寄せください。ご意見をお寄せください。または、 <a href="https://github.com/Microsoft/azure-maven-plugins/issues" target="_blank">GitHub</a>にご連絡ください。</p>
