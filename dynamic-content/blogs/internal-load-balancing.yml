### YamlMime:Yaml
ms.openlocfilehash: 65f92b334f1b327d13a1e3166ba82a798d8987de
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909782"
Slug: internal-load-balancing
Title: 内部負荷分散
Summary: Azure での "内部負荷分散" (ILB) のサポートをお知らせします。 内部負荷分散 (ILB) を使用すると、プライベート IP アドレスの背後で高可用性サービスを実行できます。
Content: "Azure での \"内部負荷分散\" (ILB) のサポートをお知らせします。 内部負荷分散 (ILB) を使用すると、クラウド サービスまたは Virtual Network (VNet) 内でのみアクセスできるプライベート IP アドレスの背後で高可用性サービスを実行し、そのエンドポイントのセキュリティを強化できます。 ILB エンドポイントは、Virtual Network内で使用する場合、オンプレミスや他の相互に接続された VNet からアクセスでき、いくつかの強力なハイブリッド シナリオを可能にします。\n\nILB は 2 つのフレーバーで使用できます\n<ol>\n <li>負荷分散された IP が Azure のプライベート IP アドレス空間から取得されるクラウド サービス内</li>\n <li>仮想ネットワーク内。負荷分散された IP は、顧客が指定した仮想サブネットまたは静的 VNet IP アドレスから取得されます。</li>\n</ol>\n<h2>主なシナリオ</h2>\nILB は、Azure で提供されている現在のパブリック負荷分散に対するセキュリティ強化です。 これは、アクセシビリティを制限し、負荷分散された仮想 IP アドレスとクラウド サービスまたはパブリック インターネットを必要としない Virtual Network との間に信頼境界を作成します。 これにより、内部の Line of Business アプリケーションを Azure で実行し、クラウド内またはオンプレミスからアクセスできます。 次のセクションでは、一般的な使用例の一部を示します。\n<ul>\n <li>アプリケーション層とバックエンド データベースを ILB の背後で実行して、パブリック インターネットに公開されるのではなく、負荷分散によって高可用性を実現できます。 これは、大きなセキュリティ強化です。</li>\n</ul>\n&nbsp;\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/ILBpic3.jpg\"><img style=\"padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px\" title=\"ILBpic3\" alt=\"ILBpic3\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ILBpic3_thumb.jpg\" width=\"644\" height=\"435\" border=\"0\" /></a>\n\n&nbsp;\n<ul>\n <li>ILB VIP には、仮想ネットワーク全体内だけでなく、セキュリティで保護された IP Sec トンネルを介して、オンプレミスおよび接続された VNet 間からアクセスできます。 これにより、次の図に示すように、FrontEnd VIP を ILB の背後に配置することで、イントラネットに接続する (CorpNet のみ) SharePoint ファームを実行できます。</li>\n</ul>\n&nbsp;\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/05/ILBPic2.jpg\"><img style=\"padding-top: 0px;padding-left: 0px;padding-right: 0px;border-width: 0px\" title=\"ILBPic2\" alt=\"ILBPic2\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ILBPic2_thumb.jpg\" width=\"644\" height=\"303\" border=\"0\" /></a>\n\n&nbsp;\n<h2>使用手順</h2>\n内部負荷分散は現在プレビューの時点で、近い将来一般提供 (GA) される予定です。 ILB の詳細なドキュメントについては、こちらを参照してください。\n\n内部負荷分散は、現在ポータルでは構成できません。これは今後サポートされる予定です。 ただし、PowerShell コマンドレットを使用して構成できます。 ILB は、リージョン リージョン内のデプロイVirtual Network、リージョンの外部にある新しいデプロイでもVirtual Network。以下のセクションでは、両方の種類の使用方法について説明します。\n<h3>リージョン 内の ILB Virtual Network</h3>\n<ul>\n <li>リージョン Virtual Network のクラウド サービスで作成された ILB エンドポイントには、Virtual Network 全体だけでなく、接続されている VNet とオンプレミス サイト間でアクセスできます。</li>\n <li>次のスニペットをサンプルとして使用して、\"VNetUSWest\" のリージョン内にデプロイLoad Balancerクラウド サービスの内部Virtual Network構成します。 リージョンの詳細については、こちらをVirtual Network <a href=\"https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/\">してください。</a></li>\n <li>VNet 内で ILB を使用している間は、サブネットを指定し、さらに正確には、VNet アドレス空間から内部ロード バランサーの IP アドレスを指定できます。</li>\n</ul>\n&nbsp;\n<pre class=\"prettyprint\"># VM Configuration\n$web1 = New-AzureVMConfig -Name \"web1\" -InstanceSize Small -ImageName &lt;imagename&gt; | Add-AzureProvisioningConfig -Windows -AdminUsername &lt;username&gt; -Password &lt;password&gt; | Set-AzureSubnet FrontEndSubnet\n\n$web2 = New-AzureVMConfig -Name \"web2\" -InstanceSize Small -ImageName &lt;imagename&gt; | Add-AzureProvisioningConfig -Windows -AdminUsername &lt;username&gt; -Password &lt;password&gt; | Set-AzureSubnet FrontEndSubnet\n\n# Create the Deployments\nNew-AzureVM -ServiceName \"MyWebsite1\" -VMs $web1 -Location \"West US\" -VNetName VNetUSWest \n\nNew-AzureVM -ServiceName \"MyWebsite1\" -VMs $web2 -Location \"West US\" \n\n# Add Internal Load Balancer to the service\nAdd-AzureInternalLoadBalancer -InternalLoadBalancerName MyILB -SubnetName FrontEndSubnet -ServiceName MyWebsite1\n\n# Add load balanced endpoints to ILB\nGet-AzureVM -ServiceName MyWebsite1 -Name web1 | Add-AzureEndpoint -Name \"intwebep\" -LBSetName \"intwebeplb\" -Protocol tcp -LocalPort 100 -PublicPort 100 -ProbePort 100 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName MyILB | Update-AzureVM\n\nGet-AzureVM -ServiceName MyWebsite1 -Name web2 | Add-AzureEndpoint -Name \"intwebep\" -LBSetName \"intwebeplb\" -Protocol tcp -LocalPort 100 -PublicPort 100 -ProbePort 100 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName MyILB | Update-AzureVM</pre>\n<ul>\n <li>このサンプルでは、ILB はサブネット \"FrontEndSubnet\" から IP を取得します。</li>\n <li>次に示すように、cmd lets を使用して ILB に関する情報を取得できます。</li>\n</ul>\n<pre class=\"prettyprint\"># Get Internal Load balancer information\nGet-AzureService -ServiceName MyWebsite1 | Get-AzureInternalLoadBalancer \n\n# Get the ILB information on an endpoint\nGet-AzureVM -ServiceName MyWebsite1 -Name web1 | Get-AzureEndpoint</pre>\nクラウド サービスの ILB\n<ul>\n <li>リージョンリージョンの外部にあるクラウド サービスで作成された ILB エンドポイントVirtual Network、クラウド サービス内でのみアクセスできます。</li>\n <li>以下の cmd let サンプルに示すように、クラウド サービスでの最初のデプロイの作成時に ILB 構成を設定する必要があります。</li>\n</ul>\n<pre class=\"prettyprint\"># Create a local ILB Object\n$myilbconfig = New-AzureInternalLoadBalancerConfig -InternalLoadBalancerName \"MyILB\" \n\n# Add Internal Load Balancer for a new service\nNew-AzureVMConfig -Name \"Instance1\" -InstanceSize Small -ImageName &lt;imagename&gt; | Add-AzureProvisioningConfig -Windows -AdminUsername &lt;username&gt; -Password &lt;password&gt; | New-AzureVM -ServiceName \"Website2\" -InternalLoadBalancerConfig $myilbconfig    -Location \"West US\"</pre>\n&nbsp;\n<h2>よく寄せられる質問</h2>\n<strong>1. 既存のデプロイに ILB を追加Virtual Network。</strong>\n\nこれは、リージョンリージョンのVirtual Network場合にのみVirtual Network。 ただし、近い将来、すべての仮想ネットワークがリージョン Virtual Networkに変換されます。その後、これが可能になります。\n\n<strong>2.ILB を 'SQL Always On' シナリオに使用できますか?</strong>\n\nはい。<a href=\"https://azure.microsoft.com/blog/?p=195271\"> これは現在サポートされています</a>。\n\n<strong>3.リージョン リージョン のデプロイに負荷分散エンドポイントが既にVirtual Network、このエンドポイントを ILB にアタッチできますか?</strong>\n\nいいえ。 エンドポイントの作成時に ILB を参照する必要があります。通常のエンドポイントを ILB エンドポイントに変換することはできません。その逆も同様です。 これは近い将来サポートされる予定です。\n\n<strong>4.ILB はエンドポイント ACL で使用できますか?</strong>\n\nはい。ILB はエンドポイント ACL で使用できます。 リージョン内の Virtual Network で使用する場合、ACL は、リージョン内でもアクセスを制限することで、顧客の IP アドレス空間で表現Virtual Network。\n\n<strong>5.ILB</strong> を Virtual Machines に設定した場合、それらの同じマシンからの \"ループバック\" は負荷分散 <b>された VIP で動作しますか? </b>\n\nいいえ。 負荷分散されているのと同じVirtual Machines ILB VIP にアクセスすることはできません。\n\n<strong></strong><strong>6.PaaS サービス (Web/Worker ロール) で ILB を使用できますか?</strong>\n\nILB は Web/worker ロールも使用するように設計され、SDK 2.4 以降から使用できます。"
