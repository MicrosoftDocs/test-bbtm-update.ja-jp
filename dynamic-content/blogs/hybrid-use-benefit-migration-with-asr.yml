### YamlMime:Yaml
ms.openlocfilehash: 0e799ec84d5f865f25d70121037182f197b8a66e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890769"
Slug: hybrid-use-benefit-migration-with-asr
Title: Azure ハイブリッド特典とAzure Site Recovery、Azure へのアプリケーションの移行をよりコスト効率の高い方法で行う
Summary: Azure ハイブリッド使用特典を使用してライセンス コストを削減しながら、アプリケーションを簡単に移行Azure Site Recovery。
Content: "<p><a href=\"https://aka.ms/azure-hybrid-benefit-pricing\">Azure ハイブリッド特典 (AHB)</a> を使用すると、Microsoft ソフトウェア アシュアランス のお客様はオンプレミスの Windows Server ライセンスを Azure に移行するアプリケーションに持ち込み、データセンターをクラウドに簡単に拡張できます。 AHB&rsquo;&nbsp; プログラムでは、アプリケーションを業界をリードするハイブリッド エンタープライズ パブリック クラウドに移行することで実現される大幅なコスト削減と資産の生産性に加えて、ライセンス コストの大幅な削減を実現できます。</p>\n\n<p><a href=\"https://aka.ms/enhanced-migration-and-dr-using-asr\">Azure Site Recovery (ASR)</a> は、お客様がアプリケーションを Azure に移行するために選択するツールです。 ASR は、最小限のダウンタイムを提供し、仮想化プラットフォームと物理サーバーをまたがって Azure に移行する手間を省く必要があります。 移行する前に Azure でアプリケーションをテストし、復旧計画を使用して 1 回のクリックでアプリケーションの移行を提供することで、ASR によって Azure への移行プロセスが簡略化されます。 ASR では、アプリケーションが実行されているプラットフォームに関係なく、Windows Server やさまざまな Linux ディストリビューションなど、さまざまなオペレーティング システムの移行がサポートされています。 さらに&rsquo;、 - <strong>ASR を使用した移行は無料です。</strong>&nbsp; はい。初めて読んだ場合、ASR を使用した移行は無料です。&nbsp; サーバーのレプリケートを開始した最初の 31 日間は、Azure で使用するストレージと、移行のテストに使用するコンピューティングに対する料金のみを支払います。</p>\n\n<p>Azure Site Recovery、ハイブリッド使用特典を利用しながら、Azure にWindows移行できます。 このブログ記事では、&rsquo;ASR と AHB を使用してサーバー環境を Azure に移行Windows方法を説明します。</p>\n\n<h2>データ を使用したAzure Site Recovery</h2>\n\n<p>最初に行う必要があるのは、アプリケーションを使用してセットアップをAzure Site Recovery Azure へのアプリケーションのレプリケートを開始する方法です。 このすべては、次の記事で説明されているいくつかの簡単な手順で実行できます。</p>\n\n<p>Hyper-V で仮想化されている場合は、この記事に <a href=\"https://aka.ms/asr-hyper-v-to-azure\">従ってサーバーを Azure にレプリケートします</a>。</p>\n\n<p>VMware で仮想化されている場合、または物理サーバーで実行している場合は、この記事に従ってレプリケーション <a href=\"https://aka.ms/asr-vmware-to-azure\">を開始してください</a>。</p>\n\n<p><strong><em>AHB は、Azure Resource Model (ARM) 仮想マシンに移行されたサーバーでのみ使用できます。レプリケーション用に選択したストレージ アカウントが、クラシック アカウントではなく ARM StorageアカウントStorageしてください。</em></strong></p>\n\n<p>初期レプリケーションが完了すると、サーバーは ASR で保護された状態に達し、その時点でアプリケーションをテストして Azure に移行する準備が整います。</p>\n\n<p><img alt=\"Migrate applications using ASR and Hybrid Use Benefit\" border=\"0\" height=\"320\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/cd093e70-1254-489e-91f4-d2be82ccc825.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"ASR-Migration HUB を使用する\" width=\"766\"></p>\n\n<p>Azure portal のレプリケートされた項目設定ブレードの [コンピューティングとネットワーク] 構成を使用して、移行先の Azure 仮想ネットワークと仮想マシンのサイズを選択します。</p>\n\n<h2>AHB を使用する移行を構成する</h2>\n\n<p>&rsquo;サーバーが保護され、テスト フェールオーバーを実行して Azure&rsquo; でアプリケーションを検証したら、移行を完了する前に行う必要がある作業は、サーバーの移行中に AHB を使用するように ASR を構成する必要があります。 この設定は、 を使用していくつかの簡単な手順でAzure PowerShell。 Azure PowerShell の最新バージョンを <a href=\"https://aka.ms/webpi-azps\">こちら</a>から入手します。 最新バージョンの AzureRM.SiteRecovery モジュール (バージョン 3.1.0 以降) がインストールされている必要があります。</p>\n\n<pre class=\"prettyprint\">\nPS C:\\Users\\bsiva&gt; Get-Module -ListAvailable AzureRm.SiteRecovery\n\n\n    Directory: C:\\Program Files (x86)\\Microsoft SDKs\\Azure\\PowerShell\\ResourceManager\\AzureResourceManager\n\n\nModuleType Version    Name                                ExportedCommands\n---------- -------    ----                                ----------------\nManifest   3.1.0      AzureRM.SiteRecovery                {Get-AzureRmSiteRecoveryFabric, New-AzureRmSiteRecoveryFabric, Remove-AzureRmSiteRecoveryFabric, Stop-AzureRmSiteRecoveryJob...}\n</pre>\n\n<p>&nbsp;</p>\n\n<p>Azure アカウントにログインし、Azure サブスクリプションを選択します。</p>\n\n<pre class=\"prettyprint\">\nPS C:\\Users\\bsiva&gt; Login-AzureRmAccount\n\n\nEnvironment           : AzureCloud\nAccount               : bsiva@microsoft.com\nTenantId              : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nSubscriptionId        : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nSubscriptionName      : ASR PM team subscription 5\nCurrentStorageAccount : \n\n\n\n\nPS C:\\Users\\bsiva&gt; \nPS C:\\Users\\bsiva&gt; \nPS C:\\Users\\bsiva&gt; Select-AzureRmSubscription -SubscriptionName &quot;DR Hybrid Application Scenarios&quot;\n\n\nEnvironment           : AzureCloud\nAccount               : bsiva@microsoft.com\nTenantId              : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nSubscriptionId        : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nSubscriptionName      : DR Hybrid Application Scenarios\nCurrentStorageAccount : \n</pre>\n\n<p>&nbsp;</p>\n\n<p>Recovery Services コンテナーのコンテキストを設定します。</p>\n\n<pre class=\"prettyprint\">\nPS C:\\Users\\bsiva&gt; $vault = Get-AzureRmRecoveryServicesVault -Name &quot;Contoso-RecoveryVault&quot;\nPS C:\\Users\\bsiva&gt; Set-AzureRmSiteRecoveryVaultSettings -ARSVault $vault\n\nResourceName          ResourceGroupName ResourceNamespace          ResouceType\n------------          ----------------- -----------------          -----------\nContoso-RecoveryVault Contoso-Recovery  Microsoft.RecoveryServices vaults\n\n\nPS C:\\Users\\bsiva&gt;</pre>\n\n<p>&nbsp;</p>\n\n<p>コンテナー内のレプリケートマシンの一覧を取得します。</p>\n\n<pre class=\"prettyprint\">\nPS C:\\Users\\bsiva&gt; $ReplicatedItems = Get-AzureRmSiteRecoveryFabric | Get-AzureRmSiteRecoveryProtectionContainer | Get-AzureRmSiteRecoveryReplicationProtectedItem\nPS C:\\Users\\bsiva&gt; $ReplicatedItems | Select-Object -Property FriendlyName\n\nFriendlyName\n------------\nContoso-EngWikiDB\nContoso-PayrollDB\n</pre>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p>移行するマシンの AHB ライセンスの種類を設定します。</p>\n\n<pre class=\"prettyprint\">\nPS C:\\Users\\bsiva&gt; $Job1 = Set-AzureRmSiteRecoveryReplicationProtectedItem -ReplicationProtectedItem $ReplicatedItems[0] -LicenseType WindowsServer\n</pre>\n\n<p>&nbsp;</p>\n\n<p>ASR ジョブが正常に完了されたことを検証します。</p>\n\n<pre class=\"prettyprint\">\nPS C:\\Users\\bsiva&gt; Get-AzureRmSiteRecoveryJob -Job $Job1\n\n\nName             : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nID               : /Subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/Contoso-Recovery/providers/Microsoft.RecoveryServices/vaults/Contoso-RecoveryVault/repl\n                   icationJobs/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx\nType             :\nJobType          : UpdateVmProperties\nDisplayName      : Update the virtual machine\nClientRequestId  : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx-2016-10-19 18:50:18Z-P ActivityId: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nState            : Succeeded\nStateDescription : Completed\nStartTime        : 10/20/2016 12:20:18 AM\nEndTime          : 10/20/2016 12:20:22 AM\nTargetObjectId   : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\nTargetObjectType : ProtectionEntity\nTargetObjectName : Contoso-EngWikiDB\nAllowedActions   :\nTasks            : {Update the virtual machine properties}\nErrors           : {}\n</pre>\n\n<p>&nbsp;</p>\n\n<p>これで完了です。 これで、アプリケーションを Azure に移行するようにすべてが設定されています。</p>\n\n<h2>Azure への移行</h2>\n\n<p>ASR を設定して Azure に移行し、AHB&rsquo; のメリットを得る必要があるのは、アプリケーションを Azure に移行する最後の手順です。 これを行うには、ポータルから、または ASR PowerShell コマンドレットを使用します。 ポータルからこれを行うには、Recovery Services&rsquo; コンテナーに移動し、レプリケートされたマシンまたは復旧計画を設定している場合は選択し、[フェールオーバー] アクションを選択します。</p>\n\n<p><img alt=\"ASR: Failover Protected Servers\" border=\"0\" height=\"532\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9be08149-a28a-4c2b-9ac8-2aaff44558c1.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"ASR: フェールオーバーで保護されたサーバー \" width=\"758\"></p>\n\n<p>&nbsp;</p>\n\n<p>フェールオーバー ジョブが正常に完了すると、サブスクリプション&rsquo;内の仮想マシン間で移行された VM を見つける必要があります。 <a href=\"https://aka.ms/verify-azure-virtual-machine-license-type\">VM でライセンス特典が利用されていないことを確認します。</a></p>\n\n<p>この時点で、[移行の完了] を選択して Recovery Services コンテナーに設定したレプリケーションをクリーンアップし<a href=\"https://aka.ms/asr-complete-migration\"></a>、以前にアプリケーションをホストするために使用していたオンプレミスインフラストラクチャを削除できます。</p>\n\n<p><img alt=\"CompleteMigration\" border=\"0\" height=\"440\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4b575eba-fcd6-468e-9314-0076cb31b771.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" title=\"CompleteMigration\" width=\"758\"></p>\n\n<p>クラウドへの移行は決して簡単ではありませんでした。 いくつかの簡単な手順で、既存のアプリケーションを簡単に移行し、Azure が備えるハイパースケール プラットフォームの優れたクラウド経済性とパワーを活用できます。</p>\n\n<blockquote>\n<p>これはすばらしいですが、ASR を活用して IT インフラストラクチャのビジネス継続性を提供する方法、またはアプリケーションを Azure に移行する方法の詳細については、どこで学習できますか?</p>\n</blockquote>\n\n<p>追加の&nbsp;<a href=\"https://aka.ms/asr-hub-asr-landing\">製品情報を確認し、</a>ワークロードのレプリケートを開始して、Microsoft AzureをAzure Site Recoveryできます。 レプリケートする新しい物理サーバーまたは仮想マシンごとに、Site Recovery の強力なレプリケーション機能を 31 日間無料で使用できます。 <a href=\"https://aka.ms/asr-hub-asr-forums\">MSDN の Azure Site Recovery</a> フォーラムにアクセスして追加情報を確認したり、他の顧客と対話したり、<a href=\"https://aka.ms/asr_vmware_to_azure_enhanced_uservoice\">ASR UserVoice</a> を使用して、次に有効にしたい機能をお知らせします。</p>"
