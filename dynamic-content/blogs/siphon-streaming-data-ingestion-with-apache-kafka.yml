### YamlMime:Yaml
ms.openlocfilehash: 2807f67db25157c5e10b04cc16dc16254c48494c
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892424"
Slug: siphon-streaming-data-ingestion-with-apache-kafka
Title: 'サイフォン: ストリーミング データ インジェストと Apache Kafka'
Summary: データは、Bing、Office、Skypeなど、Microsoft のクラウド サービスの中心です。 これらのサービスが拡大および成熟するに従って、データを収集、処理、および使用する必要性が増しました。
Content: >-
  <p>データは、Microsoft&rsquo; クラウド サービスの中心であり、Bing、Office、Skypeなどです。 これらのサービスが成長および成熟するに従って、データを収集、処理、使用する必要性も増しています。 データは、サービスの運用監視と管理から、ビジネスおよびテクノロジの決定まで、意思決定を支援します。 データは、データ マイニングと機械学習を利用したインテリジェント サービスの素材でもあります。</p>


  <p>Microsoft のほとんどの大規模なデータ処理は、概念的には Hadoop に似た、分散型でスケーラブルな、非常に並列化されたストレージおよびコンピューティング システムを使用して行われています。 このシステムでは、バッチ処理パラダイムを使用したデータ処理がサポートされました。 時間の長い&lsquo;&rsquo;間、高速ストリーミング データ処理パイプラインの新しいクラスを実現するために、ほぼリアルタイムの待機時間で大規模なデータ処理が必要でした。</p>


  <h2>サイフォン &ndash; の概要</h2>


  <p>サイフォンは、ほぼリアルタイムで処理するために大量のデータを取り込む、高可用性で信頼性の高いサービスとして作成されました。 Apache Kafkaは、スケーラブルな pub/sub メッセージ キューとして、Siphon で使用される主要なテクノロジです。 サイフォンは、Microsoft の複数のビジネス シナリオにわたって、1 日あたり 1 兆件を超えるイベントの取り込み処理を行います。 最初は、Siphon は Microsoft の内部データ&rsquo; センター ファブリックで実行するために設計されました。 時間の長い間、サービスは <a href="https://azure.microsoft.com/en-us/services/hdinsight/apache-kafka/">HDInsight</a> 用の Apache Kafka などの Azure オファリングを利用して、Azure でサービスを運用しました。</p>


  <p>Siphon が Microsoft でサポートするシナリオの一部を次に示します。</p>


  <p><strong>O365 セキュリティ:</strong>顧客データOffice 365保護&rsquo;は、ビジネスの重要な部分です。 この重要な側面は、脅威に迅速に対応できるよう、ほぼリアルタイムでセキュリティ インシデントを検出する点です。 このため、ストリーミング処理パイプラインは、脅威を識別するために 1 秒あたり数百万のイベントを処理します。 主なシナリオの要件は次のとおりです。</p>


  <ul>
   <li>1 秒に数百万件のイベントを確実にサポートするインジェスト パイプライン</li>
   <li>統合された監査とアラートを使用した信頼性の高いシグナル収集</li>
   <li>SOC <a href="https://products.office.com/en-us/business/office-365-trust-center-compliance-certifications">や ISO などの O365</a> コンプライアンス認定をサポートする</li>
  </ul>


  <p>このシナリオでは、Siphon はピーク時に 700 万イベント/秒を超えるインジェストをサポートし、1 秒あたり 1 ギガバイトを超えるボリュームを使用します。</p>


  <p><strong>O365 SharePoint Online:</strong> 分析、製品インテリジェンス、およびデータを利用した製品機能を提供するには、分析、監査、インテリジェントな機能のさまざまな用途に対してこれらのシグナルを使用するユーザー アクティビティシグナルをダウンストリーム サービスに接続するための、最新かつスケーラブルなデータ パイプラインが必要です。 主な要件は次のとおりです。</p>


  <ul>
   <li>シグナルはほぼリアルタイムで必要です。エンド アンド エンドの待機時間は数秒です</li>
   <li>パイプラインは、1 日あたり数十億のイベントにスケーリングする必要があります&nbsp;</li>
   <li>O365 コンプライアンスとデータ処理の要件をサポートする</li>
  </ul>


  <p>サイフォンは、このパイプラインのデータ pub/sub をパワーアップし、複数のリージョンにわたってスケールアップしています。 サービスが 1 つのリージョンで実稼働した後は、世界中の複数のリージョンで簡単にレプリケートできます。</p>


  <p><strong>MileIQ:</strong> MileIQ は、自動走行距離追跡を可能にするアプリです。 MileIQ バックエンドには、スケーラブルなメッセージ pub/sub を必要とする複数のシナリオがあります。</p>


  <ul>
   <li>マイクロサービス間でのイベントのディスパッチ</li>
   <li>O365 の表面へのデータ統合</li>
   <li>分析用の ETL データ</li>
  </ul>


  <p>1 秒に 10,000 件のメッセージに対してほぼリアルタイムの pub/sub を必要とするこれらのシナリオを可能にし、信頼性、待機時間、データ損失を保証する、Siphon へのオンボードを行っています。</p>


  <h2>サイフォンアーキテクチャ</h2>


  <p>サイフォンは、さまざまなストリーミング データ処理パイプラインに電力を供給するために、信頼性の高い高スループットで待機時間の短いデータ インジェスト機能を提供します。 これは、信頼性が高く準拠したエンタープライズ規模の Data Bus として &lsquo;機能します。&rsquo; データ プロデューサーは、各ダウンストリーム システムではなく、データ ストリームを 1 回発行できます。と データ コンシューマーは、必要なデータ ストリームをサブスクライブできます。 データは、Apache Spark Streaming、Apache Storm など、ストリーミング プラットフォームを介して、またはさまざまな宛先にデータをストリーム配信する Siphon コネクタを介して使用できます。</p>


  <p>サイフォン アーキテクチャの簡略化されたビュー:</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/22c0eda0-bae8-46c2-af6b-a5d972f667a7.png"><img alt="Siphon-architecture" border="0" height="1390" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/924a1af7-5f3d-49e8-8ac3-35c86362ad31.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="サイフォンアーキテクチャ" width="2189"></a>&nbsp;<br>

  サイフォンの主要なコンポーネントは次のとおりです。</p>


  <ul>
   <li>サイフォン SDK: データ プロデューサーは、スキーマ化、シリアル化、バッチ処理、再試行、フェールオーバーをサポートする、この SDK を使用して Siphon にデータを送信します。&nbsp;</li>
   <li>コレクター: これは、データを受信する HTTPS エンドポイントを持つサービスです。 では、認証、ルーティング、調整、監視、負荷分散/フェールオーバーが提供されます。</li>
   <li>Apache Kafka: シナリオの要件に応じて、さらに 1 つの Kafka クラスターがデプロイされます。</li>
   <li>コネクタ: Siphon からさまざまな変換先へのデータの構成駆動型の移動をサポートするサービスで、フィルター処理、データ変換、および変換先プロトコルへの適応がサポート&rsquo;されます。</li>
  </ul>


  <p>これらのコンポーネントは、ビジネス シナリオをサポートするために、さまざまな Microsoft データ センター/Azure リージョンにデプロイされます。 システム全体は、システムの正常性の監視とアラートを含む管理レイヤーと、データの完全性と待機時間の監査システムを備えるマルチユーザー/マルチテナント サービスとして管理されます。</p>


  <h2>&rsquo;HDInsight へのサイフォンの体験</h2>


  <p>Siphon チームが Azure でサービスを実行するために必要な構成要素を検討した場合、 <a href="https://azure.microsoft.com/en-us/services/hdinsight/apache-kafka/">Apache Kafka for HDInsight</a> サービスは、構築にとって魅力的なコンポーネントでした。 主な利点は次のとおりです。</p>


  <ul>
   <li><strong>マネージド サービス:</strong> HDInsight サービスは、Apache Kafka クラスターの作成、クラスターの稼働状態の維持、定期的なメンテナンスと修正プログラムの適用を行い、全体的な SLA は 99.9% です。</li>
   <li><strong>コンプライアンス：</strong>HDInsight は、多くのセキュリティとコンプライアンスの要件を満たしています。サイフォンは、Office 365 のようなサービスの厳しいニーズを満たすために必要な追加機能を構築できる優れた基盤です。</li>
   <li><strong>コスト：</strong> Kafka ノードと Azure Managed Disks統合などのイノベーションにより、信頼性を犠牲にすることなく、スケールの向上とコストの削減が可能になります。</li>
   <li><strong>柔軟性：</strong> HDInsight を使用すると、使用される VM の種類とディスクの両方に関してクラスターを柔軟にカスタマイズできるだけでなく、カスタム ソフトウェアのインストールや、適切なコストとパフォーマンスの要件に合わせてサービス全体をチューニングすることができます。</li>
  </ul>


  <p>Siphon は、HDInsight (プレビュー) サービスのApache Kafka初期の内部顧客でした。 Azure Managed Disk 統合を実装することで、この大規模な Data Bus サービスを実行する全体的なコスト &lsquo;を削減&rsquo; できます。</p>


  <p>サイフォンは現在、世界中の Azure リージョンにデプロイされている 30 を超える HDInsight Kafka クラスター (約 600 の Kafka ブローカーを含む) を持ち、そのフットプリントを拡大し続けています。 クラスター のサイズは 3 ~ 50 のブローカーで、一般的なクラスターには 10 のブローカーが存在し、各ブローカーには 10 台のディスクが接続されています。 これらのサイフォン クラスターでは、ピーク時のボリュームでの 1 秒あたり 4 GB を超えるデータの取り込みがサポートされています。</p>


  <p>Apache Kafka hdInsight では、Siphon を新しい geo リージョンに簡単に拡張して O365 サービスをサポートしました。デプロイが自動化され、新しい Azure リージョンでのサイフォンのプレゼンスを数日ではなく数時間に増やす時間が下がっています。</p>


  <h2>まとめ</h2>


  <p>データは Microsoft のバックボーン&#39;、Bing、Office 365、Skype などの大規模なクラウド サービスです。 サイフォンは、これらのサービスの処理と分析のために、ほぼリアルタイムのデータ ストリームを取り込み、配布し、使用するための高可用性で信頼性の高い分散データ バスを提供するサービスです。 サイフォンは、信頼性Apache Kafka、コスト効率に優れたコアビルディング ブロックとして HDInsight の機能を利用しています。 サイフォンは 1 日に 1 兆件を超えるメッセージを取り込み、HDInsight を活用して速度と量の増加を続ける予定です。</p>


  <p><a href="https://docs.microsoft.com/en-us/azure/hdinsight/kafka/apache-kafka-get-started">概要</a> でApache KafkaをAzure HDInsight。</p>
