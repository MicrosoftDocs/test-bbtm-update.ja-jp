### YamlMime:Yaml
ms.openlocfilehash: 5c7f5a3fa527f83eb8541a73f682dc044a0762ac
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891801"
Slug: azure-hdinsight-interactive-query-simplifying-big-data-analytics-architecture-and-operations
Title: 'Azure #HDInsight Interactive Query: ビッグ データ分析アーキテクチャの簡素化'
Summary: '高速対話型 BI、データ セキュリティ、エンド ユーザーの導入は、ビッグ データ分析の実装を成功に向け、3 つの重要な課題です。 適切なアーキテクチャとツールがない場合、多くのビッグ データおよび分析プロジェクトは、一般的な BI ユーザーやエンタープライズ セキュリティ アーキテクトに取り組むのに失敗します。 '
Content: >-
  <p align="justify"><em>高速対話型 BI、データ セキュリティ、エンド ユーザーの導入は、ビッグ データ分析の実装を成功に向け、3 つの重要な課題です。適切なアーキテクチャとツールがない場合、多くのビッグ データおよび分析プロジェクトは、一般的な BI ユーザーやエンタープライズ セキュリティ アーキテクトに取り組むのに失敗します。このブログでは、高速な対話型クエリ、簡略化されたセキュリティ モデル、および BI ユーザーによるユーザー導入の向上のためにビッグ データ ソリューションを設計するのに役立つアーキテクチャアプローチについて説明します。</em></p>


  <h2>高速対話型 BI に対する従来のアプローチ</h2>


  <p align="justify">Hadoop システムで処理される詳細な分析クエリは、従来は低速でした。 MapReduceジョブまたは Hive クエリは、大規模なデータセットの大量の処理に使用されます。ただし、対話型 BI の使用に必要な高速応答時間には適してありません。</p>


  <p align="justify">クエリの対話性の欠如によるユーザーの不満に直面したデータ アーキテクトは、Hadoop 上に OLAP キューブを構築するなどの手法を使用しました。 OLAP キューブは、すべての異なるディメンション、メジャー、階層を前もって格納するメカニズムです。 通常、キューブの処理は、事前に指定された間隔で行います。 後処理では結果を事前に使用できます。そのため、BI ツールがキューブにクエリを実行したら、結果を見つけるだけで、クエリの応答時間が制限され、高速で対話型になります。 すべてのメジャーはディメンション内のすべてのレベルとカテゴリによって事前に集計されます。このため、対話機能と高速応答時間に非常に適しています。 この方法は、概要ビューを明るくする必要がある場合に特に適しています。</p>


  <p>&nbsp;</p>


  <p><img alt="image" border="0" height="314" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0d4e83f9-fcff-42a0-a63b-ba0483d64f70.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="image" width="650"></p>


  <p align="justify">上記のアプローチは、特定のシナリオでは機能しますが、すべてではありません。 大規模なビッグ データの実装では、特に多くのパワー ユーザーやデータ サイエンティストが多くのアドホック クエリを記述している場合に、簡単にブレークダウンする傾向があります。</p>


  <p align="justify">主な課題を次に示します。</p>


  <ul>
   <li>
   <div align="justify">OLAP キューブでは、待機時間が発生する集計を作成するための事前計算が必要です。 すべての業界の企業は、より短いビジネス期間内にレポートと分析インフラストラクチャにより多くの要求を受け入れる必要があります。 OLAP キューブでは、&rsquo;リアルタイム分析を実行できます。</div>
   </li>
   <li>
   <div align="justify">ビッグ データ分析では、事前計算によって基になる Hadoop システムに大きな負担が生じ、ビッグ データ パイプライン全体に持続不可能な負荷が生じ、パイプライン全体のパフォーマンス、信頼性、安定性が大きく低下します。</div>
   </li>
   <li>
   <div align="justify">この種類のアーキテクチャでは、小規模で正常に動作する異なるシステム間での大規模なデータセットの移動が強制的に行います。 ただし、 は大規模なデータスケールで離れています。 複数の層にわたってデータをホットで最新の状態に保つのは困難です。</div>
   </li>
   <li>
   <div align="justify">パワー ユーザーとデータ サイエンティストは、システム全体に追加の負担を与える高度なアドホック クエリを使用して実験する能力に関して、より機敏性と自由を必要とします。</div>
   </li>
  </ul>


  <p>&nbsp;</p>


  <h2>Azure HDInsight対話型クエリの概要</h2>


  <p align="justify">Hive 2 の最も重要な新機能の 1 つは低遅延分析処理 (LLAP) です。これは、Azure BLOB ストアや Azure Data Lake Store などの一般的なストレージ システムに格納されている生データに対して、非常に高速なクエリを生成します。</p>


  <p align="justify">これにより、高速な対話型クエリを有効にするために追加のレイヤーを導入する必要が減っています。</p>


  <h2 align="justify">ビッグ データ BI アーキテクチャでInteractive Queryを導入する主な利点:</h2>


  <p align="justify"><strong>非常に高速な対話型クエリ:</strong> Interactive Query のインテリジェントなキャッシュと最適化により、Azure Blob や Azure Data Lake Store などのリモート クラウド ストレージで、非常に高速なクエリ結果が生成されます。 Interactive Queryを使用すると、データ アナリストは、データが準備されているのと同じストレージ内のデータに対話的にクエリを実行できます。これにより、分析ニーズに応じてデータをストレージから別の分析エンジンに移動する必要がなくなります。 HDIn Interactive Query sight Azure HDInsight <strong>100 TB</strong> スケールで予想されるパフォーマンスを理解するには、「Azure HDInsight パフォーマンス ベンチマーク<a href="https://azure.microsoft.com/en-us/blog/hdinsight-interactive-query-performance-benchmarks-and-integration-with-power-bi-direct-query/" target="_blank">: Interactive Query、Spark、Presto</a>」を参照してください。</p>


  <p align="justify">HDInsight Interactive Query (LLAP) では、Hive クエリのフラグメントを実行する一連の永続デーモンを利用します。 LLAP でのクエリ実行は、LLAP を使用しない Hive と非常に似ていますが、ワーカー タスクはコンテナーではなく、LLAP デーモン内で実行される点が除いて、非常に似ています。</p>


  <p align="justify"><img alt="image" border="0" height="361" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0c275e66-7fd7-45fd-841c-caf9ecc53084.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="image" width="628"></p>


  <p align="justify"><strong>クエリのライフサイクル: </strong>クライアントが JDBC クエリを送信すると、クエリは Hive Server 2 Interactive に到着します。これは、クエリの計画、最適化、およびセキュリティ トリミングを担当します。 各クエリは Hive Server 2 を介して送信されるので <u>、セキュリティ ポリシーを適用する単一の場所になります。 </u></p>


  <p align="justify"><u><img alt="image" border="0" height="135" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/db16d1a0-ac82-4ae8-9e24-14d57e3e5562.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="675"></u></p>


  <p align="justify"><strong>ファイル形式の汎用性とインテリジェントなキャッシュ:</strong> Hadoop での高速分析には、常に 1 つの大きなキャッチが用意されています。ORCFile、Parquet、Avro のような列形式への前もって変換する必要があります。これは時間がかかり、複雑であり、機敏性が制限されます。</p>


  <p>CSV または JSON Interactive Queryを最適化されたインメモリ形式に変換する Interactive Query Dynamic Text Cache を使用すると、キャッシュは動的なので、クエリによってキャッシュされるデータが決定されます。 <b>テキスト データがキャッシュされた後、</b>分析は、特定のファイル形式に変換した場合と同じ速く実行されます。</p>


  <p>Interactive Query SSD キャッシュでは、RAM と SSD が、LLAP キャッシュによって得るその他すべての利点を備えた、メモリの巨大なプールに結合されます。 SSD キャッシュを使用すると、一般的なサーバー プロファイルで 4 倍のデータをキャッシュし、より大きなデータセットを処理したり、より多くのユーザーをサポートしたりすることができます。 <b>対話型クエリ <u>キャッシュは、リモート</u> ストア (Azure Storage) の基になるデータの変更を認識します</b>。 基になるデータが変更され、ユーザーがクエリを発行した場合、更新されたデータは追加のユーザー ステップを必要とせずにメモリに読み込まれます。</p>


  <p><img alt="image" border="0" height="304" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fdcaec11-a65f-4525-9743-9d89cef3aae2.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="image" width="695"></p>


  <p><b>並行 処理：</b> Interactive Query [Hive on LLAP] を使用すると、クエリとユーザー間でキャッシュされたデータの管理、プリインプション、共有が大幅に改善され、同時実行ユーザーに対してより優れた機能が提供されます。</p>


  <p>さらに、HDInsight では共有 Azure ストレージでの複数のクラスターの作成がサポートされ、Hive メタストアは高いコンカレンシーを実現するのに役立ちます。そのため、クラスター ノードを追加したり、基になる同じデータとメタデータを指すクラスターを追加したりするだけで、コンカレンシーをスケーリングできます。</p>


  <h5><a href="https://blogs.msdn.microsoft.com/ashish/2017/03/24/hive-metastore-in-hdinsight-tips-tricks-best-practices/" target="_blank">HDInsight での Hive Metastore に関するページを</a>参照して、クラスターとクラスターの種類間でのメタストアの共有の詳細を確認Azure HDInsight。</h5>


  <p><a name="_msocom_1"></a></p>


  <h2>HDInsight を使用した簡素化されたスケーラブルなアーキテクチャInteractive Query</h2>


  <p align="justify">アーキテクチャにInteractive Queryを導入することで、パワー ユーザー、データ サイエンティスト、データ エンジニアをルーティングして、ユーザーに直接Interactive Queryすることができます。 このアーキテクチャの改善により、BI システムの全体的な負担が軽減されるだけでなく、対話型クエリの応答が高速でユーザーの満足度が向上し、アドホック クエリを柔軟に実行できます。</p>


  <p><img alt="image" border="0" height="320" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5a51281e-a316-4eea-8986-1fb53d169139.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="image" width="678"></p>


  <p align="justify">上記のアーキテクチャでは、概要ビューを表示したいユーザーは、OLAP キューブを使用して引き続き提供できます。 ただし、他のすべてのユーザーは、クエリInteractive Queryを利用します。</p>


  <p align="justify">Azure HDInsight の OLAP ベースのアプリケーションについては、 <a href="https://www.atscale.com/azure-hdinsight/" target="_blank">AtScale</a> や Apache <a href="https://azure.microsoft.com/en-us/blog/bring-interactive-analytics-to-azure-kyligence-analytics-platform-enables-sub-second-query-on-hdinsight/" target="_blank">Kyligence などのソリューションを参照してください</a>。</p>


  <h2>セキュリティ モデル</h2>


  <p>Hadoop クラスターや Spark クラスターと同様に、HDInsight Interactive Query は Azure Active Directory と Apache Ranger を活用して、きめ細かなアクセス制御と監査を提供します。 HDInsight <a href="https://docs.microsoft.com/en-us/azure/hdinsight/domain-joined/apache-domain-joined-introduction">クラスターのセキュリティ モデルを理解するには、Hadoop</a> セキュリティの概要に関する記事を参照してください。</p>


  <p>HDInsight Interactive Queryでは、アクセス制限ロジックが Hive レイヤーにプッシュダウンされ、データ アクセスが試行されるたび Hive によってアクセス制限が適用されます。 これにより、Hive クエリの作成が簡略化され、このロジックをクエリの述語に追加することなく、シームレスな背後での適用が提供されます。 Apache <a href="https://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.6.5/bk_security/content/using_ranger_to_provide_authorization_in_hadoop.html">Ranger で作成できる</a> さまざまな種類のセキュリティ ポリシーを理解するには、「Ranger を使用して Hadoop で承認を提供する」を参照してください。</p>


  <h2>使い慣れたツールを使用したユーザーの導入</h2>


  <p align="justify">&rsquo;ビッグ データ分析では、多くの場合、組織は分析システムから十分な価値を得ていないので、分析システムから十分な価値を得ていないので、組織はますます懸念しています。分析を実行するには、よく知らされていない学習困難なツールを使用する必要があります。 HDInsight 対話型クエリでは、データから分析情報を得るために新しいユーザー トレーニングを必要としないか、最小限に抑えることで、この問題に対処します。 ユーザーは、既SQL最も好きなツールでクエリ (hql) を作成できます。 標準の HDInsight Interactive クエリでは、<a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-for-vscode">Visual Studio Code</a>、<a href="https://docs.microsoft.com/en-us/azure/hdinsight/interactive-query/apache-hadoop-connect-hive-power-bi-directquery">Power BI</a>、<a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-connect-hive-zeppelin">Apache Zeppelin</a>、<a href="https://docs.microsoft.com/en-us/azure/hdinsight/hadoop/apache-hadoop-visual-studio-tools-get-started#run-interactive-hive-queries">Visual Studio</a>、<a href="https://docs.microsoft.com/en-us/azure/hdinsight/hadoop/apache-hadoop-use-hive-ambari-view">Ambari Hive ビュー</a>、<a href="https://docs.microsoft.com/en-us/azure/hdinsight/hadoop/apache-hadoop-use-hive-beeline">Beeline</a>、<a href="https://docs.microsoft.com/en-us/azure/hdinsight/hadoop/apache-hadoop-connect-excel-hive-odbc-driver">Hive ODBC</a> などの BI ツールがサポートされています。</p>


  <h5 align="justify"><img alt="image" border="0" height="356" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5af7f5ea-2063-4bc0-b1b8-0e1d454dad58.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="image" width="657"></h5>


  <h5>これらのツールの詳細については、「 <a href="https://azure.microsoft.com/en-us/blog/azure-hdinsight-interactive-query-ten-tools-to-analyze-big-data-faster/" target="_blank">Azure HdInsight Interactive Query: ビッグ データをより迅速</a>に分析するための 10 個のツール」を参照してください。</h5>


  <h2>Spark、Hive、Presto、およびその他のビッグ データ エンジンを補完するように構築されている</h2>


  <p align="justify">HDInsight 対話型クエリは、Apache Spark、Hive、Presto などの一般的なビッグ データ エンジンで適切に動作するように設計されています。 これは、ユーザーが分析を実行するためにこれらのツールのいずれかを選択する可能性がある場合に特に便利です。 HDInsights 共有&rsquo;データとメタデータ アーキテクチャを使用すると、ユーザーは、同じまたは異なるエンジンが基になるデータとメタデータを指す複数のクラスターを作成できます。 これは非常に強力な概念です。分析用の 1 つのテクノロジに限界がなくなりました。</p>


  <p>&nbsp;&nbsp;&nbsp; <img alt="image" border="0" height="251" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e0fac778-f800-4ace-b957-1b1b62a849a5.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="image" width="641"></p>


  <h2>今すぐ HDInsight を試す</h2>


  <p align="justify">HDInsight サービスの高速クエリ機能を完全に活用Interactive Query。 新しいソリューションを使用して何を構築Azure HDInsight。 <a href="https://azure.microsoft.com/en-us/blog/azure-hdinsight-training-resources-learn-about-big-data-using-open-source-technologies/">この開発者ガイドを読み</a> 、クイック スタート ガイドに従って、これらのパイプラインとアーキテクチャを実装する方法の詳細については、Azure HDInsight。 Twitter HDInsight と でフォローすることで、最新Azure HDInsight最新のニュースと機能<a href="https://twitter.com/search?q=%23HDInsight&amp;src=typd">に関する最新情報を確認してください。#</a> <a href="https://twitter.com/AzureHDInsight">@AzureHDInsight</a> 質問とフィードバックについては、 にお問い合わせください <a>AskHDInsight@microsoft.com</a>。</p>


  <h2>HDInsight について</h2>


  <p align="justify">Azure HDInsightは、Azure でオープン&rsquo; ソース ワークロードを実行する Microsofts Premium マネージド オファリングです。 Azure HDInsightは、製造、小売教育、非営利団体、政府、医療、メディア、銀行、電気通信、保険など、ETL からデータ ウェアハウス、Machine Learning から IoT まで、さまざまな業界に及ぶミッション クリティカルなアプリケーションに力を与えています。</p>


  <h2>その他の技術情報</h2>


  <ul>
   <li><a href="https://docs.microsoft.com/en-us/azure/hdinsight/interactive-query/apache-interactive-query-get-started">概要 HDInsight Interactive Query Azure でのクラスターの使用</a></li>
   <li><a href="https://azure.microsoft.com/en-us/blog/hdinsight-interactive-query-performance-benchmarks-and-integration-with-power-bi-direct-query/" target="_blank">Azure HDInsight パフォーマンス ベンチマーク: Interactive Query、Spark、Presto</a></li>
   <li><a href="https://docs.microsoft.com/en-us/azure/hdinsight/">詳細については、次を参照Azure HDInsight</a></li>
   <li><a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-linux-tutorial-get-started">HDInsight で Hive を使用する</a></li>
   <li><a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-component-versioning#hadoop-components-available-with-different-hdinsight-versions">HDInsight のオープン ソース コンポーネント ガイド</a></li>
   <li><a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-release-notes">HDInsight リリース ノート</a></li>
   <li><a href="https://social.msdn.microsoft.com/forums/azure/en-us/home?forum=hdinsight">Msdn フォーラムで HDInsight に関する質問をする</a></li>
   <li><a href="https://stackoverflow.com/questions/tagged/hdinsight">stackoverflow に関する HDInsight の質問</a></li>
  </ul>
