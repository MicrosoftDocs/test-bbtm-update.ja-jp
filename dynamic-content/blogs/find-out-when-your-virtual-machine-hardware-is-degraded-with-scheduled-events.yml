### YamlMime:Yaml
ms.openlocfilehash: 02f5778b7566be4068789ba39d91ef5d777b112e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890190"
Slug: find-out-when-your-virtual-machine-hardware-is-degraded-with-scheduled-events
Title: 仮想マシンのハードウェアが、仮想マシンのパフォーマンスが低下しているScheduled Events
Summary: クラウドに移行する利点の 1 つは、お客様がハードウェアのメンテナンスと修復に対処する必要が"ない" という利点があります。ビジネス アプリケーションに時間を集中できます。
Content: >-
  <p>クラウドに移行&rsquo;する利点の 1 つは、お客様がハードウェアのメンテナンスと修復に対処する必要がな "い"、ビジネス アプリケーションに時間を集中できる、という利点です。 Azure では、低下の兆候や潜在的な障害の兆候を示すハードウェアが継続的に監視されます。 これらの条件が検出されると、Azure は仮想マシン (VM) のライブ マイグレーションを試みます。 ライブ マイグレーションが可能ではない&rsquo;場合、Azure は VM を正常なマシンに自動的に再デプロイします。 ディザスター リカバリーのセットアップを行う場合は、この再デプロイの影響を最小限に抑えます。 ただし、正常なマシンへの再デプロイは、中断を許容できない一部のアプリケーションでは問題&rsquo;になる可能性があります。 この&rsquo;状況では、&nbsp; 可能であれば、正常なマシンへの再デプロイが発生する時間を制御することをお客様が好むというフィードバックを受け取っています。</p>


  <p>Vm に <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/scheduled-events">通知Scheduled Events</a> 、ライブ マイグレーション、再デプロイ、再起動などの今後のメンテナンス イベントに対応するためのプログラムによる方法として、Azure に新しいサービスを導入しました。スケジュールされたイベントを受信すると、フェールオーバー、状態の保存、VM 内のセッションのドレイン、手動メンテナンスのスケジュール設定、顧客への通知などのアクションを実行できます。&rsquo;ハードウェアの問題が近い将来正常なハードウェアへの再デプロイを必要とすると Azure が予測した場合に Scheduled Events がトリガーされ、ライブ マイグレーションができない場合に Azure が正常なハードウェアに VM を再デプロイする時間を提供する予定です。 お客様は、Azure の前に VM の再デプロイを自動的に開始できます。</p>


  <h2>ハードウェア障害の予測</h2>


  <p>Azure では、データ センターで何百万ものサーバーを運用して、ハードウェアの正常性が低下している場合を特定し、多くの場合、障害が発生する前に予測する分析情報を得ていました。 たとえば、Azure では、特定のノードでディスク IO パフォーマンスの低下が発生したかどうかを検出したり、メモリ エラーを検出したりして、これが致命的になるかどうかを判断できます。</p>


  <p>Azure で差し迫ったハードウェア障害が検出されると、可能であれば VM は事前 <a href="https://azure.microsoft.com/en-us/blog/improving-azure-virtual-machine-resiliency-with-predictive-ml-and-live-migration/">にライブ</a> マイグレーションされます。 これはワークロードへの影響を最小限に抑える必要があります。カスタマー エクスペリエンスは通常、最終フェーズの間に数秒の凍結です。 サブスクリプションをサブスクライブScheduled Eventsライブ マイグレーション プロセスが開始される数分前に VM に<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/scheduled-events#event-scheduling"></a>通知を受け取る必要があります。 &rsquo;ただし、M シリーズ、G シリーズなどの特殊なコンピューター ハードウェアや従来のハードウェアなど、ライブ マイグレーションが可能ではない場合があります。その場合、VM は新しいインスタンスに再デプロイされます。 一部のお客様は、ノードからの割り当て解除を開始する時間を制御し、プロセス中のエクスペリエンスを制御できる点に関心を示しています。 このフィードバックに基づいて、ハードウェアが問題として検出された時刻を通知し、ハードウェアがすぐに失敗しない限り、VM が別のマシンに移動される時間を与えるために、Scheduled Events を強化しました。 多くの場合、ハードウェアで障害が発生し、軽減策を通じて数日前に発生する可能性があります。Azure では、この障害時間の遅延が試行されます。 障害が発生する時間はさまざまなので、お客様はできるだけ早く機能低下したハードウェアから移行することをお勧めします。</p>


  <h2>これらのサービスをリッスンするScheduled Events</h2>


  <p>メンテナンスに関連するイベントを取得するにはScheduled Events VM でサブスクリプションをサブスクライブする必要があります。 <a href="https://channel9.msdn.com/Shows/Azure-Friday/Using-Azure-Scheduled-Events-to-Prepare-for-VM-Maintenance">このビデオを見て</a> 、プログラムでアプリを有効にして対応する方法Scheduled Events。 また、軽減策 <a href="https://github.com/Azure-Samples/virtual-machines-scheduled-events-discover-endpoint-for-non-vnet-vm">が完了したら</a> 、アプリをリッスンScheduled Events承認する方法のコード サンプルを見つける方法も確認できます。</p>


  <p>ハードウェア関連のイベントをリッスンするには、別&rsquo;の操作を行う必要はありません。 ハードウェア関連のイベントは、再デプロイ <em>イベントとして配信</em> されます。 <em>NotBefore</em>&nbsp; 時間は、メンテナンスが実行される前の時間を提供するプロパティであり、数時間から数日の範囲であり、ハードウェア障害の重大度に応じて変更される可能性があります。 障害発生&rsquo;時間の Azure の見積もりが向上すると、 <em>NotBefore</em> のタイム ウィンドウが変更され、より正確になります。 &rsquo;ただし、突然失敗する可能性がある機能低下したハードウェアで実行する場合は、対応する自動または手動のアクションを開始した後、できるだけ早く再デプロイを開始するか、スケジュールされたイベントを承認する必要があります。 要求を承認すると、VM が新しい物理マシンに再デプロイされます。 再デプロイの完了は、次の方法で追跡Scheduled Events。 &rsquo;<em>NotBefore</em> 時間内にスケジュールされたイベントを承認しない場合、エクスペリエンスを制御できなくなったので、Azure によって VM が正常なマシンに再デプロイされます。</p>


  <p>デバイスを使用したハードウェアの低下に関するScheduled Eventsは、世界中で既に利用できます。 API の変更はないので、この機能は api-version=2017-08-01 から利用できます。</p>


  <p>プラットフォームのメンテナンス イベントに注意する場合は、プラットフォームのメンテナンス イベントを処理して自動化を構築することを強Scheduled Events。 これを試して、以下のコメントでご意見をお寄せください。</p>
