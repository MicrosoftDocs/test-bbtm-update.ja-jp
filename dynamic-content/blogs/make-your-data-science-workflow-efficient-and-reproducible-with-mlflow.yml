### YamlMime:Yaml
ms.openlocfilehash: 9e74b64b8fd91e59f1d828da5967987d22769fd2
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139894345"
Slug: make-your-data-science-workflow-efficient-and-reproducible-with-mlflow
Title: MLflow を使用してデータ サイエンス ワークフローを効率的かつ再現可能にする
Summary: データ サイエンティストが機械学習モデルの構築に取り組む場合、実験では多くのメタデータ (テストしたモデルのメトリック、実際のモデル ファイル、プロットやログ ファイルなどの成果物) が生成されることがよくあります。 多くの場合、さまざまなモデルとパラメーターを試します。たとえば、さまざまな深度のランダム フォレスト、異なる正数化率を持つ線形モデル、異なる学習率を使用してトレーニングされたアーキテクチャが異なるディープ ラーニング モデルなどです。
Content: >-
  <p><em>このブログ投稿は、Parashar Shah(適用 AI Developer COGS シニア プログラム マネージャー) によって共同作成されました。</em></p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b5253c1c-3357-4e4a-af04-c2c917c17bae.png"><img alt="Title card - Make your data science workflow efficient and reproducible with MLFlow" border="0" height="300" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/94349e27-0bc1-44d9-901e-8f060c2d052e.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="タイトル カード - MLFlow を使用してデータ サイエンス ワークフローを効率的かつ再現可能にする" width="960"></a></p>


  <p>データ サイエンティストが機械学習モデルの構築に取り組む場合、実験では多くのメタデータ (テストしたモデルのメトリック、実際のモデル ファイル、プロットやログ ファイルなどの成果物) が生成されることがよくあります。 多くの場合、さまざまなモデルとパラメーターを試します。たとえば、さまざまな深度のランダム フォレスト、異なる正数化率を持つ線形モデル、異なる学習率を使用してトレーニングされたアーキテクチャが異なるディープ ラーニング モデルなどです。 すべてのブックキープが含まれるので、テスト ケースを見逃したり、実験を不必要に繰り返して時間を無駄にしたりするのは簡単です。 予測に使用するモデルを最終処理した後、デプロイ環境を作成し、そのモデルから Web サービス (http エンドポイント) を作成するために、複数の操作を行う必要があります。</p>


  <p>小規模な概念実証機械学習プロジェクトの場合、データ サイエンティストは、スプレッドシートとバージョン管理されたトレーニング スクリプトのコピーを使用して、手動のブックキープを使用してプロジェクトを追跡できる場合があります。 ただし、プロジェクトが成長&rsquo;し、チームとして他のデータ サイエンティストと共に作業する場合、次の作業を可能にするより優れた追跡ソリューションが必要になります。</p>


  <ul>
   <li>パラメーターのチューニング中にモデルのパフォーマンスを分析します。</li>
   <li>実験の履歴を照会して、実稼働環境に最適なモデルを見つける。</li>
   <li>実験の有望なスレッドに関する再検討とフォローアップ。</li>
   <li>トレーニングの実行を関連するメタデータに自動的にリンクします。</li>
   <li>スナップショットを表示し、以前のトレーニング実行を監査します。</li>
  </ul>


  <p>データ サイエンティストがモデルを作成したら、モデル管理とモデル配置ソリューションが必要です。 このソリューションでは、次の条件を許可する必要があります。</p>


  <ul>
   <li>同じモデルの複数のモデルと複数のバージョンを共通のワークスペースに格納する。</li>
   <li>スケーラブルな Web サービスの簡単なデプロイと作成。</li>
   <li>デプロイされた Web サービスの監視。</li>
  </ul>


  <h2>Azure Machine Learning MLflow</h2>


  <p><a href="https://azure.microsoft.com/en-us/services/machine-learning-service/" target="_blank">Azure Machine Learning サービス</a>は、データ サイエンティストと開発者に、実験を追跡し、モデルを Web サービスとしてデプロイし、既存の Python SDK、CLI、Azure Portal インターフェイスを使用して Web サービスを監視する機能を提供します。</p>


  <p><a href="https://mlflow.org/" target="_blank">MLflow</a> は、データ サイエンティストや開発者が機械学習コードをインストルメント化してメトリックと成果物を追跡できるオープン ソース プロジェクトです。 MLflow との統合は、トレーニング コードをクラウドに依存しない状態に保つのに最適です。一方、Azure Machine Learning サービスは、スケーラブルなコンピューティングと、実行と成果物の一元的で安全な管理と追跡を提供します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b58c5f54-27b1-401c-bc07-3edbdb1af816.png"><img alt="A diagram showing MLFlow being used for model tracking and performance metric logging" border="0" height="426" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/84a77936-de08-4b15-aec7-e7268aede7e7.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="モデルの追跡とパフォーマンス メトリック のログ記録に使用されている MLFlow を示す図" width="1024"></a></p>


  <p>データ サイエンティストと開発者は、MLflow を使用してインストルメント化された既存のコードを取得し、それをトレーニングの実行として Azure Machine Learning。 MLflow 用の Azure Machine Learning プラグインは、マネージド トレーニングの実行内で認識され、MLflow&rsquo; の追跡を Azure Machine Learning ワークスペースに接続します。 トレーニングの実行が完了すると、Azure Portal で実行されたメトリックと成果物を表示できます。 後で、実験の履歴を照会してモデルを比較し、最適なモデルを見つけ出します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/93fe69f3-3fff-4108-bf16-5e98f60d43b5.png"><img alt="A diagram showing MLFlow being used for model deployment" border="0" height="457" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/90e16f9f-6b1e-40d1-9c04-e9d0fff55015.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="モデルのデプロイに使用されている MLFlow を示す図" width="1024"></a></p>


  <p>最適なモデルが特定されると、MLflow を使用して同じ環境内から Kubernetes クラスター (Azure Kubernetes サービス) にデプロイできます。</p>


  <h2>ユース ケースの例</h2>


  <p><a href="https://databricks.com/session/accelerating-the-machine-learning-lifecycle-with-mlflow-1-0" target="_blank">Spark + AI Summit 2019</a> では、チームは、Azure Machine Learning と統合された MLflow を使用して画像分類モデルのトレーニングとデプロイの例を示しました。 &nbsp; MLflow を使用してメトリックを追跡し、Azure Machine Learning Workspace で監視しながら、MnIST データに対して数字分類モデルをトレーニングするために<a href="https://pytorch.org/" target="_blank">、PyTorch</a> ディープ ラーニング ライブラリを使用しました。 その後、PyTorch 用の MLflows&rsquo; フレームワーク対応 API を使用してモデルを保存し、新しい API を使用して Azure Container Instance Azure Machine Learning モデル管理しました。</p>


  <h2>MLflow と MLflow はどこで使用Azure Machine Learning?</h2>


  <p>Azure Machine Learning サービスの利点の 1 つは、データ サイエンティストと開発者が Azure クラウド上のコンピューティング リソースを使用してトレーニングをスケールアップおよびスケールアウトできるという利点です。 次の方法で実行を追跡Azure Machine Learning MLflow を使用できます。</p>


  <ul>
   <li>ローカル コンピューター</li>
   <li>Azure Databricks</li>
   <li>Machine Learning コンピューティング クラスター</li>
   <li>CPU または GPU が有効な仮想マシン</li>
  </ul>


  <p>MLflow は、モデルをデプロイAzure Machine Learningに使用できます。</p>


  <ul>
   <li>Azure Container Instance (ACI)</li>
   <li>Azure Kubernetes Service (AKS)</li>
  </ul>


  <h2>作業の開始</h2>


  <p>次のリソースでは、使用を開始する手順と例を示します。</p>


  <ul>
   <li><a href="https://docs.microsoft.com/en-us/azure/machine-learning/service/how-to-use-mlflow" target="_blank">Microsoft のドキュメント</a>&nbsp;&quot;サービス (プレビュー) で MLflow Azure Machine Learningする方法。&quot;</li>
   <li><a href="https://mlflow.org/docs/latest/index.html" target="_blank">MLflow のドキュメント</a>&nbsp;クイック スタート ガイド、チュートリアル、その他の主要な概念情報が含まれています。</li>
   <li><a href="https://aka.ms/azureml-mlflow-examples" target="_blank">Jupyter Notebook の例</a>&nbsp;GitHub リポジトリから。</li>
  </ul>
