### YamlMime:Yaml
ms.openlocfilehash: 9ee72a61201416233960c4afa5a5ea0e914981ee
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909439"
Slug: account-failover-now-in-public-preview-for-azure-storage
Title: アカウントのフェールオーバーが現在、パブリック プレビューでAzure Storage
Summary: 現在、geo 冗長ストレージ (GRS) が有効なストレージ アカウントをお持ちのお客様のアカウント フェールオーバーのプレビューをお知らせいたします。 GRS または RA-GRS アカウントを使用しているお客様は、この機能を利用して、ストレージ アカウントのプライマリ リージョンからセカンダリ リージョンにフェールオーバーする場合を制御できます。
Content: >-
  <div style="background:#eee;border:1px solid #ccc;padding:5px 10px;"><em><strong>更新プログラム 2020 年 5 月 6</strong> 日:&nbsp;Azure ストレージ アカウントのフェールオーバーは、すべてのパブリック リージョンで一般公開されています。最新の詳細 <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance" target="_blank">については、ドキュメント</a> を参照してください。</em></div>


  <p>現在、geo 冗長ストレージ (GRS) が有効なストレージ アカウントをお持ちのお客様のアカウント フェールオーバーのプレビューをお知らせいたします。 GRS または RA-GRS アカウントを使用しているお客様は、この機能を利用して、ストレージ アカウントのプライマリ リージョンからセカンダリ リージョンにフェールオーバーする場合を制御できます。</p>


  <p>お客様から、ストレージ アカウントの書き込みアクセスが必要であり、セカンダリ レプリケーションの状態がいつ理解されるのか判断できるよう、ストレージ アカウントのフェールオーバーを制御する必要があるというメッセージが表示されています。&nbsp;</p>


  <p>geo 冗長ストレージ アカウントのプライマリ リージョンが長期使用できなくなった場合は、アカウントのフェールオーバーを強制できます。 フェールオーバーを実行すると、ストレージ アカウント内のすべてのデータがセカンダリ リージョンにフェールオーバーされ、セカンダリ リージョンが新しいプライマリ リージョンになります。 すべてのストレージ サービス エンドポイント &ndash; BLOB、Azure Data Lake Storage Gen2、ファイル&ndash;、キュー、およびテーブルの DNS レコードは、新しいプライマリ リージョンを指す更新されます。 フェールオーバーが完了すると、クライアントは、コードを変更することなく、新しいプライマリ リージョンのサービス エンドポイントを使用して、ストレージ アカウントへのデータの書き込みを自動的に開始できます。</p>


  <p>次の図は、アカウントのフェールオーバーのしくみを示しています。 通常の状況では、クライアントはプライマリ リージョンの geo 冗長ストレージ アカウント (GRS または RA-GRS) にデータを書き込み、そのデータをセカンダリ リージョンに非同期的にレプリケートします。 プライマリ リージョンへの書き込み操作が一貫して失敗した場合は、フェールオーバーをトリガーできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dd11e86a-5584-4a8f-8686-825659beacb5.png"><img alt="Account failover diagram" border="0" height="371" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/57083c9c-93dc-46df-9f2b-6ea323d699bc.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="アカウントのフェールオーバーの図" width="640"></a></p>


  <p>フェールオーバーが完了すると、新しいプライマリ サービス エンドポイントに対して書き込み操作を再開できます。</p>


  <p>フェールオーバー後、ストレージ アカウントはローカル冗長 (LRS) に構成されます。 新しいセカンダリ リージョンへのレプリケーションを再開するには、geo 冗長ストレージ (RA-GRS または GRS) を再度使用するアカウントを構成します。 ローカル冗長 (LRS) アカウントを RA-GRS または GRS に変換するとコストが発生します。</p>


  <p>アカウントのフェールオーバーは、RA-GRS と GRS 用に構成Azure Resource Manager既存のストレージ アカウントのプレビューでサポートされています。 Storageアカウントには、汎用 v1 (GPv1)、汎用 v2 (GPv2)、または BLOB Storageがあります。 アカウントのフェールオーバーは現在、米国西部 2、米国中西部でサポートされています。</p>


  <p>Azure portal、Azure PowerShell、Azure CLI、または <a href="https://portal.azure.com/" target="_blank"></a>Azure Storage Resource Provider API を<a href="https://docs.microsoft.com/en-us/powershell/azure/overview?view=azps-1.2.0" target="_blank"></a>使用して、アカウントの<a href="https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest" target="_blank"></a>フェールオーバー<a href="https://docs.microsoft.com/en-us/rest/api/storagerp/" target="_blank">を開始できます</a>。 このプロセスはシンプルで簡単に実行できます。 次の図は、1 つの手順でアカウントのフェールオーバーをトリガーするAzure portalを示しています。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/41e56e62-8c25-4186-950d-38e5faf386ff.png"><img alt="Geo-replication in the Azure portal" border="0" height="711" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e0ddf1cc-433d-48ed-91c1-90af29032295.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Azure portal での geo レプリケーション" width="1030"></a></p>


  <p>ほとんどのプレビューの場合と同様に、アカウントのフェールオーバーを実稼働ワークロードで使用することはできません。 この機能が一般提供されるまで、実稼働 SLA はありません。</p>


  <p>geo&#39;は常に待機時間を伴うので、アカウントのフェールオーバーによってデータが失われる場合が多い点に注意することが重要です。 セカンダリ エンドポイントは、通常、プライマリ エンドポイントの背後に置かれている。 そのため、フェールオーバーを開始すると、セカンダリ リージョンにまだレプリケートされていないデータは失われます。</p>


  <p>フェールオーバーを開始する前に常に <strong>[最終</strong> 同期時刻] プロパティを確認して、セカンダリがプライマリの背後にある時間を評価することをお勧めします。 アカウントのフェールオーバーの&ldquo;影響を理解し、この機能の詳細については、障害が発生した場合の操作に関するドキュメントAzure Storage<a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-disaster-recovery-guidance" target="_blank">してください</a>。&rdquo;</p>


  <p>プレビューへの参加やアカウントのフェールオーバーに関する質問については、 にお問い合わせください xstoredr@microsoft.com。 アカウントのフェールオーバー機能とドキュメントに関するフィードバックをお寄せください。</p>
