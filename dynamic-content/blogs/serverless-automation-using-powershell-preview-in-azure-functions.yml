### YamlMime:Yaml
ms.openlocfilehash: 44e7785d9ae9b5cec8d63b91770c0e89366068fa
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892559"
Slug: serverless-automation-using-powershell-preview-in-azure-functions
Title: Azure Functions での PowerShell プレビューを使用したサーバーレスの自動化
Summary: すべての規模の企業が資産とワークロードをクラウドに移行するため、クラウドリソースの管理、制御、および自動化のためのより強力な方法を提供する必要があります。 このような自動化シナリオでは、PowerShell で最適なカスタムロジックを表現する必要があります。
Content: >-
  <p>すべての規模の企業が資産とワークロードをクラウドに移行するため、クラウドリソースの管理、制御、および自動化のためのより強力な方法を提供する必要があり &rsquo; ます。 このような自動化シナリオでは、PowerShell で最適なカスタムロジックを表現する必要があります。 また、通常はスケジュールに基づいて実行されます。また、アプリケーションのアラート、新しいリソースの作成、または外部システムでの承認が発生したときのイベントの発生時にも実行されます。&nbsp;</p>


  <p>Azure Functions は、アプリケーションの開発とサーバーレスホスティングを高速化するためのトリガーとバインドに基づくアプリケーション開発モデルを提供するため、このようなシナリオに適しています。 関数での PowerShell のサポートは、イベントベースの機能により、顧客から共通の要求を行ってきました。</p>


  <p>本日、このモデルの利点を活用して、Azure とオンプレミスシステム全体の運用タスクを自動化することを発表しました。 Azure Functions での PowerShell サポートのプレビューリリースをご利用ください。</p>


  <p>世界中の企業は、オンプレミスだけでなく、組織内のクラウドリソースを自動化するために PowerShell を使用しています。 これらのシナリオのほとんどは、インフラストラクチャまたはアプリケーションで発生するイベントに基づいており、サービスレベルアグリーメントと復旧時間を満たすために直ちに対処する必要があります。</p>


  <p>Azure Functions での PowerShell のサポートがリリースされたため、これらの運用タスクを自動化し、ネイティブの Azure 統合を利用してサービスの配信と保守を最新化することが可能になりました。</p>


  <p>Azure Functions での powershell のサポートは、2.x ランタイム上に構築され、 <a href="https://docs.microsoft.com/en-us/powershell/scripting/whats-new/what-s-new-in-powershell-core-60?view=powershell-6" target="_blank">powershell Core 6</a>を使用して、Windows、macOS、Linux で自動化を開発できます。 また、Azure アプリケーションインサイトとネイティブに統合して、各関数の実行に対する完全な可視性を提供します。 以前は、Azure Functions では、1. x. の実験的な PowerShell サポートがありました。お客様は、1 .x PowerShell 関数を最新のランタイムに移行することを強くお勧めします。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/82da0367-ed2d-4044-8ad2-691e866cc8b9.png"><img alt="Quickstart for Azure Functions for PowerShell" border="0" height="630" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9f7efdf7-2569-4023-862f-ba8a5dc8f0f6.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="PowerShell の Azure Functions" width="1430"></a></p>


  <p>Azure Functions の PowerShell には、次のような他の言語のすべての利点があります。</p>


  <ul>
   <li>Azure の監視アラート、Event Grid によるリソースの変更、HTTP またはタイマートリガーなどに応答するネイティブバインディング。</li>
   <li>スクリプトの作成とテストのためのポータルと Visual Studio Code の統合。</li>
   <li>HTTP によってトリガーされる関数を保護する統合セキュリティ。</li>
   <li>ハイブリッド接続と VNet のサポートにより、ハイブリッド環境の管理に役立ちます。</li>
   <li>分離されたローカル環境で実行します。</li>
  </ul>


  <p>さらに、PowerShell で記述された関数には、自動化によって Azure リソースを簡単に管理できるようにするための次の機能があります。</p>


  <h3>Azure モジュールの自動管理</h3>


  <p>Azure モジュールは、azure で使用可能なサービスを管理できるように、スクリプトでネイティブに使用できます。作成された各関数にこれらのモジュールを含める必要はありません。 これらの Az modules の重要な更新プログラムとセキュリティ更新プログラムは、新しいマイナーバージョンがリリースされると、サービスによって自動的にアップグレードされます。</p>


  <p>この機能を有効にするには、ホストの json ファイルを使用します。 managedDependency に対して Enabled &rdquo; を true に設定 &ldquo; し、.psd1 を更新する必要があります。 これらは、PowerShell を使用して新しい関数アプリを作成するときに自動的に設定されます。</p>


  <p><strong>host.json</strong><br>

  {<br>

  &nbsp;&nbsp;&nbsp;&ldquo;バージョン &rdquo; : &ldquo; 2.0 &rdquo; 、<br>

  &nbsp;&nbsp;&nbsp;&ldquo;manageddependency &rdquo; : {<br>

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ldquo;有効 &rdquo; : &ldquo; true&rdquo;<br>

  &nbsp;&nbsp;&nbsp; }<br>

  }</p>


  <p><strong>.Psd1</strong><br>

  @{<br>

  &nbsp;&nbsp;&nbsp; Az = &lsquo; 1. *&rsquo;<br>

  }</p>


  <h3>Azure サービスに対する認証</h3>


  <p>関数アプリのマネージド id を有効にすると、PowerShell ホストはこの id を使用して自動的に認証を行うことができます。これにより、マネージド id にアクセス権が付与されているサービスに対してアクションを実行するための機能が与えられます。 関数アプリが開始されると、profile.ps1 が処理され、共通のコマンドを実行できるようになります。 既定では、マネージ識別が有効になっている場合、関数アプリケーションは Connect-AzAccount Id で認証されます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/50505bbb-c235-4fd2-a965-5af06a3a26e4.png"><img alt="Function application authenticate with Connect-AzAccount -Identity." border="0" height="477" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/10a657d6-17cf-4a5e-a974-2797f48fe4c4.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Azure サービスに対する認証" width="1179"></a></p>


  <h2>Azure の一般的な自動化シナリオ</h2>


  <p>PowerShell はタスクを自動化するための優れた言語であり、Azure Functions の可用性により、Azure で実行されているすべてのサービスとアプリケーションでイベントベースのアクションをシームレスに作成できるようになりました。 一般的なシナリオをいくつか次に示します。</p>


  <ul>
   <li>Azure Monitor との統合により、Azure サービスによって生成されるアラートを処理します。</li>
   <li>Event Grid によってキャプチャされた Azure イベントに React し、リソースに運用要件を適用します。</li>
   <li>Logic Apps を活用して、PowerShell 関数でペイロードを処理しながら、IT サービスマネジメント、DevOps、監視システムなどの外部システムに接続します。</li>
   <li>仮想マシン、SQL Server、Web Apps、およびその他の Azure リソースに対して、スケジュールされた運用タスクを実行します。</li>
  </ul>


  <h2>次の手順</h2>


  <p>Azure Functions での PowerShell のサポートは現在プレビューでご利用いただけます。次のリソースを確認して、試してみてください。</p>


  <ol>
   <li>詳細については、ドキュメントの「 <a href="https://aka.ms/powershellinfunctions" target="_blank">Azure Functions での PowerShell</a> の使用」を参照してください。クイックスタートや一般的なサンプルを参照してください。</li>
   <li>まだお持ちでない場合は &rsquo; 、 <a href="https://azure.microsoft.com/free/serverless" target="_blank">Azure 無料アカウント</a>にサインアップし、PowerShell を使用して最初の関数を構築します。</li>
   <li><a href="https://go.microsoft.com/fwlink/?linkid=2047709&amp;clcid=0x409" target="_blank">Twitter</a>および<a href="https://go.microsoft.com/fwlink/?linkid=2047706&amp;clcid=0x409" target="_blank">GitHub</a>で Azure Functions チームに連絡することができます。 PowerShell 言語に関する具体的なフィードバックについては、 <a href="https://github.com/Azure/azure-functions-powershell-worker" target="_blank">Azure Functions GitHub</a>リポジトリを参照してください。</li>
   <li>また、 <a href="https://go.microsoft.com/fwlink/?linkid=2047712&amp;clcid=0x409" target="_blank">Stackoverflow</a> と <a href="https://go.microsoft.com/fwlink/?linkid=2047715&amp;clcid=0x409" target="_blank">UserVoice</a>を積極的に監視しているので、自由に質問したり、ご意見をお寄せください。 皆様のご意見をお待ちしております。</li>
   <li>Automation と PowerShell の詳細については、「 <a href="https://aka.ms/AzureFridayPowerShellFunctions">Azure 金曜日</a> と <a href="https://www.youtube.com/watch?v=1jggTxUumEk&amp;feature=youtu.be">Microsoft</a>の機能」を参照してください。</li>
  </ol>
