### YamlMime:Yaml
ms.openlocfilehash: f71d4b2c5fd8a44179d6b36472871b8b87c13169
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909197"
Slug: analyze-data-in-azure-data-explorer-using-kql-magic-for-jupyter-notebook
Title: Jupyter Notebook に KQL マジックを使用して Azure データエクスプローラーのデータを分析する
Summary: データの調査はパズルの解決に似ています。 パズルを完成させるために部分を追加するのと同じように、クエリを作成し、迅速な満足度を得ることができます。
Content: >-
  <p>データの調査はパズルの解決に似ています。 パズルを完成させるために部分を追加するのと同じように、クエリを作成し、迅速な満足度を得ることができます。 同じ分析を複数回繰り返す必要がある Imagine、オープンソースコミュニティのライブラリを使用して、ステップと出力を他のユーザーと共有し、作業内容を成果物として保存する必要があります。 Notebook を使用すると、クエリを作成し、ドキュメントを追加して、作業内容を再利用可能な形式で出力として保存することができます。</p>


  <p><a href="https://jupyter.org/" target="_blank">Jupyter Notebook</a> を使用すると、ライブコード、式、視覚エフェクト、および説明テキストを含むドキュメントを作成および共有できます。 これには、データのクリーニングと変換、数値シミュレーション、統計モデリング、機械学習が含まれます。</p>


  <p>KQL マジックコマンドを発表し、Jupyter Notebook の Python カーネルの機能を拡張しています。 kql マジックを使用すると、kql クエリをネイティブに作成し、Microsoft Azure データエクスプローラーからデータを照会することができます。 Python と KQL を簡単に交換し、KQL レンダーコマンドと統合されたリッチ Plot.ly ライブラリを使用してデータを視覚化することができます。 kql マジックは、クエリを実行するデータソースとして、Azure データエクスプローラー、Application Insights、および Log Analytics をサポートしています。</p>


  <p>1つのマジック &ldquo; % kql &rdquo; を使用して1行のクエリを実行するか、セルマジック &ldquo; %% kql &rdquo; を使用して複数行のクエリを実行します。 次の例では、複数行のクエリを実行し、ploy.ly Python ライブラリを使用して円グラフを表示します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4918bc62-3905-49d9-9e0d-3e2f171aa035.png"><img alt="Screenshot of multi line query and render of pie chart using ploy.ly" border="0" height="554" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/02a47d86-007f-4bb6-8ec7-61f67a87eebb.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="Ploy.ly を使用した円グラフの複数行のクエリとレンダリングのスクリーンショット" width="750"></a></p>


  <p>Python ユーザーの場合、結果セットを <a href="https://pandas.pydata.org/" target="_blank">パンダデータフレーム</a>に配置することができます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/945b0f96-a791-45a7-b3dd-e36c16671b40.png"><img alt="Screenshot pf placing result set into a pandas dataframe" border="0" height="210" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1bfdfca5-9008-4f31-9dc5-f9526ef30403.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="結果セットをパンダデータフレームに配置するスクリーンショット" width="750"></a></p>


  <h2>一般的なユース ケース</h2>


  <ul>
   <li><strong>データサイエンス</strong>: データ科学者は kql マジックを使用して Azure データエクスプローラーのデータを分析および視覚化し、Python コードを kql クエリと簡単に交換して実験、トレーニング、機械学習モデルをスコア付けし、ノートブックを成果物として保存することができます。</li>
   <li><strong>データ分析</strong>: kql マジックを使用して、Python の知識を必要とせずに、データのクエリ、分析、および視覚化を行います。 Python ユーザー向けに、Azure データエクスプローラーのデータを簡単に照会し、Python エコシステムからさまざまなオープンソースライブラリを使用できます。</li>
   <li><strong>ビジネスレビュー</strong>: ビジネスおよび製品レビューに kql マジックを使用します。 Notebook を1回作成し、使用するたびに新しい値で更新します。</li>
   <li><strong>インシデント対応</strong>: kql マジックを使用してオペレーションドキュメントを作成し、クエリをチェーンアップして簡単に調査できます。また、リモート接続アナライザー (RCA) の再現性とアーティファクトのためにノートブックを保存します。</li>
   <li><strong>セキュリティ分析</strong>: Azure データエクスプローラーからデータを照会し、security analytics 用の豊富な Python エコシステムを使用して、データを分析して視覚化します。 たとえば、Microsoft の社内のセキュリティチームの1人が、Juypter で KQL マジックを使用して、セキュリティアラートをトリアージするために、インシデント対応のプレイブックをパラメーター化された Jupyter Notebook に変換し、反復的な調査ワークフローを自動化しました。 サンプルノートブックは、 <a href="https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fnotebooks.azure.com%2Fashwinrp%2Fprojects%2Fthreat-hunting-with-notebooks%2Fhtml%2FAzure%2520Data%2520Explorer-%2520Kqlmagic%2520Demo.ipynb&amp;data=02%7C01%7Cv-jujame%40microsoft.com%7C46cb98f84c534546f9b608d680b5c92d%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636837915587417837&amp;sdata=1l5Xf3daONbE2Rz%2Fp3d1f7yrrxymlNjPzO6UE%2BLPuD4%3D&amp;reserved=0" target="_blank">Azure データエクスプローラー kql マジックデモ</a>で利用できます。また、GitHub リポジトリでは、ノートブックでの<a href="https://github.com/ashwin-patil/threat-hunting-with-notebooks" target="_blank">脅威を探す</a>ことができます。</li>
  </ul>


  <h2>作業の開始</h2>


  <p>私たちの魅力的な機能により、Data Analytics を楽しんでいただけます。 KQL マジックのその他のドキュメントと例については、ドキュメント「 <a href="https://docs.microsoft.com/en-us/azure/data-explorer/kqlmagic" target="_blank">Jupyter Notebook と kql マジックを使用したデータの分析</a>」を &ldquo; 参照してください。&rdquo;</p>
