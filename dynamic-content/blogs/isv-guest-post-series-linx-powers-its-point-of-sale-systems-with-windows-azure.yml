### YamlMime:Yaml
ms.openlocfilehash: 5cc985e45f00c901eb14e2a50ffccad188d2324d
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139908906"
Slug: isv-guest-post-series-linx-powers-its-point-of-sale-systems-with-windows-azure
Title: 'ISV ゲストポスト シリーズ: Linx は、Azure を使用して販売時点管理システムWindowsします'
Summary: エディター&rsquo;に関する注意:&rsquo; Linx e コマース プログラム マネージャーのとき、会社は Windows Azure&nbsp; を使用して LinxWeb の販売時点管理システムをスケールアウトする方法について説明しています。
Content: '<p><b><i>編集&rsquo;</i></b>者向け注: <i>&rsquo;Linx e コマース プログラム マネージャーの、大</i>まかの Chaves 氏が書いた今日の投稿では、<i>Windows Azure</i><i>&nbsp; を使用して顧客向け LinxWeb Point-of-Sale</i> システムをスケールアウトする方法について説明しています。<i><img style="float: right;" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6758.FChavezHS.png" alt="" border="0" height="120" width="131"></i></p>  <p>Linx は 26 歳の ISV であり、ERP テクノロジのリーダーであり、業界の小売市場ラテン アメリカ。 ブラジル、ラテン アメリカ、ヨーロッパには 7,500 を超えるお客様がいて、60,000 を超える Point of Sales (POS) システムがインストールされています。 この会社には、本社と支店に 1,800 人を超える従業員がいます。また、ブラジルと世界中にパートナーのネットワークが広がっています。</p>  <p>LinxWeb は、顧客が販売環境で新しい POS システムとして使用できるホワイトラベル B2C e コマース ソリューションです。 これは、顧客のオンプレミス ERP 環境と統合され、従来の POS システムと同じ方法で管理しながら、プロモーションなどの特定のカスタマイズを可能にします。</p>  <h3><b>ステージの設定: Azure Windows前</b></h3>  <p>Azure に移行する<a href="https://www.windowsazure.com/en-us/pricing/free-trial/?WT.mc_id=cmp_pst001_blg_post0141gen" target="_blank">Windows、</a>LinxWeb は従来のホスティング プロバイダーで実行されている仮想マシン (VM) で動作しました。 しかし、理論的には、この種のデプロイはスケールアウトする可能性があります。実現するのは簡単で高速ではなく、多くの場合、VM にメモリ、コンピューティング能力、またはネットワーク帯域幅を追加してスケールアップする必要がありました。&nbsp;</p>  <p>LinxWeb はもともと、すべての顧客が独自のデプロイと環境を持っていたシングルテナントでした。 カスタマイズは顧客の&rsquo; Web コンテンツ ファイルで直接行われたので、セキュリティの問題、品質コントロールの問題、カスタマイズ エラーによる過剰なサポート要求の生成につながる可能性があります。</p>  <p>Azure Windows前、Web サイトは、製品イメージのサムネイルの生成、電子メールの送信、サードパーティのシステムとの通信など、すべての処理タスクを担当しました。 すべてのタスクが同期的に実行され、eコマース Web サイトのパフォーマンスとエンド カスタマーの可用性に影響を与えました。</p>  <h3><b>Azure への移行Windows</b></h3>  <h3>&nbsp;<img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2100.Linx1.png" alt="" border="0"></h3>  <p>LinxWeb を Windows Azure に移行することを決定した場合、いくつかのリファクタリングが必要でした。これは、Windows Azure Web ロールとロード バランサーのステートレスな性質と互換性を持たします。</p>  <p>各 Web 要求は任意の Web サーバー インスタンスに送信可能であるため、セッション データを外部化する必要がありました。 セッション ストレージ<a href="https://www.windowsazure.com/en-us/home/features/data-management/?WT.mc_id=cmp_pst001_blg_post0141sql" target="_blank">Windows Azure SQL Database</a>を選択しました。</p>  <p>ローカル ディスク ストレージはサーバー インスタンス間で&rsquo;共有されていないので、ローカル ディスクへのファイル書き込みはすべて削除する必要があります。 さらに、ローカル ディスクは、レプリケート<i></i>されたディスクを持つ BLOB Storageまたは SQL Databaseとは異なり、永続的ではありません。 ローカル ディスクは、永続的なストレージではなく、速度と一時的な使用を目的として設計されています。</p>  <p>SQL Server (BLOB 列内) に最初に保存されたメディア コンテンツは Windows <a href="https://www.windowsazure.com/en-us/home/features/data-management/?WT.mc_id=cmp_pst001_blg_post0141sto" target="_blank">Azure Blob Storage</a> に格納され、blob コンテンツを <a href="https://www.windowsazure.com/en-us/home/features/caching/?WT.mc_id=cmp_pst001_blg_post0141cdn" target="_blank">Windows Azure Content Delivery Network</a> (CDN) エッジ キャッシュにキャッシュできるので、Web サイトのスケーラビリティが向上します。 また、メディア オブジェクト全体ではなく blob 参照<i></i>のみを SQL Database に格納することで、SQL Database のサイズをはるかに小さく保ち、個々の SQL データベース (その時点で最大 150 GB でサポート) のストレージ制限を回避できます。</p>  <p>BLOB (および CDN) は URL で参照されるので、メディアに対するブラウザー要求は CDN に直接移動し、Web ロール インスタンスをバイパスします (IIS とデータベースを読み込む)。 この変更により、データベース サイズが平均 75% 削減され、BLOB ストレージのコストが SQL Database よりもはるかに低いストレージ コストも削減されました。 また、これらのサーバーからかなりの負荷が取り出されたので、Web ロール インスタンスで応答時間が向上しました。</p>  <p>環境リソースをよりよく使用するために、複数の顧客がコンピューティング リソースを共有し、ホスティング コストを削減するマルチテナントを念頭に置Windows Azure バージョンを使用しました。 一部のお客様が分離された環境を望む場合を理解すると、お客様が専用のデプロイを受け取るプレミアム オファーも用意されています。 この新しいバージョンでは、&rsquo;サイトのレイアウトを変更 ASP.NET 外観を変更するために、お客様はページを直接更新することはできません。 Windows Azure Blob Storage に格納されているテンプレートを変更してから、ASP.NET ページでそれらのテンプレートを処理して、更新された html をエンド ユーザーにレンダリングすることができます。</p>  <p>Worker ロールは、画像サムネイルの生成や電子メールの送信などのバックグラウンド タスクを処理するために使用されました。 これらのタスクは、Azure キューを使用してキュー Windowsされます。 ワーカー ロールは、スケジュールされたタスクを実行する役割も担います。主にサード パーティシステムとの通信を担当します。 時間処理を管理するために、Quartz.Net フレームワークを使用しました。このフレームワークには、複数の worker ロール インスタンスで同期を実行するオプションがあります。 これは非常に重要なポイントです。スケジューラが worker ロールで実行するために設定されている場合、そのスケジューラはすべてのインスタンス <i>で実行されます。</i> Quartz.Net、特定の時点で 1 つのスケジューラ インスタンスだけが実行されます。</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4527.Linx2.png" alt="" border="0"></p>  <p>一部のお客様は、会社の Web サイトやブログを電子商取引サイトと共にホストしたい場合もあります。 この必要性を解決するために、 <a href="https://wordpress.org/" target="_blank">ブログ エンジンとして WordPress</a> を使用します。 WordPress は PHP ベースであり、既定では、PHP ランタイム ライブラリは Azure Web または worker Windowsにインストールされません。 WordPress ブログは Azure Web Windowsで実行されています。そのため、必要な PHP コンポーネントと WordPress 自体をインストールする必要がありました。 これを行ったのは、IIS で PHP ランタイムをセットアップするスタートアップ タスクと <a href="https://go.microsoft.com/?linkid=9752821" target="_blank">Web プラットフォーム</a> インストーラーコマンド ラインです。 Windows Azure SQL Databaseは永続的なストレージとして使用され、Windows Azure Blob Storage として使用されます。そのため、ユーザーから BLOB ストレージにファイルを直接アップロードする <a href="https://wordpress.org/extend/plugins/windows-azure-storage/" target="_blank">WordPress 用の Windows Azure Storage</a> プラグインもインストールしました。</p>  <h3><b>まとめ</b></h3>  <p><b></b>ソリューションを Azure に移行する主な利点Windows、アプリケーションのスケールアウトがいかに簡単かつ迅速かです。 これにより、お客様からのビジネス ニーズに集中し、エンド ユーザーからの多数の要求を処理するマーケティング キャンペーンをサポートできます。</p>  <p>お客様にとっての大きな利点は、インフラストラクチャと運用システムの管理について心配する必要がなくなったという利点です。</p>  <p>指摘したように、解決する技術的な課題はいくつか存在し、いずれも乗り越えられないものはありません。</p>  <ul>  <li>シングルテナントからマルチテナントへの移行</li>  <li>ローカル ストレージとローカル ストレージSQL BLOB ストレージと BLOB ストレージへの移動CDN</li>  <li>複数のロール インスタンス Quartz.net を使用したタスクのスケジュール設定</li>  <li>PHP ランタイムと WordPress のインストール</li>  <li>複数のインスタンス間でステートレスでスケーラブルな Web 要求処理のリファクタリング&nbsp;</li>  </ul>  <p>これらの課題のすべてに対処できたので、Azure で実行される非常に効率的なアプリケーションWindowsしました。</p>'
