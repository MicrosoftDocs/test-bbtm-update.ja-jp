### YamlMime:Yaml
ms.openlocfilehash: 15a8d9263f4ff2f7d99e17c0bf3ee2a1a0b13f95
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139893402"
Slug: monitoring-azure-kubernetes-service-aks-with-azure-monitor-container-health-preview
Title: Azure Monitor コンテナーの正常性 (プレビュー) を使用した Azure Kubernetes Service (AKS) の監視
Summary: アプリケーションが期待どおりに稼働していることを確認するには、Azure Kubernetes Service (AKS) クラスターの正常性とパフォーマンスを監視することが重要です。
Content: >-
  <p>アプリケーションが期待どおりに稼働していることを確認するには、Azure Kubernetes Service (AKS) クラスターの正常性とパフォーマンスを監視することが重要です。 Virtual Machines など、他の Azure インフラストラクチャでアプリケーションを実行する場合は、Azure Monitor に依存して、ほぼリアルタイムで詳細な監視データを提供する必要があります。 Azure Monitor に依存して、AKS クラスターの正常性とパフォーマンスを追跡できるようになったことをお知らせします。 Azure Monitor の新しいコンテナーの正常性監視機能を見てみましょう &rsquo; 。</p>


  <p>AKS クラスターを作成するときに、Azure portal からコンテナーの監視を有効にすることができます。 Log Analytics ワークスペースの入力を求めるメッセージが表示される場合があります。この理由は、この投稿全体で明確になります。 ここでは、コンテナーログを格納するための一元的な場所を提供していることを確認します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7c8dd592-0b0f-4b96-8380-8ba0f795f1b2.png"><img alt="Create Kubernetes Cluster" border="0" height="491" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/431951b7-1687-450f-b859-cabe38b2fe3e.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Kubernetes クラスターの作成" width="1033"></a></p>


  <p>これで、ウィザードが終了し、コンテナーの正常性を使用して AKS クラスターがセットアップされました。次は、の使用方法を確認する例を見ていきましょう &rsquo; 。 AKS の [Health] \ (正常性 \) をクリックして開始します。 &rsquo;たとえば、Kubernetes クラスターのどこかにリソースのボトルネックがあると考えられます。 &rsquo;どこで問題が発生しているかわからないため、ノードビューから開始できます。 適切なノードを選択し、メモリ使用量を確認します (残存メモリまたはワーキングセットメモリを選択できます)。 ポッドとコンテナーへのドリルダウンを維持できます。</p>


  <p>&nbsp;</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a4d9431c-4684-4b9f-ad18-e7be9e62ba0e.png"><img alt="nodes" border="0" height="409" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b96c3be2-b677-4fdf-849f-4f0091494d94.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="節" width="1141"></a></p>


  <p>次に、ページの上部にあるコントローラーまたはコンテナーを選択し、それらのオブジェクトの状態とリソース使用率を確認します。 ビューを見ると、2つの問題があることがわかります。 まず、ノードは一般に多数のコンテナーを実行しています。 ある時点でコンテナーを再割り当てすることができます。<br>

  &nbsp;&nbsp; <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/23f6afec-4aa4-41fb-9034-9aa9b066a247.png"><img alt="Nodes" border="0" height="181" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/08b691e5-ef69-4043-b2f8-98cb918004cd.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="節" width="1142"></a></p>


  <p>ただし、さらに重要で問題があるのは、コンテナーのメモリ使用量です。特 &ldquo; に、メモリ使用量が85% である adminconsole &rdquo; コンテナーです。<br>

  &nbsp;&nbsp; <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/90326c31-96b7-46b5-b7a8-9d92ea993361.png"><img alt="Containers" border="0" height="398" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b3399988-6c1a-48a6-be57-ee3e9aff6b34.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="ある" width="1097"></a></p>


  <p>この問題を回避するために新しいコンテナーを作成することもできますが、メモリ使用量が多い場合の根本原因を詳しく調べることをお勧めします。 コンテナーの正常性は、その調査に役立ちます。 [ログの表示] をクリックすると、コンテナーのすべてのログデータを含むすべての Log Analytics ワークスペースが表示されます。<br>

  &nbsp;&nbsp; <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1f74c41f-4d04-41fc-98ee-c33d0a0c287e.png"><img alt="View Logs" border="0" height="137" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fda04a57-e184-48fd-a478-ab691a6a09a1.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="ログの表示" width="1132"></a><br>

  これで、Log Analytics ワークスペースの構成が重要である理由がわかりました。 データを格納するだけでなく、Log Analytics はすぐに使用できる洞察を得られます。また、高度なクエリを実行することで、問題の下部を把握することができます。</p>


  <p>&nbsp;<a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/42f7f10d-96da-4322-876f-7638de2322a5.png"><img alt="Log Analytics" border="0" height="419" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/eb7a9ead-c554-4267-9022-c4340e40d180.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Log Analytics" width="1154"></a><br>

  &nbsp;<br>

  AKS の Azure Monitor を使用したコンテナーの正常性の監視について、この簡単な概要をお望みでしょう。 まだ AKS を使用していない場合でも、Azure でコンテナーをデプロイする &rsquo; 場合は、 <a href="https://aka.ms/containermonitoringla">コンテナー監視</a> ソリューションに関する記事をご覧ください。 このパブリックプレビューではまだ初期段階にあり、ストアには多数の魅力的な機能があります。 AKS クラスターの正常性に関する情報をすぐに入手できるようにするために、お客様からのフィードバックや提案をお寄せください。 コンテナーの正常性の詳細については、こちらの <a href="https://aka.ms/azuremonitorcontainer">ドキュメント</a>を参照してください。</p>
