### YamlMime:Yaml
ms.openlocfilehash: 7f3b3856a1f9c688f6f7730f7ad91bfdeebaaa59
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890170"
Slug: manage-and-find-data-with-blob-index-for-azure-storage-now-in-preview
Title: Azure Storage の Blob インデックスを使用したデータの管理と検索—現在プレビュー中
Summary: 'Blob インデックス: 管理されたセカンダリインデックスで、Azure Blob storage のデータオブジェクトを記述するために多次元オブジェクト属性を格納できるようになりました。これはプレビューで利用できるようになりました。'
Content: >-
  <div style="background:#eee;border:1px solid #ccc;padding:5px 10px;"><em><strong>2021 年6月17日の更新: &nbsp; </strong>Azure storage の Blob インデックスが、すべてのパブリックリージョンで一般公開されました。最新の詳細については、 <a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-manage-find-blobs?tabs=azure-portal" target="_blank">microsoft のドキュメント</a>を参照してください。</em></div>


  <p>Blob インデックス &mdash; : 管理されたセカンダリインデックス。 Azure Blob storage &mdash; のデータオブジェクトを記述するために多次元オブジェクト属性を格納できるようになりました。 Blob storage の上に構築された <a href="https://aka.ms/blobindex" target="_blank">Blob インデックス</a> は、すべてのワークロードに対して一貫した信頼性、可用性、およびパフォーマンスを提供します。 Blob インデックスは、データに設定された属性タグに基づいてデータの分類と検索を行うことができる、ネイティブのオブジェクト管理とフィルター処理の機能を提供します。</p>


  <h2>Blob インデックスを使用してデータを管理および検索する</h2>


  <p>データセットが大きくなるにつれて、データの中で特定の関連オブジェクトを見つけるのは困難でフラストレーションがあります。 以前は、クライアントは <a href="https://docs.microsoft.com/rest/api/storageservices/list-blobs" target="_blank">Listblobs API</a> を使用して、一度に5000の辞書式レコードを取得し、リストを解析して、必要な blob が見つかるまで繰り返します。 また、一部のユーザーは、個別のルックアップテーブルを管理して特定のオブジェクトを検索することにもなります。 これらの個別のテーブルによって、同期 &mdash; されていないコスト、複雑さ、およびフラストレーションが発生する可能性があります。 お客様は、データの編成やインデックステーブルの管理について心配する必要はありません。また、ビジネスを成長させる強力なアプリケーションの構築に集中できます。</p>


  <p>Blob インデックスは、 <a href="https://docs.microsoft.com/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs" target="_blank">すべての blob の種類</a> (ブロック Blob、追加 Blob、ページ blob) のサポートにより、データ管理とクエリの問題を軽減します。 Blob インデックスは、使い慣れた blob storage エンドポイントと Api を介して公開されます。これにより、データと分類インデックスの両方を同じサービスに簡単に格納してアクセスできるため、アプリケーションの複雑さが軽減されます。</p>


  <p>Blob インデックスを作成するには、アップロード中の新しいデータまたはストレージアカウントに既にある既存のデータのいずれかで、データのキー値タグ属性を定義します。 これらの blob インデックスタグは、基になる blob データと共に格納されます。 次に、blob インデックス作成エンジンは、新しいタグを自動的に読み取り、インデックスを作成し、ユーザーにクエリ可能な blob インデックスに公開します。 Azure portal、REST Api、または Sdk を使用して、 <i>FindBlobsByTags</i> API 呼び出しを発行して、一連の条件を指定できます。 Blob ストレージは、一致条件を満たす blob だけで構成されるフィルター処理された結果セットを返します。</p>


  <p>次のシナリオは、Blob インデックスのしくみを示しています。</p>


  <ol>
      <li>万個の blob を含むストレージアカウントコンテナーでは、ユーザーが新しい blob &ldquo; の B2 &rdquo; をアップロードし、次の blob インデックスタグが付けられます。 &lt; Status = 未処理、Quality = 8k、Source = RAW &gt; 。</li>
      <li>Blob とその blob インデックスタグはストレージアカウントに保存され、アカウントのインデックス作成エンジンは、その後すぐに新しい blob インデックスを公開します。</li>
      <li>後で、エンコードアプリケーションでは、少なくとも4K 解像度の品質の未処理のメディアファイルをすべて検索する必要があります。 FindBlobs API 呼び出しを発行して、次の条件に一致するすべての blob を検索します。 &lt; status = 未処理、Quality &gt; = 4K、status = = RAW &gt; 。</li>
      <li>Blob インデックスは、blob &ldquo; B2 &rdquo; だけを返します。これは、指定した条件に一致する 100万 blob の唯一の blob です。 エンコーディングアプリケーションは、処理ジョブを迅速に開始し、アイドルコンピューティング時間とコストを節約できます。</li>
  </ol>


  <p>&nbsp;</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b734ee89-9828-4984-b810-bab59c74cbcd.png"><img alt="Blob Index overview example." border="0" height="644" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/92cec444-9b04-4e3c-9250-2af9a918d97d.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="Blob インデックスの概要の例。" width="1024"></a></p>


  <h2>Blob インデックスを使用したプラットフォーム機能の統合</h2>


  <p>Blob インデックスは、blob データの分類、管理、および検索を支援するだけでなく、 <a href="https://docs.microsoft.com/azure/storage/blobs/storage-lifecycle-management-concepts" target="_blank">ライフサイクル管理</a>などの他の Blob service 機能との統合も提供します。</p>


  <p>新しい <i>Blobindexmatch</i> をフィルターとして使用すると、データをクール層に移動したり、blob に適用されているタグに基づいてデータを削除したりできます。 これにより、ルールをより細かく設定し、指定した条件に一致する場合にのみデータを移動または削除することができます。</p>


  <p>次のサンプルライフサイクル管理ポリシーは、videofiles &rdquo; コンテナーのブロック blob に適用されます。また、階層オブジェクトは &ldquo; 、Blob が Status = &lsquo; 処理済み &rsquo; で、Source = &lsquo; RAW &rsquo; の blob インデックスタグと一致する場合にのみ、ストレージをアーカイブします。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/38e45661-fa9b-4971-8c45-7e3a50647d10.png"><img alt="Lifecycle management rule with blobIndexMatch example." border="0" height="445" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7256a965-d07b-44ac-9480-45958a0982e9.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="BlobIndexMatch の例を含むライフサイクル管理ルール。" width="1024"></a></p>


  <p>Blob インデックスとのライフサイクル管理の統合は、ほんの始まりにすぎません。 他の blob プラットフォーム機能との統合を近日中に追加する予定です。</p>


  <h2>Blob インデックスタグを使用した条件付き blob 操作</h2>


  <p>REST バージョン2019-10-10 以降では、ほとんどの <a href="https://docs.microsoft.com/rest/api/storageservices/operations-on-blobs" target="_blank">blob Service api</a> で新しい条件ヘッダー (" <i>x-ms</i>") がサポートされるようになりました。これにより、指定された blob インデックスタグ条件が満たされた場合にのみ操作が成功します。 条件が満たされない場合、操作は失敗します。したがって、blob は変更されません。 Blob インデックスによってこの機能を使用すると、明示的にタグ付けされた blob でのみデータ操作が行われるようになり、マルチスレッドアプリケーションによる偶発的な削除や変更を防ぐことができます。</p>


  <h2>ファースト ステップ</h2>


  <p>ブログの Index preview に登録するには、次の PowerShell または CLI コマンドを実行して、この機能をサブスクリプションに登録する要求を送信します。</p>


  <p><strong>PowerShell を使用して登録する</strong></p>


  <p><code>Register-AzProviderFeature -FeatureName BlobIndex -ProviderNamespace Microsoft.Storage</code></p>


  <p><code>Register-AzResourceProvider -ProviderNamespace Microsoft.Storage</code></p>


  <p><strong>Azure CLI を使用して登録する</strong></p>


  <p><code>az feature register --namespace Microsoft.Storage --name BlobIndex</code></p>


  <p><code>az provider register --namespace &#39;Microsoft.Storage&#39;</code></p>


  <p>要求が承認されると、 <b>フランス中部、 </b><b>フランス南部、カナダ中部、およびカナダ東部 </b>の既存または新規の汎用 v2 (GPv2) ストレージアカウントは、Blob インデックス &rsquo; 機能を利用できます。 ほとんどのプレビューと同様に、この機能は一般公開されるまで運用環境のワークロードには使用しないことをお勧めします。</p>


  <h2>ビルドして使用してください。</h2>


  <p>&rsquo;プレビューの登録と承認が完了したら、新規または既存のデータにタグを設定し、タグに基づいてデータを検索し、タグフィルターを使用して豊富なライフサイクル管理ポリシーを設定することによって、Blob インデックスが提供するすべての機能を活用できます。 詳細については、「 <a href="https://aka.ms/blobindex" target="_blank">Blob インデックスを使用した Azure Blob Storage でのデータの管理と検索</a>」を参照してください。</p>


  <p>お客様は、ストレージアカウント内の Blob インデックスタグの合計数に対して課金されます。これは、その月の平均値です。 <i>Setblobtags</i>、 <i>getblobtags</i>、および<i>FindBlobsByTags</i>への要求は、それぞれの操作の種類に応じて課金されます。 インデックス作成エンジンには料金はかかりません。 詳細については、「 <a href="https://azure.microsoft.com/pricing/details/storage/blobs/" target="_blank">ブロック Blob の価格</a> 」を参照してください。</p>


  <p>今後も機能強化を続けており、Blob インデックスまたはその他の機能に関するフィードバックをに電子メール <a href="mailto:BlobIndexPreview@microsoft.com">BlobIndexPreview@microsoft.com</a> でお寄せください。 ご意見をお寄せください。 Azure Storage についてのご意見やご提案をお聞かせください。 <a href="https://feedback.azure.com/forums/217298-storage" target="_blank">Azure Storage フィードバックフォーラム</a>で投稿できます。</p>
