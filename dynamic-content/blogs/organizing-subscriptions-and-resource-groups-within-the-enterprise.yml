### YamlMime:Yaml
ms.openlocfilehash: e6ebaeeb6ceb6c944a87cdd09fde6f737cc47cc8
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139894275"
Slug: organizing-subscriptions-and-resource-groups-within-the-enterprise
Title: 企業におけるサブスクリプションとリソース グループの編成
Summary: コアサービスエンジニアリング (旧称 Microsoft IT) では、開発者がすぐに利用できるようにすると同時に、エンタープライズ Azure フットプリント内のサブスクリプションとリソースグループを制御とセキュリティのために使用する方法を示しています。
Content: >-
  <p><em>コアサービスエンジニアリング (旧称 Microsoft IT) の金融エンジニアリングチームにおける Robert Venable は、セキュリティとコンプライアンスを確保しながら開発チームを有効にすることにより、お客様に感謝します。また、 <a href="https://twitter.com/ciphertxt" target="_blank">Scott Hoag</a>、Opsgility および渡 Dendtler におけるプリンシパルクラウドソリューション設計者、Microsoft のアカウントテクノロジストラテジストにより、貴重なフィードバックを確認し、提供していただきありがとうございます。</em></p>


  <p>主要なサービスエンジニアリングチームと運用チームのメンバーが、Redmond のエグゼクティブブリーフィングセンターで顧客に話すときによく寄せられる質問の1つは、開発者が基幹業務アプリケーションの Azure フットプリントをどのように保護しながらも、開発者が環境を可視化し、Visual Studio Team Services の機能を使用できるようにすることです。 CI/CD、リリースなど。</p>


  <p>この答えの中核となるのは、サブスクリプション、リソースグループ、およびロールベースの Access Control を組み合わせて使用し、一連のガイドラインに確実に準拠させる方法です。</p>


  <p>&#39;を最上位レベルで開始しましょう。 Azure サブスクリプション。 CSEO は、現在、多数の基幹業務アプリケーションを使用していますが、現在は数千を超えています。 <a href="https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-subscription-governance/?wt.mc_id=itshowcase-codeapps" target="_blank">Azure enterprise スキャフォールディングの規範となるサブスクリプションガバナンス</a>に関する記事では、<strong>ビジネスユニット</strong>のパターンについて大まかに説明しています。</p>


  <p align="center"><img alt="business oriented subscription design" data-linktype="relative-path" height="392" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/business.png" title="azure スキャフォールディングからのビジネス区分の構成要素" width="480"></p>


  <p align="center"><em>ビジネス単位パターン</em></p>


  <p>特に、私たちのチームの多くは、上記のパターンから enterprise/連邦/州/地方への一般的なマッピングを採用してきました。 この共通の語彙は、すべてのユーザーが理解し、関連できる実用的なコンストラクトを提供し、&#39;同じページに再適用することを保証します。</p>


  <p>この翻訳は、実際にはサブスクリプション組織の例と共にどのように表示されるのでしょうか。 一番上から次のようになります。</p>


  <ul>
   <li><strong>Enterprise</strong> - これは Azure スキャフォールディングでの Enterprise と同じです。 Enterprise レベルの項目は、企業 &ndash; 全体における一般的な懸念事項であり、内部の azure 消費をパブリックな収益としてカウントする&#39;、テナント内のすべての azure サブスクリプションに対してどの程度のセキュリティを確保するか、またはレベルに関係なく重要なその他の高レベルの戦略的目標を設定することを保証します。 このことを考えるもう1つの方法として、Microsoft が世界中の四半期の利益 &ndash; を報告する方法もあります。これは、会社全体で&#39;ます。</li>
   <li><strong>連邦</strong> - 主要な部門は連邦政府と呼ばれています。 たとえば、CSEO は連邦政府グループの1つです。 このレベルでは、追加のポリシーと手順、フットプリントに対して実行される automation、またはその部門に固有のその他の事柄がある場合があります。 通常、これは、大規模な予算にロールアップビューなどがあります。</li>
   <li><strong>状態</strong> - 関連するサービスまたはサービスのグループ。 たとえば、Finance IT 組織内の税サービスを提供します。 ここでは、HIPAA、PCI、SOX コントロール、プロシージャなど、追加のポリシーと手順を使用できます。 状態には、関連するサービスのグループがあります。</li>
   <li><strong>地元の</strong> &ndash; これは、サブスクリプションが存在し、サービスに関連付けられている場所です。 各サブスクリプションには、サービスを構成する一連の機能の提供に関連する複数のアプリケーションが含まれています。 各アプリケーションは、通常、明示的なリソースグループに含まれています。 リソースグループは、サービス (サブスクリプション) の一部であるそのアプリケーションのコンテナーになります。 サービスに共有または共通のアプリケーションが存在する場合があります。 アプリケーション/リソースグループレベルでは、アプリケーション開発者のチームはどこにいて &rsquo; も、azure における自社のフットプリントの責任を、セキュリティから azure の最適なものに再担当します。 このレベルで運用されている優れた開発チームは、多くの懸念事項を解決し、通常は高いレベルから要求されるロールアップレポートの質問をします。 各開発チームが Azure Security Center ブレード、Azure Log analytics から構築されたピン留めされたダッシュボード、および Azure Advisor ブレードを日常的に参照している場合は、 &rsquo; 支出を減らしたり、パッチのコンプライアンスを達成したりするために、部門全体の取り組みが行われることはありません。</li>
  </ul>


  <p>この階層構造により、開発者は迅速に制御とポリシーのレベルを調整できるようになります。 一般的なサブスクリプションの構成は次のとおりです。</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/75517cc9-4fe6-4b0a-8976-f0ca058a6548.png"><img alt="image" border="0" height="679" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7d28a2bc-0f6a-4378-9421-a7382a212d44.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="絵" width="689"></a></p>


  <p align="center"><em>税サービスの CSEO サブスクリプションの例</em></p>


  <p>上記のリソースグループ内では、各運用リソースグループ (アプリケーション) に表示される一般的なコンポーネントは、次のような特定のサービスを構築するために使用される Azure コンポーネントになります。</p>


  <ul>
   <li>Azure HDInsight クラスター</li>
   <li>ストレージ アカウント</li>
   <li>SQL Database</li>
   <li>Log Analytics</li>
   <li>Application Insights</li>
   <li>その他</li>
  </ul>


  <p>各リソースグループには、そのアプリケーションに固有のコンポーネントがあります。 場合によっては、サブスクリプションに共通または共有のサービスリソースグループが存在することがあります。 これらの項目は、サービス内のアプリケーション間で使用されます。次に例を示します。</p>


  <ul>
   <li>共通 Log Analytics ワークスペース</li>
   <li>他のサービスによって処理するためにファイルがダンプされる共通の Blob Storage アカウント</li>
   <li>ExpressRoute VNet</li>
  </ul>


  <p>この CSEO 税サービスでは、複数のアプリケーションがあり、それぞれが独自のリソースグループ (データウェアハウスなど)、ask (help web ポータルとボット)、計算エンジン、アーカイブアプリケーション、レポートアプリケーションなどです。</p>


  <p>サブスクリプションとリソースグループ内では、最小限の特権アクセス原則を使用して、作業を行う必要がある担当者だけがリソースにアクセスできるようにします。 そのため、サービスのエンジニアリング所有者だけがサブスクリプションの所有者になります。 サブスクリプションに投稿者が存在しません。 いくつかの特定の id が閲覧者ロールに追加されます。これらは通常、自動ツールによって使用されるアカウントです。</p>


  <p>各リソースグループには、必要最小限のアクセス許可で追加した id だけが含まれます。 カスタムロールを作成しないようにします。これは、時間の経過と共に、スケールの作成管理に悩まされます。</p>


  <p>リソースグループ内では、所有者ロールと閲覧者ロールがサブスクリプションから継承されます。 VSTS ビルドアカウント id は、自動デプロイのリソースグループの共同作成者としてに追加されます。 これは、 <strong>サービス所有者とビルド id のみが継続的に運用サービスに触れることができる</strong>ことを意味します。</p>


  <p>実稼働前リソースグループで、エンジニアリングチームが閲覧者ロールに追加されます。 これは、サービス所有者とビルドアカウントのみが継続的に運用前に触れることができることを意味しますが、エンジニアリングチームはリソースグループ内の&#39;を確認できます。 開発者は、テストのために何らかの作業を行う必要がある場合、運用前または運用環境に配置することができ &rsquo; ます。</p>


  <p>これにはいくつかのバリエーションがありますが、これら &rsquo; は一般的ではありません。 たとえば、チームによっては、他のユーザーがサブ所有者としてセキュリティを必要としている場合や、式からユーザーを削除し、サブ所有者としてサービスアカウントの形式を使用する場合もあります。 チームによっては、必要な自動化が完全に完成していない場合 &rsquo; に、エンジニアが事前運用を担当者に提供することがあります。 これは、チームのニーズによって異なります。</p>


  <p>これで、組織内の一般的な役割について、どのような意味があるのでしょうか。</p>


  <p><strong>開発者 </strong>は、実稼働前リソースグループにアクセスして、開発/運用前/uat/購入前の非運用環境で発生し&#39;ていることを確認できます。ただし、運用環境での場合と同様に、デバッグのためにプラットフォームでテレメトリメカニズムを使用する必要があります。 チームはこのレベルに成熟していますが、運用前のリソースグループで共同作成者レベルのアクセス権を持つ開発者がいる可能性があります。 この分野の結果は、一般に、ポータルと Azure Log Analytics ダッシュボードの Application Insights 非常に充実しています。 成熟したチームは、Microsoft Release Management を使用する Visual Studio Team Services のような CI/CD システムからのデプロイに切り替え、ビルドとリリースの定義を作成することをお勧めします。 開発者は、キーローテーションなどの操作上の問題をスクリプト化して自動化することもできます。</p>


  <p><strong>セキュリティ &amp;操作</strong>は、Azure AD を通じて IaaS および Privileged Identity Management の Azure Security Center を通じて、ジャストインタイム VM アクセスで id を介してアクセス権を持ちます。 一部のオペレーションチームでは、自動ツールを使用して Azure サブスクリプションのフットプリントを調べて、リスクを軽減するための構成を求めている場合があります。たとえば、パブリックインターネットエンドポイント (PiP) を含むリソースグループや、セキュリティ上のリスクが生じる可能性のある ExpressRoute 回線を探している場合などです。 これらのチームは、サブスクリプションレベルで追加された監査アカウント id を使用します。</p>


  <p>このモデルが暗黙的に駆動するもう1つの点は、中央の IT チームから開発チームへのアカウンタビリティの交代です。 これは、セキュリティおよび運用チームがコンプライアンスとリスクについて引き続き注意を払う<strong>ことを意味するものではありません</strong>。 しかし、ローカル開発チームが請求、セキュリティセンター、および Azure Advisor ツールを見ている場合は、コストの最適化、セキュリティのコンプライアンスと懸念事項が企業から求められていますが、連邦および州のレイヤーは既に最適化されています。</p>


  <p>コアサービスエンジニアリングのエンジニアに質問することはできますか? Twitter では、に <a href="https://twitter.com/lyledodge" target="_blank">@lyledodge</a> ついての質問に対する回答をすぐに得ることができます。また、チームは、今後の記事、または <a href="https://www.microsoft.com/itshowcase">IT ショウケースサイト</a>で質問に対する回答を得ることができます。</p>
