### YamlMime:Yaml
ms.openlocfilehash: d7dd9835beca59c4bd6e73bf674dedbcd0a7fdb7
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895789"
Slug: push-notification-hubs-apns-priority
Title: IOS デバイスへのプッシュに対して APNS 優先度を有効に Notification Hubs
Summary: Notification Hubs で apns 優先度を使用して、優先順位が付けられた APNS プッシュを iOS デバイスに送信します。
Content: >-
  <p>Apple Push Notification Services 通知送信要求ヘッダーに<a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/APNsProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH101-SW15">apns 優先度</a>が追加されまし &ldquo; た。ユーザーは、即時および優先度の高い送信と、デバイスの省電力送信を10個に設定して、送信の優先順位 &rdquo; を指定できます。 この機能を使用する方法については、いくつかのサンプルスニペットを Notification Hubs&#39; .NET SDK で共有します。</p>


  <p>テンプレートを使用せずにプッシュするには、プッシュ要求を送信する前に通知ヘッダーの " <em>Apns 優先順位</em> " プロパティを設定するだけです。</p>


  <pre class="prettyprint">

  var notification = new AppleNotification(@&quot;

  {
    &quot;&quot;aps&quot;&quot;: {
      &quot;&quot;content-available&quot;&quot;: 1
    },
    &quot;&quot;data&quot;&quot;: {
      &quot;&quot;key&quot;&quot;: &quot;&quot;value&quot;&quot;
    }
  }&quot;);

  notification.Priority = &quot;5&quot;;


  await notificationHubClient.SendNotificationAsync(notification);

  </pre>


  <p>テンプレート登録モデルを使用してテンプレートのプッシュを実行するには、デバイスの登録で apns の優先順位を設定するか、またはシナリオに応じて送信プロセス中に apns を設定します。</p>


  <p>Apns 優先度をテンプレート自体にリンクする場合は、登録に優先度の値を追加します。</p>


  <pre class="prettyprint">

  var registration = new AppleTemplateRegistrationDescription(
    &quot;deviceToken&quot;,
    @&quot;{
      &quot;&quot;aps&quot;&quot;: {
        &quot;&quot;content-available&quot;&quot;: 1
      },
      &quot;&quot;data&quot;&quot;: {
        &quot;&quot;key&quot;&quot;: &quot;&quot;$(Message)&quot;&quot;
      }
    }&quot;);

  registration.Priority = &quot;10&quot;;

  await notificationHubClient.CreateRegistrationAsync(registration);

  </pre>


  <p>テンプレートに送信するときに、apns 優先度よりも柔軟にする場合は、プレースホルダーを追加し、送信時の優先度を指定します。</p>


  <pre class="prettyprint">

  // Template registration with priority expression

  var registration = new AppleTemplateRegistrationDescription(
    &quot;deviceToken&quot;,
    @&quot;{
      &quot;&quot;aps&quot;&quot;: {
        &quot;&quot;alert&quot;&quot;:&quot;&quot;New notification!&quot;&quot;
      }
    }&quot;);
  registration.Priority = &quot;$(Priority)&quot;;


  await notificationHubClient.CreateRegistrationAsync(registration);

  </pre>


  <p>送信時に優先順位を指定するには:</p>


  <pre class="prettyprint">

  var notification = new TemplateNotification(new Dictionary&lt;string, string&gt;()

  {
    {&quot;Priority&quot;, &quot;10&quot;}
  });

  await notificationHubClient.SendNotificationAsync(notification);</pre>


  <p>&nbsp;</p>


  <p>試してみると、ご意見をお聞かせください。</p>
