### YamlMime:Yaml
ms.openlocfilehash: 2d933cf8b254d0b3da9a5f8646676ce4a0dd931e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139889461"
Slug: how-to-use-premium-encoding-in-azure-media-services
Title: Azure Media Services で Premium Encoding を使用する方法 (ブログの投稿)
Summary: このページでは、Premium エンコードのプレビュー リリースをお知らせAzure Media Services。
Content: "プレミアムは、最も複雑なエンコード ワークフローを解決できるAzure Media Servicesの新しいテクノロジです。 新しい Premium エンコード<a title=\"\" href=\"https://azure.microsoft.com/blog/2015/03/05/introducing-premium-encoding-in-azure-media-services\" target=\"_blank\">機能の概要については、Azure Media Services での Premium エンコードの概要に関するブログAzure Media Services説明しています</a>。このブログでは、Premium エンコーダーに関する技術的な詳細と、この新機能を使用するサンプル コードについて説明します。\n<blockquote><strong>注</strong>: アカウントに含むエンコード予約ユニット (RU) の種類に関係なく、Premium エンコーダーを使用できます。 Premium エンコーダーを使用<em><strong>する場合</strong></em>、新しい RU をプレミアムする必要があります。</blockquote>\n<h1>サポートされる形式</h1>\nPremium エンコーダーでサポート<a title=\"されているファイル形式とコーデックに関する最新の情報については、Azure Media Services\" href=\"https://go.microsoft.com/fwlink/?LinkId=528391\" target=\"_blank\"></a> ドキュメント センターを使用したエンコードに関するページを参照してください。 最初のリリースでは、Premium エンコーダーには次の形式のサポートが含まれています。\n<h2>取り込み形式</h2>\n<ul>\n <li>入力コンテナー/ファイル形式: F4V、MXF、GXF、MPEG トランスポート ストリームとプログラム ストリーム、MP4、ASF、および AVI</li>\n <li>入力ビデオ コーデック: AVC/AVCIntra、DNxHD、DVCPro/DVCProHD、MPEG-2、MPEG-1、VC-1</li>\n <li>入力オーディオ コーデック: AES、Dolby® E、Dolby® Digital (AC3)、AAC、MPEG レイヤー 2、MP3、WMA、WAV/PCM</li>\n</ul>\n<h2>出力形式</h2>\n<ul>\n <li>出力コンテナー/ファイル形式: F4V、MXF、DPP、GXF、MP4、MPEG TS、ASF、および AVI</li>\n <li>出力ビデオ コーデック: AVC/AVCIntra、DNxHD、DVCPro/DVCProHD、JPEG2000、MPEG-2、MPEG-1、VC-1</li>\n <li>出力オーディオ コーデック: AES、Dolby® Digital (AC3)、Dolby® Digital Plus (E-AC3)、AAC、MPEG レイヤー 2、MP3、WMA</li>\n</ul>\n<h1>クローズド キャプションのサポート</h1>\n最初のリリースでは、Premium エンコーダーは、ソースまたは入力メディア ファイルにインターリーブされている場合、クローズド キャプションをサポートします。基本的には、CEA-608/CEA-708 は、ユーザー データ (H.264 基本ストリーム、ATSC/53、SCTE20 の CE メッセージ) として転送されるか、MXF/GXF ファイル内の関連データとして持ち込まれます。\n\n出力では、入力で CEA 608/708 を再パッケージ化するための次のオプションを使用できます。\n<ul>\n <li>CEA-608 から CEA-708 への変換</li>\n <li>CEA-608/CEA-708 パス スルー (H.264 基本ストリームの SEI メッセージに埋め込むか、MXF ファイルの補助データとして実行)</li>\n <li>SCC</li>\n <li>SMPTE RP2052 によるソース CEA-608 の SMPTE Timed Text (DFXP ファイル作成を含む)</li>\n <li>SRT サブタイトル ファイル</li>\n <li>DVB サブタイトル ストリーム</li>\n</ul>\n<blockquote><strong>注</strong>: 上記のすべての出力形式が、ストリーミング経由の配信でサポートされているAzure Media Services。</blockquote>\n<h1>AMS エクスプローラーを使用したタスクの送信</h1>\nエンコード タスク<a title=\"を Premium エンコーダーに送信する最も簡単な方法は、Azure Media Services Explorer <a href=\"https://azure.microsoft.com/blog/2014/10/08/managing-media-workflows-with-the-new-azure-media-services-explorer-tool/\"></a>\" href=\"https://aka.ms/amse\" target=\"_blank\">Azure Media Services Explorer </a> を使用する方法です。この使いやすいツールの詳細については、このブログを参照してください。\n\nまず、[資産] タブでエンコードするビデオアセットを選択します。\n\n<div id=\"attachment_261621\" align=\"aligncenter\" width=\"636\"><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/06/2015-03-04_21h59_14.png\"><img class=\"size-large wp-image-261621\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-03-04_21h59_14-636x297.png\" alt=\"Pick the video Asset you want to encode\" width=\"636\" height=\"297\" /></a> エンコードするビデオアセットを選択する</div>\n\n&nbsp;\n\n資産を選択し、右クリックして [Encode asset(s) with Media Encoder プレミアム Workflow...] を選択します。\n\n&nbsp;\n\n<div id=\"attachment_261712\" align=\"aligncenter\" width=\"636\"><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/06/Encode-with-Premium-Encoder.png\"><img class=\"size-large wp-image-261712\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Encode-with-Premium-Encoder-636x95.png\" alt=\"Encode with Premium Encoder\" width=\"636\" height=\"95\" /></a>プレミアム Encoder を使用してエンコードする</div>\n\n&nbsp;\n\n[エンコード] のプレミアムが開きます。 ワークフローを選択する必要があります。 このダイアログ ボックスには、資産としてアカウントに既にアップロードMedia Servicesワークフローが表示されます。\n\n&nbsp;\n\n<div id=\"attachment_261641\" align=\"aligncenter\" width=\"515\"><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/06/2015-03-04_22h03_14.png\"><img class=\"size-large wp-image-261641\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-03-04_22h03_14-515x369.png\" alt=\"Pick a previously uploaded workflow\" width=\"515\" height=\"369\" /></a> 以前にアップロードしたワークフローを選択する</div>\n\n&nbsp;\n\n新しいワークフローをアップロードすることもできます (サンプル ワークフローはツールで提供されます)。\n\n<div id=\"attachment_261661\" align=\"aligncenter\" width=\"636\"><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/06/2015-03-04_22h08_45.png\"><img class=\"size-large wp-image-261661\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-03-04_22h08_45-636x302.png\" alt=\"Upload a new workflow\" width=\"636\" height=\"302\" /></a>アップロードワークフローを作成する</div>\n\n&nbsp;\n\n[Launch encoding]をクリックします。 エクスプローラーは、ジョブにカプセル化されたエンコード タスクを送信して、Azure Media Services。\n\n<div id=\"attachment_261672\" align=\"aligncenter\" width=\"636\"><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/06/2015-03-04_22h09_54.png\"><img class=\"size-large wp-image-261672\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-03-04_22h09_54-636x54.png\" alt=\"Running a premium encoder job\" width=\"636\" height=\"54\" /></a> Premium エンコーダー ジョブの実行</div>\n\n&nbsp;\n\n後続のエンコード タスクのパフォーマンスを変更するために、[プロセッサ] タブでエンコード予約ユニットの種類を変更できます。\n\n<div id=\"attachment_261691\" align=\"aligncenter\" width=\"636\"><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/06/2015-03-04_22h11_22.png\"><img class=\"size-large wp-image-261691\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-03-04_22h11_22-636x34.png\" alt=\"Scale the encoding reserved unit\" width=\"636\" height=\"34\" /></a> エンコード予約ユニットをスケーリングする</div>\n\n&nbsp;\n\n&nbsp;\n<h1>タスクを送信するサンプル コード</h1>\nこのセクションでは、.NET SDK を使用してエンコード タスクを送信する方法について説明します。\n\n最初に注意する必要がある点は、\"Media Encoder プレミアム Workflow\" メディア プロセッサを介して Premium エンコーダーにアクセスできる点です。\n\nPremium エンコーダーに関する次の注意点は、いわゆるエンコード プリセットが、ワークフロー ファイルと呼ばれる XML 形式のファイルにカプセル化されている点です。 次のセクションでは、アクセスできる既定のワークフロー ファイルのセットについて説明します。 これらの大きなファイルは資産として Media Servicesアカウントにアップロードする必要があります。この資産はエンコード タスクに渡す必要があります。 この例ではこれを明確にする必要があります。手順は次のとおりです。\n<ol>\n <li> アセットを作成し、ワークフロー ファイルをアップロードします。 ワークフロー ファイルの拡張子は \".workflow\" です。 既定のワークフロー ファイルは、次の場所に表示されます:<a title=\"EncoderMedia Encoder プレミアムワークフロー\" href=\"https://github.com/Azure/azure-media-services-samples/tree/master/Encoding%20Presets/VoD/MediaEncoderPremiumWorkfows\" target=\"_blank\"> プリセットプレミアムサンプル</a></li>\n <li>アセットを作成してソース メディア ファイルをアップロードする</li>\n <li>\"Media Encoder プレミアム Workflow\" メディア プロセッサを取得する</li>\n <li>ジョブとタスクを作成する</li>\n <li>2 つの入力アセットをタスクに追加します。1 つ目はワークフローアセット、2 つ目はビデオアセットです。 順序は重要です</li>\n <li>エンコード ジョブを送信する</li>\n</ol>\n関連するコード スニペットを次に示します (<a title=\"完全な例については、「Media Encoder プレミアム Workflow\" href=\"https://azure.microsoft.com/en-us/documentation/articles/media-services-encode-with-premium-workflow/\" target=\"_blank\">」</a>を参照してください)。\n<pre class=\"prettyprint\">            // Declare a new job.\n            IJob job = _context.Jobs.Create(\"Premium Encoder Job\");\n            // Get a media processor reference, and pass to it the name of the \n            // processor to use for the specific task.\n            IMediaProcessor processor = GetLatestMediaProcessorByName(\"Media Encoder Premium Workflow\");\n\n            // Create a task\n            ITask task = job.Tasks.AddNew(\"Premium Workflow encoding task\",\n                processor,\n                \"\",\n                TaskOptions.None);\n\n            // Specify the input asset to be encoded.\n            task.InputAssets.Add(workflowAsset); // first add the Workflow\n            task.InputAssets.Add(videoAsset); // Then add the video asset\n            // Add an output asset to contain the results of the job. \n            // This output is specified as AssetCreationOptions.None, which \n            // means the output asset is not encrypted. \n            task.OutputAssets.AddNew(\"Output asset\",\n                AssetCreationOptions.None);\n\n            // Use the following event handler to check job progress.  \n            job.StateChanged += new\n                    EventHandler&lt;JobStateChangedEventArgs&gt;(StateChanged);\n\n            // Launch the job.\n            job.Submit();\n</pre>\n<h1>既定のワークフローの説明</h1>\n既定のワークフロー ファイルのセットは、Media Encoder プレミアム<a href=\"https://github.com/Azure/Azure-Media-Services-Samples\">ワークフロー プリセットに含めます</a><span style=\"text-decoration: underline;\">。</span> このセクションでは、これらのワークフローが何を実現するのかについて説明します。\n<blockquote><strong>注</strong>: 既定のワークフローには非常に複雑な決定ロジック要素が含まれるので、入力メディア ファイルが解像度、フレーム レート、プログレッシブコーディングとインターレース コーディングなどに関するメタデータを提供する方法に依存する可能性があります。これらのワークフローは、ffmpeg のようなオープンソース エンコーダーによって生成されたソース ファイルで常に動作するとは限れません。</blockquote>\n<h2> H264 プログレッシブ ダウンロード MP4</h2>\nここでの目的は、再生デバイスへのプログレッシブ ダウンロードを介して配信できるオーディオビデオ インターリーブ MP4 を生成することです。 このワークフローは、以下を目的とします。\n<ol>\n <li>許可されているすべての入力コンテナー形式をサポートする</li>\n <li>次の入力ビデオ処理を実行します。インターレースの検出と適用が自動的に行われます</li>\n <li>ソース解像度で H.264 コーデック、1 パス CBR、固定 2 秒 GOP を使用してビデオをエンコードします。 ビットレートは入力解像度に基づいて選択されます (解像度が高いほどビットレートが高くなります)</li>\n <li>AAC-LC コーデック、1 パス CBR、ステレオを使用してオーディオをエンコードします。 ビットレートは、入力ビデオ解像度に基づいて選択されます (解像度が高いほど、オーディオ ビットレートが高くなります)</li>\n <li>CEA 608/708 キャプションを処理し、H.264 の初等ストリームに埋め込み、サイドカーの SMPTE TTML ファイルも出力します</li>\n</ol>\n<h2>H.264 プログレッシブ ダウンロード MP4 SD</h2>\nこのワークフローは、入力解像度に関係なく出力が標準定義に保持される点を除き、\"H264 プログレッシブ ダウンロード MP4.workflow\" と同じことを意図しています。 このワークフローを使用して、標準定義プロキシ ビデオを生成できます。\n\nsource が SD (イメージの幅が 640 未満) の場合、出力のフレーム サイズは変更されません。 それ以外の場合、ソースが HD (イメージの幅が 640 以上) の場合、出力フレーム サイズは 640x360 (16:9 ソース) または 640x480 (4:3 ソース) に設定されます。\n\n&nbsp;\n\n&nbsp;"
