### YamlMime:Yaml
ms.openlocfilehash: 674c357f68e3312ddd4bbf60a8e20ae3e8a5f195
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896930"
Slug: announcing-general-availability-of-vm-storage-and-network-azure-cli-2-0
Title: Azure コマンドライン2.0 の一般提供開始
Summary: 現時点では、Azure CLI 2.0 の vm、acs、storage、および network コマンドの一般提供が発表されています。 これらのコマンドは、ディスクと拡張機能の管理からコンテナークラスターの作成まで、大規模なユースケースのための豊富なインターフェイスを提供します。 Vm コマンドに含まれる機能の例については、以下を参照してください。
Content: "<p>9月に、 <a href=\"https://azure.microsoft.com/en-us/blog/announcing-azure-cli-2-preview/\">2.0 Preview Azure CLI</a>発表しました。 現時点では、 &rsquo; Azure CLI 2.0 の <a href=\"https://docs.microsoft.com/en-us/cli/azure/vm\">vm</a>、 <a href=\"https://docs.microsoft.com/en-us/cli/azure/acs\">acs</a>、 <a href=\"https://docs.microsoft.com/en-us/cli/azure/storage\">storage</a> 、および <a href=\"https://docs.microsoft.com/en-us/cli/azure/network\">network</a> コマンドの一般提供が発表されています。 これらのコマンドは、ディスクと拡張機能の管理からコンテナークラスターの作成まで &nbsp; 、大規模なユースケースのための豊富なインターフェイスを提供します。</p>\n\n<p>現在 &rsquo; の発表では、お客様は Azure のサポートチャネルまたは GitHub を通じて、Microsoft による完全なサポートを受けて、これらのコマンドを運用環境で使用できるようになりました。 &rsquo;Azure CLI 2.0 の新しいリリースでは、これらのコマンドの互換性に影響する変更点は想定されていません。</p>\n\n<p>この新しいバージョンの Azure CLI は、bash 環境 for Linux および macOS でのコマンドラインエクスペリエンスに精通している開発者にとって、従来よりもはるかにネイティブである必要があります。簡単なコマンドは、ほとんどの一般的な操作に対してスマートな既定値を持ち、その他のテキスト解析ツール (grep、cut、 jq と一般的な Jq Path クエリ構文。 &rsquo;選択したプラットフォームに<a href=\"https://docs.microsoft.com/en-us/cli/azure/install-az-cli2\"><u>簡単にインストール</u></a>して学習できます。</p>\n\n<p>プレビュー期間中は、 &rsquo; 早期導入からの貴重なフィードバックを受け取り、その入力に基づいて新機能が追加されました。 Azure CLI 2.0 でサポートされている Azure サービスの数が増え、sql、documentdb、redis などの Azure 上のさまざまなサービス用のコマンドモジュールが用意されました。 また、Azure CLI 2.0 を使用して生産性を向上させる新機能も用意されています。 たとえば、ユーザーが外部の条件に応答したり、応答を待たずにスクリプトを続行できるように、--wait &quot; 機能と &quot; --wait &quot; 機能を追加 &quot; しまし &rsquo; た。</p>\n\n<p>また、Azure CLI 2.0 のいくつかの新機能 (特に Bash と CLI コマンドの組み合わせ) と、Azure Managed Disks などの新しいプラットフォーム機能のサポートについてもご &rsquo; 紹介します。</p>\n\n<p>ここでは &rsquo; 、Azure CLI 2.0 の使用を開始する方法について説明します。</p>\n\n<h2>Azure CLI のインストール</h2>\n\n<p>CLI は、Mac、Linux、もちろん Windows で実行されます。 使用する任意のプラットフォームに <a href=\"https://docs.microsoft.com/en-us/cli/azure/install-az-cli2\">CLI をインストール</a> してすぐに開始しましょう。 &nbsp; また、CLI の概要と、スクリプトで CLI を使用して Azure で提供されるサービスにアクセスする方法の詳細については、 <a href=\"https://docs.microsoft.com/en-us/cli/azure/overview\">ドキュメントとサンプル</a> を参照してください。</p>\n\n<p>&rsquo;Vm コマンド &quot; に &quot; 含まれる機能の例を次に示します。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ed323466-71ca-464a-bc25-b64e8e00b496.png\"><img alt=\"vm command example (2)\" border=\"0\" height=\"768\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c056925f-4fef-4872-a6da-4715ef4982ba.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"vm コマンドの例 (2)\" width=\"902\"></a></p>\n\n<p>&nbsp;</p>\n\n<h2>Azure CLI の操作</h2>\n\n<p>Azure にアクセスして1つ以上の Vm を起動するのは簡単です。 次の2行のコードでは、azure の westus2 リージョンにある azure の<a href=\"https://azuremarketplace.microsoft.com/en-us/marketplace/apps/Canonical.UbuntuServer?tab=PlansAndPrice\">最新の UBUNTU VM イメージを使用して &rsquo; </a> 、<a href=\"https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-portal\">リソースグループ</a>(azure リソースをグループ化して管理するための方法) と Linux VM を作成します。</p>\n\n<pre class=\"prettyprint\">\naz group create -n MyResourceGroup -l westus2\naz vm create -g MyResourceGroup -n MyLinuxVM --image ubuntults \n</pre>\n\n<p>Vm のパブリック IP アドレスを使用して (vm create コマンドの出力で取得するか、az VM list-IP-addresses &quot; コマンドを使用して &quot; 個別に検索することができます)、コマンドラインから vm に直接接続します。</p>\n\n<pre class=\"prettyprint\">\nssh &lt;public ip address&gt; </pre>\n\n<p>Azure 上の Windows の vm では、リモートデスクトップ ( &quot; Windows デスクトップの mstsc &lt; パブリック ip アドレス &gt; &quot; ) を使用して接続できます。</p>\n\n<p>&quot;Vm &quot; の作成コマンドは実行時間の長い操作であり、vm が作成され、デプロイされ、Azure で使用できるようになるまでに時間がかかることがあります。 ほとんどの自動化スクリプト作成では、次のコマンドを実行する前に、このコマンドの完了を待機しても問題ありません。このコマンドの結果は次のコマンドで使用される可能性があるためです。 ただし、それ以外の場合は、前のコマンドがまだ実行中で、サーバーからの結果を待機している間に、他のコマンドの使用を続行することもできます。 Azure CLI 2.0 では、このようなシナリオでは、新しい &quot; --wait &quot; オプションがサポートされるようになりました。</p>\n\n<pre class=\"prettyprint\">\naz vm create -n MyLinuxVM2 -g MyResourceGroup --image UbuntuLTS --no-wait</pre>\n\n<p>リソースグループと Virtual Machines と同様に、Azure CLI 2.0 を使用して、az &lt; Resource type name &gt; create &quot; 名前付けパターンを使用して &nbsp; &quot; 、Azure で他のリソースの種類を作成できます。</p>\n\n<p>たとえば、azure AppServices 内の Web アプリのように、Azure でマネージリソースを作成できます。</p>\n\n<pre class=\"prettyprint\">\n# Create an Azure AppService that we can use to host multiple web apps \naz appservice plan create -n MyAppServicePlan -g MyResourceGroup\n\n# Create two web apps within the appservice (note: name param must be a unique DNS entry)\naz appservice web create -n MyWebApp43432 -g MyResourceGroup --plan MyAppServicePlan\naz appservice web create -n MyWEbApp43433 -g MyResourceGroup --plan MyAppServicePlan\n</pre>\n\n<p>さまざまな Azure リソースの種類の create コマンドオプションの詳細については、 <a href=\"https://docs.microsoft.com/en-us/cli/azure/\">CLI 2.0 リファレンスドキュメント</a> を参照してください。 Azure CLI 2.0 では、Azure リソースを一覧表示し、さまざまな出力形式を提供できます。</p>\n\n<pre class=\"prettyprint\">\n<strong>--output Description</strong>\njson json string. json is the default. Best for integrating with query tools etc\njsonc colorized json string.\ntable table with column headings. Only shows a curated list of common properties for the selected resource type in human readable form.\ntsv tab-separated values with no headers. optimized for piping to other tex-processing commands and tools like grep, awk, etc.\n</pre>\n\n<p>List コマンドで--query &quot; オプションを使用 &quot; すると、特定のリソースを検索したり、出力に表示するプロパティをカスタマイズしたりできます。 次に例をいくつか示します。</p>\n\n<pre class=\"prettyprint\">\n# list all VMs in a given Resource Group\naz vm list -g MyResourceGroup --output table\n\n# list all VMs in a Resource Group whose name contains the string &lsquo;My&rsquo;\naz vm list --query &ldquo;[?contains(resourceGroup,&rsquo;My&rsquo;)]&rdquo; --output tsv\n\n# same as above but only show the &#39;VM name&#39; and &#39;osType&#39; properties, instead of all default properties for selected VMs\naz vm list --query &ldquo;[?contains(resourceGroup,&rsquo;My&rsquo;)].{name:name, osType:storageProfile.osDisk.osType}&rdquo; --output table\n</pre>\n\n<p>Azure CLI 2.0 は、Azure 上の SQL Server に対する管理操作をサポートしています。 サーバー、データベース、データウェアハウス、およびその他のデータソースを作成するために使用できます。また、使用状況を表示したり、管理ログインを管理したり、その他の管理操作を実行したりすることもできます。</p>\n\n<pre class=\"prettyprint\">\n# Create a new SQL Server on Azure\naz sql server create -n MySqlServer -g MyResourceGroup --administrator-login &lt;admin login&gt; --administrator-login-password &lt;admin password&gt; -l westus2\n\n# Create a new SQL Server database\naz sql db create -n MySqlDB -g MyResourceGroup --server-name MySqlServer -l westus2\n\n# list available SQL databases on Server within a Resource Group\naz sql db list -g MyResourceGroup --server-name MySqlServer\n</pre>\n\n<h2>新しい Azure CLI 2.0 機能を使用したスクリプト作成</h2>\n\n<p>Bash と Azure CLI 2.0 のコマンドを同じスクリプトで組み合わせる新しい機能は、特に Linux コマンドラインツール (grep、cut、jq、 <a href=\"https://docs.microsoft.com/en-us/cli/azure/query-az-cli2\">jq</a>など) を既によく理解している場合 &rsquo; に、大きな時間の節約になる可能性があります。</p>\n\n<p>まず、VM &rsquo; s リソース ID (または複数の id) を使用してリソースグループ内の vm を停止する簡単な例を見てみましょう &rsquo; 。</p>\n\n<pre class=\"prettyprint\">\naz vm stop &ndash;ids &lsquo;&lt;one or more ids&gt;&rsquo;</pre>\n\n<p>VM &rsquo; 名を使用して、リソースグループ内の vm を停止することもできます。 上記で &rsquo; 作成した VM を停止する方法を次に示します。</p>\n\n<pre class=\"prettyprint\">\naz vm stop -g resourceGroup -n simpleVM</pre>\n\n<p>より複雑なユースケース &rsquo; では、リソースグループ内に多数の vm があり、Windows と Linux を実行していると仮定します。 &nbsp;このリソースグループ内で実行中のすべての Linux Vm を停止するには、次のように Jのパスクエリを使用します。</p>\n\n<pre class=\"prettyprint\">\nos=&quot;Linux&quot;\nrg=&quot;resourceGroup&quot;\nps=&quot;VM running&quot;\nrvq=&quot;[].{resourceGroup: resourceGroup, osType: storageProfile.osDisk.osType, powerState: powerState, id:id}| [?osType==&#39;$os&#39;]|[?resourceGroup==&#39;$rg&#39;]| [?powerState==&#39;$ps&#39;]|[].id&quot;\naz vm stop --ids $(az vm list --show-details --query &quot;$rvq&quot; --output tsv)\n</pre>\n\n<p>このスクリプトは az vm stop コマンドを発行しますが、(rvq 変数で定義されているように) j Path クエリ結果で返された Vm に対してのみ実行します。 OsType、resourceGroup、および powerState の各パラメーターには値が指定されています。 ResourceGroup パラメーターは VM &rsquo; の resourcegroup プロパティと比較され、osType パラメーターは vm &rsquo; の Storageprofile. Osdisk. ostype プロパティと比較され、az VM stop &quot; コマンドで &quot; 使用するためにすべての一致結果 ( <a href=\"https://en.wikipedia.org/wiki/Tab-separated_values\">tsv 形式</a>) が返されます。</p>\n\n<h2>CLI の Azure Container Service</h2>\n\n<p>Azure Container Service (ACS) では、コンテナーアプリケーションを実行するために事前に構成された仮想マシンのクラスターの作成、構成、および管理が簡単になります。 Docker イメージは、DC/OS (Apache のシステムを利用)、Docker の群れ、または Kubernetes (オーケストレーション用) で使用できます。</p>\n\n<p>Azure CLI では、az ACS コマンドを使用した ACS クラスターの作成とスケーリングがサポートされています。 <a href=\"https://docs.microsoft.com/en-us/azure/container-service/container-service-create-acs-cluster-cli\">Azure CLI コマンドを使用して ACS DC/OS クラスターをデプロイ</a>するためのチュートリアルと同様に、 <a href=\"https://docs.microsoft.com/en-us/cli/azure/acs\">Azure Container Services</a>の完全なドキュメントを見つけることができます。</p>\n\n<h2>CLI を使用した Azure Managed Disks でのスケーリング</h2>\n\n<p>Microsoft は最近、Virtual Machines の管理とスケーリングを簡略化するために Azure Managed Disks の一般提供を <a href=\"https://azure.microsoft.com/en-us/blog/announcing-general-availability-of-managed-disks-and-larger-scale-sets/\">発表</a> しました。 特定のディスクイメージに対して暗黙的に管理されたディスクを使用して仮想マシンを作成し、az vm Disk コマンドを使用して、blob storage またはスタンドアロンから管理ディスクを作成することもできます。 更新プログラムとスナップショットは、簡単に、 <a href=\"https://azure.microsoft.com/en-us/blog/azure-cli-managed-disks/\">CLI から管理対象の dDisks</a>を使用して実行できることを確認できます。</p>\n\n<h2>Azure CLI 2.0 の使用を今すぐ開始しましょう!</h2>\n\n<p>既存の CLI ユーザーでも、新しい Azure プロジェクトを開始する場合でも、で <a href=\"https://aka.ms/CLI\">https://aka.ms/CLI</a> cli を使い始めること &rsquo; ができ、更新された<a href=\"https://docs.microsoft.com/en-us/cli/azure/\">ドキュメントとサンプル</a>を使用してコマンドラインを習得できます。 <a href=\"https://docs.microsoft.com/en-us/cli/azure/install-az-cli2\">CLI のインストールと更新</a>、 <a href=\"https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-quick-create-cli?toc=%2fcli%2fazure%2ftoc.json\">Virtual Machines</a>の使用、vm、スケールセット、Storage、ネットワークを含む<a href=\"https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-create-cli-complete?toc=%2fcli%2fazure%2ftoc.json\">完全な Linux 環境</a>の作成、Azure <a href=\"https://docs.microsoft.com/en-us/azure/app-service-web/app-service-web-get-started-nodejs?toc=%2fcli%2fazure%2ftoc.json\">Web Apps</a> &ndash; のデプロイなどのトピックを確認し、ご意見をお寄せください。</p>\n\n<p>Azure CLI 2.0 はオープンソースであり、 <a href=\"https://github.com/azure/azure-cli\">GitHub</a>にあります。</p>\n\n<p>数か月後に、さらに多くの更新プログラムを &rsquo; 提供します。 それまでの間、お客様のご意見をお待ちしております。 実稼働環境で vm、storage、および network コマンドを使用しているお客様は、Azure サポートに問題がないか、 <a href=\"https://stackoverflow.com/questions/tagged/azure-cli\">azure cli タグを使用して Stackoverflow</a>経由で連絡するか、に <a href=\"mailto:azfeedback@microsoft.com\">azfeedback@microsoft.com</a> 直接お問い合わせください。</p>"
