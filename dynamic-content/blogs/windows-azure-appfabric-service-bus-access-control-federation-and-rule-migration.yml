### YamlMime:Yaml
ms.openlocfilehash: 81619ffca041f0c6a66d26fc73db39e28f19aaeb
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895733"
Slug: windows-azure-appfabric-service-bus-access-control-federation-and-rule-migration
Title: Windows Azure AppFabric – Service Bus Access Controlと規則の移行
Summary: '[この記事は AppFabric チームによって投稿されました。]Azure AppFabric Windows 2011 年 5 月の CTP では、新しいメッセージ指向ミドルウェア機能を含む Service Bus の機能強化をリリースしました。'
Content: '<p>[この記事は AppFabric チームによって投稿されました。]</p><p>Windows Azure AppFabric May 2011 CTP では、キューとトピックに関する新しいメッセージ指向ミドルウェア機能を含む Service Bus の機能強化をリリースしました。 これらの機能の詳細については、<a href="https://blogs.msdn.com/b/appfabric/archive/2011/05/13/introducing-the-windows-azure-appfabric-service-bus-may-2011-ctp.aspx" target="_blank">2011 年 5 月の CTP での Azure AppFabric</a> WindowsのService Busを参照してください。 これらの機能強化は、数か月後に一般提供されるサービスの更新プログラムで提供されます。</p>  <p>現在、2 つのバージョンの Access Control サービスは、2010 年 1 月のバージョンと 2011 年 4 月のバージョンです。 この詳細については、Azure AppFabric April リリースWindows新しいバージョンの azure <a href="https://blogs.msdn.com/b/windowsazureappfabric/archive/2011/04/07/2-windows-azure-appfabric-april-release-now-available-featuring-a-new-version-of-the-access-control-service.aspx" target="_blank">AppFabric April</a> リリースをAccess Controlしてください。</p>  <p>実稼働環境Service Bus更新されるまで、2010 年 1 月バージョンの Access Controlされます。 ただし、Service Busが更新された後は、新しい 2011 年 4 月バージョンの Access Controlできます。 更新プログラムService Bus、次の 2 つの理由で新しいバージョンの Access Control サービスを使用するために、Service Bus ソリューションを更新することを強く推奨します。 </p>  <ol>  <li>Service Bus後の時点で、古いバージョンの Access Control サービスの使用が停止されます。 Azure のライフサイクル サポート ポリシー Windows、このイベントの 12 か月前にお知らせします。</li>  <li>2011 年 4 月バージョンの Access Control、上記で参照されているブログ投稿に示されている大きな利点があります。</li>  </ol>  <p>現在の状態、更新後の変更Service Bus、準備方法について説明します。</p>  <p><span style="text-decoration: underline;">実稼働環境の現在の状態</span></p>  <p>Windows Azure AppFabric 管理ポータル では、Access Control の 2 つのバージョンには、2010 年 1 月のリリースでは ACSV1、2011 年 4 月のリリースでは ACSV2 というラベルが付きます。</p>  <p>現在、新しい名前空間を作成Service Bus、一致する ACSV1 名前空間が名前空間サフィックス sb で自動的に作成&ldquo;&ndash;されます&rdquo;。 この ACSV1 名前空間は、 で使用Service Bus。</p>  <p>Access Control サービスの 2 つのバージョンは、現在 Service Bus で想定されているのと同じプロトコルと承認トークン形式 (OAuth WRAP SWT) をサポートし、すべてのランタイム操作に完全に互換性があります。 ただし、ACSV2 では、OData に基づく新しい、より豊富な管理サービス プロトコルがサポートされています。 2 つのサービスはランタイム互換ですが、管理サービスを介してアクセス制御規則とサービス ID の自動セットアップを実行するコードには互換性がありません。</p>  <p><span style="text-decoration: underline;">次の更新Service Bus</span></p>  <p>既存のアプリケーションとの下位互換性のために、更新時に実稼働環境に存在する Service Bus 名前空間は ACSV2 に自動的に切り替わるのではなく、ACSV1 を引き続き使用します。 これらの名前空間を ACSV1 から ACSV2 に独自に移行し、管理サービスを呼び出すコードの更新と調整する必要があります。</p>  <p>数か月後にサービスを更新する場合は、ACSV1 から ACSV2 への移行を実行する方法に関するツールとステップ バイ ステップ ガイダンスを提供します。</p>  <p>更新プログラムをリリースする場合は詳細なガイダンスを提供しますが、移行プロセスには通常、次のテストしてから移行する一連の手順が含まれます。 </p>  <ul>  <li>まず、ACSV2 名前空間と自動的にペアService Bus新しい一時的な名前空間を作成します。 この名前空間は、管理サービスを呼び出す更新されたコードを含め、ACSV2 を使用したアプリケーションのエンド エンド テストに使用されます。</li>  <li>提供されるコマンド ライン ツールを使用して、実稼働 ACSV1 名前空間の状態を一時的な ACSV2 名前空間にコピーします。 このプロセスService Bus名前空間と対応する ACSV1 名前空間の実稼働環境は変更されません。 これで、アプリケーションと更新されたコードを一時的な Service Bus ACSV2 名前空間に対してテストし、すべてが期待した通り動作する必要があります。</li>  <li>アプリケーションが想定した動作を確認した後、提供されるコマンド ライン ツールを使用して、一時的な ACSV2 名前空間の DNS 名を実稼働環境 Service Bus &ndash; に関連付けられている ACSV1 名前空間の名前に変更し、V2 名前空間を既存の V1 名前空間の場所に効果的にスワップします。 これで移行が完了します。</li>  </ul>  <p>実行中のアプリケーションでは、この切り替えによるサービスの中断は発生しない必要があります。</p>  <p>バージョンの違いと移行は、主に、管理サービスを使用して ACSV1 で規則を自動的にプロビジョニングするアプリケーションに影響します。 管理サービスは ACSV1 と ACSV2 で異なっているので、ガイダンスでは次のように説明できるプロセスが提案されます。 </p>  <ul>  <li>切り替えの準備を行う場合は、アプリケーションのモード、またはルールの自動作成を一時的に中断できる操作プロセスの手順が必要です。 これは、運用スタッフに対する簡単な通知である場合や、アプリケーションで何らかの作業が必要になる場合があります。</li>  <li>DNS 名の変更を行う前に、最後に一時名前空間に規則をコピーする直前に、データ移行後に孤立する新しい規則が ACSV1 名前空間に作成されなく、この中断モードを使用する必要があります。</li>  <li>ACSV2 に切り替えた後は、コードで新しい ACSV2 管理サービスをターゲットにすることで、ルールの自動作成を再開できます。</li>  <li>ACSV1 と ACSV2 の両方のクライアント コードがアプリケーションにサイド バイ サイドで既存であり、HTTP URL に対する簡単なチェックを使用してコード パスを切り替える必要があります。 ACSV2 管理エンドポイント https:// <i>tenant.accesscontol.windows.net/v2/mgmt/service</i> に対する単純な GET 要求によって HTTP 状態コード 404 が生成された場合、アプリケーションは ACSV1 に対して実行され、それ以外の場合は既に ACSV2 に対して実行されます。</li>  </ul>  <p><span style="text-decoration: underline;">準備する方法</span></p>  <p>の LABS 環境には<a href="" target="_blank"></a>、新しいバージョンの Service Busと、新しいバージョンの拡張機能が既に含Access Control。 そのため、この環境を無料で使用して、移行の計画を開始し、テストすることができます。</p>  <p>現在、LABS 環境では、お客様が新しい Service Bus 名前空間を作成すると、-sb&rdquo; サフィックスを持つ新しい Access Control &ldquo;名前空間が生成されますが、その名前空間は ACSV2 に作成されます。 これは、数か月後に更新プログラムをリリースしてService Busエクスペリエンスになります。</p>  <p>この新しい管理コード パスの開発をすぐに開始し、2011 年 5 月の CTP 環境で使用できる Service Bus と Access Control のバージョンに対して ACSV2 に対する規則を作成できます<a href="" target="_blank"></a>。</p>  <p>&nbsp;</p>  <p>いつものように、ご質問やフィードバックがある場合は、Azure Platform フォーラムの Windows<a href="https://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/threads" target="_blank">にアクセス</a>してください。</p>  <p>AppFabric チーム。</p>'
