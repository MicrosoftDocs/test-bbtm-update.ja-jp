### YamlMime:Yaml
ms.openlocfilehash: 6fb691361ad8138c43537c6b97c7ba4dd6ce6399
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892663"
Slug: secondary-indexes-on-column-store-accelerate-sql-data-warehouse-look-up-queries
Title: 列ストアのセカンダリ インデックスは、クエリSQL Data Warehouseを迅速化します
Summary: 'Azure SQL Data Warehouse では、列ストア テーブル (クラスター化列ストア インデックスまたは CCI とも呼ばれます) に対するセカンダリ B ツリー インデックス (非クラスター化インデックスまたは NCI とも呼ばれます) の作成がサポートされます。 '
Content: >-
  <p>Azure <a href="https://azure.microsoft.com/en-us/services/sql-data-warehouse/" target="_blank">SQL Data Warehouse </a>では、列ストア テーブル (クラスター化列ストア インデックスまたは CCI とも呼ばれます) に対するセカンダリ B ツリー インデックス (非クラスター化<a href="https://msdn.microsoft.com/library/ms190457.aspx"></a>インデックスまたは NCI とも呼ばれます) の作成がサポートされます。<a href="https://msdn.microsoft.com/library/gg492088.aspx" target="_blank"> </a> ほとんどの分析クエリは大量のデータを集計し、列ストア セグメントを直接スキャンすることで十分に提供されます。 ただし、多くの場合&lsquo;&rsquo;、積み重ねで針を探す必要があります。これは、1 つの行または小さな範囲の行を検索するクエリに変換されます。 このような検索クエリでは、応答時間が桁違い (1000 倍でも) 向上し、フィルター列に B ツリー インデックスがある場合は 1 秒以下で実行される可能性があります。</p>


  <p><a href="https://azure.microsoft.com/en-us/services/sql-data-warehouse/" target="_blank">SQL Data Warehouse</a>は、データ全体SQLベースのビューに移動し、高速でフル マネージドのペタバイト規模のクラウド ソリューションを提供します。 高い弾力性により、数秒で最大 60 倍のプロビジョニングとスケールアップが可能です。 コンピューティングと<a href="https://docs.microsoft.com/en-us/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview" target="_blank"></a>ストレージを個別にスケーリングして、バーストからアーカイブのシナリオまで、制限付きバンドルにロックされる代わりに、使用している&#39;に基づいて支払いを行えます。 さらに、SQL Data Warehouseコンピューティングを一時停止する独自のオプションが用意されています。クラウド コストをより自由に管理できます。</p>


  <p>列ストア テーブルでセカンダリ B ツリー インデックスを使用できる前に、ユーザーは、クラスター化された B ツリー インデックスに列ストア データを複製することで、ポイント検索クエリの応答時間要件を満たす可能性がありました。 ただし、データの重複により、実装の複雑さ、ストレージ コスト、待機時間が増加します。 これらのユーザーの中には、列ストアに対して新しいセカンダリ インデックスを試したユーザーがいて、データの重複なしに同じ対話型の応答時間を取得できるとうれしく思っています。</p>


  <h2>列ストア テーブルにセカンダリ インデックスを作成する方法</h2>


  <p>これは、一般的な <a href="https://msdn.microsoft.com/en-us/library/ms188783.aspx" target="_blank">Create Index Transact-SQL構文に</a>従います。 1 TB の TPC-H データに対する単純なテストでは、特定の orderkey の注文を lineitem から選択するクエリ時間が、orderkey のセカンダリ インデックスが追加された後、41 秒から 1 秒以下に下がったという結果が示されました。&nbsp;</p>


  <p><img alt="VSCapture6" border="0" height="366" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4e14c0e4-52c2-4606-b792-2f5ea307d762.png" style="border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="VSCapture6" width="610"></p>


  <h2>セカンダリ インデックスを使用するためのベスト プラクティス</h2>


  <p>列ストア テーブルでセカンダリ インデックスを使用する場合に考慮する必要があるガイドラインを次に示します。</p>


  <ul>
   <li>少量の行を返すクエリでフィルターとして使用される高カーディナリティ列に使用します。</li>
   <li>読&rsquo;み込み中にセカンダリ インデックスを維持するためのオーバーヘッドが生じ、セカンダリ インデックスに大きな負荷がかからなくなります。 テーブルあたり 1 または 2 つのセカンダリ インデックスに制限する場合に最適です。</li>
  </ul>


  <p>パーティション分割列ストア テーブルにもセカンダリ インデックスを作成できます。 ただし、これらは各ディストリビューションと<a href="https://docs.microsoft.com/en-us/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute" target="_blank">パーティションに対</a>して<a href="https://docs.microsoft.com/en-us/azure/sql-data-warehouse/sql-data-warehouse-tables-partition" target="_blank"></a>ローカルであり、UNIQUE 制約を実装するために使用することはできません。</p>


  <h2>次の手順</h2>


  <p>このブログ記事では、列ストア テーブルのセカンダリ B ツリー インデックスによって提供される新機能の利点について説明しました。 これは現在、世界中のすべての Azure SQL Data Warehouse<a href="https://azure.microsoft.com/en-us/regions/#services." target="_blank">で使用</a>できます。 ポイント参照の使用例がある場合は、試してみるのをお勧めしています。</p>


  <h2>詳細情報</h2>


  <p>以下を含む、さまざまなリソースを参照して、SQL Data Warehouse詳細を確認してください。</p>


  <p><a href="https://azure.microsoft.com/documentation/articles/sql-data-warehouse-overview-what-is/" target="_blank"><u>Azure SQL Data Warehouse の概要</u></a><br>

  <a href="https://azure.microsoft.com/documentation/articles/sql-data-warehouse-best-practices/" target="_blank"><u>SQL Data Warehouseベスト プラクティス</u></a><br>

  <a href="https://azure.microsoft.com/documentation/videos/index/?services=sql-data-warehouse" target="_blank"><u>ビデオ ライブラリ</u></a><br>

  <a href="https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureSQLDataWarehouse" target="_blank"><u>MSDN フォーラム</u></a><br>

  <a href="https://stackoverflow.com/questions/tagged/azure-sqldw" target="_blank"><u>Stack Overflow フォーラム</u></a></p>
