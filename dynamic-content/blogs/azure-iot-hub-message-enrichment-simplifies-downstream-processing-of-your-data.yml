### YamlMime:Yaml
ms.openlocfilehash: 8f157a18ef25427a2c0d4b896a524cd0a1691452
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896171"
Slug: azure-iot-hub-message-enrichment-simplifies-downstream-processing-of-your-data
Title: Azure IoT Hub メッセージ エンリッチメントにより、データのダウンストリーム処理が簡略化されます
Summary: ハブから他のサービスに送信されるメッセージをエンリッチAzure IoT機能をリリースしました。 Azure IoT Hub には、さまざまなサービスにメッセージを自動的に配信する、最新の機能が用意されています。IoT デバイスからの数十億件のメッセージを処理するために構築されています。
Content: >-
  <p>ハブから他のサービスに送信されるメッセージをエンリッチAzure IoT<a href="https://azure.microsoft.com/services/iot-hub/" target="_blank">機能を</a>リリースしました。 Azure IoT Hub には、さまざまなサービスにメッセージを自動的に配信する、最新の機能が用意されています。IoT デバイスからの数十億件のメッセージを処理するために構築されています。 メッセージには、IoT ソリューション全体のさまざまなワークフローを可能にする重要な情報が含まれます。 <a href="https://aka.ms/iotmsgenrich" target="_blank">メッセージ エンリッチメントにより</a> 、データの後処理が簡略化され、情報に関するデバイス ツイン API の呼び出しコストを削減できます。 この機能を使用すると、デバイス ツインからの詳細、IoT Hub 名、追加する静的プロパティなど、メッセージに関する情報をスタンプできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/65ff7205-35fd-4da6-9639-c5378330a91a.png"><img alt="Diagram of IoT Hub workflow and message routing" border="0" height="1237" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/26c69a82-4dcd-4a21-b5e2-4a714dfa4f48.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="ワークフローとIoT Hubルーティングの図" width="2552"></a></p>


  <p>メッセージ エンリッチメントには、エンリッチメントのキー名、エンリッチメント キーの値、エンリッチメントが適用されるエンドポイントの 3 つの主要な要素があります。 メッセージ エンリッチメントは、アプリケーション のプロパティ <a href="https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-messages-construct" target="_blank">IoT Hubメッセージに</a> 追加されます。 Standard レベルと Basic レベルの IoT Hub には IoT Hub あたり最大 10 のエンリッチメントを追加し、Free レベルの場合は 2 つのエンリッチメントを追加IoT Hub。 エンリッチメントは、組み込みのエンドポイントに送信されるメッセージ、組み込みの<a href="https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-messages-d2c" target="_blank"></a>エンドポイントにルーティングされるメッセージ、または Azure BLOB ストレージ、Event Hubs、Service Bus Queue、Service Bus トピックなどのカスタム エンドポイントに適用できます。 各エンリッチメントには、任意の文字列として設定できるキーと、デバイス ツインへのパス ($twin.tag.field など)、メッセージを送信する IoT Hub ($iothubname など)、または静的な値 (myapplicationId など) を指定できる値が含まれます。</p>


  <p>[作成] または [更新IoT Hubを使用REST API、 <a href="https://docs.microsoft.com/rest/api/iothub/iothubresource/createorupdate#routingproperties" target="_blank">RoutingProperties</a> の一部としてエンリッチメントを追加できます。 次に例を示します。</p>


  <pre>

  &quot;routing&quot;: {
               &quot;enrichments&quot;: [
                     {
                           &quot;key&quot;: &quot;appId&quot;,
                           &quot;value&quot;: &quot;myApp&quot;,
                           &quot;endpointNames&quot;: [&quot;events&quot;]
                     },
                     {
                           &quot;key&quot;: &quot;Iot-Hub-Name&quot;,
                           &quot;value&quot;: &quot;$iothubname&quot;,
                           &quot;endpointNames&quot;: [&quot;events&quot;]
                     },
                     {
                           &quot;key&quot;: &quot;Device-Location&quot;,
                           &quot;value&quot;: &quot;$twin.tags.location&quot;,
                           &quot;endpointNames&quot;: [&quot;events&quot;]
                     }
               ],
               &quot;endpoints&quot;: {
                   &quot;serviceBusQueues&quot;: [],
                   &quot;serviceBusTopics&quot;: [],
                   &quot;eventHubs&quot;: [],
                   &quot;storageContainers&quot;: []
               },
               &quot;routes&quot;: [{
                   &quot;name&quot;: myfirstroute&quot;,
                   &quot;source&quot;: &quot;DeviceMessages&quot;,
                   &quot;condition&quot;: &quot;true&quot;,
                   &quot;endpointNames&quot;: [
                       &quot;events&quot;
                   ],
                   &quot;isEnabled&quot;: true
               }],
               &quot;fallbackRoute&quot;: {
                   &quot;name&quot;: &quot;$fallback&quot;,
                   &quot;source&quot;: &quot;DeviceMessages&quot;,
                   &quot;condition&quot;: &quot;true&quot;,
                   &quot;endpointNames&quot;: [
                       &quot;events&quot;
                   ],
                   &quot;isEnabled&quot;: true
               }
           }</pre>

  <p>この機能は、すべてのリージョンで一般提供IoT Hub利用可能です。 この機能を試し、ビジネス向けにより合理化された IoT ソリューションを構築していけ、楽しみに思います。 開始するには、この<a href="https://aka.ms/enrichtutorial" target="_blank">チュートリアル</a>をお試しください。</p>


  <p>プレビューに関するエクスペリエンスの詳細を確認し、フィードバックをお寄せください。 表示する他IoT Hub機能はありますか? 引き続き、User Voice フォーラムのAzure IoT<a href="https://feedback.azure.com/forums/321918-azure-iot/" target="_blank">を送信してください</a>。</p>
