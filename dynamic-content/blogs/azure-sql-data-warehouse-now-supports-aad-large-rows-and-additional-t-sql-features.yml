### YamlMime:Yaml
ms.openlocfilehash: bb2b9341a3cb78149fea132d512ef8e225a6cee1
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139894489"
Slug: azure-sql-data-warehouse-now-supports-aad-large-rows-and-additional-t-sql-features
Title: Azure SQL Data Warehouse で AAD、大きな行、および追加の T SQL 機能がサポートされるようになりました。
Summary: AAD、大きな行、追加の T SQL サポートなど、Azure SQL Data Warehouse に対するいくつかの機能強化を発表します。
Content: "<p><a href=\"https://aka.ms/sqldw\" target=\"_blank\">Azure SQL Data Warehouse</a>に対していくつかの機能強化を発表します。 安定性と信頼性の向上に加えて、いくつかの新機能が追加されました。その多くは、お客様からのフィードバックに直接基づいています。 今後のバージョンで表示したい機能についてのフィードバックがある場合は、microsoft の <a href=\"https://feedback.azure.com/forums/307516-sql-data-warehouse\" target=\"_blank\">フィードバック</a> ページをご利用ください。</p>\n\n<h1>Azure Active Directory (AAD) 認証</h1>\n\n<p>データアクセス管理は、ほぼ950万のディレクトリと6億のユーザーアカウントをホストする<a href=\"https://azure.microsoft.com/services/active-directory/\" target=\"_blank\">Azure Active Directory</a>で大幅に簡素化されました。 AAD 認証を使用すると、データベースユーザーとその他の Microsoft サービスの id を1か所で管理できます。 サービス間のシームレスな統合により、次のことが可能になりました。</p>\n\n<ul>\n <li>個々のユーザー名とパスワードを作成しなくても、エンドユーザーへのデータウェアハウスへのアクセスを許可します。</li>\n <li>ドメインセキュリティグループ/ユーザーを使用して、データベースにシングルサインオンを提供します。</li>\n <li>SQL Data Warehouse に接続するアプリケーションのトークンベースの認証を有効にします。</li>\n <li>Windows 認証や、Azure Active Directory でサポートされているその他の形式の認証を有効にすることで、パスワードの保存を排除します。</li>\n <li>データベースサービス間でのユーザー id の急増を回避します。</li>\n</ul>\n\n<p>詳細については、「 <a href=\"https://azure.microsoft.com/documentation/articles/sql-data-warehouse-aad-authentication/\" target=\"_blank\">Azure Active Directory 認証を使用した SQL Data Warehouse への接続</a>」を参照してください。</p>\n\n<h1>大きな行のサポート</h1>\n\n<p>大きな行のサポートは、ユーザーからよく寄せられています。 この更新プログラムでは、32K とデータ型よりも大きい行のサポートが8K に追加されます。 大きな行のサポートにより、 <a href=\"https://msdn.microsoft.com/library/ms176089.aspx\" target=\"_blank\">varchar (max)</a>、 <a href=\"https://msdn.microsoft.com/library/ms186939.aspx\" target=\"_blank\">nvarchar (max)</a> &nbsp; 、 <a href=\"https://msdn.microsoft.com/library/ms188362.aspx\" target=\"_blank\">varbinary (max)</a>のサポートが追加されます。 これらのデータ型を追加することにより、既存のテーブル定義からより多くのデータ型を使用できるようになるため、クラウドへの移行がさらに容易になります。</p>\n\n<p>大きな行のサポートの最初のイテレーションでは、今後の更新ではいくつかの制限が適用されます。 この更新プログラムでは、大きな行の読み込みは現在、 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-get-started-load-with-azure-data-factory/\" target=\"_blank\">Azure Data Factory</a> (bcp を使用)、 &nbsp; <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-integrate-azure-stream-analytics/\" target=\"_blank\">Azure Stream Analytics</a>、 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-load-from-sql-server-with-integration-services/\" target=\"_blank\">SSIS</a>、 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-load-with-bcp/\" target=\"_blank\">bcp</a> &nbsp; 、または .net SQLBulkCopy クラスを使用してのみサポートされています。 &nbsp;大きな行の<a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-get-started-load-with-polybase/\" target=\"_blank\">PolyBase</a>サポートは、今後のリリースで追加される予定です。 Azure SQL Database と同様に、varchar (max) などの新しい大きなデータ型のサポートは、ヒープテーブルとクラスター化インデックステーブルに制限されます。 クラスター化列ストアテーブルでは、大きな行がサポートされています。これ &rsquo; は、クラスター化列ストアでの大規模なデータ型のサポートだけで、後で使用できるようになります。</p>\n\n<h1>トランザクションの安全性の制限</h1>\n\n<p>長いロールバックを防ぐために、 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-develop-transactions/#transaction-size\">t</a><a href=\"https://azure.microsoft.com/documentation/articles/sql-data-warehouse-develop-transactions/#transaction-size\" target=\"_blank\">タイムアウト r のサイズ制限</a> が実装されています。 制限は、1時間以上実行される可能性のある大規模な操作の実行を可能にするのに十分な数ですが、実行時間の長いロールバックが多数の時間にわたって実行されるのを防ぐのに十分ではありません。 この安全制限は、長時間トランザクションの実行中にユーザーが一時停止しようとした場合など、データベースが長時間停止する可能性がある条件を防ぐために配置されました。 一般的なベストプラクティスとして、パフォーマンスと安全性の両方でトランザクションのサイズを制限することをお勧めします。これを実現するための簡単な手順がいくつかあります。 トランザクションのサイズを制限してワークロードを最適化する方法の詳細については、「トランザクションの <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-develop-best-practices-transactions/\">ベストプラクティスガイド </a>」を参照してください。</p>\n\n<h1>改善された Visual Studio サポート</h1>\n\n<p>Visual Studio は、SQL Data Warehouse サポートのために最新の SQL Server Data Tools (SSDT) バージョンの自動インストールおよび更新をサポートするようになりました。 この統合の強化により、新しいバージョンがリリースされたときに SSDT の自動更新が行われるようになり、SSDT を手動で検索してインストールする必要がなくなりました。 SQL Data Warehouse のサポートを向上させるために、最近 SSDT する修正プログラムがいくつかありました。 これらすべての修正プログラムが適用されていることを確認するには、SSDT の最新バージョン (現在は 14.0.60311.1) を使用してください。 最新の SSDT バージョンにアップグレードするには、Visual Studio から [ツール]、[拡張機能と更新プログラム &hellip; /更新プログラム]、[製品の更新プログラム] の順にクリックし、データベースツールの Microsoft SQL Server Update を探します。 SSDT の将来のバージョンでは、データベースプロジェクトのサポートなど、SQL Database でサポートされているが SQL Data Warehouse ではサポートされていない機能が追加されます。</p>\n\n<p>SQL Data Warehouse で Visual Studio を使用する方法の詳細については、「 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-get-started-connect/\" target=\"_blank\">Connect to SQL Data Warehouse with Visual Studio</a>」を参照してください。</p>\n\n<h1>T-SQL のサポート</h1>\n\n<p>以前に SQL Server でしか使用できなかったいくつかの T SQL データ型およびコマンドは SQL Data Warehouse で使用できるようになりました。 これらの機能により、機能が追加され、2つのプラットフォーム間での移行作業の一部が軽減されます。</p>\n\n<h2>Rand ()</h2>\n\n<p>また、このリリースには、0から1のみの擬似ランダム float 値を返す <a href=\"https://technet.microsoft.com/library/ms177610.aspx\" target=\"_blank\">RAND ()</a> 関数も含まれています。 次のクエリは、ランダムに生成された2つの数値を示しています。</p>\n\n<pre class=\"prettyprint\">\nSELECT RAND(CHECKSUM(NEWID())) as Rand, RAND(8) as RandSeed;</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/21eaac15-a181-492b-893f-fddf95dc740f.jpg\"><img alt=\"rand\" border=\"0\" height=\"47\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/05108bf7-2405-43ad-b4d2-ba848b9411ae.jpg\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" title=\"rand\" width=\"281\"></a></p>\n\n<h2>Checksum () と Binary_Checksum ()</h2>\n\n<p>データベースをある SQL プラットフォームから別のプラットフォームに移行する場合、 <a href=\"https://msdn.microsoft.com/library/ms189788.aspx\" target=\"_blank\">CHECKSUM ()</a>関数と<a href=\"https://msdn.microsoft.com/library/ms173784.aspx\" target=\"_blank\">BINARY_CHECKSUM ()</a>関数は、プラットフォーム間のデータ転送を検証するのに便利な方法です。 2つの関数の違いは、文字列データ型の処理です。 たとえば、CHECKSUM は mixed ケースに対して同じ値を返しますが、BINARY_CHECKSUM は異なる値を返します。</p>\n\n<pre class=\"prettyprint\">\nSELECT\n    CHECKSUM(&#39;case&#39;) as ChecksumLower,\n    CHECKSUM(&#39;CASE&#39;) as ChecksumUpper,\n    BINARY_CHECKSUM(&#39;case&#39;) as ChecksumBinaryLower,\n    BINARY_CHECKSUM(&#39;CASE&#39;) as ChecksumBinaryUpper;</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2cd28542-a77d-4a24-bf96-4d141fc20ae3.jpg\"><img alt=\"checksum\" border=\"0\" height=\"44\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9fd0524d-eda4-405d-bfc5-da46d261f09c.jpg\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" title=\"checksum\" width=\"448\"></a></p>\n\n<h2>Numeric、UniqueIdentifier、NEWID ()</h2>\n\n<p>SQL Data Warehouse に2つの新しいデータ型が追加されました: &nbsp; <a href=\"https://msdn.microsoft.com/library/ms187746.aspx\" target=\"_blank\">numeric</a>と<a href=\"https://msdn.microsoft.com/library/ms187942.aspx\" target=\"_blank\">uniqueidentifier</a>。 数値データ型は decimal に相当し、移行を容易にするために使用されます。 Uniqueidentifier は GUID データ型で、このデータ型を使用してデータベースの移行を簡素化するだけでなく、guid を格納するためのメソッドを提供します。 Uniqueidentifier と組み合わせて、 <a href=\"https://msdn.microsoft.com/library/ms190348.aspx\" target=\"_blank\">NEWID ()</a> 関数のサポートが追加されました。これにより、一意の GUID を生成できます。 これらの新機能のいくつかの SQL 例を次に示します。</p>\n\n<pre class=\"prettyprint\">\nCREATE TABLE NewFeaturesTable\n(\n    Id UNIQUEIDENTIFIER NOT NULL,\n    BigText NVARCHAR(MAX) NULL\n)\nWITH (HEAP);\n\nDECLARE @ID UNIQUEIDENTIFIER = NEWID();\nDECLARE @TEXT VARCHAR(MAX) = REPLICATE(&#39;This text will be long...&#39;,1000)\nINSERT INTO NewFeaturesTable (Id, BigText) VALUES (@ID, @TEXT);\n \nSELECT\n    Id,\n    DATALENGTH(BigText) AS [Length],\n    CHECKSUM(*) AS [CheckSum]\nFROM NewFeaturesTable;\n</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/00f4a450-8ed6-455a-8f9a-a100945d4db1.jpg\"><img alt=\"newid\" border=\"0\" height=\"47\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/69613dbc-3ef5-4bff-b3e1-2b8000512d9f.jpg\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" title=\"newid\" width=\"418\"></a></p>\n\n<h2>新しい管理機能</h2>\n\n<p>データベースでセキュリティプリンシパルを表示するときに、ユーザーのサーバーロールを<a href=\"https://msdn.microsoft.com/library/ms176015.aspx\" target=\"_blank\">IS_SRVROLEMEMBER ()</a>関数で &nbsp; 確認できるようになりました。 この関数は、false の場合は0、ロールのメンバーではない、true の場合は1を返します。 次の例では、ユーザーは sysadmin ロールのメンバーではありません。</p>\n\n<pre class=\"prettyprint\">\nSELECT IS_SRVROLEMEMBER(&#39;sysadmin&#39;, &#39;Contoso\\Hacker&#39;) as IsMember;</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/aca32133-fab9-4274-97c5-d2902fa74d67.jpg\"><img alt=\"is_srvrolemember\" border=\"0\" height=\"53\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a8fcf32b-9c1a-4575-9dee-c5f62803e0c8.jpg\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" title=\"is_srvrolemember\" width=\"125\"></a></p>\n\n<h2>データベースのプロパティ</h2>\n\n<p><a href=\"https://msdn.microsoft.com/en-US/library/mt712619%28SQL.130%29.aspx?f=255&amp;MSPPError=-2147217396\" target=\"_blank\">sys.database_service_objectives</a>ビューでは、複数の SQL データベースと SQL データウェアハウスをホストできる論理サーバー上のすべてのデータベースについて、データベースのエディションとサービス目標を照会できます。 この DMV には、論理 master データベースからクエリを行う必要があります。</p>\n\n<pre class=\"prettyprint\">\nSELECT a.name, b.edition, b.service_objective\nFROM\n    master.sys.databases a\n    INNER JOIN master.sys.database_service_objectives b\n        ON a.database_id = b.database_id\nORDER BY 1;</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4e26e96e-39e8-4032-8af5-d4b9768355c9.jpg\"><img alt=\"service_objectives\" border=\"0\" height=\"115\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ec4951bf-bc43-4e58-b076-dea1a55aee7b.jpg\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" title=\"service_objectives\" width=\"387\"></a></p>\n\n<p>SQL Data Warehouse を管理する場合は、 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/sql-data-warehouse-overview-manage-compute/\" target=\"_blank\">dwus</a>の現在の使用状況と、許可されている最大サイズを検証することもできます。 これらのプロパティを照会するには、 <a href=\"https://msdn.microsoft.com/library/ms186823.aspx\" target=\"_blank\">Databasepropertyex ()</a> 関数を使用します。 次の例は、興味のある一般的なプロパティを示しています。</p>\n\n<pre class=\"prettyprint\">\nSELECT\n    DATABASEPROPERTYEX(&#39;DemoDB&#39;, &#39;Edition&#39;) As Edition,\n    DATABASEPROPERTYEX(&#39;DemoDB&#39;, &#39;ServiceObjective&#39;) as ServiceObjective,\n    DATABASEPROPERTYEX(&#39;DemoDB&#39;, &#39;MaxSizeInBytes&#39;) as MaxSizeInBytes,\n    DATABASEPROPERTYEX(&#39;DemoDB&#39;, &#39;Collation&#39;) as Collation;</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/83638821-3d3e-4f77-b0fa-e7ea617d3823.jpg\"><img alt=\"databasepropertyex\" border=\"0\" height=\"40\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/99f47bac-591e-47d5-8229-ef22420a2f54.jpg\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" title=\"databasepropertyex\" width=\"434\"></a></p>\n\n<h1>保存用データ圧縮</h1>\n\n<p>このリリースでは、クラスター化列ストアテーブルの <a href=\"https://msdn.microsoft.com/library/cc280449.aspx\">アーカイブ圧縮</a> が導入されています。 このオプションの圧縮アルゴリズムを使用すると、データを格納するためのコストを削減する方法として、データをさらに圧縮できます。 コスト削減のトレードオフは、データのクエリ時に CPU 使用率が増加します。 したがって、頻繁にクエリを実行しない古いデータには、この機能を使用することをお勧めします。 次の例では、 <a href=\"https://msdn.microsoft.com/library/ms190273.aspx\" target=\"_blank\">ALTER table</a> コマンドを使用して、テーブル内の古いデータパーティションにアーカイブ圧縮を適用する方法を示します。</p>\n\n<pre class=\"prettyprint\">\nALTER TABLE FactSales\nREBUILD PARTITION = 1 WITH (DATA_COMPRESSION = COLUMNSTORE_ARCHIVE);</pre>\n\n<h1>フィードバックをお寄せください</h1>\n\n<p>この機能の計画では、ユーザーが最も必要としている機能に優先順位を付けます。 どのような機能を追加したいのかをお聞かせください。 <a href=\"https://feedback.azure.com/forums/307516-sql-data-warehouse\" target=\"_blank\">UserVoice フィードバック</a>サイトで最も必要な機能をご連絡ください。 フィードバックの提案または投票を行うユーザーは、要求に対して定期的に更新を受け取り、機能がリリースされたときに最初に通知されます。 フィードバックを提供するもう1つの方法は、フィードバックアンケートです。</p>\n\n<h1>詳細情報</h1>\n\n<p>SQL Data Warehouse の詳細については、多くのリソースがあります。 いくつかの例を次に示します。&nbsp;</p>\n\n<ul>\n <li><a href=\"https://azure.microsoft.com/documentation/articles/sql-data-warehouse-overview-what-is/\" target=\"_blank\">Azure SQL Data Warehouse の概要</a></li>\n <li><a href=\"https://azure.microsoft.com/documentation/articles/sql-data-warehouse-best-practices/\" target=\"_blank\">SQL Data Warehouse のベスト プラクティス</a></li>\n <li><a href=\"https://azure.microsoft.com/documentation/videos/index/?services=sql-data-warehouse\" target=\"_blank\">ビデオ</a></li>\n <li><a href=\"https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureSQLDataWarehouse\" target=\"_blank\">MSDN フォーラム</a></li>\n <li><a href=\"https://blogs.msdn.microsoft.com/sqlcat/tag/sql-dw/\" target=\"_blank\">CAT チームのブログ</a></li>\n <li><a href=\"https://stackoverflow.com/questions/tagged/azure-sqldw\" target=\"_blank\">Stack Overflow フォーラム</a></li>\n</ul>"
