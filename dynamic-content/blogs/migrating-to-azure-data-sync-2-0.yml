### YamlMime:Yaml
ms.openlocfilehash: df3b3851d046b3a92a59edccb944eed612481581
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904048"
Slug: migrating-to-azure-data-sync-2-0
Title: Azure SQL データ同期 2.0 への移行
Summary: PowerShell プログラミング、セキュリティと回復SQL データ同期強化された監視とトラブルシューティング、より多くのリージョンでの可用性など、アプリケーションの機能が改善されました。 の一部として...
Content: >-
  <p>PowerShell&#39;、セキュリティと回復性SQL データ同期強化された監視とトラブルシューティング、より多くのリージョンでの可用性など、アプリケーションの機能が改善されました。 これらの変更の一環として、SQL データ同期は 2017 年 7 月 1 日Azure portalでのみ使用できます。 このブログ投稿では、現在アクティブなユーザーが新しいサービスへの移行に使用する手順について説明します。 これは、2017 年 3 月 1 日より後に同期グループを使用したお客様にのみ適用されます。</p>


  <p>機能強化の詳細については、更新プログラムに関するデータ同期<a href="https://azure.microsoft.com/en-us/blog/azure-data-sync-update/">投稿を</a>参照してください。 新しいユーザーが新しいユーザーにアクセスデータ同期、このブログ記事の「はじめに with データ同期」を参照してください。</p>


  <h2>概要</h2>


  <p><strong>2017 年 6 月 1 日から、既存の同期グループの移行が開始されます</strong>。 既存の同期グループは、移行が完了するまで引き続き機能します。 詳細については、以下のセクションを参照してください。</p>


  <p><strong>同期データベースは、メタデータとログを格納する同期グループがあるリージョンごとに作成されます。</strong> このデータベースを所有します。 これは、ハブ データベースと同じサーバーに作成されます。</p>


  <p><strong>2017 年 6 月 15 </strong> 日データ同期、新しいサービスのすべての顧客がAzure portal。早期アクセスを必要な場合は、サブスクリプション <a href="mailto:datasyncmigration@microsoft.com">ID を電子</a>メールでお送りください。</p>


  <p><strong>2017 年 7 月 1 日に、SQL データ同期は Azure クラシック ポータルから廃止されます。</strong> 2017 年 7&rsquo; 月 1 日より後、元のサービスは引き続き実行されますが、移行が完了するまで、変更を加え、ポータルにアクセスできません。</p>


  <p><strong>2017 年 9 月 1 日に、元の SQL データ同期サービスは廃止されます。</strong> &rsquo;2017 年 9 月 1 日まで同期グループを移行していない場合、同期グループは削除されます。</p>


  <h2>必要事項</h2>


  <ol>
   <li><strong>移行の計画と準備を行います。</strong> 移行日と手順を含むメールが数週間以内に届きます。</li>
   <li><strong>移行日以降は、古いポータルでトポロジを作成しません。</strong> この日付は、移行される各同期グループのサブスクリプション 電子メールに送信されます。</li>
   <li><strong>オンプレミスのメンバー データベースがある場合は、ローカル エージェントをインストールして構成します。</strong> メンバー データベースをホストする各マシンまたは VM 上に 1 つ必要です。 詳細な手順を以下に示します。</li>
   <li><strong>移行が成功した場合はテストします。 </strong>これを行うには、ポータルの [&ldquo;今&rdquo;すぐ同期] をAzure SQL データ同期します。</li>
   <li><strong>移行を確認した後、古いサービスでスケジュールされた同期を無効にします。</strong> トポロジを変更する前に、この操作を行う必要があります。そうすると、エラーが発生する可能性データ同期。古いサービスで同期グループを削除しない。</li>
  </ol>


  <p>これらの手順を完了すると、新しいポータルデータ同期を使用できます。</p>


  <h3>ローカル エージェントのインストールと構成</h3>


  <p>次の手順を実行している間、元のサービスのローカル エージェントは実行されたままでインストールできます。&nbsp;ローカル エージェント <a href="https://www.microsoft.com/en-us/download/details.aspx?id=27693">をダウンロードできます</a>。&nbsp;</p>


  <p>次のことを行う必要があります。<br>

  1. <strong>ローカル エージェントをダウンロードしてインストールします。</strong> このローカル エージェントは、2.0 データ同期固有です。 このエージェントと古いエージェントは交換可能ではありません。 メンバー データベースをホストするマシンごとに、既定の場所にローカル エージェントをインストールします。&nbsp;</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ad09d079-db06-4430-8ecd-fd39b1d8fef3.png"><img alt="Download Sync Agent 1" border="0" height="265" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/eeec6904-63e7-4180-874d-a15532109d57.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" title="同期エージェントのダウンロード 1" width="324"></a><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1d22c3a3-57ba-4fc7-9749-95066a9f0eb2.png"><img alt="Download Sync Agent 2" border="0" height="265" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e88cb736-3c69-48d2-8357-52ee7f566bdd.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" title="同期エージェントのダウンロード 2" width="324"></a></p>


  <p>2. <strong>エージェント キーを取得します。</strong> これは、移行日の後の新Azure SQL データ同期ポータルで確認できます。 これを行うには、ハブ データベースの [他のデータベースへの同期&ldquo;&rdquo;] タブの [同期エージェント] を選択します。 これにより、キーを生成できるブレードが起動します。&nbsp;このキーは、新しいキーのキーである必要Azure portal。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8bec2134-c181-48c3-938e-9322e65f030d.png"><img alt="Sync 1" border="0" height="301" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b143c82d-f951-45bc-ae6d-2bdab6011142.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" title="同期 1" width="317"></a><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fe71210d-dcea-4ba9-9255-69b12da65d83.png"><img alt="Sync 2" border="0" height="335" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ff3bc6cd-e0ed-4fd7-81ad-5f67674c178e.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" title="同期 2" width="338"></a></p>


  <p>3. <strong>[エージェント キー &quot;の送信] ボタンを&quot; クリックし、同期グループと同期データベースに接続します。</strong> 同期&#39;資格情報を入力する必要があります。 これは、同期データベースがインストールされているサーバーの資格情報と同じです。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f0af10b7-23e5-4b4b-a69c-ce193f925a45.png"><img alt="Sync Metadata Database Configuration" border="0" height="367" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3c2e4e1e-e52b-47ae-af21-e233ac527610.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" title="同期メタデータ データベースの構成" width="466"></a></p>


  <p>4. <strong>資格情報を更新します。 </strong></p>


  <blockquote>

  <p>a. [資格情報の編集] ボタンをクリックし、情報を更新します。 オンプレミス データベースが少数の場合は、この方法を使用します。</p>

  </blockquote>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d94346ee-997d-4a63-acce-8a191b1ae5a9.png"><img alt="SQL Server Configuration" border="0" height="367" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d011f048-6f26-4e11-b101-4914fa04069b.png" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" title="SQL Server構成" width="466"></a></p>


  <p><strong>代替メソッド:</strong> オンプレミスのメンバーが多い場合、または資格情報を持ってない場合は、次の操作を行います。</p>


  <p>1. 上に示すように、手順 1 に従います。</p>


  <p>2. 上に示すように、手順 2 に従います。</p>


  <p>3. 元のサービスから構成ファイルをコピーします。</p>


  <blockquote>

  <p>a. 元の<strong>サービス&ldquo;AgentConfigData.xml&rdquo;</strong>コピーします。 パスは次のようになります:<strong>Microsoft SQL Data Sync\data\AgentConfigData.xml</strong></p>


  <p>b. そのファイルのコピーを新しいフォルダーにデータ同期します。 古いサービスに関するAgentConfigData_Old問題を回避するために、ファイル名を変更してください。 パスは次のようになります: <strong>Microsoft SQL データ同期 2.0\data\AgentConfigData_Old.xml</strong></p>

  </blockquote>


  <p>4. 上に示すように、手順 3 に従います。</p>


  <h2>関連リンク</h2>


  <ul>
   <li><a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-get-started-sql-data-sync">はじめにを使用データ同期</a></li>
   <li><a href="https://azure.microsoft.com/en-us/blog/azure-data-sync-update/">データ同期更新ブログ</a></li>
   <li><a href="https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.microsoft.com%2Fen-us%2Fdownload%2Fdetails.aspx%3Fid%3D27693&amp;data=02%7C01%7Cv-canmo%40microsoft.com%7C0a699787695645a3aef408d4a79df0f2%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636317744174347996&amp;sdata=3appIls3J3UCdduykQxkU47MAo2BhqGxkJMgDui1TmE%3D&amp;reserved=0">ローカル エージェントをダウンロードする</a></li>
  </ul>


  <p>サービスに関するご意見Azure SQL データ同期ご&rsquo;意見をお寄せください。 最新の更新プログラムを取得Azure SQL データ同期、SQL Advisor Yammer に参加するか、Twitter でフォロー@AzureSQLDBしてください。</p>
