### YamlMime:Yaml
ms.openlocfilehash: 0229e5d3320792374ce4b1d3aa16bee13c53a302
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904726"
Slug: introducing-proximity-placement-groups
Title: 近接配置グループの紹介
Summary: アプリケーションのパフォーマンスは、IT 組織の成功の中心となります。 アプリケーションのパフォーマンスは、顧客満足度を高め、最終的にビジネスを成長させる能力に直接影響を与える可能性があります。
Content: >-
  <h3>アプリケーションのパフォーマンスを向上するために Azure リソースを共同で検索する</h3>


  <p>アプリケーションのパフォーマンスは、IT 組織の成功の中心となります。 アプリケーションのパフォーマンスは、顧客満足度を高め、最終的にビジネスを成長させる能力に直接影響を与える可能性があります。</p>


  <p>多くの要因がアプリケーションのパフォーマンスに影響を与える可能性があります。 その 1 つは、デプロイされた仮想マシン間の物理的な距離によって影響を受けるネットワーク待機時間です。</p>


  <p>たとえば、仮想マシンを 1 Microsoft Azure Virtual Machines Azure リージョンに配置すると、仮想マシン間の物理的な距離が短縮されます。 それらを単一の可用性ゾーン内に配置する手順は、仮想マシンを互いに近くにデプロイするために実行できるもう 1 つの手順です。 ただし、Azure のフットプリントが大きくなるにつれて、1 つの可用性ゾーンが複数の物理データ センターにまたがる場合があります。その結果、ネットワーク待機時間が発生し、アプリケーションの全体的なパフォーマンスに影響を与える可能性があります。 リージョンで可用性ゾーンがサポートされていない場合、またはアプリケーションが可用性ゾーンを使用していない場合は、結果としてアプリケーション層間の待機時間が長くなる可能性があります。</p>


  <p>現在、近接配置グループのプレビューを発表します。 Azure Infrastructure as a Service (IaaS) リソースのコロケーションと、その間のネットワーク待機時間の短縮を実現するために、新しい機能が提供されています。</p>


  <p>Azure 近接配置グループは、Azure Virtual Machines の新しい論理グループ化機能を表します。これは、仮想マシンを配置する場所を選択するときにデプロイ制約として使用されます。 実際、仮想マシンを近接配置グループに割り当てると、仮想マシンは同じデータ センターに配置され、アプリケーションの待機時間が短く、デターミスティックです。</p>


  <h2>近接配置グループを使用する場合</h2>


  <p>近接通信配置グループは、仮想マシン間のネットワーク待機時間を短縮することで、アプリケーションの全体的なパフォーマンスを向上させます。 複数の仮想マシン、可用性セット、仮想マシン スケール セットを使用してアプリケーション層をデプロイする多層 IaaS ベースのデプロイには、近接配置グループの使用を検討する必要があります。</p>


  <p>たとえば、高可用性を実現する可用性セットまたは仮想マシン スケール セットにアプリケーションの各層がデプロイされている場合を考えてみることができます。 異なる仮想マシン SKU とサイズを使用している場合でも、アプリケーションのすべての層に対して 1 つの近接配置グループを使用すると、すべてのデプロイが互いにフォローし合い、待機時間を最適化するために同じデータ センターに配置されます。</p>


  <p>近接通信配置グループで&rsquo;最適な結果を得る場合は、高速ネットワークを使用<a href="https://docs.microsoft.com/azure/virtual-network/create-vm-accelerated-networking-powershell" target="_blank"></a>し、仮想マシンの待機時間を短く最適化<a href="https://docs.microsoft.com/azure/virtual-network/virtual-network-optimize-network-bandwidth" target="_blank">してください</a>。</p>


  <h2>近接配置グループの使用を開始する</h2>


  <p>近接配置グループから始める最も簡単な方法は、Azure Resource Manager (ARM) テンプレートで使用する方法です。</p>


  <p>近接配置グループ リソースを作成するには、次のステートメントを追加します。</p>


  <pre>

  {

  &quot;apiVersion&quot;: &quot;2018-04-01&quot;,

  &quot;type&quot;: &quot;Microsoft.Compute/proximityPlacementGroups&quot;,

  &quot;name&quot;: &quot;[parameters(&#39;ppgName&#39;)]&quot;,

  &quot;location&quot;: &quot;[resourceGroup().location]&quot;

  }</pre>


  <p>テンプレートの後半で仮想マシン (または可用性セットまたは仮想マシン スケール セット) でこの近接配置グループを使用するには、次の依存関係とプロパティを追加します。</p>


  <pre>

  {
     &quot;name&quot;: &quot;[parameters(&#39;virtualMachineName&#39;)]&quot;,
     &quot;type&quot;: &quot;Microsoft.Compute/virtualMachines&quot;,
     &quot;apiVersion&quot;: &quot;2018-06-01&quot;,
     &quot;location&quot;: &quot;[parameters(&#39;location&#39;)]&quot;,
     &quot;dependsOn&quot;: [
       &quot;[concat(&#39;Microsoft.Compute/proximityPlacementGroups/&#39;, parameters(&#39;ppgName&#39;))]&quot;
     ],
     &quot;properties&quot;: {
       &quot;proximityPlacementGroup&quot;: {
         &quot;id&quot;: &quot;[resourceId(&#39;Microsoft.Compute/proximityPlacementGroups&#39;,parameters(&#39;ppgName&#39;))]&quot;
     }
  }</pre>


  <p>近接配置グループの詳細については、PowerShell と CLI での近接配置グループの使用に関する次 <a href="https://docs.microsoft.com/azure/virtual-machines/windows/proximity-placement-groups" target="_blank">のチュートリアル</a> を参照 <a href="https://docs.microsoft.com/azure/virtual-machines/linux/proximity-placement-groups" target="_blank">してください</a>。</p>


  <h2>近接配置グループを使用する場合の予想される機能</h2>


  <p>近接配置グループでは、同じデータ センターでのコロケーションが提供されます。 ただし、近接配置グループは追加のデプロイ制約を表すので、割り当てエラーが発生する可能性があります (たとえば、同じ近接配置グループに Azure Virtual Machines を配置できない場合があります)。</p>


  <p>近接配置グループ内の最初の仮想マシンを要求すると、自動的にデータ センターが選択されます。 場合によっては、別の仮想マシン SKU に対する 2 つ目の要求が失敗することがあります。これは、既に選択されているデータ センターに存在しないからです。 この場合、 <strong>OverconstrainedAllocationRequest</strong> エラーが返されます。 トラブルシューティングを行う場合は、選択したリージョンまたはゾーンで使用可能な仮想マシンを、Azure portal確認してください。 必要なすべての SKU が使用可能な場合は、それらをデプロイする順序を変更してみてください。</p>


  <p>スケールアウトするエラスティックデプロイの場合、デプロイに近接配置グループの制約を設定すると、要求を満たすことが失敗する可能性があります。 近接配置グループを使用する場合は、すべての仮想マシンを同時に確認することをお勧めします。</p>


  <p>近接通信配置グループは現在プレビュー中であり、東日本、オーストラリア東部、インド中部を除くすべてのリージョンで無料で提供されています。</p>


  <p>近接配置グループの詳細 <a href="https://docs.microsoft.com/azure/virtual-machines/linux/co-location" target="_blank">については、ドキュメントを参照してください</a>。</p>


  <p>初期&rsquo;プレビュー プログラム&rsquo;に参加した SAP から聞いたことを次に示します。</p>


  <p><em>&ldquo;この機能が一般公開されるのを見て本当に良い方法です。標準のデプロイで使用します。私のチームは、SAP ランドスケープの大規模なデプロイを自動化しています。システムの最高のパフォーマンスを確保するには、システムの異なるコンポーネント間の待機時間を短くする必要があります。特に重要なのが、アプリケーション サーバーとデータベース間の通信と、同期レプリケーションを有効にする必要がある場合の HANA VM 間の待機時間です。2018 年後半に、さまざまな Azure リージョンでいくつかの測定を行い、待機時間が予想以上ではなく、最適な範囲内ではない場合があるという点が判明しました。Microsoft と話し合っている間に、早期プレビューに参加し、近接配置グループ (PPG) 機能を評価する方法が提供されました。評価の間に、すべてのシステム コンポーネント間の待機時間を 0.3 ミリ秒未満に短縮できたので、システム のパフォーマンスを向上させるのに十分です。PPG が VM NIC のネットワーク アクセラレーションと組み合わされた場合に達成した最良の最終的な結果。さらに、測定された待機時間が改善されました。&rdquo;</em></p>


  <p>SAP 開発アーキテクト、ベンシノフ・イバノフ</p>
