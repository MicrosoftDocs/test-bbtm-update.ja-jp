### YamlMime:Yaml
ms.openlocfilehash: e3f54e1ec54513cd09b1e131f78691c35a16c634
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904220"
Slug: deliver-the-right-events-to-the-right-places-with-event-domains
Title: イベント ドメインを使用して適切な場所に適切なイベントを配信する
Summary: コミュニティが Event Grid を中心に成長し続けているので、多くのユーザーは、実現できる複雑さとスケールの境界を探り始めました。 プラットフォーム上に構築されたシステム アーキテクチャの一部は、私たちは吹き飛ばされました。
Content: >-
  <p>コミュニティが Event Grid を中心に成長し続けているので、多くのユーザーは、実現できる複雑さとスケールの境界を探り始めました。 プラットフォーム&rsquo;の上に構築されたシステム アーキテクチャの一部が気に入っています。</p>


  <p>これらのシナリオの一部で生活を容易にするために、過去数か月の多くを、今日発表する 2 つの機能 (高度なフィルターと、すべての顧客にイベントを発行するマネージド プラットフォームであるイベント ドメイン) を構築することを決定しました。<em></em> &ndash; さらに、開発者エクスペリエンス&rsquo;を向上し、新しいリージョンでEvent Grid提供Azure Governmentしました。</p>


  <h2>イベント ドメイン</h2>


  <p>イベント ドメインを使用してEvent Grid独自のイベント ソースになり、さまざまなビジネス組織、顧客、またはアプリケーションへのカスタム イベントのフローを管理します。 イベント ドメインは、基本的に、同じアプリケーションに関連する多数の Event Grid トピック (何千ものトピックを含む可能性があるトップ レベルの成果物) の管理ツールです。 ドメインを使用すると、Azure Active Directory を介して各トピックに対するきめ細かな承認と認証制御を取得できます。これにより、どのテナントまたは顧客が、どのトピックにサブスクライブするアクセス権を持つのかを簡単に決定できます。 イベント ドメインではパーティション分割も処理されます。つまり、各トピックにイベントを個別に発行する必要が生じするのではなく、すべてのイベントを Domains&rsquo; エンドポイントに発行できます。Event Grid は、各イベントが正しいトピックに送信されていることを確認します。</p>


  <p>これは、パートナーとパートナー Event Grid独自のイベントをエンド カスタマーに提供できる新しいシナリオをサポートする独自の機能です。</p>


  <p>イベント ドメインでは、Blob Storage や IoT Hub などの Azure サービスがイベントを発行して使用できる基になるアーキテクチャを利用しています。 つまり、1 つのイベント ドメインを使用して、すべてのエンド カスタマー、または独立したサービスを持つ複雑な組織全体へのイベントの発行を処理できます。</p>


  <p>イベント ドメインは、おそらく例を使用して最も簡単に説明できます。 たとえば&rsquo;、Contoso の建設機械を実行するとします。ここで、トラクター、掘り下げ装置、その他の重量機械を製造します。 ビジネスの実行の一環として、機器のメンテナンス、システムの正常性、契約の更新に関するリアルタイムの情報を顧客にプッシュします。 このすべては、アプリ、顧客エンドポイント、および顧客が設定したその他のインフラストラクチャなど、さまざまなエンドポイントに送信されます。</p>


  <p>イベント ドメインを使用することで、Contoso Construction Machinery を単一のイベント処理エンティティとしてモデル化することができます。 各顧客は、ドメイン内のトピックとして表され、Azure Active Directory&rsquo; を使用して認証と承認を処理します。そのため、心配する必要はありません。 各顧客はトピックをサブスクライブし、配信されたイベントを取得できますが、AAD とイベント ドメインは、別のテナントトピックへのアクセスをブロック&rsquo;します。</p>


  <p>また、すべての顧客イベントを発行できる単一のエンドポイントも提供され、Event Grid は各トピックがテナントにスコープ付けされたイベントのみを認識する処理を行います。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9c523852-09d7-4d4b-8ea3-abfb59c58126.png"><img alt="Contoso Construction Machinery Event Domain grid" border="0" height="851" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8f054c17-b01c-412a-ad7f-210150d7b055.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="Contoso の建設機械イベント ドメイン グリッド" width="1296"></a></p>


  <p>アプリケーション アーキテクチャがイベント ベースのプログラミング モデルにますます移行する世界では、HTTP エンドポイント、アプリケーション、クラウド サービスへのプッシュのサポートがますます重要になってきています。 イベント ドメインによってイベントが処理されます。そのため、顧客が利用できるイベントについて心配する必要があります。</p>


  <p>イベント ドメインを使用して、次のことを行います。</p>


  <ul>
   <li>大規模なマルチテナントのイベント処理アーキテクチャを管理する。</li>
   <li>承認と認証を管理する。</li>
   <li>各トピックを個別に管理するのではなく、パーティション分割する。</li>
   <li>各トピック エンドポイントへの個別の発行を回避する。</li>
  </ul>


  <p>イベント ドメインの詳細については、ドキュメントを <a href="https://aka.ms/egeddocs" target="_blank">参照し</a>、このサンプルの使用を開始 <a href="https://aka.ms/egedsample" target="_blank">してください</a>。</p>


  <h2>Event Grid の高度なフィルター</h2>


  <p>イベント ドメインの追加機能を強化するために、Event Grid では現在からいくつかの新しい種類の高度なフィルターがサポートされています。 これらの新しいフィルターを使用すると、数値、文字列、ブール型のフィルターなど、新しい種類のフィルター処理のホストをネットワーク上で実行できます。</p>


  <p>&rsquo;この更新により、各データ型に対して多数の演算子が提供され、それらを実行できるフィールドの数が大幅に増え、どのイベントがどこでルーティングされるのかを制御し、必要なイベントだけがそれらを処理するコンピューティング サービスにアクセスします。 高度なフィルターでは、エンベロープ プロパティ (DataVersion、Id、Topic など) とデータ ペイロードの最初のレイヤー (data.key1 など) でのフィルター処理がサポートされています。 データ型ごとに次の演算子が追加されています。</p>


  <h3>数値</h3>


  <ul>
   <li><code><tt>NumberLessThan</tt></code></li>
   <li><code>NumberLessThanOrEquals</code></li>
   <li><code>NumberGreaterThan</code></li>
   <li><code>NumberGreaterThanOrEquals</code></li>
   <li><code>NumberIn &ndash; the value for data.key equals a value in the set [0, 2.08, 3.14]</code></li>
   <li><code>NumberNotIn &ndash; the value for data.key is not in the set [1, 11, 112, 1124]</code></li>
  </ul>


  <h3>文字列</h3>


  <ul>
   <li><code>StringContains &ndash; the value for data.key contains &ldquo;the&rdquo;</code></li>
   <li><code>StringIn &ndash; the value for data.key equals a value in the set [&ldquo;small&rdquo;, &ldquo;brown&rdquo;, &ldquo;fox&rdquo;]</code></li>
   <li><code>StringNotIn &ndash; the value for data.key equals a value in the set [&ldquo;jumped&rdquo;, &ldquo;over&rdquo;, &ldquo;the&rdquo;]</code></li>
   <li><code>StringBeginsWith &ndash; the value for data.key begins with &ldquo;lazy&rdquo;</code></li>
   <li><code>StringEndsWith &ndash; the value for data.key ends with &ldquo;dog&rdquo;</code></li>
  </ul>


  <h3>Boolean</h3>


  <ul>
   <li><code>BoolEquals</code></li>
  </ul>


  <p>ビジネス ロジックを実行する前に、イベントをさらにフィルター処理するための追加の clunk スクリプトは追加する必要はありません。 さまざまな新しいフィルターを組み合わせることで、オンザワイヤー フィルターの強力な組み合わせが可能になり、イベント ハンドラーは、本当に重要なデータのみを処理できます。</p>


  <p>詳細については、ドキュメントを参照Event Gridの詳細を確認 <a href="https://aka.ms/egafdocs" target="_blank">してください</a>。</p>


  <h2>Azure Governmentリージョンの可用性</h2>


  <p>2018 年 11 月 1 日より、Event Grid、テキサス、およびバージニア州US Gov アリゾナリージョンで使用できます。 すべてのEvent Grid機能 (カスタム トピック、ドメイン、フィルター処理、および Dead Lettering を含む) は、最初から使用できます。 ただし、ファースト パーティの Azure サービス (Azure Storage など) からの組み込みイベントはすぐには使用できません。 これらの組み込みイベント ソースは、これらのリージョンに対して既に機能しています。今後数か月の間にローリング ベースで追加されます。ご期待ください。 つまり、Event Gridの残りの機能の追加が完了するまで、US Gov リージョンでは最初にパブリック プレビューが実行されます。 特定のイベント発行元に関して質問や要件がある場合は、チーム&rsquo;にお問い <a target="_blank">合わせください</a>。</p>


  <h2>開発エクスペリエンスの向上</h2>


  <p>最後に、テストと開発を容易にするための微調整と更新をほとんど行う必要がなさそうとして、常に取り組まれています。 その中で、SDK の一部を更新し、イベント サブスクリプションの Time to Live 機能を追加し、致命的なレタリングと再試行ポリシーを構成するためのポータル UI のサポートを追加しました。</p>


  <h3><a href="https://docs.microsoft.com/en-us/azure/event-grid/manage-event-delivery" target="_blank">Azure portal での受け入れ時の受け入れAzure portal</a></h3>


  <p>これで、イベント サブスクリプションを &ldquo;作成する&rdquo; 際にいつでも、ページの上部にある [追加機能] タブをクリックできます。 このページから、&rsquo;再試行ポリシーの &amp; 使用できない構成、フィルター、および追加した新しい機能にアクセスできます。 また、ARM テンプレートで使用するサブスクリプションの ARM 表現を表示できる 詳細エディター モードが追加されただけでなく、ポータルでまだ利用できない新機能を構成することもできます。</p>


  <h3>イベント サブスクリプション Time to Live (TTL)</h3>


  <p>エフェメラル リソースは、多くの理由で役立ちます。 古いリソースをクリーンアップしてテストを行う際に、セキュリティを強化します。また、リソースが広告の初期化を発行することを許可し、イベントを事前にサブスクライブしているリソースだけがそれらを受け取り続けているため、構成を最新の状態に保つためです。 イベント サブスクリプション TTL を使用すると、イベント サブスクリプションの作成時に、その後自動的にクリーンアップされるライブタイムを構成できます。</p>


  <h3>SDK の更新</h3>


  <p>Azure ネイティブ イベントの使用をさらに簡単にするために、.Net、Java、Go SDK が更新されました。 各 の最新リリースを使用して、SDK は、Azure によって発行されている利用可能なすべてのイベントの種類を認識しました。 つまり&rsquo;、Event Grid s eventGridSubscriber を使用して、すべての既知のイベントの種類に対してイベントを直接逆シリアル化し、さまざまなイベント型クラスへの JSON の手動逆シリアル化に対処するのではなく、イベントの内容に対するコードの記述を開始できます。 さまざまな SDK <a href="https://docs.microsoft.com/en-us/azure/event-grid/sdk-overview">を確認して </a>、リソースとイベントを管理Event Gridエクスペリエンスを向上します。</p>
