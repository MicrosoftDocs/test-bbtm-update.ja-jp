### YamlMime:Yaml
ms.openlocfilehash: 4cf0c0ec609fe26988770238cb4e79a1128a7ef7
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139889954"
Slug: azure-media-services-rtmp-support-and-live-encoders
Title: Azure Media Services RTMP サポートおよびライブ エンコーダー
Summary: この記事では、Azure Media Services によって有効にされる RTMP 取り込み機能について説明します。また、Wirecast、Flash Media live Encoder (FMLE)、ffmpeg Encoder を使用して、マルチビットレートのライブフィードをソース化してチャネル Azure Media Services に送信する方法について説明します。
Content: >-
  <p>ライブストリーミングは、実証済みのライブストリーミングプラットフォーム "> パブリックプレビュー </a> で Azure Media Services 起動できるように <a href="https://azure.microsoft.com/blog/2014/09/10/azure-media-services-launches-proven-live-streaming-platform/" target="_blank" title=" なりました。また、サポートされている取り込みプロトコルの1つは RTMP です。 RTMP は、取り込みのために一般的に使用されるプロトコルであり、ライブストリーミングを含むリッチメディアを提供します。 Azure Media Services は、RTMP を使用した取り込みライブフィードをサポートし、<a href="https://msdn.microsoft.com/en-us/library/azure/jj889436.aspx" target="_blank">ダイナミックパッケージ</a>を使用して、MPEG ダッシュ、Microsoft Smooth Streaming、Apple HLS、または Adobe HDS 形式で配信するために muxe ライブストリームを動的に転送します。 これにより、従来のプレーヤーや形式との互換性を維持しながら、入力と複数の出力プロトコルを使用して、複数のデバイスやエンドポイントに接続することができます。 ライブチャネルとストリーミングエンドポイントで Azure メディアアカウントを設定する方法の詳細については、「azure media はじめに管理ポータルを使用したライブストリーミングによる azure media 管理ポータル </a> &rdquo; を使用したライブストリーミングのはじめに」を参照してください &rsquo; &ldquo; <a href="https://azure.microsoft.com/blog/2014/09/10/getting-started-with-live-streaming-using-the-azure-management-portal/" target="_blank" title=" 。 "> この記事では、Azure Media Services によって有効にされる RTMP 取り込み機能について説明します。また、Wirecast、Flash Media live Encoder (FMLE)、ffmpeg Encoder を使用して、マルチビットレートのライブフィードをソース化してチャネル Azure Media Services に送信する方法について説明します。</p>


  <h1>&nbsp;</h1>


  <h2><span style="font-weight: bold;">アーキテクチャと一般情報</span></h2>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/Live-architecture.png"><img alt="Live-architecture" border="0" height="364" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Live-architecture_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none;" title="高レベルのライブアーキテクチャ " width="644"> </a> のライブストリーミングアーキテクチャは、チャネル/プログラム、Storage およびストリーミングエンドポイントという3つの主要コンポーネントで構成されています。</p>


  <ul>
   <li><strong>チャネル/プログラム-</strong> チャネルはライブストリーミングを有効にします。 ライブエンコーダーの取り込みポイントが含まれます。 現時点では RTMP とフラグメント化 MP4 (Smooth Streaming) は、サポートされている取り込みプロトコルです。 プログラムは、チャネル内の論理コンポーネントです。 プログラムは、ストリーミング用に受信したデータを発行し、オンデマンド変換とライブプレゼンテーションウィンドウ (DVR) のコンテンツもアーカイブします。</li>
   <li><strong>ストリーミングエンドポイントとストリーミングユニット-</strong> ストリーミングエンドポイントは、ライブおよび VOD 資産をプルできる URL を提供します。 &nbsp; ストリーミングエンドポイントは、動的なパッケージ機能も提供し、ストリームの配信をセキュリティで保護します。</li>
   <li><strong>Storage-</strong>プログラムは、ライブアーカイブを格納するために Azure Storage を使用します。 On-demand streaming と encoding サービスでもストレージが使用されます。</li>
  </ul>


  <h3><span style="font-weight: bold;">Channel RTMP のサポート</span></h3>


  <p>Azure Media Services チャネルでは、RTMP プッシュモデルがサポートされています。 シングルビットレートの入力の両方をサポートできますが、マルチビットレートの入力を使用して、アダプティブビットレートストリーミングの利点を得ることを強くお勧めします。 今後、Azure Media Services は、シングルビットレートの入力をマルチビットレートの出力に変換するライブ変換を提供します。 RTMP インジェストを使用するには、次のものが必要です。</p>


  <ul>
   <li>RTMP 出力サポートエンコーダー</li>
   <li>H.264 video と AAC audio コーデックの出力</li>
   <li>ビデオ品質にわたるキーフレームまたは GOP (画像のグループ) のアラインメント</li>
   <li>2番目のキーフレームの間隔 (最大6秒まで使用できますが、これには特別な構成が必要です。 下の [詳細設定] セクションを参照してください)</li>
   <li>品質ごとに一意 &nbsp; のストリーム名</li>
   <li>ネットワーク接続 (集約されたビデオ + audio ビットレートの使用可能な帯域幅)</li>
   <li>最適なアダプティブビットレートパフォーマンスのために推奨される Strict CBR エンコード。</li>
  </ul>


  <p>この投稿では、出力と Azure Media Services チャネルへの取り込みに3つのビデオ品質を使用します。 複数の品質を使用できますが、最初の品質はコンピューター &rsquo; のエンコード機能とチャネル取り込みへのネットワーク接続によって制限されることに注意してください。 利用できる帯域幅を超過している場合やネットワーク接続が良好でない場合は、品質数を調節し、解像度とビットレートを下げて使用するようエンコーディング性能を調整しなければならないこともあります。 複数の品質を使用するときは、すべての品質の合計ビットレートに配慮してください。</p>


  <blockquote>注: エンコーダーの設定を変更し、エンコーダーを切断してチャネルに再接続するたびに、必ずチャネルをリセットしてください。</blockquote>


  <h2><span style="font-weight: bold;">Wirecast の構成</span></h2>


  <p>Wirecast は、よく知られている RTMP encoder です。 Wirecast を使用すると、ブロードキャスト用にライブストリームのキャプチャ、ライブ運用、エンコードを行うことができます。 詳細情報を取得し、telestream web サイト "> の telestream web サイト </a> から <a href="https://www.telestream.net/wirecast/overview.htm" target="_blank" title=" 試用版をダウンロードすることができます。 Wirecast バージョン5および 6 &nbsp; は、Azure Media Services でサポートおよびテストされています。 以下の手順は、Wirecast version 5 と6の両方に適用されます。 バージョン6には Azure Media Services エンコードプリセットの使用準備も含まれています。 既定のプリセットを使用するか、以下の手順に従って独自のプリセットを作成することができます。</p>


  <h3>&nbsp;</h3>


  <h3><span style="font-weight: bold;">入力の構成</span></h3>


  <ul>
   <li>ボタンの上 &ldquo; + &rdquo; にマウスポインターを移動します。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/Wirecast1.png"><img alt="Wirecast1" border="0" height="442" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast1_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="Wirecast1" width="620"></a></p>


  <ul>
   <li>使用可能なソースオプションから選択します。 Wirecast には、複数のオプションがあります。 この記事では、統合ビデオカメラを使用します。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast2.png"><img alt="wirecast2" border="0" height="354" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast2_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast2" width="621"></a></p>


  <ul>
   <li>新しい小さいウィンドウにカメラのキャプチャが表示されます。 それをクリックすると、カメラのキャプチャがプレビューウィンドウに表示されます。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast13.png"><img alt="wirecast13" border="0" height="536" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast13_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast13 " width="621"> </a> &nbsp;</p>


  <h3><span style="font-weight: bold;">出力の構成</span></h3>


  <ul>
   <li>メインメニューで、[出力- &gt; 出力設定] にアクセスします。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast4.png"><img alt="wirecast4" border="0" height="484" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast4_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast4" width="626"></a></p>


  <ul>
   <li>[出力先の選択] ダイアログボックスで、[RTMP Server] を選択します。</li>
  </ul>


  <blockquote><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast5.png"><img alt="wirecast5" border="0" height="103" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast5_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast5 " width="244"> </a> [出力設定] ダイアログボックスが表示されます。 <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast6.png"><img alt="wirecast6" border="0" height="358" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast6_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast6" width="644"></a></blockquote>


  <ul>
   <li>最初の出力 (品質) に名前を指定します。 例 &ldquo; Azure Media Services Quality1&rdquo;</li>
   <li>[アドレス] フィールドに、チャネル &rsquo; の取り込み URL を入力します。 &nbsp;チャネルの取り込み URL を取得する方法の詳細については管理ポータル &rdquo; </a> 、「azure media はじめに管理ポータル "> を使用したライブストリーミングとライブストリーミングを使用したライブストリーミングのはじめに」を参照してください &ldquo; <a href="https://azure.microsoft.com/blog/2014/09/10/getting-started-with-live-streaming-using-the-azure-management-portal/" target="_blank" title=" 。</li>
   <li>一意のストリーム名 (たとえば、myStream1) を入力します。複数の品質がある場合、各品質には一意のストリーム名が必要です。</li>
   <li>最初の品質用に新しいエンコードプリセットを作成します。
   <ul>
    <li>[出力設定] ダイアログボックスで、[新しいプリセット] を選択します。</li>
    <li>[新しいプリセット名を入力してください] ボックスに、新しいプリセットの名前を入力します。 &nbsp; 例 &ldquo; MyQuality1&rdquo;</li>
    <li>エンコーダを設定 &ldquo; します。「 <strong>x264」または「」と</strong>入力します。 &rdquo;</li>
    <li>事前設定を目的の値に設定します。</li>
   </ul>
   </li>
  </ul>


  <blockquote>独自のエンコードプリセットを作成する場合は、各品質について、1秒 &rdquo; あたりのフレーム数と &ldquo; キーフレーム &rdquo; の値を同じ値に設定 &ldquo; する必要があります。 品質ごとに同じオーディオエンコード設定を使用する必要があります。また、品質ごとに [キーフレームの固定 &rdquo; ] 設定をオン &ldquo; にする必要があります。 &nbsp;それ以外の場合、ストリームは動作せず、チャネルに取り込みません。 適切なアダプティブ ビットレート ストリーミングを実現するには、これらの設定を品質間で同一に保つことが求められます。 <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast7.png"><img alt="wirecast7" border="0" height="484" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast7_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast7" width="459"></a></blockquote>


  <ul>
   <li>最初の出力を構成した後、出力構成は次のようになります。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast8.png"><img alt="wirecast8" border="0" height="358" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast8_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast8" width="644"></a></p>


  <ul>
   <li>他の品質レベルを追加するには、[追加] をクリックし、上記の手順に従って、さらに品質を追加します。 &rsquo;常 &rdquo; に同じ値を1秒 &rdquo; あたりのフレーム数とキーフレームに &ldquo; 設定することを忘れないで &ldquo; ください。 また、キーフレームの位置合わせ &rdquo; の設定と名前のストリームが一意であることを確認 &ldquo; してください。</li>
   <li>3種類のすべての品質を構成すると、出力構成は次のようになります。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast9.png"><img alt="wirecast9" border="0" height="358" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast9_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast9 " width="644"> </a> &nbsp;</p>


  <h3><span style="font-weight: bold;">エンコードを開始してチャネルの取り込みにデータをプッシュする</span></h3>


  <ul>
   <li>矢印をクリックしてエンコードを開始します:</li>
  </ul>


  <blockquote><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast10.png"><img alt="wirecast10" border="0" height="129" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast10_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast10" width="594"></a></blockquote>


  <ul>
   <li>ストリームボタンを押して、チャネルへのライブエンコードされたデータのプッシュを開始します。 ストリーミングが開始されると、インジケーターライトが赤に変わります。</li>
  </ul>


  <blockquote><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast11.png"><img alt="wirecast11" border="0" height="42" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast11_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast11" width="226"></a></blockquote>


  <h3><span style="font-weight: bold;">ストリームをプレビューする</span></h3>


  <p>Azure 管理ポータルを使用して、ストリームをプレビューできます。 Azure ポータルを使用してストリームを発行することもできます。 発行とプレビューの方法については、Azure Media 管理ポータル </a> &rdquo; を使用したライブストリーミングによるライブストリーミングのはじめにはじめに管理ポータル "> に関する説明を参照してください &ldquo; <a href="https://azure.microsoft.com/blog/2014/09/10/getting-started-with-live-streaming-using-the-azure-management-portal/" target="_blank" title=" 。 別の方法として、複数のプレーヤーオプションとプレビューを使用 <a href=""></a> することもできます。 &nbsp;</p>


  <h2>&nbsp;</h2>


  <h2><span style="font-weight: bold;">Flash Media Live Encoder (FMLE) の構成</span></h2>


  <p>FMLE は Adobe の無償のソフトウェアです。 詳細情報を取得し、エンコーダーのコピーをから <a href="https://www.adobe.com/products/flash-media-encoder.html" title=" https://www.adobe.com/products/flash-media-encoder.html https://www.adobe.com/products/flash-media-encoder.html "> </a> ダウンロードできます。 既定では、FMLE は MP3 オーディオ出力をサポートしています。 現在 Azure Media Services <a href="https://azure.microsoft.com/en-us/blog/an-introduction-to-live-encoding-with-azure-media-services/"><s> &rsquo; はライブトランスコードサービスを提供</s></a>していません。また、MPEG、Smooth Streaming、HLS などの複数の形式への動的パッケージソースストリームへの AAC オーディオコーデックが必要です。 Azure Media Services で FMLE を使用するには、AAC プラグインが必要です。 この投稿では、メインの概念からプラグインを使用します。 &nbsp;詳細情報を取得し、から <a href="https://www.mainconcept.com/eu/products/plug-ins/plug-ins-for-adobe/aac-encoder-fmle.html" title=" https://www.mainconcept.com/eu/products/plug-ins/plug-ins-for-adobe/aac-encoder-fmle.html https://www.mainconcept.com/eu/products/plug-ins/plug-ins-for-adobe/aac-encoder-fmle.html "> </a> 試用版をダウンロードすることができます。 &nbsp;</p>


  <h3><span style="font-weight: bold;">FMLE の構成</span></h3>


  <ul>
   <li>最初に行う必要があるのは、RTMP タイムスタンプに対して NTP タイムソース (絶対時間) を使用するように FMLE を構成することです。 これを行うには、次の手順を実行します。 <ol>
    <li>エンコーダーを閉じます。</li>
    <li>テキスト エディターで FMLE config.xmlファイルを開きます。Windows の既定のインストール場所は C:\Program Files\Adobe\Flash Media Live Encoder 3.2\ (x64 の場合は C:\Program Files (x86)\Adobe\Flash Media Live Encoder 3.2\)) Mac OS の既定のインストール場所は Macintosh HD:Applications:Adobe:Flash Media Live Encoder 3.2 です</li>
    <li>streamsynchronization/enable を true に設定します。&lt;streamsynchronization !--&gt;&quot;&lt;この機能を有効にするには true&quot;、&quot;無効にするには false&quot; です。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --&gt; &lt;enabletrue&gt;<span style="background-color: rgb(255, 255, 0);"></span>&lt;/enable&gt;</li>
    <li>ファイルを保存し、エンコーダーを再度起動します。</li>
   </ol>
   </li>
   <li>デバイスの一覧からソース デバイスを選択します。 この投稿では、統合カメラを &ldquo;使用します&rdquo;</li>
   <li>プリセット メニューからエンコード プリセットを選択するか、独自のエンコード プリセットを作成します。 独自に作成する場合は、「 &quot;Channel RTMP support」&quot; セクションで要件を確認してください。&nbsp; プリセット メニューから &ldquo;マルチ ビットレート &ndash; 3 ストリーム (1500) Kbps &ndash; H.264&rdquo; を使用します。これは 3 つの品質を生み出します。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast12.png"><img alt="wirecast12" border="0" height="484" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast12_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast12" width="644"></a></p>


  <ul>
   <li>H.264 の詳細設定を構成し、クリック&ldquo;&rdquo;してキー フレームの頻度を 2 秒に設定します<a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast14.png"><img alt="wirecast14" border="0" height="28" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast14_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast14" width="28"></a> アイコン。 注: これにより、プリセット名が [カスタム] に変 &ldquo;されます&rdquo;</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast15.png"><img alt="wirecast15" border="0" height="244" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast15_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast15" width="228"></a></p>


  <ul>
   <li>フレーム レートを 30 fps に設定する</li>
   <li>オーディオ デバイスを選択する</li>
   <li>[オーディオ出力形式] を [AAC] に設定します。 注: AAC と HE-AAC は既定では使用できません。 FMLE では、標準の MP3 オーディオのみをサポートします。 AAC コーデックを有効にするにはプラグインが必要です。</li>
   <li>目的のオーディオ帯域幅を設定します。 この投稿では、96 Kbps と 44100 サンプリング レートを使用します。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast16.png"><img alt="wirecast16" border="0" height="171" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast16_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast16" width="244"></a></p>


  <ul>
   <li>[Stream &ldquo;to Flash Media Server]を選択します。&rdquo;</li>
   <li>チャネル取り込み URL を FMS URL &ldquo;に入力します&rdquo;。 <a href="1935/live/a9bcd589da4b424099364f7ad5bd4940" title="たとえば、 rtmp://channel001-streamingtest.channel.media.windows.net:1935/live/a9bcd589da4b424099364f7ad5bd4940"> rtmp://channel001-streamingtest.channel.media.windows.net:1935/live/a9bcd589da4b424099364f7ad5bd4940 &ldquo;</a><a href="https://azure.microsoft.com/blog/2014/09/10/getting-started-with-live-streaming-using-the-azure-management-portal/" target="_blank" title="チャネル取り込み URL を取得する方法については、「azure Media 管理ポータルはじめに とライブ ストリーミングを使用したライブ ストリーミングを使用した はじめに での Azure Media 管理ポータル"></a>&rdquo; の使用」を参照してください。</li>
   <li>[ストリーム &ldquo;名] に「stream%i&rdquo; 」と入力します。 この設定により、FMLE は一意のストリーム名を使用して各品質に名前を付け強制します。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast17.png"><img alt="wirecast17" border="0" height="100" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast17_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast17" width="244"></a> 初期構成は次の状態です。 <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast20.png"><img alt="wirecast20" border="0" height="484" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast20_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast20" width="644"></a></p>


  <h3><span style="font-weight: bold;">エンコードを開始し、データをチャネル取り込みにプッシュする</span></h3>


  <ul>
   <li>[接続] をクリックします。 これにより、エンコーダーがチャネル取り込み URL に接続されます。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast18.png"><img alt="wirecast18" border="0" height="100" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast18_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast18" width="244"></a></p>


  <ul>
   <li>[開始] をクリックしてエンコードを開始します。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/09/18/wirecast19.png"><img alt="wirecast19" border="0" height="35" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/wirecast19_thumb.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="wirecast19" width="244"></a> 注: コマンド ライン モードで FMLE を使用することもできます。 詳細については、コマンド ライン モード<a href="https://help.adobe.com/en_US/FlashMediaLiveEncoder/3.2/Using/WS5b3ccc516d4fbf351e63e3d11c104ba71a-7ffe.html#WS5b3ccc516d4fbf351e63e3d11c104babd5-7ffc" target="_blank">での&ldquo; Flash Media Live Encoder の起動に関するページを参照してください。&rdquo;</a> &nbsp;</p>


  <h3><span style="font-weight: bold;">ストリームをプレビューする</span></h3>


  <p>Azure 管理ポータルを使用してストリームをプレビューできます。 Azure Portal を使用してストリームを発行することもできます。 公開&ldquo;<a href="https://azure.microsoft.com/blog/2014/09/10/getting-started-with-live-streaming-using-the-azure-management-portal/" target="_blank" title="はじめにプレビューの方法については、「Azure Media 管理ポータルはじめに を使用したライブ ストリーミングでの Azure Media 管理ポータル&rdquo;"></a> を使用したライブ ストリーミングの使用」を参照してください。 別の方法として、複数のプレーヤー オプション <a href=""></a> とプレビューにを使用できます。 &nbsp;</p>


  <h2><span style="font-weight: bold;">FFmpeg とチャネルの取りAzure Media Services使用</span></h2>


  <p>FFmpeg は、さまざまなメディア形式をエンコードして作成する、よく知られているオープン ソース ソフトウェアです。 RTMP は、サポートされているプロトコルの 1 つです。 詳細を取得し、公式 Web サイトから FFmpeg のコピー <a href="https://ffmpeg.org/" target="_blank">をダウンロードできます</a>。 この投稿では、FFmpeg コマンドとその使用方法の詳細については説明しますが、ローカル ファイルをストリーム配信し、ライブ ストリームをシミュレートするサンプル コマンドを提供します。 FFmpeg を使用すると、ローカル カメラ、デスクトップ キャプチャ、その他のデバイスを含む複数のソース/デバイスからデータをキャプチャできます。 詳細については、公式 Web サイト <a href="https://ffmpeg.org/" target="_blank">を参照してください</a>。</p>


  <h3><span style="font-weight: bold;">コマンドの例</span></h3>


  <p><strong>&nbsp;</strong>投稿に FFmpeg Windowsビルドを使用します。 プラットフォームに一致する FFmpeg バージョンを使用できます。 <b>シングル ビットレート:</b></p>


  <pre class="prettyprint">

  C:\tools\ffmpeg\bin\ffmpeg.exe -v verbose -i MysampleVideo.mp4 -strict -2 -c:a aac -b:a 128k -ar 44100 -r 30 -g 60 -keyint_min 60 -b:v 400000 -c:v libx264 -preset medium -bufsize 400k -maxrate 400k -f flv rtmp://channel001-streamingtest.channel.media.windows.net:1935/live/a9bcd589da4b424099364f7ad5bd4940/mystream1</pre>


  <p><b>マルチ ビットレート ( 3 ビット レート 500、300、150 Kbps):</b></p>


  <pre class="prettyprint">

  C:\tools\ffmpeg\bin\ffmpeg.exe -threads 15 -re -i MysampleVideo.mp4 -strict experimental -acodec aac -ab 128k -ac 2 -ar 44100 -vcodec libx264 -s svga -b:v 500k -minrate 500k -maxrate 500k -bufsize 500k  -r 30 -g 60 -keyint_min 60 -sc_threshold 0 -f flv rtmp://channel001-streamingtest.channel.media.windows.net:1935/live/a9bcd589da4b424099364f7ad5bd4940/Streams_500 -strict experimental -acodec aac -ab 128k -ac 2 -ar 44100 -vcodec libx264 -s vga -b:v 300k -minrate 300k -maxrate 300k -bufsize 300k -r 30 -g 60 -keyint_min 60 -sc_threshold 0 -f flv rtmp://channel001-streamingtest.channel.media.windows.net:1935/live/a9bcd589da4b424099364f7ad5bd4940/Streams_300 -strict experimental -acodec aac -ab 128k -ac 2 -ar 44100 -vcodec libx264 -s qvga -b:v 150k -minrate 150k -maxrate 150k -bufsize 150k  -r 30 -g 60 -keyint_min 60 -sc_threshold 0 -f flv rtmp://channel001-streamingtest.channel.media.windows.net:1935/live/a9bcd589da4b424099364f7ad5bd4940/Streams_150</pre>


  <p>マルチビットレート コマンドは、2 秒のキー フレーム間隔を持つ 3 つの品質 (500、300、150 Kbps) のビデオを作成し、出力を Azure Media Services Channel の取り込みに送信します。 チャネル&ldquo;<a href="https://azure.microsoft.com/blog/2014/09/10/getting-started-with-live-streaming-using-the-azure-management-portal/" target="_blank" title="取りはじめに URL を取得する方法については、「Azure 管理ポータル&rdquo;</a> Media 管理ポータル">はじめに とライブ ストリーミングを使用したライブ ストリーミングを使用したライブ ストリーミングの使用」を参照してください。 &nbsp;</p>


  <h3><span style="font-weight: bold;">ストリームをプレビューする</span></h3>


  <p>Azure 管理ポータルを使用してストリームをプレビューできます。 Azure Portal を使用してストリームを発行することもできます。 チャネル&ldquo;<a href="https://azure.microsoft.com/blog/2014/09/10/getting-started-with-live-streaming-using-the-azure-management-portal/" target="_blank" title="とプログラムはじめに発行およびプレビューする方法については、「Azure Media 管理ポータル 管理ポータル"></a>&rdquo;はじめに とライブ ストリーミングを使用したライブ ストリーミングを使用したライブ ストリーミングの使用に関するページを参照してください。 別の方法として、複数のプレーヤー オプション <a href=""></a> とプレビューにを使用できます。 &nbsp;</p>


  <h2><span style="font-weight: bold;">高度な構成</span></h2>


  <p>既定ではAzure Media Servicesチャネルは、2 秒のキー フレーム間隔データまたは GOP (KeyFrameInterval) を取り込むするように構成されています。 また、ダイナミック パッケージでは、HLS 出力に 3 対 1 のマッピング構成が使用されます。構成されたデータを 2 秒のキー フレーム間隔で取り込む場合、HLS 出力セグメントは 6 秒 (3 * 2 秒) になります。この値を調整する必要がある 2 秒のキー フレーム間隔とは異なるデータを取り込む場合。 この値を調整してチャネルを作成するには、ポータルを使用してこれらの詳細設定を変更できないので、SDK を使用する必要があります。 SDK を使用して<a href="https://msdn.microsoft.com/en-us/library/azure/dn783465.aspx" target="_blank">&ldquo;チャネルを作成する方法の詳細については、「Media Services SDK for .NET&rdquo;</a> を使用したライブ ストリーミング アプリケーションの作成」を参照してください。このパラメーターを構成するには、以下を参照してください。</p>


  <ul>
   <li><a href="https://msdn.microsoft.com/en-us/library/azure/dn783458.aspx#ChannelInput" target="_blank">ChannelInput/KeyFrameInterval</a></li>
   <li><a href="https://msdn.microsoft.com/en-us/library/azure/dn783458.aspx#ChannelOutput" target="_blank">ChannelOutput/Hls/FragmentsPerSegment</a></li>
  </ul>


  <p>&nbsp;</p>


  <h2><span style="font-weight: bold;">概要と次の手順</span></h2>


  <p>この投稿では、RTMP ライブ エンコーダーを簡単に操作し、基本的なストリーミング用Azure Media Services構成する方法を示します。 ライブ ストリーミングや他の機能Azure Media Servicesを使用して、さらに多くの操作を実行できます。 ライブ ストリーミングと SDK <a href="https://msdn.microsoft.com/en-us/library/azure/dn783466.aspx" target="_blank">&ldquo;のサポートの詳細については、「Azure Media Services Live Streaming&rdquo;</a> の操作」と Azure Media <a href="https://azure.microsoft.com/en-us/services/media-services/" target="_blank">&ldquo;に関する一般的な情報については、Azure Media Services公式サイトを参照&rdquo;</a>してください。 RTMP 取り込みサポートを使用して新しいライブ ストリーミング サービスをお試しいただきありがとうございます。フィードバックがある場合は、お知らせください。 Happy Live Streaming!</p>
