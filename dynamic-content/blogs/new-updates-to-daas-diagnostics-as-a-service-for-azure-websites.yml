### YamlMime:Yaml
ms.openlocfilehash: a8597cc9ac1cb7ddade530caa8fc7e8f511f5674
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139910658"
Slug: new-updates-to-daas-diagnostics-as-a-service-for-azure-websites
Title: Azure Web サイトDaaS新しい更新プログラム - Azure Web サイトのサービスとしての診断
Summary: Microsoft Azure Web サイトのサービスとしての診断 (DaaS) サイト拡張機能が最初に開始されたので、この機能にはいくつかの新機能と機能強化が追加されています。
Content: "Microsoft Azure Web <a href=\"https://azure.microsoft.com/blog/2014/07/08/daas/\"></a> サイト用のサービスとしての診断 (DaaS) サイト拡張機能が最初に開始された後、この機能にはいくつかの新機能と機能強化が追加されています。\n\n次に示すのは、サイト拡張機能に対するDaaS更新プログラムです。\n\n&nbsp;\n<h3>1) PHP プロセス レポート</h3>\nPHP ベースのアプリケーションの場合、低速応答のトラブルシューティングや、特定の時間のプロセス スナップショットの理解は困難なタスクになる可能性があります。 以前の DaaS では、多くの有用な情報を提供するために PHP ダンプのキャプチャと分析がサポートされましたが、キャプチャされたダンプの格納と分析に時間とリソースが必要でした(特に、PHP コードを実行するプロセス) 数が多い場合はそうです。 これらのシナリオの効率を向上させるために、ライブ PHP プロセスにアタッチし、ダンプをキャプチャせずに PHP プロセス レポートを処理するためのこの新機能を開発しました。これには次が含まれています。\n<h4></h4>\n<h4><span style=\"text-decoration: underline\">サイト上のすべての PHP プロセスの一覧</span></h4>\n&nbsp;\n<h4><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image1.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image1\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image1_thumb.png\" alt=\"image1\" width=\"610\" height=\"413\" border=\"0\" /></a></h4>\n<h4><span style=\"text-decoration: underline\">各 Php-cgi プロセスの詳細情報には、次が含まれます。</span></h4>\n&nbsp;\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image2.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"Image2\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image2_thumb.png\" alt=\"image2\" width=\"610\" height=\"297\" border=\"0\" /></a>\n\n&nbsp;\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image3.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image3\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image3_thumb.png\" alt=\"image3\" width=\"610\" height=\"437\" border=\"0\" /></a>\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/DaaSimage5.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin: 0px auto;padding-right: 0px;border-width: 0px\" title=\"DaaSimage5\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/DaaSimage5_thumb.png\" alt=\"DaaSimage5\" width=\"610\" height=\"274\" border=\"0\" /></a>\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image6.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image6\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image6_thumb.png\" alt=\"image6\" width=\"610\" height=\"150\" border=\"0\" /></a>\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image7.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image7\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image7_thumb.png\" alt=\"image7\" width=\"610\" height=\"171\" border=\"0\" /></a>\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image8.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image8\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image8_thumb.png\" alt=\"image8\" width=\"599\" height=\"610\" border=\"0\" /></a>\n\n&nbsp;\n<h3>2) PHP エラー ログ アナライザー</h3>\nサイト所有者は、サイト拡張機能から PHP エラー ログ (php-errors.log) を直接収集DaaSできます。 PHP アプリケーションが例外をスローすると、Php-errors.log が既定で生成されます。 これは、サイトの logfiles ディレクトリ内に存在します。 PHP エラー ログ処理レポートは、次の機能を使用して作成されます。\n<h4>一意の PHP イベント (エラー、警告、解析エラーなど) が解析され、イベントの重複が削除された時間順に表示されます。</h4>\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image9.png\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image9\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image9_thumb.png\" alt=\"image9\" width=\"610\" height=\"142\" border=\"0\" /></a>\n\n提供されるレポートは次のとおりです。\n<ul>\n <li>過去 24 時間の PHP の致命的なエラー</li>\n <li>過去 7 日間の PHP の致命的なエラー</li>\n <li>過去 24 時間の PHP 解析エラー</li>\n <li>過去 7 日間の PHP 解析エラー</li>\n <li>すべての致命的なエラー</li>\n <li>エラーが最も多い上位 10 の PHP ページ</li>\n</ul>\n&nbsp;\n<h3>3)サイト機能DaaS強化</h3>\n<ul>\n <li>すべての PHP バージョンの PHP シンボルは、Web サイト環境にプリロードされます。 PHP ライブ プロセスとダンプ分析は、サイト所有者が作業を行わずに適切なシンボルを読み込んで実行できます。</li>\n <li>カスタム シンボルのサポート - サイト所有者は、カスタム モジュールのシンボルをアップロードして、カスタム モジュールによって実行されるダンプ分析DaaS。 シンボルは、FTP または選択したデプロイを使用して D:\\home\\Symbols にアップロードできます。 これにより、カスタム モジュール内でも、常にコード行に詳細な分析が表示されます。</li>\n <li>Web サイトの設定が自動的にチェックされ、選択できるコレクターとアナライザーが決定されます。 データ収集のログ記録を有効にする方法について説明します。</li>\n</ul>\n<blockquote><a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image10.jpg\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image10\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image10_thumb.jpg\" alt=\"image10\" width=\"610\" height=\"408\" border=\"0\" /></a>\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/26/image11.jpg\"><img style=\"float: none;padding-top: 0px;padding-left: 0px;margin-left: auto;padding-right: 0px;margin-right: auto;border-width: 0px\" title=\"image11\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image11_thumb.jpg\" alt=\"image11\" width=\"610\" height=\"244\" border=\"0\" /></a></blockquote>\n<a name=\"daassyntax\"></a>\n<ul>\n <li>診断DaaS自動化を可能にするためのコマンド ライン/Web API サポート (DaaSConsole.exe) を使用して、これらの機能を公開します。 サイトの所有者は、DaaSを使用して、セッションを作成、表示、および取り消します。 Imagine AutoHeal 機能によって検出された条件に基づいて、DaaSセッションを開始する<a href=\"https://azure.microsoft.com/blog/2014/02/06/auto-healing-windows-azure-web-sites/\" target=\"_blank\">シナリオを示します</a>。 コマンド ラインは、D:\\home\\data\\DaaS\\bin ディレクトリを参照して Kudu CMD コンソールから実行できます。</li>\n</ul>\n<blockquote>\n<pre class=\"prettyprint\">[Syntax]\n\nD:\\home\\data\\DaaS\\bin&gt;daasconsole.exe \n\nUsage: DaasConsole.exe -&lt;parameter1&gt; [param1 args] [-parameter2 ...]</pre>\n<pre class=\"prettyprint\">Parameters:\n\n-Troubleshoot &lt;Diagnoser1&gt; [&lt;Diagnoser2&gt; ...] [TimeSpanToRunForInSeconds]\n\nCreate a new Collect and Analyze session with the requested diagnosers. Default TimeSpanToRunForInSeconds is 30\n\n-CollectLogs &lt;Diagnoser1&gt; [&lt;Diagnoser2&gt; ...] [TimeSpanToRunForInSeconds]\n\nCreate a new Collect Only session with the requested diagnosers. Default TimeSpanToRunForInSeconds is 30\n\n-CollectKillAnalyze &lt;Diagnoser1&gt; [&lt;Diagnoser2&gt; ...] [TimeSpanToRunForInSeconds]\n\nCreate a new Collect Only session with the requested diagnosers, kill the main site's w3wp process to restart w3wp, then analyze the collected logs. Default TimeSpanToRunForInSeconds is 30\n\n-ListDiagnosers\n\nList all available diagnosers\n\n-ListSessions\n\nList all sessions\n\n-GetSasUri\n\nGet the blob storage Sas Uri\n\n-SetSasUri &lt;SasUri&gt;\n\nSet the blob storage Sas Uri\n\n-Setup\n\nStart the continuous webjob runner (if it's already started this does nothing)\n\n-GetSetting &lt;SettingName&gt;\n\nThe the value of the given setting\n\n-SetSetting &lt;SettingName&gt; &lt;SettingValue&gt;\n\nSave new value for the given setting\n\n-ListInstances\n\nList all live instances\n\n-AnalyzeSession &lt;SessionId&gt;\n\nBegin analysis for session with the specified ID\n\n-CancelSession &lt;SessionId&gt;\n\nCancel session with the specified ID</pre>\n<pre class=\"prettyprint\">[Examples] \n\nTo list all diagnosers run:\n\nDaasConsole.exe -ListDiagnosers\n\nTo collect and analyze memory dumps of w3wp.exe with 60 seconds interval, just run\n\nDaasConsole.exe -Troubleshoot \"Memory Dump\" 60\n\nTo collect memory dumps, kill w3wp, and then analyze the logs run\n\nDaasConsole.exe -CollectKillAnalyze \"Memory Dump\" 60\n\nTo specify a custom folder to get the diagnostic tools from, set the DiagnosticToolsPath setting to the desired location</pre>\n</blockquote>\n<ul>\n <li>ダンプのキャプチャと分析から SCM プロセスをスキップします。 Web サイトワーカー プロセスのダンプだけがキャプチャされます。</li>\n <li>ダンプの生成を 1 ラウンドに制限します。</li>\n</ul>"
