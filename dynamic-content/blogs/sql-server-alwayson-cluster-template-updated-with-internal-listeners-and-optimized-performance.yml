### YamlMime:Yaml
ms.openlocfilehash: e23fee809f84974449f8df8d476afaf7bb9adcaf
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892200"
Slug: sql-server-alwayson-cluster-template-updated-with-internal-listeners-and-optimized-performance
Title: 内部リスナーおよび最適化されたパフォーマンスで AlwaysOn クラスターテンプレートが更新される SQL Server
Summary: セキュリティ、可用性、およびパフォーマンスを向上させるために、Azure Portal で SQL Server AlwaysOn クラスターテンプレートの機能強化を行っています。
Content: >-
  <p>セキュリティ、可用性、パフォーマンスを向上させるために、Azure portal の SQL Server AlwaysOn クラスターテンプレートに対して、いくつかの画期的な機能強化を行っています。</p>


  <p>高可用性の構成を保証するために、AlwaysOn クラスターテンプレートは次のリソースを自動的にデプロイします。</p>


  <ul>
   <li>AlwaysOn クラスター内の2つの SQL Server Virtual Machines と1つの監視仮想マシン</li>
   <li>新しい Windows ドメインを作成する2つのドメインコントローラー</li>
   <li>内部 Load Balancer を使用する1つの AlwaysOn リスナー</li>
   <li>セキュリティのためにすべてのリソースを格納する Virtual Network</li>
  </ul>


  <p>さらに、次の機能を使用して、クラスターをカスタマイズしてパフォーマンスと可用性を最適化することができます。</p>


  <ul>
   <li>カスタマイズ可能な Storage 構成</li>
   <li>構成可能な修正プログラムのスケジュール</li>
   <li>SQL Server バージョンを選択するオプション</li>
  </ul>


  <p>これにより、テンプレートを使用して、可用性、パフォーマンス、およびセキュリティの要件を満たす運用環境に対応したクラスターをデプロイできます。</p>


  <p><img alt="SQL Server AlwaysOn Cluster Template in Azure now with internal listeners and optimized performance" border="0" height="601" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c34d8c7b-43ce-4319-b61c-0425ba0ea4c7.png" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" title="内部リスナーと最適化されたパフォーマンスを使用した Azure での AlwaysOn クラスターテンプレートの SQL Server" width="610"></p>


  <h5>&nbsp;</h5>


  <h2>内部 Load Balancer のサポート</h2>


  <p>このデプロイのセキュリティを強化するために、テンプレートではリスナーエンドポイントの内部 Load Balancer を利用できるようになりました。 これは、Virtual Network 内からプライマリレプリカにのみ接続できることを意味します。</p>


  <h2>ワークロードの Storage と SQL Server の構成</h2>


  <p>以前は、SQL Server VM をプロビジョニングした後、適切な数のデータディスクを手動で接続して構成し、必要な数の IOPs またはスループット (MB/秒) を提供する必要がありました。 次に、ディスク全体で SQL ファイルをストライピングするか Storage プールを作成して、それらの間で IOPs またはスループットを分割する必要があります。 最後に、 <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-sql-server-performance-best-practices/">Azure VM のパフォーマンスのベストプラクティス</a>に従って、 &rsquo; SQL Server を構成する必要があります。</p>


  <p>ここでは、1 SQL つの vm と SQL の AlwaysOn クラスターテンプレートによって作成された vm の両方について、プロビジョニングエクスペリエンスの一部を作成しました。 このテンプレートでは、1 ~ 4 Tb の間で、必要なストレージの量を指定できます (これは将来増加します)。 入力に基づいて、必要な数のデータディスクを接続して構成します。 複数のデータディスクが必要な場合は、指定したワークロードの種類 (オンライントランザクション処理またはデータウェアハウジング) に従って、パフォーマンスのベストプラクティスに基づいて、すべてのディスクに対して1つの Storage プールを作成します。</p>


  <h2>SQL Server バージョンを選択するオプション</h2>


  <p>SQL Server レプリカ vm に使用する SQL Server のバージョンを選択できるようになりました。 SQL Server 2012 と 2014 (すべて Enterprise エディション) を使用するかどうかにかかわらず、必要なバージョンを選択するだけです。 また、SQL Server 2016 CTP3 もサポートされるようになります。</p>


  <h2>自動修正</h2>


  <p>クラスターとドメインの可用性を向上させるために、このテンプレートでは <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-sql-server-automated-patching/">修正プログラムの自動適用</a> 機能を利用できるようになりました。 この機能では、VM の修正プログラムを適用するウィンドウを構成して、指定した時間枠内に修正プログラムと後続の再起動のみが行われるようにします。 このクラスターが展開されると、各仮想マシンには別の修正プログラムが適用されます。そのため、AlwaysOn の展開の一部である2つの Vm が修正プログラムの更新によって同時に停止することはありません。</p>


  <p>&nbsp;</p>


  <p>Azure Resource Manager をサポートするように AlwaysOn テンプレートを更新しました。 つまり、間もなく ARM テンプレートが<a href="https://github.com/Azure/azure-quickstart-templates">GitHub</a>に追加され、PowerShell を使用してカスタマイズおよびデプロイできるようになります。</p>


  <p>詳細については、こちらの <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-sql-server-alwayson-availability-groups-gui-arm/">ドキュメント</a>を参照してください。 これらのユーザーは、現在 <a href="https://portal.azure.com/">Azure portal</a> で試してみることができます。 まだ Azure サブスクリプションをお持ちでない場合は、 <a href="https://azure.microsoft.com/en-us/pricing/free-trial/">1 か月間無料</a>でご利用いただけます。</p>
