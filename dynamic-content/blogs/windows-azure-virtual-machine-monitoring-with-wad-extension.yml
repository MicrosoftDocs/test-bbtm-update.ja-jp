### YamlMime:Yaml
ms.openlocfilehash: 470bca37c09b2d46369ca996ebe7171c1da04dbb
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895713"
Slug: windows-azure-virtual-machine-monitoring-with-wad-extension
Title: Azure Diagnostics 拡張機能による Microsoft Azure Virtual Machines の監視
Summary: Azure プレビューポータルの起動と Azure 拡張機能モデルのサポートにより、Azure IaaS Vm の監視をより簡単に行うことができる新しい診断機能が用意されています。
Content: >-
  <p>Azure <a href="https://portal.azure.com/">プレビューポータル</a> の起動と azure 拡張機能モデルのサポートにより、Azure IaaS vm の監視をより簡単に行うことができる新しい診断機能が用意されています。 Azure <a href="https://azure.microsoft.com/en-us/overview/what-is-iaas">IaaS</a> の監視には、メトリックの収集と追跡、ログファイルの分析、特定のアプリケーションまたは Virtual Machines で実行されるワークロードによって生成されるカスタムメトリックとログの定義が含まれます。</p>


  <p>監視には、特定の条件が満たされたときにアラームをトリガーしたり、トラブルシューティングや根本原因分析に役立つ診断データを提供したりすることも含まれます。 監視を使用すると、実行中のデプロイ、リソース使用率、アプリケーションのパフォーマンス、操作の状態、アプリケーションの診断を可視化できます。 これらの洞察を使用して迅速に反応し、アプリケーションの円滑な実行を維持することができます。 以下で説明する手順のほとんどは、ポータルから直接実行できます。</p>


  <p>後で、SDK API または PowerShell を使用して監視を設定および構成する方法についての手順を追加します。</p>


  <p><strong><em><span style="text-decoration: underline;">注 1:</span></em> </strong><em>この &nbsp; 記事では Windows vm のみについて説明します。Linux Azure Vm の場合は、linux の<a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-linux-diagnostic-extension/">診断拡張機能を使用して LINUX vm&#39;s の</a> &nbsp; パフォーマンスと診断データを監視します。</em></p>


  <p><em><strong><span style="text-decoration: underline;">注 2:</span></strong> 説明されている機能は、現在プレビューの段階にある新しい Azure portal でのみサポートされています。&rsquo;既定のポータルにログインした場合は、次に示すように、[サブスクリプション] メニューに移動して新しいポータルに切り替えることができます。</em> &nbsp; <img alt="2014-08-27_17h22_38" border="0" height="358" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2014-08-27_17h22_38.png" style="float: none; padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;" title="2014-08-27_17h22_38" width="295"> &nbsp;</p>


  <h3>1. vm <strong><span style="text-decoration: underline;">の作成時に vm エージェントをインストールする</span></strong></h3>


  <p>VM で監視を &nbsp; 設定する最初の手順では、Vm エージェントが vm 内にインストールされていることを、作成時 (既定の構成) にするか、既存の vm を更新して Vm エージェントが実行されていることを確認します。 ポータルから既定のポータルを使用して VM を作成した場合は、次に示すように [VM エージェント &rdquo; をインストールする] を選択し &ldquo; ます。それ以外の場合は、手順2に進みます。&nbsp; <img alt="2014-08-27_18h59_46" border="0" height="476" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2014-08-27_18h59_46.png" style="float: none; padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;" title="2014-08-27_18h59_46" width="690"> 完了すると、vm には VM Azure 拡張機能が自動的にインストールされ、実行されます。この拡張機能は、新しい診断エージェントを含むその他の拡張機能の管理を担当します。 Azure 診断サポート &nbsp; されているすべての診断 kpi と、ニーズに合わせて構成する方法の詳細については、MSDN ドキュメントの &nbsp; 「 <a href="https://azure.microsoft.com/en-us/documentation/articles/cloud-services-dotnet-diagnostics/">Azure Cloud Services での診断の有効化」および「Virtual Machines」</a>を参照してください。 &nbsp; Azure VM エージェントと Azure 拡張機能 &rsquo; の使用に関するその他の詳細については、「拡張機能の管理」を参照してください。 &nbsp;</p>


  <h3>2. <span style="text-decoration: underline;"><strong>監視を有効に</strong>します。</span></h3>


  <p>診断は VM レベルで有効にすることができます。 診断を有効にするには、次 &nbsp; の手順に従います。</p>


  <ol>
   <li>VM の選択</li>
   <li>[監視] セクションをクリックします。</li>
   <li>Click Settings</li>
   <li>状態をオンに変更</li>
   <li>[OK] をクリックします。</li>
  </ol>


  <p>&nbsp; <img alt="2014-08-27_17h34_21" border="0" height="546" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2014-08-27_17h34_21.png" style="float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; padding-right: 0px; margin-right: auto; border-width: 0px;" title="2014-08-27_17h34_21" width="695"></p>


  <h3>3. <strong><span style="text-decoration: underline;">メトリックを構成</span>します。</strong></h3>


  <p>診断を有効にしたら、次に示すように、すべてのサブセットまたは使用可能なすべての Kpi を選択するように構成できます。 追跡する Kpi を選択するには、次の手順を実行します。</p>


  <ol>
   <li>VM の選択</li>
   <li>[監視] セクションをクリックします。</li>
   <li>Click Settings</li>
   <li>診断フレームが開きます</li>
   <li>必要な診断メトリックの選択</li>
   <li>[OK] をクリックします。</li>
  </ol>


  <p>&nbsp; <img alt="2014-08-26_22h59_40" border="0" height="568" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2014-08-26_22h59_40.png" style="float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; padding-right: 0px; margin-right: auto; border-width: 0px;" title="2014-08-26_22h59_40" width="693"> &nbsp;</p>


  <h3>4. <strong><span style="text-decoration: underline;">診断データへのアクセス:</span></strong></h3>


  <p>これで、追跡する Kpi のセットが収集されました。この監視データにアクセスするにはどうすればよいでしょうか。 ポータルには、VM から収集されたメトリックの豊富なグラフが用意されています。 また、任意のカスタムの時間範囲を選択し、複数のメトリックを並べて比較することもできます。 グラフを表示するには、次の手順に従います。</p>


  <ol>
   <li>VM の選択</li>
   <li>[監視] セクションで、グラフを右クリックします。</li>
   <li>[グラフの編集] の選択</li>
   <li>表示する時間の範囲と Kpi の一覧を選択します</li>
   <li>次のサンプルを参照してください</li>
  </ol>


  <p>&nbsp; <img alt="2014-08-27_18h33_57" border="0" height="610" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2014-08-27_18h33_57.png" style="float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; padding-right: 0px; margin-right: auto; border-width: 0px;" title="2014-08-27_18h33_57" width="471"> 収集した診断データはすべて、手順 3. で構成したユーザーの &nbsp; ストレージアカウントに保存されているため、お好きなツールを使用してアクセスできます。 たとえば、Visual Studio を使用して監視ストレージアカウントに接続し、データを表示して、そのデータをお気に入りの BI アプリケーションや Excel にエクスポートし、そのデータから追加の分析を構築できます。 Visual Studio からデータにアクセスする手順を次に示します。</p>


  <ol>
   <li>サーバーエクスプローラーにアクセス</li>
   <li>Windows Azure グループにアクセス</li>
   <li>Storage グループにアクセス</li>
   <li>監視データが保存されるように構成されているストレージアカウントを検索する</li>
   <li>テーブルへのジャンプ: 監視データは Azure テーブルに格納されます。</li>
   <li>関連付けられている監視テーブルをダブルクリックします</li>
  </ol>


  <p>&nbsp; <img alt="2014-08-28_11h52_41" border="0" height="534" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2014-08-28_11h52_41.png" style="float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; padding-right: 0px; margin-right: auto; border-width: 0px;" title="2014-08-28_11h52_41" width="503"> &nbsp;この記事では、azure 監視インフラストラクチャを利用して、azure で実行されている Windows vm の診断を有効にする方法と、他の azure サービスを監視するのと同じ方法で、azure &rsquo; s の新しいポータルから、いくつかのメトリック追跡をすぐに使用できるようにする方法について説明しました。 将来的には、SCOM &ndash; System Center Operations Manager などの既存のツールを使用して、デプロイされた Azure IaaS vm や、その他のサポートされている監視シナリオを監視する方法について、 &nbsp; さらに詳しく説明します。 次の機会まで！</p>
