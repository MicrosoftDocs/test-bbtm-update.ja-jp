### YamlMime:Yaml
ms.openlocfilehash: 0e9e82816ecc6d49e6471ae6e1332225cfa396e0
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139889170"
Slug: introducing-iot-hub-device-streams-in-public-preview
Title: パブリックプレビューでの IoT Hub デバイスストリームの概要
Summary: 今日のセキュリティ優先のデジタル時代では、IoT デバイスへの安全な接続を確保することが最も重要です。 IoT 空間でのさまざまな操作およびメンテナンスのシナリオでは、エンドツーエンドのデバイス接続を利用して、ユーザーとサービスがデバイスとの対話、ログイン、トラブルシューティング、送受信を行うことができるようにします。
Content: >-
  <p>現在&#39;s のセキュリティ-最初のデジタル時代では、IoT デバイスへの安全な接続を確保することが最も重要です。 IoT 空間でのさまざまな操作およびメンテナンスのシナリオでは、エンドツーエンドのデバイス接続を利用して、ユーザーとサービスがデバイスとの対話、ログイン、トラブルシューティング、送受信を行うことができるようにします。 そのため、組織&#39;のポリシーのセキュリティとコンプライアンスは、これらすべてのシナリオにおいて不可欠な要素です。</p>


  <p>Azure IoT hub デバイスストリームは、IoT デバイスへのセキュリティで保護されたエンドツーエンド接続の基盤を提供することで、これらのニーズに対応する新しい PaaS サービスです。 顧客、パートナー、アプリケーション開発者、およびサードパーティのプラットフォームプロバイダーは、デバイスストリームを利用して、ファイアウォールの背後にある、またはプライベートネットワーク内にデプロイされている IoT デバイスと安全に通信できます。 さらに、TCP/IP スタックとの組み込みの互換性により、カスタム専用プロトコルとリモートシェル、web、ファイル転送、ビデオストリーミングなどの標準ベースのプロトコルの両方を含む幅広いアプリケーションにデバイスストリームが適用されます。</p>


  <p>主に、IoT Hub デバイスストリームは、2つの TCP/IP 対応エンドポイント間の接続を提供するデータ転送トンネルです。トンネルの一方の側は IoT デバイスで、もう一方はデバイスと通信する顧客エンドポイントです (後者はサービスエンドポイントと呼ばれます)。 組織&#39;s のセキュリティポリシーとネットワークに対する接続制限に基づいて、デバイスへの直接接続が禁止されている多くのセットアップを確認しました。 これらの制限は、IoT デバイスへの接続を必要とするさまざまな正当なシナリオに頻繁に影響します。</p>


  <p>これらのシナリオの例を次に示します。</p>


  <ul>
   <li>オペレーターは、検査またはメンテナンスのためにデバイスにログインすることを希望しています。 このシナリオでは、通常、Linux の場合は Secure Shell (SSH) を使用し、Windows にはリモートデスクトッププロトコル (RDP) を使用してデバイスにログを記録します。 多くの場合、デバイスまたはネットワークファイアウォールの構成によって、オペレーター&#39;s ワークステーションがデバイスに到達するのをブロックします。</li>
   <li>オペレーターは、トラブルシューティングのためにデバイス&#39;s 診断ポータルにリモートアクセスする必要があります。 診断ポータルは、通常、デバイスでホストされている web サーバーの形式です。 デバイス&#39;のプライベート IP またはそのファイアウォール構成は、ユーザーがデバイス&#39;s web サーバーと対話できないようにする場合もあります。</li>
   <li>アプリケーション開発者は、デバイス&#39;s ファイルシステムから、ログとその他のランタイム診断情報をリモートで取得する必要があります。 この目的で一般的に使用されるプロトコルには、ファイル転送プロトコル (FTP) やセキュリティで保護されたコピー (SCP) などがあります。 この場合も、ファイアウォールの構成によって、これらの種類のトラフィックが制限されます。</li>
  </ul>


  <p>IoT Hub デバイスストリームは、デバイスとサービスの間で交換されるアプリケーショントラフィックのプロキシとして機能する IoT Hub クラウドエンドポイントを利用することで、上記のシナリオのエンドツーエンドの接続ニーズに対処します。 このセットアップは次の図のようになり、次のように機能します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2d7367f8-b7f8-49f7-82b7-93fa12495f2b.png"><img alt="iot-hub-device-streams-overview" border="0" height="331" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d6bd09e4-549b-4d2e-a3e7-a9b876c3b0f8.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="iot hub-デバイス-ストリーム-概要" width="340"></a></p>


  <ul>
   <li>デバイスとサービスのエンドポイントはそれぞれ、それぞれの間で送信されるトラフィックのプロキシとして機能する IoT Hub エンドポイントに対して、個別の送信接続を作成します。</li>
   <li>IoT Hub エンドポイントは、デバイスからサービスに送信されたトラフィックパケットとその逆方向のトラフィックをリレーします。 これにより、デバイスとサービスアプリケーションが通信できるエンドツーエンドの双方向トンネルが確立されます。</li>
   <li>確立されたトンネルは、信頼性が高く、順序付けられたパケット配信保証を IoT Hub します。 さらに、仲介者として IoT Hub 経由のトラフィックの転送は、アプリケーションからマスクされるので、TCP と同等の直接双方向通信のシームレスなエクスペリエンスが提供されます。</li>
  </ul>


  <h2>メリット</h2>


  <p>IoT Hub デバイス ストリームには次の利点があります。</p>


  <ul>
   <li><strong>ファイアウォールを使いやすくセキュリティで保護された接続:</strong> IoT デバイスは、デバイスまたはネットワークの境界で受信ファイアウォールポートを開くことなく、サービスエンドポイントから到達できます。 必要なのは、ポート443経由で IoT Hub クラウドエンドポイントへの送信接続を作成できることだけです (IoT Hub SDK を使用するデバイスはこのような接続を既に保持しています)。</li>
   <li><strong>認証の実施: </strong>ストリームを確立するには、デバイスとサービスの両方のエンドポイントが、対応する資格情報を使用して IoT Hub で認証する必要があります。 これにより、通信が行われる前にトンネルの各側の id が検証されるようにすることで、デバイス通信レイヤーのセキュリティが強化されます。</li>
   <li><strong>暗号化:</strong> 既定では、IoT Hub デバイス ストリームで TLS 対応の接続が使用されます。 これにより、アプリケーションが暗号化を使用するかどうかに関係なく、アプリケーションのトラフィックが確実に暗号化されます。</li>
   <li><strong>接続の単純化: </strong>デバイスストリームを使用すると、仮想プライベートネットワーク (VPN) の複雑な設定によって IoT デバイスへの接続が可能になります。 さらに、ネットワーク全体に広範なアクセスを提供する VPN とは異なり、デバイスストリームは、1つのデバイスとトンネルの両側に1つのサービスを伴うポイントツーポイントです。</li>
   <li><strong>Tcp/ip スタックとの互換性: </strong>IoT Hub デバイスストリームは、TCP/IP アプリケーショントラフィックに対応できます。 つまり、広範な専用プロトコルおよび標準ベースのプロトコルで、この機能を利用できます。 これには、リモートデスクトッププロトコル (RDP)、Secure Shell (SSH)、ファイル転送プロトコル (FTP)、HTTP/REST などの適切に確立されたプロトコルが含まれます。</li>
   <li><strong>プライベートネットワークのセットアップでの使いやすさ:</strong> プライベートネットワーク内に展開されているデバイスには、パブリックにルーティング可能な IP アドレスを各デバイスに割り当てなくてもかまいません。 また、動的 IP 割り当てを使用するデバイスには、サービスによって常に既知ではないものもあります。 どちらの場合も、デバイスストリームによって、id として (IP アドレスではなく) デバイス ID を使用してターゲットデバイスに接続できるようになります。</li>
  </ul>


  <p>前述のように、デバイスがファイアウォールの内側に配置されている場合や、プライベートネットワーク内にある (パブリックに到達可能な IP アドレスがない) 場合は、IoT Hub デバイスストリームが特に役立ちます。 次に、デバイスへの直接接続が制限されているケーススタディとして、このようなセットアップをいくつか確認します。</p>


  <h2>ケーススタディ: 製造セットアップでのリモートデバイスアクセス</h2>


  <p>実際の IoT シナリオでのデバイスストリームの適用性をさらに説明するには、工場&#39;s ローカルエリアネットワークに接続されている工場設置型の機器と機械 (IoT デバイス) を含むセットアップを検討してください。 通常、LAN はネットワークゲートウェイまたは HTTP プロキシ経由でインターネットに接続され、ネットワーク境界のファイアウォールによって保護されます。 このセットアップでは、ファイアウォールが組織のセキュリティポリシーに基づいて構成されているため、特定のファイアウォールポートを開くことができない可能性があります。 たとえば、リモートデスクトッププロトコルによって使用されるポート3389がブロックされることがよくあります。 このため、ネットワークの外部にあるユーザーは、このポートを使用してデバイスにアクセスすることはできません。</p>


  <p>このようなネットワークセットアップは広範に使用されていますが、多くの一般的な IoT シナリオには課題があります。 たとえば、オペレーターが LAN の外部から機器にアクセスする必要がある場合、ファイアウォールは、アプリケーションで使用される任意のポートでの着信接続を許可する必要があります。 RDP プロトコルを使用する Windows マシンの場合、ポート3389をブロックするセキュリティポリシーには問題があります。</p>


  <p>デバイスストリームを使用して、ターゲットデバイスへの RDP トラフィックは IoT Hub を通じてトンネリングされます。 具体的には、このトンネルは、デバイスとサービスから送信される送信接続を使用して、ポート443を介して確立されます。 その結果、工場出荷時ネットワークでファイアウォールポリシーを緩和する必要がなくなります。 <strong>C、C#、および NodeJS</strong>言語で利用可能なクイックスタートガイドでは、IoT Hub デバイスストリームを活用して RDP シナリオを有効にする方法について説明しました。 その他のプロトコルでは、対応する通信ポートを構成するだけで同様のアプローチを使用できます。</p>


  <h2>次の手順</h2>


  <p>IoT Hub デバイスストリームを使用して、IoT デバイスと安全に通信するために有効にできる可能性についてご紹介します。 パブリックプレビュー期間中は、 <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-device-streams-overview#regional-availability">選択したリージョンで作成された IoT hub で</a>この機能を使用できるようになります。 詳細については、次のリンクを参照してください。</p>


  <ul>
   <li><a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-device-streams-overview" target="_blank">デバイスストリームのドキュメントページ</a></li>
   <li><a href="https://channel9.msdn.com/Shows/Internet-of-Things-Show/Azure-IoT-Hub-Device-Streams" target="_blank">チャネル9での IoT Show 記録</a></li>
  </ul>


  <p style="text-align: center;"><iframe allowfullscreen="" frameborder="0" height="315" scrolling="no" src="https://channel9.msdn.com/Shows/Internet-of-Things-Show/Azure-IoT-Hub-Device-Streams/player?format=ny" width="560"></iframe></p>
