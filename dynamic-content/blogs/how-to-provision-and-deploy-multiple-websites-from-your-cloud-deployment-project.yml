### YamlMime:Yaml
ms.openlocfilehash: 7332c04dada78b337862d3dcfdf93c44e7a80a7e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904151"
Slug: how-to-provision-and-deploy-multiple-websites-from-your-cloud-deployment-project
Title: クラウドデプロイから複数の Web サイトをプロビジョニングしてデプロイする方法 Project
Summary: クラウドデプロイプロジェクトを使用してリソースを動的に生成し、それらのリソースにアプリケーションをデプロイする方法について説明します。
Content: "クラウドデプロイプロジェクトは非常に便利です。これにより、web アプリケーションの開発に専念し、Azure にプロビジョニングしてデプロイする方法ではなく、web サイトを迅速に稼働させることができます。 通常、ユーザーは複数の web サイトを同時に作業しているので、今日に焦点を当てています。\n<h2>新しいクラウドデプロイプロジェクトの作成</h2>\nこのデモでは、最初の手順として、Web サイトを含む新しいクラウドデプロイプロジェクトを作成します。 これをまだ行っていない場合は、 <a href=\"https://azure.microsoft.com/blog/?p=220231\" target=\"_blank\">Visual Studio の Azure Resource Manager 2.5</a>をご覧ください。\n\nここでは、最初のクラウドデプロイプロジェクトを作成するための簡単なガイドを紹介します。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"NewProject\" alt=\"NewProject\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/NewProject.png\" width=\"610\" height=\"372\" border=\"0\" />\n\nデプロイの種類を選択します。 この例では、[Web サイト] を選択しました。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"SelectWebsite\" alt=\"SelectWebsite\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/SelectWebsite.png\" width=\"480\" height=\"360\" border=\"0\" />\n\n次に、ASP .NET プロジェクトの種類を選択します。 [MVC] オプションを選択しました。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"ASPNetSelect1\" alt=\"ASPNetSelect1\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ASPNetSelect1.png\" width=\"360\" height=\"269\" border=\"0\" />\n\nこれで、最初のクラウドデプロイプロジェクトが作成されました。ここで、2つ目の ASP .NET Web アプリケーションをソリューションに追加します。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"NewWebProject\" alt=\"NewWebProject\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/NewWebProject.png\" width=\"480\" height=\"293\" border=\"0\" />\n\nここでも、MVC プロジェクトを選択し、[クラウドでホストする] オプションがオンになっていないことを確認します。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"ASPNetSelect\" alt=\"ASPNetSelect\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ASPNetSelect.png\" width=\"480\" height=\"358\" border=\"0\" />\n\n追加した後は、配置プロジェクトに接続するために何が必要かを確認します。\n<h2>2つ目の web アプリケーションを配置プロジェクトに接続しています</h2>\n最初の手順では、新しい参照を配置プロジェクトに追加し、新しく追加された web アプリケーションを確認します。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"AddReference\" alt=\"AddReference\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AddReference.png\" width=\"480\" height=\"330\" border=\"0\" />\n\nこれにより、配置プロジェクトは、別の web アプリケーションが存在することを認識し、web 配置パッケージ、場所、および配置時の web アプリケーションの操作に関する情報を生成することができます。 現在、ビルドとパッケージの2つのオプションのみがあります。パッケージの場所情報は、JSON で後から再利用することができますが、最終的にはそれについて説明します。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"ReferenceProperties\" alt=\"ReferenceProperties\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ReferenceProperties.png\" width=\"610\" height=\"342\" border=\"0\" />\n\n次に、JSON 情報の編集に移動します。そのため、WebSiteDeploy ファイルを開きます。\n\nここでは、\"パラメーター\" と \"リソース\" という2つのセクションについて説明します。 \"WebSitePackage\" および \"webSiteName\" の新しいバージョンを追加 (切り取り/貼り付け、変更) するには、\"websitePackage2\" や \"webSitename2\" のように、元の名前にする必要があります。エディターの元のセクションを強調表示し、次の更新された JSON を追加しました。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"JSONProperties\" alt=\"JSONProperties\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/JSONProperties.png\" width=\"610\" height=\"325\" border=\"0\" />\n\n&nbsp;\n\nJSON の例を次に示します。 この2つの重要な点は、パッケージの defaultValue 名が変更され、パラメーター名の両方が \"2\" のバージョンに設定されていることです。\n<pre class=\"prettyprint\">  \"webSitePackage2\": {\n\n    \"type\": \"string\",\n\n    \"metadata\": {\n\n      \"visualStudio.deployment\": { \"parameterUsedAs\": { \"value\": \"projectOutput\" } }\n\n    },\n\n    \"defaultValue\": \"MyAzureCloudApp2/package.zip\"\n\n  },\n\n  \"webSiteName2\": {\n\n    \"type\": \"string\"\n\n  },</pre>\nResources セクションでは、\"Microsoft. Web/sites\" リソースフラグメントの追加 (切り取り/貼り付けと変更) を行う必要があります。 必ずパラメーターを webSitename2 および webSitePackage2 に変更してください。 サイトリソースに入れ子になっている web deploy 拡張機能フラグメントは、格納場所から web デプロイパッケージを取得し、それを Azure リソースに読み込みます。\n\n<img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"JSONresources\" alt=\"JSONresources\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/JSONresources.png\" width=\"610\" height=\"325\" border=\"0\" />\n\nJSON フラグメントを次に示します。\n<pre class=\"prettyprint\">{\n\n  \"apiVersion\": \"2014-06-01\",\n\n  \"name\": \"[parameters('webSiteName2')]\", \n\n  \"type\": \"Microsoft.Web/sites\",\n\n  \"location\": \"[parameters('siteLocation')]\",\n\n  \"tags\": {\n\n    \"[concat('hidden-related:', resourceGroup().id, '/providers/Microsoft.Web/serverfarms/', parameters('hostingPlanName'))]\": \"Resource\"\n\n  },\n\n  \"dependsOn\": [\n\n    \"[concat('Microsoft.Web/serverfarms/', parameters('hostingPlanName'))]\"\n\n  ],\n\n  \"properties\": {\n\n    \"name\": \"[parameters('webSiteName2')]\",\n\n    \"serverFarm\": \"[parameters('hostingPlanName')]\"\n\n  },\n\n  \"resources\": [\n\n    {\n\n      \"apiVersion\": \"2014-04-01\",\n\n      \"name\": \"MSDeploy\",\n\n      \"type\": \"extensions\",\n\n      \"dependsOn\": [\n\n        \"[concat('Microsoft.Web/Sites/', parameters('webSiteName2'))]\"\n\n      ],\n\n      \"properties\": {\n\n        \"packageUri\": \"[concat(parameters('dropLocation'), '/', parameters('webSitePackage2'), parameters('dropLocationSasToken'))]\",\n\n        \"dbType\": \"None\",\n\n        \"connectionString\": \"\",\n\n        \"setParameters\": {\n\n          \"IIS Web Application Name\": \"[parameters('webSiteName2')]\"\n\n        }\n\n      }\n\n    }\n\n  ]\n\n},</pre>\nすべてをオフにしてデプロイします。これは、配置プロジェクトの [配置] コンテキストメニューから実行できます。 [リソースのデプロイ] グループは、他の配置と同じように表示されます。サブスクリプション、リソースグループ (または作成)、およびストレージアカウントを選択します。\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/20/DeployToResourceGroup.png\"><img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"DeployToResourceGroup\" alt=\"DeployToResourceGroup\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/DeployToResourceGroup_thumb.png\" width=\"484\" height=\"317\" border=\"0\" /></a>\n\nただし、パラメーターを編集する場合は、2つ目の web サイトの新しいパラメーターがあります。この例では、同じホスティングプランと場所を使用していますが、JSON ファイルで必要なリソースをコピー/貼り付けすることで変更できます。\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/20/Parameters.png\"><img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"パラメーター\" alt=\"Parameters\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Parameters_thumb.png\" width=\"484\" height=\"416\" border=\"0\" /></a>\n\nデプロイが完了すると、次に示すように、両方のサイトがデプロイされたことが出力ウィンドウに表示されます。\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/20/DeployedSites.png\"><img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"DeployedSites\" alt=\"DeployedSites\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/DeployedSites_thumb.png\" width=\"614\" height=\"329\" border=\"0\" /></a>\n\nすべてが正常に動作していることを確認するには、Azure Portal を開くか、Visual Studio IDE で [サーバーエクスプローラー] ウィンドウを開き、[web サイト] ノードを展開して、両方のサイトがクラウドにあることを確認します。\n\n次に、すばらしいものを紹介します。\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/20/ServerExplorer.png\"><img style=\"padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;\" title=\"ServerExplorer\" alt=\"ServerExplorer\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ServerExplorer_thumb.png\" width=\"326\" height=\"484\" border=\"0\" /></a>\n\nこれにより、一日が少し簡単になります。\n\nこのアンケートを完了して、ご意見をお聞かせください。\n\nよろしくお願いします。\n\nRoger"
