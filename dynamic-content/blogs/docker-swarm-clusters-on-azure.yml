### YamlMime:Yaml
ms.openlocfilehash: 693a38c0a61569cb2bbdcbefb0e847273bfc08be
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890828"
Slug: docker-swarm-clusters-on-azure
Title: Azure での Docker の群れを持つクラスター
Summary: ほんの数回クリックするだけで、Azure で Docker の群れクラスターを簡単に作成できるようになりました。 Azure Resource Manager テンプレートの表現力を活用することで、ほとんどのサイズの Docker の群れクラスターを数分で Azure にデプロイできます。
Content: >-
  <p>ほんの数回クリックするだけで、Azure で <a href="https://www.docker.com/docker-swarm">Docker の群れ</a> クラスターを簡単に作成できるようになりました。 <a href="https://azure.microsoft.com/documentation/templates/">Azure Resource Manager テンプレート</a>の表現力を活用することで、ほとんどのサイズの Docker の群れクラスターを数分で Azure にデプロイできます。</p>


  <p><a href="https://www.docker.com/docker-swarm">Docker の群れ</a> は <a href="https://www.docker.com/docker-engine">、docker の</a> ネイティブクラスタリングツールで、複数の docker エンジンを1つのクラスターに変換し、単一の docker エンジンのようにクラスターを作成します。 これは、他のコンテナー orchestrator よりも簡単にインストール&#39;ます。 これにより、コンテナーホストである Virtual Machines のプールを作成し、単一の VM を使用している場合と同じように Docker を使用してアプリケーションをスケールアウトできます。</p>


  <p>この意味では、Docker の群れはコンテナーオーケストレーションの問題に対して非常に実用的で簡単なソリューションであり、既に使い慣れているコマンドラインツールを使用して <code>docker</code> クラスターにコンテナーをデプロイできます。</p>


  <p>Azure でコンテナー化されたアプリケーションをサポートするための広範なプランの詳細については、<strong> </strong>先週の<a href="https://azure.microsoft.com/blog/azure-container-service-now-and-the-future/"> <strong>Azure Container Service</strong>発表</a>を忘れないでください。</p>


  <h2>Docker の群れを持つ ARM テンプレート</h2>


  <p>Docker の群れクラスターを Azure にデプロイするために、 <a href="https://github.com/Azure/azure-quickstart-templates/tree/master/docker-swarm-cluster">Azure Resource Manager テンプレート</a>を開発しました。これは、クラスター化されたクラスターを形成する azure 上のさまざまなリソースをプロビジョニングし、GitHub でオープンソースとして使用できるようにしました。</p>


  <p>このテンプレートを使用すると、テンプレートギャラリーからテンプレートをデプロイするか<a href="https://github.com/Azure/azure-quickstart-templates/tree/master/docker-swarm-cluster">GitHub から</a>ダウンロードして、開発用コンピューターで<a href="https://azure.microsoft.com/documentation/articles/xplat-install/">Azure CLI</a>または Azure PowerShell モジュールを使用して、Docker<a href="https://azure.microsoft.com/en-us/documentation/templates/docker-swarm-cluster/">の</a>群れ5-10 クラスターをプロビジョニングすることができます。</p>


  <p>クラスター化クラスターをデプロイして使用する方法の詳細については、GitHub リポジトリに記載されている<a href="https://github.com/Azure/azure-quickstart-templates/blob/master/docker-swarm-cluster/README.md">手順を参照</a>してください。</p>


  <h2>しくみ</h2>


  <p>Docker の群れを持つ <a href="https://github.com/Azure/azure-quickstart-templates/tree/master/docker-swarm-cluster">ARM テンプレート</a> は、静的プライベート IP アドレスを持つ3つの群れマネージャー vm を作成します。 これにより、コンテナーの展開と管理に使用されるコントロールプレーンは高可用性を維持します。 これらのマネージャー Vm は、ユーザーのワークロードを実行せず、クラスターマネージャーとしてのみ機能するため、Standard_A0 &rdquo; 最小サイズ &ldquo; です。</p>


  <p>群れのマネージャーノードは2つのコンテナー (群れを持つ <a href="https://github.com/docker/swarm">エージェント</a> と <a href="https://consul.io/">consul</a> ) を実行して、群れのワーカーノードを検出します。 VM をプロビジョニングした後に、これらのコンテナーを体系的に実行するために、 <a href="https://azure.microsoft.com/blog/a-brand-new-docker-extension/">Azure Docker 拡張機能</a> を Virtual Machines に追加します。 個々の群れワーカーノードは、静的プライベート IP アドレスを使用して、群れのマネージャーに到達することでクラスターに参加します。 すべての群れマネージャーとワーカーノードは同じ Azure Virtual Network にあり、相互に通信することができます。 Manager ノードとワーカーノードは、最大の可用性とアップタイムを確保するために、個別の Azure 可用性セットの背後に配置されます。 群れのワーカーノードは、パブリックインターネットに直接公開されません。ただし、コンテナーにトラフィックをルーティングするように構成できる Azure Load Balancer の背後にあります。 コンテナーのワークロードを受け入れるワーカーノードのサイズ &ldquo; は Standard_A2 です。&rdquo;</p>


  <p>クラスターのネットワークトポロジは次のようになります。</p>


  <p><img alt="Docker Swarm Cluster on Azure Network Topology" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/cluster-network.png" style="height: auto; width: auto"></p>


  <p>クラスター用にプロビジョニングされた仮想マシンは、ホストオペレーティングシステムとしてインストールされた Docker に付属する最小限の Linux ディストリビューションである CoreOS を実行します。 これにより、クラスターを迅速にプロビジョニングして構成することができます。</p>


  <p>このテンプレートを使用すると、50ノードの群れを持つクラスターは通常5-10 分以内にプロビジョニングされ、コンテナーのワークロードを受け入れる準備が整います。</p>


  <p>また、このテンプレートでは、TLS を使用せずに Docker 証明書を管理する手間が省け、SSH トンネルを確立することによって Docker の群れエンドポイントにアクセスできるようになります。</p>


  <p>クラスタートポロジの詳細については、GitHub リポジトリに記載されている<strong><a href="https://github.com/Azure/azure-quickstart-templates/blob/master/docker-swarm-cluster/README.md">手順を参照</a>してください &nbsp; </strong> 。</p>


  <h2>デモ</h2>


  <p>次のビデオでは、Azure Portal からの群れのないクラスターの作成がいかに簡単かを示します。</p>


  <p><iframe allowfullscreen="" frameborder="0" height="315" src="https://channel9.msdn.com/Blogs/Regular-IT-Guy/Docker-Swarm-Clusters-on-Azure/player" width="560"></iframe></p>


  <h2>お試しください。</h2>


  <p>Docker の群れは、完全なコンテナー orchestrator をインストールすることなく、コンテナーホストのプールに Vm を切り替えることができる便利なツールです。 小規模および中規模の分散されたワークロードを簡単に設定し、管理することができます。</p>


  <p>Docker の群れを持つクラスターで、Azure のタイヤを開始に関心がある場合は、 <a href="https://github.com/Azure/azure-quickstart-templates/tree/master/docker-swarm-cluster">ARM テンプレート</a> を確認し、数分以内にクラスターをデプロイしてください。</p>
