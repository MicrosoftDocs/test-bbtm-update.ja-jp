### YamlMime:Yaml
ms.openlocfilehash: e8b42eac3aac8495e15d575ffe9d7782dbea4d46
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139908932"
Slug: iot-hub-throttling-and-you
Title: IoT Hub のスロットリング
Summary: 私にとって最もよくある質問の1つは、IoT Hub で特定の操作を調整する方法です。 IoT Hub は、1つのリージョンで何百万という接続をサポートするように構築されたサービスです。
Content: >-
  <p>私にとって最もよくある質問の1つは、IoT Hub で特定の操作を調整する方法です。 IoT Hub は、1つのリージョンで何百万という接続をサポートするように構築されたサービスです。 &rsquo;モノのインターネットについて説明するときには、既に深刻な拡張性のある接続を使用しています。また、サービスに対するサービス拒否 (DoS) 攻撃などを防ぐために、IoT Hub の調整制限を設けています。</p>


  <p>1つの IoT hub インスタンス &rdquo; に何百ものデバイスを意図的に接続し、iot hub への何千もの接続試行をスパムすることによってサービスを DoS に接続すると &ldquo; いう &rsquo; 、非常に優れた線 &ldquo; です。 &rdquo;&rsquo;IoT Hub サービスでは、IoT シナリオについては何もわからないことを理解しておくことが重要です。 接続とデータパケットのサイズを認識しています。コンテンツについては何もありません。メールを開いて、その中をピークする&#39;はありません。</p>


  <p>IoT Hub は <strong>共有リソース</strong>であるため、プロビジョニングする iot hub は、他の iot hub を実行しているのと同じハードウェアセットで実行されます。 これにより、お客様のデータセンターをより効率的に使用することで、専用リソースと比べて、IoT Hub の機能を低価格で提供できます。 サービスの共有リソースの性質により、リソースを占有 &rdquo; している1人のユーザー &ldquo; が、別の顧客 &rsquo; のパフォーマンスに影響を与える可能性があります。 マイ (個人用) IoT デバイスがサービスによって pounding に5回送信されようとしている場合は、サービスが接続要求の刺激を処理しようとしている間に、デバイスの接続に時間がかかることがあります。 Azure では、特定の IoT Hub 操作を調整して、すべてのユーザーに優れたエクスペリエンスを提供することで、この問題が発生しないようにしています。</p>


  <p>IoT Hub は、デバイスが常にクラウドにテレメトリデータを送信すると想定して設計されています。 目標は、まずクラウドにデータを取得してから、ビジネスニーズに合わせてデータを処理することです。 マイクロソフトでは、最悪のピーク時に使用するのではなく、サービスの使用目的に対して容量を計画しています (つまり、すべてのお客様が、それらのユニットを完全に同時に最大にすることにした場合)。</p>


  <p>スロットル制限なしで使用量の急増を許可していた場合、サービスを停止する使用ピークまでは保護されません。 このようなことを可能にするのではなく、調整制限を課すことでサービスと顧客を保護します。 サービス &rsquo; のリソース使用量を監視することで、将来のリソースのニーズをより適切に予測し、それに応じた計画を立てることができます。</p>


  <p>100万台を超えるデバイスを1つの IoT hub に接続する場合は、 <a href="https://azure.microsoft.com/en-us/support/options/">Microsoft サポート</a>に連絡する必要があります。 DoS 攻撃からサービスを保護するために1つのハブに登録できるデバイスの数に一時的な上限がありますが、お客様はサポートを通じて制限を引き上げることができます。 既にいくつかのお客様に対して行っています。</p>


  <p>接続するデバイスの数は、購入したユニットの数に依存しません。 必要に応じて、600万のデバイスを使用することもできます。各デバイスは1日に1メッセージを送信し、S2 のユニットを1つだけ購入します。 ただし、これらのすべてのデバイスが、毎日メッセージを他のすべてのデバイスとまったく同時にハブに送信することは許可されていません。 サービスはすべてのユーザーを一度に処理することができるため、 &rsquo; だれもがそれを実行すること &rsquo; を許可しません。</p>


  <p>一般に、ハブを通じてフローを調整します。 サービスを保護し、信頼性の高い機能をユーザーに提供するためにこれを行います。 制限料金は、課金対象メッセージの観点からご注意ください。 現在の調整率については、 <a href="https://azure.microsoft.com/en-us/documentation/articles/iot-hub-devguide/#throttling">IoT Hub 開発者ガイド</a>を参照してください。 いくつかの異なるカテゴリを調整し、その機能の使用方法に基づいて各カテゴリの制限料金を選択しました。 ここで &rsquo; は、さまざまな調整カテゴリについて、検討プロセスの背後でもう少し説明します。</p>


  <ul>
      <li><strong>デバイス接続</strong> は、特定の時点で IoT hub に接続する必要があるデバイスの数に基づいて調整されます。</li>
      <li><strong>デバイスからクラウドへのテレメトリ</strong> は、選択したサービスのレベルに基づいて、デバイスが1日に送信するメッセージの数に基づいて調整されます。 今日 &rsquo; のメッセージレートでは、S2 層の1つの単位で、約70メッセージ/秒/ユニットが1日にわたって常に使用できます。 スロットル率は、さらに 120/秒/ユニットであり、少しの余裕を持っています。</li>
      <li><strong>クラウドからデバイスへ</strong> のコマンドは、コマンドの送信よりも、コマンドの受信に対してより高い速度で調整されます。 HTTP message receive は、プロトコルによって必要とされるポーリングのために最も関連する制限番号です ( &rsquo; ここで http1 とと対話しています)。 IoT シナリオに1分以内にクラウドからコマンドに応答するデバイスが含まれている場合は、メッセージの受信に HTTP を使用しないようにしてください。 &rsquo;自分に対して自分で行ってはいけません。</li>
      <li><strong>デバイス ID CRUD 操作</strong> は、主にデバイスのプロビジョニングのために、ごくわずかで、遠く離れていることが想定されています。 IoT hub との間でデバイスの一覧をインポート/エクスポートするための一括メソッドがあります。 IoT hub が個別に作成/削除要求によって非難を取得している場合、おそらくハブに問題があることを意味しているので、調整します。 すべてのデバイス id 操作は同じスロットル制限に対してカウントされることに注意してください。 デバイス固有の情報を表示する場合は、独立したレジストリで追跡することをお勧めします (独自に作成します)。</li>
  </ul>


  <p>スロットルの上限に達したと思われる場合は、いくつかのことを確認できます。</p>


  <ul>
      <li>数値演算を実行します。 デバイスがスロットル制限に対してヒットしたときに、デバイスが送信しているレートを確認します。</li>
      <li>調整エラーをリッスンします。 IoT Hub &rsquo; s 新しい操作の監視機能を使用して、1つのエンドポイントに送信されたすべての調整エラーを取得できます。 チャットがどのデバイスであるか、またはデバイスがさまざまな周波数で送信しているかどうかを確認し、実際のシナリオで想定されているかどうかを確認します。</li>
  </ul>


  <p>すべてを &rsquo; 試しても問題が解決しない場合は、 <a href="https://azure.microsoft.com/en-us/support/options/">Microsoft サポート</a> を通じてご連絡いただくか、 <a href="https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=azureiothub">フォーラム</a>で質問してください。</p>
