### YamlMime:Yaml
ms.openlocfilehash: 08048daa41c8265b6897aa7f31d2f88636154647
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909196"
Slug: analyze-your-data-with-application-insights-analytics
Title: Application Insights Analytics を使用してデータを分析する
Summary: '任意のソースからインポートする大量の NoSQL データストリームに強力な Analytics クエリ言語を適用できるようになりました。 '
Content: "<div style=\"background:#eee;border:1px solid #ccc;padding:5px 10px;\"><strong>2019 年7月23日に更新されました。</strong>このブログで説明されている機能は廃止され、Application Insights には存在しなくなりました。 または、 <a href=\"https://docs.microsoft.com/en-us/azure/azure-monitor/platform/data-sources-custom-logs\" target=\"_blank\">カスタムログ </a>を <a href=\"https://docs.microsoft.com/en-us/azure/azure-monitor/overview#overview\" target=\"_blank\">Azure Monitor ログストア</a>(Log Analytics) に送信することもできます。 このデータは、<a href=\"https://docs.microsoft.com/en-us/azure/azure-monitor/log-query/cross-workspace-query\">リソース間のクエリ</a>を使用して Log Analytics または Application Insights リソースから照会できます。</div>\n\n<p><a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-import\">任意のソースからインポート</a>する大量の NoSQL データストリームに強力な<a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-tour\">Analytics</a>クエリ言語を適用できるようになりました。 <a href=\"https://powerbi.microsoft.com/\">Power BI</a>または Azure ダッシュボードに結果を表示し、指定されたしきい値を超えた場合にアラートを受け取ることができます。 また、分析クエリは、ライブ web アプリから<a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-overview\">Azure アプリケーションインサイト</a>によって収集されたパフォーマンスと使用状況のテレメトリにも適用できます。 これで、インポートしたデータをアプリのテレメトリと結合したり、クエリを実行して完全に分離されたデータを分析したりすることができます。 データは、JSON または DSV (区切り記号で区切られた値) のいずれかとして指定できます。</p>\n\n<p>一般的なシナリオをいくつか次に示します。</p>\n\n<ul>\n <li><strong>アプリケーションテレメトリを参照テーブルに結合</strong>します。 たとえば、Web サイトの URL を読みやすいページ タイトルにマップするテーブルをインポートすることもできます。 Analytics では、Web サイト内で特に人気のある上位 10 件のページを表示する、ダッシュボード チャート レポートを作成することができます。</li>\n <li>アプリケーションのテレメトリを、ネットワークトラフィック、サーバーデータ、CDN ログファイルなど<strong>の他のソースと関連付け</strong>ます。</li>\n <li><strong>分析を別のデータストリームに適用</strong>します。 スパースタイムスタンプストリームがある場合は、多くの場合 SQL よりも、分析を使用して分析することができます。 このブログでは、このシナリオに焦点を当てます。</li>\n</ul>\n\n<p>たとえば、 &rsquo; フライトに関するデータフィードを受け取ったとします。 ルートの人気と輻輳を毎日分析することができます。 分析では、結合、集計、統計関数などの複雑なクエリを実行して、必要な結果を抽出できます。 分析で使用できるグラフの範囲に結果を表示できます。 または、クエリを毎日実行し、マップに結果をプロットして、web サイトに表示<a href=\"https://powerbi.microsoft.com/\">Power BI</a>こともできます。</p>\n\n<h1>設定</h1>\n\n<p>分析を使用してデータを分析するには、 <a href=\"https://azure.com\">Microsoft Azure</a>にアカウントが必要です。</p>\n\n<p><a href=\"https://portal.azure.com\">ポータルにサインイン</a>し、Azure で<a href=\"https://azure.microsoft.com/services/storage/\">Storage</a>リソースを設定します。 ここでは、分析にはまっする前に &rsquo; データを配置します。</p>\n\n<p><a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-create-new-resource\">Application Insights リソースを作成します</a>。 次に、そこから [分析] ページに移動します。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a1136ac9-6321-4296-ada2-c0898de524bb.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"45\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4b20567b-aad3-4c74-9b4c-49f904a9afe2.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"Analytics ポータルを開く\" width=\"361\"></a></p>\n\n<h1>データ ソースを定義する</h1>\n\n<p>データを分析する前に、その形式を分析する必要があります。 前述 &rsquo; したように、ここでは Application Insights の資料をスキップし、独自のデータソースの定義に直接進んでいます。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3127c813-a24a-41c6-9115-52fabf28aa2f.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"276\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/39197a83-a900-4222-87ef-230a21203239.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"新しいデータソースの追加\" width=\"221\"></a></p>\n\n<p>これにより、データソースに名前を指定し、そのスキーマを定義するウィザードが開きます。 これを行うには、明示的なスキーマを提供するか、通常は簡単に &rsquo; データ &ndash; の小さなサンプルをアップロードします。</p>\n\n<p>フライトデータの例では、ファイルは CSV 形式です。 サンプルデータファイルにはヘッダーが含まれており、スキーマが自動的に推論されます。 必要に応じて、推論されたデータ型とフィールド名を更新できます。</p>\n\n<h1>データの取り込み</h1>\n\n<p>&rsquo;スキーマを定義したら、必要に応じてデータファイルをアップロードできます。 数百 MB のデータファイルは、Analytics で簡単に処理できます。</p>\n\n<p>データを取り込むために、 &rsquo; 短いスクリプトでプロセスを自動化するのが最も簡単です。 このスクリプトは、データを Azure storage にアップロードし、それを取り込むように分析に通知します。 <a href=\"https://docs.microsoft.com/en-us/azure/application-insights/app-insights-analytics-import#import-data\">Import ドキュメント</a>にサンプルがあり &rsquo; ます。</p>\n\n<h1>クエリを実行する</h1>\n\n<p>ここでは、航空会社の上位10個のターゲット空港を検索するクエリを紹介 &rsquo; します。</p>\n\n<pre>\nairlineRoutes\n| summarize count() by Destination_airport \n| top 10 by count_ desc\n| render piechart</pre>\n\n<p>&nbsp;</p>\n\n<p>結果:</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a1b3bbe5-84af-4e38-991a-b5f476fd59f1.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"306\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7f93dbfd-bf3a-48fa-9d3a-e6a3736aee7f.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"\" width=\"480\"></a></p>\n\n<p><a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-tour\">クエリ言語</a>は強力ですが、学習が容易であり、各演算子が1つのタスク &ndash; を実行する際に、入れ子になった SQL の選択よりもはるかに簡単に処理できるパイプモデルが用意されています。</p>\n\n<h1>複数のテーブルの結合</h1>\n\n<p>分析では複数のソースを取り込むことができ、クエリはそれらのソースに対して結合を実行できます。</p>\n\n<p>たとえば、 &rsquo; コードではなく氏名によって識別された空港を見るのはとても簡単です。 &rsquo;新しいデータソースを追加します。このデータソースは、各空港コードを名前とその他の情報にマップします。 テーブルに対して <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-reference#join-operator\">結合</a> を実行できるようになりました。</p>\n\n<pre class=\"prettyprint\">\nairlineRoutes \n| summarize routeCount = count() \n  by airportCode = destination_airport // rename field for join\n| top 10 by routeCount count_ desc \n| join kind=inner  ( airportsData  ) on airportCode\n| project routeCount, airportCode  // the fields we want\n| render piechart</pre>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4c6ef804-8d54-427c-a46e-dc290bfb7be8.png\"><img alt=\"Analyze your data with Application Insights Analytics\" border=\"0\" height=\"183\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/765a31d3-32d0-4c28-8302-a8a8083fb3fd.png\" style=\"border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;\" title=\"\" width=\"610\"></a></p>\n\n<h1>Application Insights テレメトリを補強する</h1>\n\n<p>Analytics の主な仕事は、web アプリケーションの正常性と使用状況を監視する Application Insights の強力なクエリツールです。 Analytics にデータをインポートする理由の1つは、テレメトリデータを拡張することです。 たとえば、テレメトリレポートを読みやすくするために、クエリ Url をページ名に変換できます。</p>\n\n<h1>今すぐ始めましょう</h1>\n\n<p>分析は現在のデータに適用できます。 <a href=\"https://docs.microsoft.com/azure/application-insights/app-insights-analytics-import\">詳細については、こちらを参照</a>してください。</p>\n\n<p>データを強化するか、アプリケーションのログデータを分析するかにかかわらず、新しいデータソースを簡単に追加して、データの取り込みを開始することができます。 大量のインジェストを使用すると、独自のカスタムデータに Analytics クエリ言語の機能を適用できるようになります。</p>\n\n<p>常に、次のいずれかのチャネルを使用して、ご質問やフィードバックをお送りください。</p>\n\n<p>&middot;<a href=\"https://analytics.applicationinsights.io/demo\">アプリケーション分析を試す</a></p>\n\n<p>&middot;アイデア<a href=\"https://visualstudio.uservoice.com/forums/357324-application-insights/category/161991-analytics\">を提案して Application Insights アイデアに投票</a>する</p>\n\n<p>&middot;<a href=\"https://social.msdn.microsoft.com/Forums/vstudio/home?forum=ApplicationInsights\">Application Insights Community で会話に参加し</a>ます</p>"
