### YamlMime:Yaml
ms.openlocfilehash: eed3651189a622bbd03e9c6e000786cbb1313b84
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890305"
Slug: artificial-intelligence-tunes-azure-sql-databases
Title: 人工知能によって Azure SQL データベースがSQLされる
Summary: 競争力を維持するために、今日の企業では、顧客価値を直接提供するコア コンピテンシーに焦点を当て、クラウド プロバイダーに依存して、ニーズに合ったスケールの低コストで信頼性が高く使いやすいコンピューティング インフラストラクチャを提供する必要があります。 このブログでは、顧客が自動チューニング機能を利用Azure SQL Databaseいくつかの例を共有したいと思います。
Content: '<h2>自動チューニング</h2> <p>競争力を維持するために、今日の企業では、顧客価値を直接提供するコア コンピテンシーに焦点を当て、クラウド プロバイダーに依存して、ニーズに合ったスケールの低コストで信頼性が高く使いやすいコンピューティング インフラストラクチャを提供する必要があります。</p> <p>アプリケーション スタックを実行する多くの側面がクラウド プラットフォームに委任されるクラウド サービスの世界では、100,000 のリソースを処理する際に、人工知能を使用してリソースを管理する必要があります。 Azure SQL Databaseをデータベース エンジンに組み込み、パフォーマンスを向上し、リソースの使用量を削減し、管理を簡素化することで、継続的にイノベーションを実現しています。 人工知能の最も顕著な使用は、2016 年 1 月からグローバルに使用できる自動チューニング機能です。</p> <p>自動チューニングでは、人工知能を使用してデータベース のワークロード パターンを継続的に監視し、データベースのパフォーマンスを向上させる機会を認識します。 特定のチューニング アクションによってデータベースのパフォーマンスが向上する信頼度が構築された後、Azure SQL Database サービスは、安全で管理された方法でチューニング アクションを自動的に実行します。 サービスは各チューニング アクションを監視し、パフォーマンスに対する利点はデータベース所有者に報告されます。 パフォーマンスの低下がまれな場合、サービスはすぐにチューニング アクションを元に戻します。 <a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-automatic-tuning">自動チューニングの詳細については、こちらをクリックしてください</a>。</p> <p>このブログでは、顧客が自動チューニング機能を利用Azure SQL Databaseの例を紹介します。</p> <h2>28,000 のデータベースのそれぞれに合わせて調整されたインデックス</h2> <p>SnelStart はオランダの会社で、Azure と Azure SQL Databaseを使用してサービスとしてソフトウェアを実行しています。 過去数年間、SnelStart は SQL Server 製品チームと密接に密接に取り組み、Azure SQL Database プラットフォームを活用してパフォーマンスを向上し、コストを削減DevOpsしてきました。 2017 年、SnelStart は Microsoft Country Partner オランダの特典を受け取り、Azure への多額の投資と Microsoft とのコラボレーションを示しました。</p> <p>SnelStart は、中小規模の企業に対して請求および帳帳アプリケーションを提供します。 SnelStart は、デスクトップ ソフトウェアから Azure 上に構築されたハイブリッド サービスとしてのソフトウェア オファリングに移行することで、市場に出る時間を大幅に減らし、機能の速度を向上し、顧客からの新しい需要を満たしました。 SnelStart は、Azure SQL Database プラットフォームを使用することで、サービスとしてのインフラストラクチャ ソリューションに必要な大きな IT オーバーヘッドを発生することなく、SaaS プロバイダーになりました。</p> <p>SnelStart では、テナントごとのデータベース アーキテクチャが使用されます。 ビジネス管理ごとに新しいデータベースが提供され、各データベースは同じスキーマで開始されます。 ただし、これらの数千の顧客それぞれに、特定のシナリオと特定のクエリがあります。 自動チューニングを行う前は、すべてのデータベースを特定の使用シナリオに合った調整は実行できません。 その結果、1 つの固定スキーマ内のすべての使用シナリオに対して最適化を試みたインデックス作成が過剰でした。 個々のデータベースは、チューニングする必要がある注目を集めなかったので、各データベース ワークロードのパフォーマンスが最適ではありません。</p> <p>現在、自動チューニングを使用すると、このすべてが履歴です。 SnelStart には約 28,000 のデータベースが追加され、自動チューニングによってすべてが処理されます。 自動チューニングでは、各データベースに個別に焦点を当て、そのワークロード パターンを監視し、固有のワークロードに基づいて個々のデータベースにチューニングに関する推奨事項を適用します。 これらの推奨事項は、データベースがアクティブではない時間を選択することで安全に適用されます。 すべての自動チューニング アクションは非ブロッキングであり、各チューニング アクションの前、中、および後にデータベースを完全に使用できます。</p> <p>SnelStart は 2 か月間、データベースの自動チューニングを段階的に有効にしました。 その間、自動チューニングでは 210 データベースに対して 262 のチューニング操作が実行され、これらのデータベース全体で 346 の一意のクエリのパフォーマンスが向上しました。 次のグラフは、SnelStart データベース フリート全体での自動チューニングのロールアウトを示しています。</p> <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/703a9dbe-67d1-4646-b243-abc21c7a7a5a.png"><img title="イメージ" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" border="0" alt="image" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a3cfe499-16d1-43f9-a9fc-a1045a6109b2.png" width="624" height="281"></a></p> <p>SnelStart は、データベースの自動チューニングを有効にすることで、データベースのパフォーマンスの最適化に重点を置く仮想従業員を得ていました。 SnelStart の場合、この仮想従業員は大きな仕事をし、1 日あたり平均約 3.5 データベースを最適化しました。 SnelStart は多くの時間を保存し、データベースのパフォーマンスではなく、コア値のプロパティの改善に集中しました。</p> <blockquote> <p>"自動インデックス チューニングを使用すると、個々の顧客に対してソリューションのパフォーマンスをさらに最大化できます。" – SnelStart のソフトウェア アーキテクトである、Nel Been。</p></blockquote> <h2>マネージド インデックスのクリーンアップ</h2> <p>AIMS360 は、顧客にビジネスの制御と可視性を強化することで、ビジネスを管理および成長させる、ブランド ラベルを支援する、ブランド企業向けクラウドベースのサービス プロバイダーです。 さらに、AIMS360 は、ビジネスに関するプロセスではなく、お客様が方法に集中する時間を顧客に提供します。 AIMS360 は 30 年以上にわたってこのビジネスに取り組み、ソフトウェアと一緒に働くことは、米国 を通じて、そのソフトウェアを使用して、ファッション関連の学校で教米国。</p> <p>AIMS360 サービスを購入する各ビジネスは、独自のデータベースを取得します。 AIMS360 には何千ものデータベースがあります。 各データベースのデータベース スキーマは同じであり、新しい機能が製品に追加されたので、時間の長い間進化しています。 ただし、アプリケーション内の各ワークフローのパフォーマンスを最適化しようとして、データベースに重複するインデックスが残されました。 SQL Serverでは、重複するインデックスを許可し、関連する更新ごとにインデックスが存在したら、重複したインデックスを更新する必要があります。その結果、データベース リソースが不要に使用されます。</p> <p>オーバー インデックス作成は、多数のデータベースに存在する広範囲にわたる問題です。 原因は、以前にデータベースで何が起こったかを分析したり追跡したりすることなく、同じデータベースで作業しているユーザーが異なっている場合です。 内部統計の自動チューニングを見て、インデックスの作成に関する推奨事項と比較して、重複するインデックスの推奨事項のドロップ量が 2 倍であるのを見て、チームは驚きました。</p> <p>AIMS360 では、単にこの重複するインデックスの問題を処理するために、すべてのデータベースで自動チューニングが有効になっています。 自動チューニングを有効にした後、SQL Database サービスは 1410 の一意のデータベースに対して 3345 のチューニング アクションを実行し、これらのデータベース全体で 1730 の一意のクエリを改善しました。</p> <p>重複するインデックスを削除する適切な時間を選択することで、自動チューニングによって問題が安全に解決されました。 バックグラウンドでは、数日間の間に、自動チューニングによって重複したインデックスがすべて削除されました。</p> <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1008d9c5-e6bc-4218-820b-3b4c1707b583.png"><img title="イメージ" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" border="0" alt="image" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c6ccc23b-d527-4346-a437-391badb1ad91.png" width="612" height="288"></a></p> <p>自動チューニングは、データベースやエラスティック プールに大きな圧力をかけない処理を行います。 1 つのデータベースまたは 1 つのエラスティック プール内で複数のチューニング アクションを実行する必要がある場合、これらのアクションはキューに入れ、安全な並列処理で実行されます。</p> <blockquote> <p>"自動チューニング機能を使用して、チームはデータベースをすばやく効率的に微調整できます。 データベースは 1400 を超えるので、従来のチューニング方法は非常に手間がかかります。 ただし、自動チューニングでは、1,000 のクエリを分析し、すぐにチューニングを行う必要があります。 " – Shahin Ofan、AIMS360 の総長</p></blockquote> <h2>何千ものアプリケーションのリソース使用量の削減</h2> <p>Microsoft IT アプリケーションでは、Azure SQL Database数千のアプリケーションに大きく使用されます。 これらのアプリケーションは、Microsoft のさまざまな内部アプリケーションをサポートしています。 Microsoft IT のフットプリントは、Azure SQL Database数千のデータベースに含まれています。</p> <p>これらのワークロードは、軽量で散発的な使用から、より高い Premium レベルのリソースを使用するエンタープライズ レベルのワークロードまで、多様です。 このさまざまなアプリケーションを見つめ続けるのは簡単ではありません。 Microsoft では、Microsoft IT を含むすべての内部ワークロードで自動チューニングを有効にし、DevOps コストを削減し、Azure SQL Database に依存しているアプリケーション全体のパフォーマンスを向上させます。 これらの同じ問題が世界中のエンタープライズ IT 部門に存在し、それらのすべてには、総保有コストの削減、DevOps コストの削減、パフォーマンスの向上という一連の共通の目標があります。 すべてのデータベースを継続的に同時に監視およびチューニングすることで、自動チューニングは、これらの目標に向けて絶えず進行しています。</p> <p>Microsoft IT では、プレビューで使用できるとすぐに自動チューニングの使用が開始されましたが、2017 年第 2 四半期に開始されたすべてのデータベースに対して有効にするためのエンゲージメントが向上しました。 Microsoft IT 内の異なるグループの自動チューニングを段階的に展開することで、各グループによって達成される利点を慎重に測定できます。 Microsoft IT Finance グループ内で特別な成功を収めました。</p> <p>次のグラフでは、Microsoft IT Finance グループに属する毎日チューニングされたデータベースの数を確認できます。 5 月 3 日に発生したスパイクは、このグループに属しているすべてのデータベースで自動チューニングを有効にすることで発生します。</p> <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e1625f61-96cd-4832-ae82-3b5d7ebbaf74.png"><img title="イメージ" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="image" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/bbf37beb-6296-4a64-a986-a2393b0b4192.png" width="624" height="300"></a></p> <p><br>すべてのチューニング アクションのAzure SQL Database、チューニング アクションの前と後のクエリのリソース使用量を比較することで、パフォーマンスの向上を測定します。 検証は統計的に有意なサンプルが収集されるまで続き、パフォーマンスの向上を正確に測定できます。 この検証中に、改善されたクエリの頻度も測定されます。 この情報を使用して、チューニング アクションのために保存された CPU 時間の量を計算できます。</p> <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9ca2060b-3b4e-469a-8514-5c2d327408f4.png"><img title="イメージ" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" border="0" alt="image" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ae69430f-147e-4df7-ba9b-51e974c103a4.png" width="624" height="323"></a></p> <p>上のグラフは、Microsoft IT Finance グループに属するデータベースが、自動チューニングを有効にする前よりも最大 250H 少ない CPU を使用する状態を示しています。 クエリの実行時間を短縮することでパフォーマンスを向上させるだけでなく、このリソース使用量の削減は価格の削減に直接影響します。Microsoft IT Finance では、パフォーマンスの向上を維持しながら、特定のデータベースの価格レベルを削減できます。</p> <p>このケースに関する詳細については、このビデオをご <a href="https://channel9.msdn.com/Blogs/Azure-in-the-Enterprise/Enabling-Azure-SQL-Database-Auto-Tuning-at-Scale-for-Microsoft-IT">覧ください</a>。</p> <h2>まとめ</h2> <p>Azure SQL Database最適なパフォーマンスを実現するために、自動チューニングに既に大きく依存しています。 これらの顧客事例では、SaaS アプリケーションの同様のワークロードの最適化から、企業向け数千もの異なるアプリケーションの最適化まで、自動チューニングを使用することで、さまざまなアプリケーションがどのようにメリットを得ているかについて説明します。 さらに、自動チューニングを使用すると、使用されていないインデックスと重複したインデックスを、労力を必要とせずに最終的に削除できます。</p> <p>データベースの自動チューニングを有効にし、プラットフォームで自動的に作業を行う - 自動チューニングを有効にする方法の詳細については、 <a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-automatic-tuning-enable">ここをクリックしてください</a>。</p>'
