### YamlMime:Yaml
ms.openlocfilehash: 0819e5ecfcf83728120d9edd49d4e82b2aafd0fd
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139910261"
Slug: updating-windows-azure-cloud-service-to-net-4-5-and-windows-server-2012
Title: Azure クラウドサービス Windows .net 4.5 および Windows Server 2012 に更新しています
Summary: 'エディターのメモ: &nbsp; この投稿は、Azure シニアプログラムマネージャー Windows avilay Parekh から &nbsp; のものです。  .net 4.0 と OS を使用して、6月の 2012 SDK で構築された Windows Azure クラウドサービスがあるとします。'
Content: '<p><strong>エディターのメモ: &nbsp; </strong>この投稿は、Azure シニアプログラムマネージャー Windows<a href="https://twitter.com/avilay" target="_blank">avilay Parekh</a>からの &nbsp; ものです。</p>  <p>.net 4.0 と OS ファミリ1または2を使用して、6月の 2012 SDK で構築された Windows Azure クラウドサービスがあるとします。 これを更新するには、.NET 4.5 を使用するようにし、その結果 Windows Server 2012 である OS ファミリ3を使用します。 通常の更新パスを使用する場合 (Windows Azure portal の [更新 &rdquo; ] ボタンを使用する場合、または &ldquo; Visual Studio の [発行 &rdquo; ] ボタンを使用 &ldquo; する場合)、更新は失敗し、「os ファミリ1から os ファミリ3へのアップグレードは許可 &rdquo; されません」という &ldquo; エラーが表示されます。 これは、今後のリリースで削除する予定の更新ポリシーの一時的な制限です。 この時点で、既存の Windows Azure クラウドサービスを .net 4.5 と OS ファミリ3で実行するには、次の2つの回避策があります。&ndash;</p>  <ol>  <li>VIP スワップ (推奨される方法)</li>  <li>削除と再配置</li>  </ol>  <p>次の表に示すような長所と短所があります。 両方のオプションの詳細なチュートリアルについては、このブログをご覧ください。</p>  <p><a href="https://msdn.microsoft.com/en-us/library/ee517253.aspx" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2273.Screen-Shot-2013_2D00_01_2D00_30-at-2.16.20-PM.png" alt="" border="0"></a></p>  <h4>オプション 1: VIP スワップを使用して更新する (推奨)</h4>  <p>ここ &rsquo; では、.net 4.0 と OS ファミリ1または2を使用する元のクラウドサービスがクラウドの運用スロットにデプロイされていると仮定します。 .NET 4.5 と OS ファミリ3に更新する手順は次のとおりです。 &ndash;</p>  <ol>  <li>ソリューションを Windows Azure Tools の2012年10月リリースにアップグレードします。&nbsp;</li>  <li>.Cscfg ファイルを手動で編集し、"Serviceconfiguration.cscfg" 要素の "OSFamily" 属性を "3" に変更します。</li>  <li>WebRole プロジェクトの .NET framework を .NET 4.5 に変更し、リビルドします。</li>  <li>新しいアプリケーションをクラウドのステージングスロットにデプロイします。</li>  <li>運用スロットとステージングスロットの VIP スワップを実行します。</li>  </ol>  <h4>オプション 2: 削除して再展開することによる更新</h4>  <ol>  <li>既存のソリューションを Windows Azure Tools の2012年10月リリースにアップグレードします。&nbsp;</li>  <li>.Cscfg ファイルを手動で編集し、"Serviceconfiguration.cscfg" 要素の "OSFamily" 属性を "3" に変更します。</li>  <li>WebRole プロジェクトの .NET framework を .NET 4.5 に変更し、リビルドします。</li>  <li>既存のクラウドアプリケーションを削除します。</li>  <li>更新されたアプリケーションを通常のようにクラウドにデプロイします。</li>  </ol>  <h4>詳細な手順</h4>  <div><strong>ソリューションを Windows Azure Tools の2012年10月リリースにアップグレードします。</strong></div>  <div>  <p style="padding-left: 30px;"><strong><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2235.blog-step-1-and-2.png" alt="" border="0"></a></strong>&nbsp;</p>  <ol>  <li>Visual Studio でソリューションを開きます。</li>  <li>ソリューションエクスプローラーでクラウドプロジェクトを右クリックします。 付随する画像では、ソリューション名は &ldquo; Sdk1dot7 &rdquo; 、web ロールのプロジェクト名は &ldquo; MvcWebRole1 &rdquo; 、クラウドプロジェクト名は &ldquo; Sdk1dot7 &rdquo; です。 クラウドプロジェクト &ldquo; Sdk1dot7 &rdquo; を右クリックします。<br><br>  <div><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1565.mid2.png" alt="" border="0"></a></div>  <div>&nbsp;</div>  </li>  <li>&nbsp;[プロパティ &rdquo; ] を &ldquo; クリックします。 プロパティシートに [アップグレード &rdquo; ] ボタンが表示 &ldquo; されます。 次の図に示すように、[プロパティ] ページには、このプロジェクトが6月 2012 SP1 Windows Azure Tools バージョンでビルドされたことが示されています。 [アップグレード &rdquo; ] ボタンを &ldquo; クリックします。 アップグレード後、このプロパティシートをもう一度確認すると、現在 Windows Azure Tools バージョンが2012年10月であることが示されます。</li>  </ol></div>  <div>  <p><strong>.Cscfg ファイルを手動で編集し、Serviceconfiguration.cscfg &rdquo; 要素の &ldquo; OSFamily &rdquo; 属性を read &ldquo; 3 &rdquo; に変更 &ldquo; します。&nbsp;</strong></p>  <p style="padding-left: 30px;"><strong><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2772.blog-pic-3.png" alt="" border="0"></a><br></strong></p>  <ol>  <li>ソリューションエクスプローラーで、クラウドプロジェクトの Serviceconfiguration.cscfg &rdquo; ファイルを &ldquo; クリックします。<br><br>&nbsp;<a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3730.change-to-3.png" alt="" border="0"></a><br><br></li>  <li>丸で囲まれたエントリを 3 &rdquo; に &ldquo; 変更し、ファイルを保存します。</li>  </ol>  <div><strong>WebRole プロジェクトの .NET framework を .NET 4.5 に変更し、リビルドします。</strong></div>  <div><strong><br></strong></div>  </div>  <div style="padding-left: 30px;"><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2451.mid1.png" alt="" width="300"></a></div>  <div><ol>  <li style="text-align: left;"><span style="font-size: small;">WebRole プロジェクトを右クリックし、[ &ldquo; プロパティ &rdquo; ] をクリックして、WebRole プロジェクトのプロパティシートを開きます。<br><br><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6840.bog-fix-2.png" alt="" border="0"></a><br><br></span></li>  <li><span style="font-size: small;">&ldquo;[アプリケーション &rdquo; ] タブで、 &ldquo; [ターゲットフレームワーク &rdquo; ] ドロップダウンを探します。 .NET 4.0 が表示されます。 ドロップダウンを開き、[.NET 4.5] を選択します。 [ターゲットフレームワークの &ldquo; 変更 &rdquo; ] ダイアログボックスが表示されたら &rsquo; 、[はい &rdquo; ] をクリック &ldquo; して続行します。 ターゲットフレームワークが .NET 4.5 を読み取るようになりました<br></span></li>  <li><span style="font-size: small;">F6 キー &rsquo; を押し &lsquo; て再構築します。.NET 4.5 で導入されたいくつかの新しいライブラリ間で名前空間が競合するため、ビルドエラーが発生することがあります。これらは簡単に修正できます。できない場合は、コメントを自由に追加して &rsquo; 、応答します。</span></li>  </ol></div>  <div>  <p><strong>新しいアプリケーションをクラウドのステージングスロットにデプロイします。</strong></p>  <p>Visual Studio 内から、または Windows Azure Portal からデプロイできます。 このブログ &rsquo; では、ポータルを使用してデプロイする手順について説明します。</p>  </div>  <div style="padding-left: 30px;"><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8081.middle.png" alt="" border="0"></a></div>  <div><ol>  <li>&nbsp;クラウドプロジェクトを右クリックし、[パッケージ &hellip; &rdquo; ] オプションを選択 &ldquo; します。</li>  <li>&ldquo;ポップアップ表示されるダイアログボックスの [パッケージ &rdquo; ] ボタンをクリックします。</li>  <li>パッケージ化が完了すると、ファイルエクスプローラーウィンドウに、cspkg と .cscfg の2つのファイル &ndash; が表示されます。</li>  <li>Windows Azure portal に &nbsp; <a href="https://manage.windowsazure.com" target="_blank">https://manage.windowsazure.com</a> &nbsp; アクセスし、クラウドサービスを選択します。 [ステージング &rdquo; ] タブをクリックします (上の図では、 &ldquo; 赤で囲まれています)。<br><br>&nbsp;<a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3652.bottom2.png" alt="" border="0"></a><br><br></li>  <li>[ステージング] タブで、下のパネルの [更新 &rdquo; ] ボタンをクリックします (下図の図では &ldquo; 緑で囲まれています)。</li>  <li>&rsquo;手順 4. c で Visual Studio から生成した cspkg と .cscfg の入力を求めるダイアログボックスが表示されます。 両方の [ローカル &rdquo; から] ボタンを選択 &ldquo; し、手順 4.. c で生成されたファイルをアップロードします。 1つのインスタンスロールがある場合は、1つまたは複数のロールに単一のインスタンス &rdquo; が含まれている場合でも、 &ldquo; 更新を必ず確認してください。 次の図では、これらのオプションは赤で囲まれています。 [マークされた円のチェック] をクリックして続行します。</li>  <li>この時点で、アプリケーションは OS ファミリ3で実行され、ステージングスロットでは .NET 4.5、運用スロットでは OS ファミリ1/2 と .NET 4.0 を使用して元のアプリケーションが使用されます。</li>  </ol></div>  <div>  <p><strong>運用スロットとステージングスロットの VIP スワップを実行する</strong></p>  </div>  <div>  <p style="padding-left: 30px;"><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2783.bottom1.png" alt="" border="0"></a></p>  </div>  <div><ol>  <li>[運用] タブまたは [ステージング] タブで、[更新] ボタンの横にある下部パネルにある [スワップ &rdquo; ] ボタンをクリック &ldquo; します (付随する図では緑で囲まれています)。</li>  <li>この操作が完了すると、アプリケーションが OS ファミリ3で実行され、元のアプリケーションの代わりに .NET 4.5 が使用されるようになります。</li>  </ol></div>  <div>  <p><strong>クラウド内の既存のアプリケーションを削除します。</strong></p>  </div>  <div>  <p style="padding-left: 30px;"><a href="" target="_blank"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8461.bottom.png" alt="" border="0"></a></p>  </div>  <div><ol>  <li>Windows Azure portal に &nbsp; <a href="https://manage.windowsazure.com" target="_blank">https://manage.windowsazure.com</a> &nbsp; アクセスし、クラウドサービスを選択します。 下のパネルの [停止 &rdquo; ] ボタンを &ldquo; クリックします (付属の図では緑で囲まれています)。 ポップアップ表示されるダイアログボックスで [はい &rdquo; ] をクリックし &ldquo; ます。</li>  <li>アプリケーションが停止したら、[削除 &rdquo; ] ボタンをクリック &ldquo; して削除します (添付画像の赤い丸で囲まれています)。 ポップアップ表示されたサブメニューで、[運用環境のデプロイの &rdquo; &hellip; 削除] を選択 &ldquo; します。</li>  </ol>  <div>  <p>この投稿に関してご不明な点がある場合は、以下のコメントをお寄せください。または、Twitter &nbsp; <a href="https://twitter.com/avilay" target="_blank">@Avilay</a> でご連絡ください。&nbsp;</p>  <p>--Avilay&nbsp;</p>  <p>&nbsp;</p>  </div>  </div>'
