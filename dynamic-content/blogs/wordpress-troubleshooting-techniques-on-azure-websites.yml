### YamlMime:Yaml
ms.openlocfilehash: d80c347f4e292880158acf2533bad1656bded75e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890597"
Slug: wordpress-troubleshooting-techniques-on-azure-websites
Title: Azure Web サイトでの WordPress のトラブルシューティング手法
Summary: 'WordPress は、最も一般的に使用されるブログ エンジンの 1 つであり、Azure Web サイトで設定しようとするときに問題を解決するには非常に面倒な場合があります。 このブログ記事では、WordPress に関する一般的な問題とそれらを解決する方法について説明しました。 '
Content: "WordPress は、動的な Web サイトを構築するために Azure Websites ギャラリーで提供される一般的な Web アプリケーションの 1 つです。 WordPress Web サイトで問題が発生する可能性があります。トラブルシューティングが必要な場合があります。 この投稿では、いくつかの一般的な問題を確認し、それらを解決するための最適な手法について説明します。\n<h3>操作方法 WordPress サイトの PHP INI 構成を更新しますか?</h3>\nWordPress サイトでは、ユーザーが既定の制限である 8 MB を超える最大 12 MB のファイルをアップロードできるなど、アプリケーションの要件に基づいて PHP.INI に対する特定の変更が必要な場合があります。\n\nユーザー定義の PHP 構成を有効にするには、サイト ルート (D:\\home\\site\\wwwroot フォルダー) に <b><i>.user.ini</i></b> という名前のファイルを作成し、次を追加します。\n<pre>upload_max_filesize = 12M</pre>\n&nbsp;\n\n次に、Web サイトを再起動します。 変更が上書きされた場合は、次のテキストを含む<b><i> phpinfo.php </i></b>という名前の PHP ファイルを作成し、サイト ルート フォルダーに保存します。\n<pre>&lt;?php phpinfo(); ?&gt;</pre>\n&nbsp;\n\n次に、このファイルを参照し、次のupload_max_size。\n\n<img class=\"alignnone size-full wp-image-165361\" alt=\"phpinfo\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/phpinfo.png\" width=\"828\" height=\"226\" />\n<h3>メディア コンテンツ (uploads フォルダー) のサイズは 10 GB で、Web アプリケーションのサイズは 1 GB です。 どのレベルで十分なストレージが提供されますか?</h3>\n共有Storageサポートされているサイズは 1 GB、Basic は 10 GB、Standard は 50 GB です。 Web サイトのストレージを最大にする場合は、すべてのメディア コンテンツを <b>uploads</b> フォルダーに移動して Azure Storage (GB あたり 0.048 ドル) に移動し、<a href=\"https://wordpress.org/plugins/windows-azure-storage/\">Azure Storage</a> プラグインを使用して WordPress サイト内のメディア コンテンツを管理できます。 これにより、Web アプリケーションからメディア コンテンツを分離できます。\n\nまた、メディア コンテンツのAzure CDNに使用Azure Storageアカウントのエンドポイントを作成することもできます。 プラグインの設定ページに、CNAME プロパティ設定が表示されます。 ここで、名前を入力する必要があります (Azure CDNなど)。\n<img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/cname.png\" />\n<h3>WordPress サイトの SSL を設定する方法</h3>\nSSL サポートを提供するのは、Standard レベルと Basic レベルのみです。 Web サイトに SSL サポートを追加するには:\n<ul>\n <li>&lt;href=\"\"https://azure.microsoft.com/en-us/documentation/articles/web-sites-configure-ssl-certificate&gt;Azure Website の SSL サポートを構成する</li>\n <li><a href=\"https://make.wordpress.org/support/user-manual/web-publishing/https-for-wordpress/\">SSL を使用するために WordPress を更新する </a></li>\n</ul>\n<h3></h3>\n<h3>Azure Web サイトで mod-rewrite を使用できますか?</h3>\nAzure Websites では IIS Web サーバーが使用されます。そのため、Apache モジュールである mod_rewriteでは機能しません。 URL 書き換えモジュールは Azure Web サイトで既定で有効になっています。このモジュールを使用して、書き換え <b> 規則またはリダイレクト規則をweb.config。</b>\n\nサイト ルート <b>Web.config</b> ファイル (D:\\home\\site\\wwwroot) を開きます。 ディレクトリに新しいファイルWeb.config場合は、作成します。\n\n次の XML セクションをコピーして system.webServer 要素に貼り付けます。\n<pre>&lt;rewrite&gt;\n&lt;rules&gt;\n&lt;rule name=\"Main Rule\" stopProcessing=\"true\"&gt;\n&lt;match url=\".*\" /&gt;\n&lt;conditions logicalGrouping=\"MatchAll\"&gt;\n&lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsFile\" negate=\"true\" /&gt;\n&lt;add input=\"{REQUEST_FILENAME}\" matchType=\"IsDirectory\" negate=\"true\" /&gt;\n&lt;/conditions&gt;\n&lt;action type=\"Rewrite\" url=\"index.php\" /&gt;\n&lt;/rule&gt;\n&lt;/rules&gt;\n&lt;/rewrite&gt;</pre>\nこのルールは、要求された URL と一致します。URL がファイル システム上のファイルまたはフォルダーに対応していない場合、規則は URL を Index.php に書き換え、規則によって変更される前に元の URL を含む REQUEST_URI サーバー変数に基づいてサービスを提供するコンテンツを決定します。\n\nURL 書き換えルールの作成の詳細については、「10 URL の書き換えとヒント<a href=\"https://ruslany.net/2009/04/10-url-rewriting-tips-and-tricks/\">」を参照してください。</a>\n<h3>.woff ファイルに依存する要求の場合に 404.3 \"Mime Type missing\" エラーを解決する方法</h3>\nAzure Websites では、.woff 拡張機能は既定では有効になっていません。 WordPress または .woff ファイルを使用するアプリケーションを使用している場合は、サイトのルート フォルダーに web.config &lt;ファイルを含め、system.webServer セクションの下に次を追加&gt; します。\n<pre>&lt;configuration&gt;\n&lt;system.webServer&gt;\n&lt;staticContent&gt;\n   &lt;mimeMap fileExtension=\".woff\" mimeType=\"application/x-font-woff\" /&gt;     &lt;/staticContent&gt;\n&lt;/system.webServer&gt;\n&lt;/configuration&gt;</pre>\n次に、Web サイトを再起動します。\n<h3>Azure で実行されている WordPress サイトのページ読み込み時間が遅い場合を解決する方法</h3>\nWordPress サイトの速度が遅い場合は、以下を確認します。\n<ul>\n <li>Free レベルで実行していますか?</li>\n</ul>\n\"はい\" の場合、 <b>Free レベル</b> では、実稼働サイトを実行するのに十分ではな\"ため、Shared、Basic、または Standard レベルにアップグレードする必要があります。 各レベルでサポートされている機能を確認し、適切なレベル 、 <a href=\"https://azure.microsoft.com/en-us/pricing/details/web-sites/\">レベルあたりの Azure Websites の価格を選択します</a>。\n<ul>\n <li>Web サイトとデータベースは同じデータ センターにありますか?</li>\n</ul>\nWeb サイトが米国西部で設定され、データベースが米国東部で設定されている場合は 、これらの両方のコンポーネントが異なるデータセンターに存在し、データベース呼び出しのネットワーク待ち時間がページ読み込み時間に追加される可能性がある場合、Web サイトのパフォーマンスに影響する可能性があります。 Web サイトとデータベースが同じリージョン/データ センターに含けられていることを確認します。\n<ul>\n <li>無料の ClearDB MySQL データベースを使用していますか?</li>\n</ul>\nFree ClearDB MySQL データベースは、実稼働 Web サイトではありません。 <a href=\"https://www.cleardb.com/store/azure\">Azure の ClearDB プランとストア</a>から購入<a href=\"https://azure.microsoft.com/en-us/documentation/articles/store-php-create-mysql-database/\">する方法を確認してください</a>。\n<h3>操作方法 PHP エラーの診断を取得しますか?</h3>\nWeb サイトを使用すると、Web サーバーのログ記録、詳細なエラー メッセージ、失敗した要求トレースなどの Web サーバー診断を有効にできます。 エラー情報の取得の詳細については、 <a href=\"https://blogs.msdn.com/b/silverlining/archive/2012/10/16/getting-error-info-for-php-sites-in-windows-azure-web-sites.aspx\">Azure Web サイトの PHP 診断に関するページを参照してください。</a>\n\n新しいサービスとしての診断 (DaaS) では、これらのログを、問題の解決に役立つ方法で解釈するか、または説明的なガイダンスを提供します。 詳細については、「DaaS <a href=\"https://azure.microsoft.com/blog/2014/07/08/daas/\">– Azure Web サイトのサービスとしての診断」を参照してください。</a>\n<h3>高度な WordPress デバッグを有効にする方法</h3>\nWordPress には、WordPress サイトをデバッグするためのさまざまなオプションがあります。 WordPress では、WordPress サイトWP_DEBUG ON デバッグを有効にするために、定数を使用します。 既定では、 <b><i>wp-config.php ファイルではオフ</i></b> になっています\n<pre>define('WP_DEBUG', false);</pre>\n有効にするには、TRUE に設定する必要があります\n<pre>define('WP_DEBUG', true);</pre>\n<strong><em>問題をデバッグした後は、デバッグをオフにする必要があります。</em></strong> WordPress のデバッグの詳細なオプションについては、「WordPress での <a href=\"https://codex.wordpress.org/Debugging_in_WordPress\">デバッグ」を参照してください</a>。\n<h3>操作方法 WordPress サイトで電子メール サービスを有効にしますか?</h3>\nAzure Websites は電子メール/SMTP をサポートしていないので、Azure Store から SendGrid を購入する必要があります。 SendGrid には <b>無料</b> プラン (1 か月あたり最大 25,000 メール) が用意されています。これは WordPress サイトで十分な場合があります。 無料プランがニーズを満たしていない場合は<a href=\"https://azure.microsoft.com/en-us/gallery/store/sendgrid/sendgrid-azure/\">、Azure 向</a>け SendGrid プランの詳細については、こちらを参照してください。<b> </b>\n\n詳細については、「 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/store-sendgrid-php-how-to-send-email/\">SendGrid 電子メール サービスを使用する方法」を参照してください</a>。\n<h3>操作方法 WordPress サイトをバックアップして復元しますか?</h3>\nAzure Websites には、自動バックアップと復元機能が用意されています。 詳細については、「Azure Web サイト <a href=\"https://azure.microsoft.com/en-us/documentation/articles/web-sites-backup/\">をバックアップする方法」と「Azure Web</a> サイトを復元 <a href=\"https://azure.microsoft.com/en-us/documentation/articles/web-sites-restore/\">する方法」を参照してください</a>。\n<h3>WordPress サイトをオンラインで編集できますか?</h3>\nWeb サイトには、Web サイトの優れた機能を備えるオンライン エディター Visual Studio。 詳細については、「Edit Azure Website online with Monaco」を参照してください。\n<h3>WordPress でデータベース接続を確立するエラーを修正する方法</h3>\nWordPress でデータベース接続を確立できない場合、このエラーが発生します。 問題が発生する理由は次のとおりです。\n<ul>\n <li><b>wp-config.php ファイル内のデータベース情報が正しくない可能性があります </b></li>\n</ul>\nこれを確認するには、MySQL クライアントを使用して <b>wp-config.php</b> の情報を使用してデータベースにアクセスします。\n<ul>\n <li><b>WordPress サイトのフロントエンドとバック エンドの両方が異なるエラーを返すのを確認します</b></li>\n</ul>\nたとえば、wp-admin ページで別のエラーが発生する場合は、\"1 つ以上のデータベース テーブルが使用できません。 データベースを修復する必要がある場合があります。その後、データベースを修復する必要があります。 これを行うには、次の wp-config.php ファイルを追加します。\n<pre>define('WP_ALLOW_REPAIR', true);</pre>\n完了すると、次のページにアクセスして設定を確認できます。 <strong></strong>\n\nこの定義が設定されている場合、ユーザーはこの機能にアクセスするためにログインする必要があります。 これは、破損したデータベースを修復する主な目的のためです。データベースが破損している場合、ユーザーはログインできない場合がよくあります。 そのため、データベースの修復と最適化が完了したら、wp-config.php からこれを削除してください。\n<ul>\n <li><b><i>wp-config.php ファイル</i></b><b> が破損している可能性があります</b></li>\n</ul>\nファイルの最後に変更されたタイム スタンプが変更された場合に、wp-config.php ファイルを再タッチします。\n<ul>\n <li><b>サイトのユーザー負荷が高いときに、このエラーが断続的に発生する場合 </b></li>\n</ul>\n常<a title=\"に Azure Web サイトでベスト プラクティスとして、WordPress サイトの WordpressPersistent\" href=\"https://wordpress.org/plugins/persistent-database-connection-updater/\" target=\"_blank\"></a> 接続アダプター プラグインに永続的な接続アダプターを使用します。\n<ul>\n <li><b>Web サイト サービスがデータベースに接続できるのか確認する </b></li>\n</ul>\nデータベースに接続できる場合は、 <strong>testdbconnection.php</strong> という名前の新しいファイルを作成し、次のコードを貼り付けます。\n<pre>&lt;?php\n//Modify the hostname, user, password for mysql_connect with the your\n//database connection information\n$link = mysql_connect('localhost', 'username', 'password');\nif (!$link) {\ndie('Could not connect: ' . mysql_error());\n}\necho 'Connected successfully';\nmysql_close($link);\n?&gt;</pre>\nブラウザーでこのページを実行します。Web サイト サービスがデータベースに接続できるよりも\"接続が正常に完了しました\" というメッセージが表示される場合。 問題の原因を特定するために MySQL エラーを読み取るよりも \"接続できない\" というメッセージが表示される場合。 [接続 <a href=\"https://azure.microsoft.com/en-us/support/options/\">Azure サポート </a> まだ表示され、解決できない場合は、この問題に問い合わせください。\n<h3>エラー \"1203 SQLSTATE: 42000 (ER_TOO_MANY_USER_CONNECTIONS)\" を解決する方法</h3>\nこれは、 を使用している MySQL サーバーによって異なります。\n<ul>\n <li>ClearDB MySQL データベースを使用している場合は、使用しているデータベース プラン <i>に</i> 基max_user_connectionsのデータベースのデータベースの作成に制限があります。 詳細については、Azure 用 <a title=\"ClearDB MySQL に関するページを参照\" href=\"https://www.cleardb.com/store/azure\" target=\"_blank\">してください</a>。 制限に達すると、このエラーが発生します。そのため、このアップグレードを解決するには、データベース プランをアップグレードします。</li>\n</ul>\n<ul>\n <li>MySQL Azure VM を使用して WordPress サイトのデータベースをホストしている場合は、my.ini (Windows Machine) または my.cnf (Linux マシン) の構成を編集します</li>\n</ul>\n<pre>max_connections = 250</pre>\nこの値max_connections大きすぎると、MySQL サーバーがクラッシュし、\"メモリが切れ\" エラーが発生します。 MySQL サーバー VM の RAM に応じて、この値を慎重に選択します。\n<h3>操作方法のページを解決しますか?</h3>\nWeb サイトにアクセスするときにホワイト スクリーンまたは空白のページが表示される場合、原因はプラグインまたはテーマに関連する問題である可能性があります。 この問題の原因となっているテーマまたはプラグインを分離してみてください。 ステップ バイ ステップ ガイドは、こちらを参照してください。\n<h3>操作方法メモリ サイズが使い果たされたエラーを解決するには?</h3>\n既定の制限は 128 MB です。 メモリ制限は、次のいずれかを使用して増やします。\n<ul>\n <li>これを wp-config.php に追加します。\n<pre>define('WP_MEMORY_LIMIT', '128M');</pre>\n</li>\n <li>サイト ルート (D:\\home\\site\\wwwroot) に .user.ini を追加します。\n<pre>memory_limit=256M</pre>\nWeb サイトを再起動します。</li>\n</ul>\n&nbsp;\n<h3>Azure Web サイトの機能またはドキュメントに関するフィードバックを共有したい</h3>\n追加または不足しているドキュメントまたは新規/既存の機能に関するフィードバックは、エンジニアリング チームの User <a href=\"https://feedback.azure.com/forums/169385-web-sites\">voiceRelated</a>\n\n<b></b> \n\n<a href=\"https://codex.wordpress.org/Troubleshooting\">LinksWordPress Troubleshooting</a> \n<a href=\"https://wordpress.org/support/\">GuideWordPress サポートで共有できます</a>"
