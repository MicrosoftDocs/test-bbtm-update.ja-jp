### YamlMime:Yaml
ms.openlocfilehash: 5a1990af7e3d8698d67f4d36ff629b26bc6f9420
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904921"
Slug: boot-diagnostics-for-virtual-machines-v2
Title: v2 のブートVirtual Machines診断
Summary: 2 つのデバッグ機能のサポートを発表しました:コンソール出力と Azure Virtual Machines のスクリーンショットのサポート。
Content: >-
  <p>本日、&rsquo;2 つのデバッグ機能 (コンソール出力と Azure Virtual Machines v2 のスクリーンショットのサポート) のサポートをお知らせします。 独自のイメージを Azure に導入した場合に限らず、いずれかのプラットフォーム イメージをブートするときでも、仮想マシンは、さまざまな理由で起動できない状態に陥ることがあります。 これらの機能を利用することで仮想マシンを簡単に診断し、起動エラーから復旧することができます。</p>


  <p>Linux 仮想マシンについては、コンソール ログの出力をポータルから簡単に表示することができます。</p>


  <p><img alt="image" border="0" height="322" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2494d841-2fe6-4272-b7e8-4b0e70591250.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="image" width="614"></p>


  <p>一方、Windows 仮想マシンと Linux 仮想マシンの両方に関して、ハイパーバイザーからの VM のスクリーンショットを表示することもできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a440ef53-2270-4c24-8fd7-e180c72bad75.png"><img alt="windowsBootFailure" border="0" height="138" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/342296be-1eb3-4b53-8a23-af1f781efdc9.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="windowsBootFailure" width="614"></a></p>


  <h2>新しい仮想マシンで診断を有効にする</h2>


  <p>プレビュー ポータルから新しい Virtual Machine v2 を作成 <a href="https://portal.azure.com">する</a>場合は、デプロイ モデルAzure Resource Managerから新しい仮想マシンを選択します。</p>


  <p><img alt="stackSelector" border="0" height="150" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/84491819-3971-42b3-ae8b-9d037edf382c.jpg" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="stackSelector" width="432"></p>


  <p>&nbsp;</p>


  <p>[監視] のオプションを構成し、これらの診断ファイルの格納先となるストレージ アカウントを選択します。</p>


  <p><img alt="enableMonitoring" border="0" height="772" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8fbdd804-a299-4274-9bc9-c9714f0859dc.jpg" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="enableMonitoring" width="549"></p>


  <p>&nbsp;</p>


  <p>仮想マシン テンプレートからデプロイする場合Azure Resource Manager仮想マシン リソースに移動し、診断プロファイル セクションを追加します。 &ldquo;2015-06-15 API バージョン ヘッダーを使用&rdquo;してください。</p>


  <pre class="prettyprint">

  {
        &quot;apiVersion&quot;: &quot;2015-06-15&quot;,
        &quot;type&quot;: &quot;Microsoft.Compute/virtualMachines&quot;,
        &hellip; </pre>

  <p>これらのログの格納先となるストレージ アカウントは、診断プロファイルによって選択することができます。</p>


  <pre class="prettyprint">
          &quot;diagnosticsProfile&quot;: {
            &quot;bootDiagnostics&quot;: {
              &quot;enabled&quot;: true,
              &quot;storageUri&quot;: &quot;[concat(&#39;https://&#39;, parameters(&#39;newStorageAccountName&#39;), &#39;.blob.core.windows.net&#39;)]&quot;
            }
          }
        }
      }</pre>

  <p>ブート診断が有効になっているサンプルの仮想マシンをデプロイするには、こちらにあるレポポを確認 <a href="https://github.com/Azure/azure-quickstart-templates/tree/master/101-linux-vm-serial-output">してください</a>。</p>


  <h2>既存の仮想マシンを更新する</h2>


  <p>ポータルを使用して既存の V2 仮想マシンを更新し、ポータルからブート診断を有効にすることもできます。 [ブート診断] オプションを選択し、[保存] を選択します。 VM を再起動すると変更が反映されます。</p>


  <p><img alt="image" border="0" height="513" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/adc6f6f3-968a-4ea6-ba75-5ffdfaeacebf.png" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" title="image" width="614"></p>


  <h2>サポート</h2>


  <p>これらの機能はどちらも、すべてのリージョンで Azure Virtual Machines v2 でサポートされています。 スクリーンショットと出力結果がストレージ アカウントに表示されるまでに最大 10 分かかる場合があります。</p>
