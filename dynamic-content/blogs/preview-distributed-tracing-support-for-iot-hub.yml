### YamlMime:Yaml
ms.openlocfilehash: e8007c40df2e720be1e5b3ac875045daae910c10
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139897057"
Slug: preview-distributed-tracing-support-for-iot-hub
Title: プレビュー:分散トレースでの分散トレースのIoT Hub
Summary: このアーキテクチャの参照アーキテクチャを含むほとんどの IoT Azure IoT、いくつかの異なるサービスを使用します。 デバイスから始まる IoT メッセージは、格納または視覚化される前に、12 つ以上のサービスを通過する可能性があります。
Content: >-
  <p>このアーキテクチャの参照アーキテクチャを含む<a href="https://aka.ms/iotrefarchitecture" target="_blank">ほとんどの IoT Azure IoT、</a>いくつかの異なるサービスを使用します。 デバイスから始まる IoT メッセージは、格納または視覚化される前に、12 つ以上のサービスを通過する可能性があります。 このフローで問題が発生した場合、問題を特定するのはとても困難な場合があります。 メッセージが削除される場所を知る方法 たとえば、5 つの異なる Azure サービスと 1,500 台のアクティブ なデバイスを使用する IoT ソリューションがあります。 各デバイスは 1 秒に 10 個の device-to-cloud メッセージを送信します (合計 15,000 メッセージ/秒) が、Web アプリには 10,000 メッセージ/秒しか表示されません。 どこに問題がありますか。 どのようにして原因を見つけることができるのでしょうか。</p>


  <p>一意の識別子を使用してパスをIoT Hubメッセージのフローを完全に理解するには、&#39;パスをトレースする必要があります。 このプロセスは分散トレース<a href="https://docs.microsoft.com/azure/architecture/microservices/logging-monitoring#distributed-tracing" target="_blank">と呼ばれる。</a> 本日は、&#39;プレビューで、IoT Hubの分散トレースのサポートを発表します。</p>


  <h2>概要の分散トレースのサポートに関するIoT Hub</h2>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ec768037-dd53-46ab-8269-80e6f7a631a9.png"><img alt="Distributed tracing support for Azure IoT Hub" border="0" height="360" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c0ca470e-93f1-4689-af55-f924ec1c6349.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Azure IoT Hub の分散トレースのサポート" width="1024"></a></p>


  <p>この機能を使うと、次のことができます。</p>


  <ul>
   <li><a href="https://github.com/w3c/trace-context" target="_blank">トレース コンテキスト</a>を使用して、IoT Hub を介した各メッセージの流れを正確に監視できます。 このトレース コンテキストには、あるコンポーネントからのイベントを別のコンポーネントからのイベントに関連付けることができる関連付け ID が含まれています。 これは、<a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-device-twins" target="_blank">デバイス ツイン</a>を使用して、サブセットまたはすべての IoT デバイス メッセージに適用できます。</li>
   <li>トレース コンテキストを自動的に <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-monitor-resource-health" target="_blank">Azure Monitor 診断ログ</a>に記録できます。</li>
   <li>デバイスから IoT Hub およびルーティング エンドポイントまでのメッセージ フローと待ち時間を測定および把握できます。</li>
   <li>ご使用の IoT ソリューション内の Azure 以外のサービスに対して分散トレースをどのように実装するか、検討を開始できます。</li>
  </ul>


  <p>パブリック プレビューでは、この機能は、一部のリージョンで作成された IoT Hub で <a href="https://aka.ms/iottracingregions" target="_blank">使用できます</a>。</p>


  <p>作業を開始するには:</p>


  <ul>
   <li>「分散トレース (プレビュー &ldquo;<a href="https://docs.microsoft.com/azure/iot-hub/iot-hub-distributed-tracing" target="_blank">Azure IoTデバイスからクラウドへのメッセージをトレースする」のドキュメントに従ってください</a>。&rdquo;</li>
   <li><a href="https://github.com/Azure-Samples/azure-iot-distributed-tracing-sample" target="_blank">C サンプル コードを確認してください</a>。</li>
   <li><a href="https://feedback.azure.com/forums/321918-azure-iot/filters/hot" target="_blank">UserVoice からフィードバックをお寄せください</a>。</li>
  </ul>
