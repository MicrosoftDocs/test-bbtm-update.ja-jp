### YamlMime:Yaml
ms.openlocfilehash: 1c7f5c97524ebaea0f3c207ac4aa8b7a9f4f03e3
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890775"
Slug: how-to-install-spark-1-2-on-azure-hdinsight-clusters
Title: Azure HDInsight クラスターに Spark 1.2 をインストールする方法
Summary: '本日、Azure HDInsight クラスターでの Apache Spark サポートの更新についてお知らせします。 '
Content: >-
  <p><strong>5/2/2016 の更新プログラム:</strong> Azure HDInsight では、すぐに Apache Spark がサポートされるようになりました。 詳細について <a href="https://azure.microsoft.com/en-us/documentation/articles/hdinsight-apache-spark-overview/">は、こちら</a>を参照してください。</p>


  <hr>

  <p>本日、Azure HDInsight クラスターでの Apache Spark サポートの更新についてお知らせします。 Spark はカスタムスクリプトアクション &nbsp; を通じて HDInsight で利用できます。現在、spark 1.2 の最新バージョンをサポート &nbsp; するように更新し &nbsp; ています。 以前のバージョンでは、バージョン1.0 がサポートされていました。 この更新により、Spark SQL サポートもパッケージに追加されます。 Spark 1.2 スクリプトアクションには、HDInsight クラスター3.2 の最新バージョンが必要です。 以前の HDInsight クラスターでは、Spark スクリプトアクションを使用してカスタマイズした場合、以前のバージョンの Spark 1.0 を取得します。 Azure ポータルを使用して Spark クラスターを作成するには、次の手順に従います。</p>


  <ul>
   <li>[カスタム作成] オプションを使用して、新しい HDinsight Hadoop クラスター (他のクラスターの種類もサポートされています) を選択します。</li>
   <li>クラスターのバージョン3.2 を選択します。</li>
   <li>&nbsp;ウィザードの &nbsp; 残りの手順を完了して、 &rsquo; ストレージアカウントやその他の構成などのクラスター名を指定します。</li>
   <li>構成ウィザードの最後の手順で、Spark スクリプトアクション &nbsp; <a href="https://hdiconfigactions.blob.core.windows.net/sparkconfigactionv03/spark-installer-v03.ps1" title="">https://hdiconfigactions.blob.core.windows.net/sparkconfigactionv03/spark-installer-v03.ps1</a> を追加 &nbsp; します。</li>
  </ul>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/12/hdi-spark-script-action.png"><img alt="hdi-spark-script-action" class="alignnone size-medium wp-image-264271" height="369" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/hdi-spark-script-action-615x369.png" width="615"></a></p>


  <ul>
   <li>&nbsp;チェックマークをクリックしてクラスターを作成 &nbsp; します。 操作が完了すると、HDInsight クラスターに Spark 1.2 がインストールされます。</li>
  </ul>


  <h1>spark シェルでの spark SQL クエリの実行</h1>


  <p>新しいバージョンの Spark パッケージには、Spark SQL が含まれています。 spark SQL を使用すると、spark を使用して、SQL、HiveQL、またはスケール a で表現されたリレーショナルクエリを実行できます。 この機能を使用して、Spark シェルで Hive クエリを実行 &nbsp; できます。</p>


  <ol>
   <li>クラスターにリモートデスクトップ接続を開きます。 手順については、「 <a href="https://azure.microsoft.com/documentation/articles/hdinsight-administer-use-management-portal/#rdp">RDP を使用した HDInsight クラスターへの接続</a>」をご覧ください。</li>
   <li>デスクトップショートカットを使用して &nbsp; Hadoop コマンドラインを開き、Spark がインストールされている場所 (C:\apps\dist\spark-1.2.0.) に移動します。</li>
   <li>次のコマンドを実行して、Spark シェルを起動します。</li>
  </ol>


  <blockquote>&nbsp;<span class="pun">.</span><span class="pln">\ spark</span> <span class="pun">-</span> <span class="pln">シェル &minus; &minus; </span><span class="pln">マスター yarn</span> <span class="kwd">の</span> <span class="pln">\b</span></blockquote>


  <ol start="4">
   <li>Scala プロンプトで Hive のコンテキストを設定します。 これは、Spark を使用して Hive クエリを操作するために必要です。</li>
  </ol>


  <blockquote>val hiveContext = 新しい組織....... .sql... .sql</blockquote>


  <ol start="5">
   <li>Hive クエリを実行し、出力をコンソールに出力します。 このクエリは、すべての HDInsight クラスターに存在するサンプルの Hive テーブルからデータを取得します。 &nbsp;特定のメーカーのデバイスに対してクエリ &nbsp; を実行し、取得されるレコードの数を20に制限します。 三重引用符は、文字列内に引用符を埋め込むことができるようにするため &nbsp; の構文です &nbsp; 。</li>
  </ol>


  <blockquote>hivecontext .sql ( &quot; &quot; &quot; SELECT * FROM hivesampletable WHERE devicemake LIKE &quot; HTC% &quot; LIMIT 20 &quot; &quot; &quot; ). collect (). foreach (println)</blockquote>


  <ol start="6">
   <li>出力は次のように表示されます。</li>
  </ol>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/03/12/hdi-scala-interactive.png"><img alt="hdi-scala-interactive" class="alignnone size-medium wp-image-264341" height="307" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/hdi-scala-interactive-636x307.png" width="636"></a> インストール手順と Spark の使用方法の詳細については、以下のドキュメントリンクを参照してください。 &nbsp;スクリプトアクションを使用して R、Giraph をインストールしたり、独自のものを作成したりすることもできます。</p>


  <ul>
   <li><a href="https://azure.microsoft.com/en-us/documentation/articles/hdinsight-hadoop-spark-install/">HDInsight クラスターに Spark をインストール</a>します。</li>
   <li><a href="https://azure.microsoft.com/en-us/documentation/articles/hdinsight-hadoop-r-scripts/">HDInsight クラスターに R をインストールする</a>。</li>
   <li><a href="https://azure.microsoft.com/en-us/documentation/articles/hdinsight-hadoop-solr-install">HDInsight クラスターにインストールして使用</a>します。</li>
   <li><a href="https://azure.microsoft.com/en-us/documentation/articles/hdinsight-hadoop-giraph-install">HDInsight クラスターに Giraph をインストールして使用</a>します。</li>
   <li><a href="https://azure.microsoft.com/en-us/documentation/articles/hdinsight-hadoop-script-actions/">独自のスクリプトアクションを作成</a>します。</li>
  </ul>
