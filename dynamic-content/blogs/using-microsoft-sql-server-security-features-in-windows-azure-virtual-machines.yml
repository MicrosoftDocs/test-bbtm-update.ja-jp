### YamlMime:Yaml
ms.openlocfilehash: 7de073b1cffb3b3f445df0adbc3c78bc11946412
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895261"
Slug: using-microsoft-sql-server-security-features-in-windows-azure-virtual-machines
Title: Windows Azure Virtual Machines の Microsoft SQL Server のセキュリティ機能の使用
Summary: 'Editor のメモ: &nbsp; この投稿は、SQL Server チームのシニアプログラムマネージャー Sung hsueh からのものです。 &nbsp; SQL Server を使用するための最新の方法の1つは、Microsoft &rsquo; Windows Azure...'
Content: '<p><strong>エディターのメモ: &nbsp; </strong><span>この投稿は、SQL Server チームのシニアプログラムマネージャー Sung hsueh からのものです。 &nbsp; </span></p>  <p>SQL Server を使用するための最新の方法の1つは、Microsoft &rsquo; Windows azure インフラストラクチャサービスを活用し、SQL Server をホストする Windows azure Virtual Machines を作成することです。 &nbsp;コンプライアンス要件を持つアプリケーションであっても、この環境を利用する可能性については、既に Sung &rsquo; s のブログ投稿 ( <a href="" target="_blank"></a> ) をご覧になっている可能性があります。 &nbsp;SQL Server 2008 R2 enterprise edition と SQL Server 2012 enterprise edition を Windows Azure Virtual Machines で利用できるようになったので、Enterprise Audit などの SQL Server レベルの機能を利用できるようになりました。Azure Virtual Machines Windows、事前構成済み、すぐにデプロイ可能、分単位の課金の Transparent Data Encryption。 &nbsp;もちろん、これらの機能を利用するには、ライセンスモビリティ ( <a href="https://www.microsoft.com/licensing/software-assurance/license-mobility.aspx" target="_blank">https://www.microsoft.com/licensing/software-assurance/license-mobility.aspx</a> ) を使用して既存のソフトウェアアシュアランスや Enterprise Agreement ライセンスを譲渡することもできます。分単位の課金では、この方法をお勧めします。</p>  <h4><strong>Windows Azure Virtual Machines の SQL Server での tde の使用</strong></h4>  <p>Transparent Data Encryption ( <a href="https://msdn.microsoft.com/en-us/library/bb934049.aspx" target="_blank">https://msdn.microsoft.com/en-us/library/bb934049.aspx</a> ) の簡単なチュートリアルを実行して、すべての機能を確認してみましょう &rsquo; 。 &nbsp;&rsquo;まだインストールしていない場合は、Windows azure 管理ポータルを使用して SQL Server 既にインストールされている Windows azure 仮想マシンを作成します。</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5001.teched1.png" alt="" border="0"></p>  <p>いくつかのデータベースの作成を開始します。</p>  <p>暗号化を追加するデータベースがある場合、次のいくつかの手順は、ローカルで SQL Server を実行している場合と同じです。</p>  <ol>  <li>Master にオブジェクトを作成できるユーザーの資格情報を使用してコンピューターにログインします。</li>  <li>Master で次の DDL を実行します ( &ldquo; master &rdquo; を使用します)。<br>  <p>[パスワードでマスターキーを暗号化する = &lsquo; &lt; ここ &gt; &rsquo; にパスワードを入力します。</p>  <p>Go</p>  <p>SUBJECT = &lsquo; MY TDE certificate &rsquo; の証明書 TDESERVERCERT を作成します。</p>  <p>Go</p>  </li>  <li>  <p>証明書をバックアップします (暗号化されたデータベース用に作成するバックアップやスナップショットなどのデータベースにアクセスするために必要となるので、この安全性を確保する必要があります)。これにより、証明書 &rsquo; の公開キーを含む2つのファイルと、秘密キーを含むファイルが作成されることに注意してください。両方のファイルが必要になります。 &nbsp; 証明書のバックアップの詳細については、 <a href="https://technet.microsoft.com/en-us/library/ms178578.aspx" target="_blank">こちら</a>を参照してください。</p>  <p>BACKUP CERTIFICATE TDEServerCert TO FILE = &lsquo; &lt; 公開キーのバックアップファイルパス&gt;&rsquo;</p>  <p>&nbsp;&nbsp; &nbsp; &nbsp;秘密キーを使用 (</p>  <p>&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp;ファイル = &lsquo; &lt;秘密キー &gt; &rsquo; のバックアップファイルのパス。</p>  <p>&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;&nbsp;パスワードによる暗号化 = &lsquo; &lt;秘密キーファイルの暗号化用の新しいパスワード&gt;&rsquo;</p>  <p>&nbsp; &nbsp; &nbsp; &nbsp; );</p>  </li>  <li>暗号化するデータベースに切り替えます。</li>  <li>次の DDL を実行します。</li>  </ol>  <p style="padding-left: 30px;">CREATE DATABASE ENCRYPTION KEY WITH ALGORITHM = AES_256 ENCRYPTION BY SERVER CERTIFICATE TDEServerCert;</p>  <p style="padding-left: 30px;">Go</p>  <p style="padding-left: 30px;">ALTER DATABASE [your_database_name] 暗号化をオンに設定します。</p>  <p style="padding-left: 30px;">Go</p>  <p>これで完了です &rsquo; &nbsp; 。暗号化はバックグラウンドで実行されます (これは sys.dm_database_encryption_keys に対してクエリを実行することで確認できます)。 オンプレミスの SQL Server インスタンスとまったく同じです。 &nbsp;同様に、SQL Server Audit ( <a href="https://msdn.microsoft.com/en-us/library/cc280386.aspx" target="_blank">https://msdn.microsoft.com/en-us/library/cc280386.aspx</a> ) をオンプレミスで既に使用している方法とまったく同じように使用することもできます。</p>  <h4>セキュリティに関するその他の考慮事項</h4>  <p>他にもいくつか注意すべき点があります。セキュリティのベストプラクティス ( <a href="https://msdn.microsoft.com/library/windowsazure/dn133147.aspx" target="_blank">https://msdn.microsoft.com/library/windowsazure/dn133147.aspx</a> ) に従ってください。 考慮すべきいくつかのトピックは次のとおりです。</p>  <ul>  <li>不要なサービスを無効にして、セキュリティでセキュリティを低下させる</li>  <li>ポリシーベースの管理を活用して脆弱なアルゴリズムを使用するなどのセキュリティ条件を検出する</li>  <li>可能な限り最小限のアクセス許可を使用し、可能であれば sa や sysadmin などのビルトインアカウントまたはグループを使用しないようにします。管理操作の追跡に SQL Server 監査を使用することを検討する</li>  <li>暗号化機能の使用を計画している場合は、サービスマスターキーで始まるキーエージング/ローテーションポリシーを作成することを検討してください。</li>  <li>Windows Azure のパブリックエンドポイント経由で SQL Server に接続する場合は、特に SSL 暗号化を使用することを検討してください。</li>  <li>Windows Azure のパブリックエンドポイント経由で SQL Server に接続している場合 (理想的には、パブリックインターネットから SQL Server インスタンスへの外部接続を使用しないことをお勧めします)、既定のインスタンスのポート SQL Server 1433 使用するポートを別のものに変更することを検討してください。&nbsp;</li>  </ul>  <h4><strong><em>最後に&hellip;</em></strong></h4>  <p>Windows azure Virtual Machines で SQL Server enterprise edition を実行すると、既存のアプリケーションのセキュリティのベストプラクティスと専門知識を活用し、Microsoft &rsquo; の Windows Azure を利用してクラウドでアプリケーションを実行し、分単位の課金オプションを使用して (Enterprise! を含む) 使用した分だけ支払いを行うことができます。 &nbsp; 試してみてください。ご意見をお聞かせください。</p>'
