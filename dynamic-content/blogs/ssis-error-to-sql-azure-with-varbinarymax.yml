### YamlMime:Yaml
ms.openlocfilehash: bc2ea11b357baf7096c43192c3b5ab0f9f156d8a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892179"
Slug: ssis-error-to-sql-azure-with-varbinarymax
Title: varbinary(max) でSQL Azure SSIS エラー
Summary: '[この記事は、チームによってSQL Azureされました。]SQL Server 2008 R2 にある SQL Server インポートおよびエクスポート ウィザードを使用して SQL Azure にデータをエクスポートすると、問題が発生しているのに気づきました。'
Content: '<p>[この記事は、チームによってSQL Azureされました。]</p><p>SQL Server 2008 R2 にある SQL Server インポートおよびエクスポート ウィザードを使用して SQL Azure にデータをエクスポートすると、<b>varbinary(max)</b> のデータ型である列で問題が発生しているのに気付いた。 この記事では、発生した問題を解決する方法について説明します。この問題が役立ちます。 </p>  <h2>問題</h2>  <p>SQL Server インポートおよびエクスポート ウィザードを使用する場合、<b>sqlServer </b>データ ソース用の .NET Framework Data Provider を使用して SQL Azure に接続し、SQL Server Native Client <b>10.0</b> データ ソースを使用してローカル サーバーに接続しました。 ローカル サーバーからローカル サーバーにエクスポートSQL Azure。 このブログ記事では、インポートおよびエクスポート ウィザードSQL Server使用するプロセスについて説明しました。</p>  <p><b>varbinary(max)</b> 列を持つ特定のテーブルをエクスポートするときに、SQL Server インポートおよびエクスポート ウィザード (SSIS を使用) は赤いアイコン (エクスポートできない重大なエラー) をスローしました。<b>これは、sqlServer の .NET Framework Data Provider</b> で <b>varbinary(max)</b> 列を変換する方法がわからなかったためです。 私が受け取っていたエラーは次でした。</p>  <p><span style="color: #ff0000">SSIS 型: (型不明 ...)</span></p>  <p><a href=""><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="clip_image002" border="0" alt="clip_image002" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3438.clip_5F00_image002_5F00_thumb_5F00_4A817EC7.jpg" width="527" height="535"></a></p>  <h2>背景</h2>  <p>SSIS が 2 つの異なるデータ ソース間を移動する場合は、1 つのデータ ソースのデータ型を別のデータ ソースに変換する必要があります。 これを行うには、C:\Program Files\Microsoft SQL Server\100\DTS\MappingFiles にある一連のマッピング ファイルが使用されます。 私の場合に関係する 2 つのファイルは、SqlClientToSSIS.xmlとMSSQLToSSIS10.xml。 このSqlClientToSSIS.xml、<b>.NET Framework Data Provider for SqlServer </b>データ ソースがデータ型を変換するために使用され、SQL Server Native Client <b>10.0</b> データ ソースで MSSQLToSSIS10.xml が使用されています。</p>  <h2>ソリューション</h2>  <p>SQL Server 2008 R2 リリースでは、MSSQLToSSIS10.xml ファイルには varbinarymax (dtm:DataTypeName 要素) の定義があります。 ただし、SqlClientToSSIS.xmlには varbinarymax の定義が含まれているわけではありません。 これにより、SSIS は、これら 2 つのプロバイダー間でデータを移動するときに、このデータ型をマップできません。 解決策は、この定義を次のファイルにSqlClientToSSIS.xmlでした。</p>  <pre class="csharpcode">  <span class="rem">&lt;!-- varbinary (max) --&gt;</span>    <span class="kwrd">&lt;</span><span class="html">dtm:DataTypeMapping</span> <span class="kwrd">&gt;</span>      <span class="kwrd">&lt;</span><span class="html">dtm:SourceDataType</span><span class="kwrd">&gt;</span>        <span class="kwrd">&lt;</span><span class="html">dtm:DataTypeName</span><span class="kwrd">&gt;</span>varbinarymax<span class="kwrd">&lt;/</span><span class="html">dtm:DataTypeName</span><span class="kwrd">&gt;</span>      <span class="kwrd">&lt;/</span><span class="html">dtm:SourceDataType</span><span class="kwrd">&gt;</span>      <span class="kwrd">&lt;</span><span class="html">dtm:DestinationDataType</span><span class="kwrd">&gt;</span>        <span class="kwrd">&lt;</span><span class="html">dtm:SimpleType</span><span class="kwrd">&gt;</span>          <span class="kwrd">&lt;</span><span class="html">dtm:DataTypeName</span><span class="kwrd">&gt;</span>DT_IMAGE<span class="kwrd">&lt;/</span><span class="html">dtm:DataTypeName</span><span class="kwrd">&gt;</span>        <span class="kwrd">&lt;/</span><span class="html">dtm:SimpleType</span><span class="kwrd">&gt;</span>      <span class="kwrd">&lt;/</span><span class="html">dtm:DestinationDataType</span><span class="kwrd">&gt;</span>    <span class="kwrd">&lt;/</span><span class="html">dtm:DataTypeMapping</span><span class="kwrd">&gt;</span> </pre>      <p>注: 変更が可能なSqlClientToSSIS.xmlエクスプローラー Windows書き込みアクセス許可を自分自身に付与する必要があります。</p>    <p>質問、懸念事項、コメントはありますか? 以下に投稿すると、対処を試みることができます。</p>'
