### YamlMime:Yaml
ms.openlocfilehash: dd7ea0a0018afc93c660591f51e72533a4bf925a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892501"
Slug: sharing-provisioned-throughput-across-multiple-containers-in-azure-cosmosdb
Title: 'Azure #CosmosDB で複数のコンテナー間でプロビジョニングされたスループットを共有する'
Summary: Azure Cosmos DB は、Microsoft のミッションクリティカル アプリケーション向けグローバル分散型マルチモデル データベース サービスです。
Content: >-
  <p><a href="https://azure.microsoft.com/en-us/services/cosmos-db/" target="_blank">Azure Cosmos DB</a> は、ミッション クリティカル&#39;アプリケーション向け、グローバルに分散されたマルチモデル データベース サービスである Microsoft のサービスです。 Azure Cosmos DB は、ターンキー <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/distribute-data-globally" target="_blank"></a>グローバル分散、スループットと<a href="https://docs.microsoft.com/en-us/azure/cosmos-db/partition-data" target="_blank"></a>ストレージの世界規模でのエラスティック スケーリング、99 番目のセンタイルでの 1 桁ミリ秒の待機時間、 <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/consistency-levels" target="_blank"></a> 5 つの定義済みの整合性モデル、および保証された高可用性を提供します。すべては、業界をリードする包括的な <a href="https://azure.microsoft.com/en-us/support/legal/sla/cosmos-db/v1_1/" target="_blank">SLA</a> によってサポートされています。 Azure Cosmos DB では、<a href="https://docs.microsoft.com/en-us/azure/cosmos-db/indexing-policies" target="_blank">すべてのデータのインデックスが自動的に作成</a>されるため、ユーザーがスキーマやインデックスの管理に対処する必要はありません。 これは、ドキュメント、<a href="https://docs.microsoft.com/en-us/azure/cosmos-db/table-introduction" target="_blank">キー</a>値、<a href="https://docs.microsoft.com/en-us/azure/cosmos-db/graph-introduction" target="_blank">グラフ</a>、<a href="https://docs.microsoft.com/en-us/azure/cosmos-db/sql-api-sql-query" target="_blank"></a>および列ファミリのデータ モデルをサポート<a href="https://docs.microsoft.com/en-us/azure/cosmos-db/cassandra-introduction" target="_blank"></a>し、ネイティブの <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/sql-api-sql-query" target="_blank">SQL</a> 言語に加えて、MongoDB、Apache Cassandra、Apache Gremlin 用のワイヤ互換 API を公開するマルチモデル サービスです。 Azure Cosmos DB は、クラウドのためにクラウドで構築されたサービスとして、初期段階からマルチテナントとグローバル分散を想定して入念に設計されています。</p>


  <h2>無制限の柔軟性、弾力性、スケーラビリティ</h2>


  <p>Azure Cosmos DB にはプロビジョニング済みのスループット <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/request-units" target="_blank"></a>モデルが用意されています。このモデルでは、必要なスループットを構成し、予約したスループットに対してだけ料金を支払います。 マルチモデル データベースとして、データ モデルと API の選択に応じて、Azure Cosmos DB &ndash; では、コレクション、テーブル、またはグラフを作成できます。これらはすべて Cosmos <em>DB コンテナーに</em>内部的にマップされます。 Azure Cosmos DB では、コンテナーのスループットとストレージを透過的に、自動的かつ弾力的にスケーリングします。プログラムにより多くの (またはそれより少ない) スループットをプロビジョニングするか、コンテナーのストレージが拡大 (または縮小) するにつれて、 Azure Cosmos DB のスループットは、要求ユニットまたは <em>RUs</em> の観点から定義されます。これは、さまざまなデータベース操作 (挿入、置換、アップサート、削除、クエリなど) にわたる 1 秒あたりのトランザクション数の観点からスループットを表す正規化された方法です。</p>


  <p>現在から、Azure <strong></strong> Cosmos DB の個々のコンテナーに対するスループットのプロビジョニングに加えて、一連<strong></strong>のコンテナーに対してスループットを<strong></strong>まとめてプロビジョニングできます。これにより、それらのコンテナーでプロビジョニングされたスループットを<strong></strong>共有できます。 これにより、データ モデルまたはアプリケーションのニーズに基づいて、プロビジョニングされたスループットをさまざまな細分性で構成できるので、容量計画が大幅に簡素化されます。 これで、アプリケーション データ モデル&rsquo; (データベース、コレクション、テーブルなど) でさまざまな細分性でコストを制御する機能が追加されました。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5fecf93b-6774-454f-84a6-819bbf20e2be.png"><img alt="provisioning_set_containers" border="0" height="3316" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d93c51a1-9c6c-4933-b132-9877d36e9858.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="provisioning_set_containers" width="4690"></a></p>


  <h2>プロビジョニングされたスループットを異なる細分性で設定する</h2>


  <p>任意のCosmos DB データベース アカウントの場合は、いつでもプログラムで、または次のコマンドを使用Azure portal。</p>


  <ul>
   <li>特定のコンテナーに対してスループットをプロビジョニングする</li>
   <li>一連のコンテナーのスループットをまとめて <em>プロビジョニングします</em> 。そのすべてがスループットを共有します</li>
  </ul>


  <p>個々のコンテナーのスループットをプロビジョニングすると、そのコンテナーのスループット SLA によってサポートされる特定の <em>Cosmos DB コンテナー</em> (つまり、テーブルまたはコレクションまたはグラフ) のスループットの予約が保証されます。 これにより、特定の時点でコンテナーに必要なスループットをきめ細かく制御できます。 一方、Cosmos DB データベースでスループットをプロビジョニングすると、そのデータベースに属しているすべてのコンテナー間でスループットを共有できます。 これにより、プロビジョニングされたスループットを、DB データベース内の一連のコンテナー Cosmosプールできます。 特定の Cosmos DB データベース内で、スループットを<em></em>共有するコンテナーと、専用のスループットが割り当てられている特定のコンテナーを組み合わせて一致させることができます。 特定のスループット予約戦略を決定する簡単な経験則を次に示します。</p>


  <p>次の場合は、Cosmos DB データベース (コンテナーのセットを含む) でスループットをプロビジョニングします。</p>


  <ul>
   <li>コレクション/テーブル/グラフが数十個あるので、その一部またはすべてがスループットを共有する必要があります。</li>
   <li>IaaS でホストされる VM またはオンプレミス (NoSQL やリレーショナル データベースなど) 上で実行するように設計された (シングルテナント) データベースから Azure Cosmos DB に移行し、多数のコレクション/テーブル/グラフを持っています。</li>
   <li>ワークロードの予期しない急増の影響を受け、コンテナー間で共有されるデータベース レベルでのプールされたスループットにより、ワークロードの計画外の急増を吸収したいとします。</li>
   <li>個々のコンテナーに特定のスループットを設定する代わりに、データベース内の一連のコンテナー全体で合計スループットを取得する必要があります。すべてのスループットはデータベース内で共有されます。</li>
  </ul>


  <p>次の場合は、個々のコンテナーにスループットをプロビジョニングする方法を検討してください。</p>


  <ul>
   <li>DB コンテナーにはCosmosがあります。</li>
   <li>特定のコンテナーでスループットを制御し、SLA によって裏付けられている保証されたスループットを取得したい場合。</li>
  </ul>


  <p>前述のように、Azure Cosmos DB を使用すると、上記の 2 つの戦略を組み合わせ、一致させることができます。そのため、Cosmos DB データベース内にいくつかのコンテナーを作成できます。これにより、データベースにプロビジョニングされた全体的なスループットと、プロビジョニングされたスループットの専用量を持つ可能性があるいくつかのコンテナー (同じデータベース内) を共有できます。</p>


  <p>次の表に示すように、API の選択に応じて、異なる細かさでスループットをプロビジョニングできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3a57e05e-122d-4ace-a2a4-714f07c88f81.png"><img alt="image" border="0" height="153" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8c38fb32-ed1d-4739-bec0-aadb4bb88db2.png" style="border: 0px currentcolor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="682"></a></p>


  <p>さまざまな粒度でスループットをプロビジョニングすることで、ワークロードの特性に基づいてコストをより最適化&rsquo; できます。 前述のように、個々のコンテナーまたはコンテナーのセット全体でプロビジョニングされたスループットをプログラムでいつでも増減 (スケールダウン) して、ワークロードの変化に合った弾力的なスケーリングを行い、構成したスループットに対する支払いのみを行えます。 コンテナーまたはコンテナーのセットが複数のリージョンに分散されている場合は、コンテナーまたはコンテナーのセットに対して構成するスループットが、すべてのリージョンで使用できると保証されます。</p>


  <h2>Azure Cosmos DB の次の手順</h2>


  <p>これまで、Azure Cosmos DB のプロビジョニングされたスループット モデルでは、開発者はコンテナー レベルでのみスループットをプロビジョニングできます。 プロビジョニングされたスループットをさまざまな粒度で構成する機能を提供することで、Cosmos DB を使用すると、コスト効率の高い方法で、IaaS でホストされる、またはオンプレミスの NoSQL およびリレーショナル データベースから Azure Cosmos DB に簡単に移行できます。</p>


  <p>私たちのミッションは、世界で最も信頼できるデータベース サービスであり、開発者が非常に強力で地球規模のアプリを簡単に構築できるよう、です。 <a href="https://azure.microsoft.com/en-us/try/cosmosdb/" target="_blank">Azure Cosmos DB を無料で試して</a>、ご自分の考えをお知らせします。 ヘルプが必要な場合、または質問やフィードバックがある場合は、 を通じてお問い合わせください <a href="mailto:askcosmosdb@microsoft.com">askcosmosdb@microsoft.com</a>。 Twitter でフォローして、最新の Azure Cosmos DB ニュース <a href="https://twitter.com/search?q=%23cosmosdb" target="_blank">(#CosmosDB)</a> と機能を最新の情報にしてください<a href="https://twitter.com/AzureCosmosDB" target="_blank">@AzureCosmosDB</a>。 Azure Cosmos DB を使用して何を構築するのかを確認Cosmosしています。</p>


  <p>&mdash;Azure Cosmos DB <a href="https://twitter.com/AzureCosmosDB" target="_blank">@AzureCosmosDB</a> <a href="https://twitter.com/search?q=%23cosmosdb" target="_blank">(#CosmosDB) の友人</a></p>
