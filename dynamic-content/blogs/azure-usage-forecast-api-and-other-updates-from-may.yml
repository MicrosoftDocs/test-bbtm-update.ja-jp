### YamlMime:Yaml
ms.openlocfilehash: 87259af4d0d72fd4d75581a714f71b76296b6c2b
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896154"
Slug: azure-usage-forecast-api-and-other-updates-from-may
Title: Azure Cost Forecast API と他の更新プログラム
Summary: クラウドの支出の増加が始まると、使用量を正確に予測できるのが計画の重要な部分になります。 支出に対する前向きなビューを有効にする最初の手順として、
Content: >-
  <p>クラウドの支出の増加が始まると、使用量を正確に予測できるのが計画の重要な部分になります。 サブスクリプションに対する支出の&rsquo;将来を見越したビューを有効にする最初の手順として、予測 API を開始しました。 現在、予測 API では、95% の信頼区間で毎日または毎月のグレイン予測がサポートされています。 また、この API では、過去 2 か月間の実際の使用状況が返されます。これは、トレンドのシナリオを確認するのに役立ちます。 API の今後のイテレーションでは、リソース グループや登録、信頼区間のオプション、より長い範囲の予測など、階層の上下の他の複数のスコープをサポートする予定です。 予測 API の <a href="https://docs.microsoft.com/en-us/rest/api/consumption/forecasts">呼び出しの</a> 詳細については、ドキュメント ページを参照してください。</p>


  <h2>場所とサービス データの正規化</h2>


  <p>企業のお客様の効果的なコスト管理には、アドホック クエリとエンタープライズ階層内のコストの正確なロールアップをサポートするために次元化できる、正確で詳細なデータが必要です。 使用状況データにディメンションを追加するための最初の手順として、これらの列に複数のデータバリアントに関するデータ品質の問題がいくつかあるので、場所 (InstanceLocation) フィールドとサービス (ConsumedService) フィールドを正規化します。 現在サポートされているディメンションはタグとリソース グループです。このリリースでは、場所とサービスをディメンションとして追加する予定です。 Location は Location という名前の新しい列として表示され、サービスは 2 つの新しい列 (ServiceName と ServiceTier) としてマニフェストされます。 これにより、新しい API バージョンへの移行に下位互換性が確保されます。 これらの変更は、API バージョン 2018-06-30 で使用できます。</p>


  <h2>価格シートと使用量の詳細のマッピング</h2>


  <p>価格シート API は、各オファーに適用される各メーターの価格の合体です。 複数のオファーを持つ顧客の結果として、使用状況の詳細の使用状況レコードの価格を設定するためにメーターの特定のインスタンスが使用されたのを特定する、特定の方法が見つからなかったのです。 API に対するこの更新プログラム (バージョン 2018-05-31) では、使用量を価格シートに関連付ける使用状況の詳細にいくつかの新しい属性が導入されています。 価格シートを使用状況の詳細にマップする場合、次の列の 2 つのデータセットを結合すると、使用状況の詳細行と測定価格が一意に一致します。</p>


  <p>使用状況の詳細 API の新しいフィールド</p>


  <ul>
      <li>OfferId</li>
      <li>PartNumber</li>
      <li>ResourceGuid</li>
  </ul>


  <p>価格シート API の新しいフィールド</p>


  <ul>
      <li>OfferId</li>
  </ul>


  <p>この変更の更新は、キー ベース <a href="https://docs.microsoft.com/en-us/azure/billing/billing-enterprise-api">の API と ARM API</a> の両方に <a href="https://docs.microsoft.com/en-us/rest/api/consumption/usagedetails">影響します</a>。</p>


  <h2>年金額コミットの不適格な料金</h2>


  <p>Enterpriseを持つ顧客は、請求書が生成される前に、最初に利用可能なクレジットに使用量が適用されます。 場合によっては、特定の料金がクレジットの対象ではなく、請求されます。 受け取ったフィードバックは、&rsquo;どの料金が年月コミットの対象となるのか、試してみるのが面倒な場合です。 その結果、使用状況の詳細 API が更新され、個別に請求される料金にフラグを設定する属性が追加されます。</p>


  <p>使用状況の詳細 <a href="https://docs.microsoft.com/en-us/rest/api/consumption/usagedetails/list">API の新しいフィールド</a></p>


  <ul>
      <li>ChargesBilledSeperately</li>
  </ul>


  <h2>到着時間の遅いデータ</h2>


  <p>使用状況の報告に遅延があるサード パーティのサービスに対応するために、報告された使用状況の日付<b><i> </i></b>(使用状況レポートの日付) は、実際の使用状況が発生した時刻<b><i> </i></b>(つまり、使用時間) ではなく、使用状況データが送信された時刻に設定されます。 その結果、使用量は に対して評価され、報告された時間に適用されます。 実際の消費時間を表す場合は、 <i>プロパティです。AdditionalProperties フィールド</i> には、実際の消費時間ウィンドウに対応する <i>ConsumptionBeginTime</i> と <i>ConsumptionEndTime</i> の 2 つの追加プロパティが含まれるになります。</p>


  <p>これらの変更により、usage details API を呼び出す際に対処する必要があるいくつかのシナリオが発生します。</p>


  <ul>
      <li>月の終了レポート: 1 か月間に発生したが、次の月に報告された使用量については、必要に応じて <i>AdditionalProperties</i> フィールドを確認して、適切な月に使用量を割り当てる必要があります。</li>
  </ul>


  <p>日付範囲で使用状況の詳細 API に対してクエリを実行<b><i> </i></b><b><i> </i></b>する場合、クエリは使用量レポートの日付にのみ適用され、使用時間には適用されない。 使用量の詳細を請求書にマップする場合、請求書は使用状況レポートの日付に基づいて使用状況を処理するので、この更新はプロセスに<b><i></i></b>影響を与え "ない"。 使用状況の詳細を特定のカレンダーの日付/&nbsp; 月にマップする場合、この更新は重要な変更であり、これらのシナリオでは、使用状況レポートの日付を使用することはできません。また、追加のプロパティ セクションで使用状況が発生した日付 (つまり、使用日)<b><i> </i></b>を使用する必要があります。</p>


  <h2>PowerShell のサポート</h2>


  <p>API Cost Management複雑さを増すにつれて、サポートされている SDK (Python、NodeJS、.Net、Ruby) に加えて、PowerShell のサポートが追加されます。 ドキュメント <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.consumption/">ページには</a> 、コマンドレットに関する追加の詳細があります。</p>
