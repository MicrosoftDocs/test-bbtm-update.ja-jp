### YamlMime:Yaml
ms.openlocfilehash: b953eb4fc2489766379e3dc37300ed1276915672
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139894613"
Slug: accelerate-your-insights-with-performance-counters
Title: Application Insights パフォーマンスカウンターを使用して洞察を加速させる
Summary: Visual Studio Application Insights を使用して、Azure Web Apps のパフォーマンスカウンターを監視できるようになりました。
Content: >-
  <p><a href="https://azure.microsoft.com/services/application-insights/">Visual Studio Application Insights</a>を使用して、 <a href="https://azure.microsoft.com/services/app-service/web/">Azure Web Apps</a>のパフォーマンスカウンターを監視できるようになりました。 最近までは、アプリを監視するときに、CPU やネットワークの使用率 &rsquo; などのパフォーマンスカウンターが <a href="https://portal.azure.com">Azure portal</a> で使用できなくなります。 これは、Azure Web Apps &rsquo; 自分のコンピューターでは実行されないためです。 新しい <a href="https://github.com/Microsoft/ApplicationInsights-SDK-Labs/tree/master/AggregateMetrics">集計メトリック</a> パッケージによってこのテレメトリが追加されるため、ワークロードの変化に応じてアプリ &rsquo; のリソース使用量を監視できるようになりました。</p>


  <p>まず、<a href="https://www.myget.org/gallery/applicationinsights-sdk-labs">集計メトリックのプレリリース NuGet パッケージ</a>をアプリにインストールするだけです。 このパッケージは、 <a href="https://github.com/Microsoft/ApplicationInsights-SDK-Labs/blob/master/README.md">SDK Labs フィード</a>に含まれています。 次に、 <a href="https://portal.azure.com">Azure portal</a>内の<a href="https://azure.microsoft.com/documentation/articles/app-insights-metrics-explorer/">Application Insights メトリックスエクスプローラー</a>で、以下のパフォーマンスグラフを表示できるようになります。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1efe9490-4e85-416e-8268-7ea260827e6b.png"><img alt="Performance Counters in action" border="0" height="387" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1d1ad430-4c8e-48e5-9dcb-9e28d6d7c1f2.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="洞察を促進する" width="556"></a></p>


  <p><a href="https://azure.microsoft.com/en-us/services/app-service/web/">azure Web Apps</a>は、azure クラウドであらゆる Web アプリ、web サイト、API をホストできるようにしながら、Visual Studio の統合、デプロイの容易さ、機敏性などのさまざまな機能を維持できます。 簡単に言うと、Azure Web Apps は簡単にデプロイして実行できます。</p>


  <p>ただし、クラウドで実行中の Azure Web App &rsquo; s のパフォーマンスを監視する場合は、制限があります。 Web ページとアプリはサンドボックス環境で実行され、同じコンピューターで実行されている他のアプリから分離されます。 開発者にとって、このサンドボックスは最終的に Azure Web Apps を使用する低コストのトレードオフになります。 また、サンドボックスでは、アプリがパフォーマンスカウンターにアクセスしたり、 <a href="https://technet.microsoft.com/library/cc749249(v=ws.11).aspx">パフォーマンスモニター</a>を使用したりするのを防ぐことができます。 デスクトップでは、パフォーマンスモニターによって、わかりやすい視覚化でメトリックを包括的に選択できるようになります。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/843a8133-b517-4c64-93af-ad78a2b0e7e9.png"><img alt="perfMon" border="0" height="438" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6c41dda2-c1c0-443e-a707-34a3719361fc.png" style="border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="perfMon" width="610"></a></p>


  <p>これまでは、Azure Web アプリのパフォーマンスについての洞察を得るために利用できる <a href="https://azure.microsoft.com/documentation/articles/web-sites-monitor/">メトリックはほとんど</a> ありませんでした。これらのメトリックは、パフォーマンスモニターの comprehensiveness の近くにはありませんでした。</p>


  <p>Application Insights チームは、web アプリのパフォーマンスについてより詳細なフィードバックが必要であることを確認しまし &rsquo; た。また、パフォーマンスカウンターを収集して Azure portal 上で Application Insights に視覚化するソリューションを<a href="https://github.com/Microsoft/ApplicationInsights-SDK-Labs">Application Insights &rsquo; SDK ラボ</a>に追加したこと &rsquo; を発表しました。 <a href="https://github.com/Microsoft/ApplicationInsights-SDK-Labs/tree/master/AggregateMetrics">集計メトリック</a>ソリューションには、使用されているメモリや使用されている cpu &rsquo; プロセッサの割合など、いくつかの異なるパフォーマンスカウンターが含まれています。 &nbsp;現時点では、現在、パフォーマンスカウンターは履歴データを提供しており、今後の開発のために<a href="https://azure.microsoft.com/blog/live-metrics-stream/">Live Metrics Stream</a>実装が計画されています。</p>


  <h2>カスタムパフォーマンスカウンター</h2>


  <p>また、アプリケーションのパフォーマンスについてさらに詳細な洞察を提供するために、スレッドやハンドルの数などのカスタムパフォーマンスカウンターを実装しました。 これらのカウンターは固有であり、アプリ &rsquo; のニーズに基づいてプロジェクトに個別に追加できます。 現時点では、Azure Web Apps チームから提供されたコンテンツによって可用性が制限されるため、カスタムカウンターはほとんどありません。 カスタムカウンターの使用を <a href="https://github.com/Microsoft/ApplicationInsights-SDK-Labs/blob/master/AggregateMetrics/README.md">開始</a> するには、 <a href="https://azure.microsoft.com/documentation/articles/app-insights-web-monitor-performance/#system-performance-counters">他のパフォーマンスモニターの</a>場合と同じように、ApplicationInsights.config ファイルを調整する必要があります。</p>


  <h2>Microsoft インターンプログラム</h2>


  <p>パフォーマンスカウンターは、Application Insights &rsquo; 夏の2つのインターン (私、 <a href="https://github.com/frackleton">Mackenzie frack・ on、</a> <a href="https://github.com/mateoatr">Mateo torres Ruiz</a>) によって開発された継続的なプロジェクトです。 GitHub のプロファイルまでクリックすると、最新の開発が表示されます。</p>


  <h2>まとめ</h2>


  <p>パフォーマンスカウンターを使用して、Azure Web アプリのテレメトリのメトリックを提供できるようになりました。 お客様からのフィードバックをお待ちしております。問題または機能に関するご要望がある場合は、<a href="https://github.com/Microsoft/ApplicationInsights-SDK-Labs/issues">ここで</a>Application Insights SDK Labs リポジトリを参照してください。 Application Insights チーム全体が、開発者向けの高品質なツールを提供することに努めています。 追加の <a href="https://visualstudio.uservoice.com/forums/357324">フィードバックや新機能に関する推奨事項</a> が歓迎されます。</p>
