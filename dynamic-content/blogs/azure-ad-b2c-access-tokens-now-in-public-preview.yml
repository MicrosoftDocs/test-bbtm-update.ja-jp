### YamlMime:Yaml
ms.openlocfilehash: 3fca318cdf6c83957253ec47a7a46c72cead65aa
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896257"
Slug: azure-ad-b2c-access-tokens-now-in-public-preview
Title: Azure AD B2C アクセス トークンがパブリック プレビューに追加されました
Summary: B2C のアクセス トークンのパブリック プレビュー Azure AD発表。 アクセス トークンを取得し、それを使用して Web API を呼び出します。
Content: "<p>B2C を使用して Web API をセキュリティで保護する際に、Web API をAzure ADしています。 現在、Web API でアクセス トークンを使用するためのパブリック プレビューを有効にしています。</p> <p>これは、多くのユーザーが求め合っている強力な機能です。 この機能を導入すると、さまざまなクライアント アプリケーションからアクセスできる Web API を作成できます。 アプリからアプリへのアクセス許可を API に付与することもできます。 API にアクセスできるユーザーをより詳細に制御することで、セキュリティが強化されたアプリを開発できます。</p> <h2>作業の開始</h2> <h3>Web API を作成する</h3> <p>B2C テナントAzure AD B2C 設定ブレードに移動Azure AD新しいアプリケーションを追加します。 アプリケーションに名前を付け、[Web アプリ/Web API を含める] を [はい] に設定し、[応答 URL] と [アプリ ID URI] を入力します。</p> <p><img title=\"Capture1\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto\" border=\"0\" alt=\"Capture1\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/68acdc6b-f2eb-4dca-9a55-22bf648df651.png\" width=\"610\" height=\"623\"></p> <p>Web API を作成したら、アプリケーションをクリックし、[発行済みスコープ] をクリックします。 このブレードでは、クライアント アプリケーションが要求できるスコープまたはアクセス許可を追加できます。 'user_impersonation' アクセス許可は既定で使用できます。<img title=\"Capture2\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" border=\"0\" alt=\"Capture2\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0fb084eb-4770-4c53-8984-2f981999ddd6.png\" width=\"610\" height=\"334\"></p> <h3>クライアント アプリケーションを作成する</h3> <p>[アプリケーション] ブレードで、新しいアプリケーションを登録します。 作成した後、[API アクセス] を選択します。</p> <p><img title=\"Capture3\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-top-width: 0px\" border=\"0\" alt=\"Capture3\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e804a7bc-5ed3-4d5f-9864-cdaf7e5e22c0.png\" width=\"610\" height=\"410\"></p> <p>[追加] ボタンをクリックします。 次のブレードで、クライアント アプリケーションに付与する API とそのアクセス許可を選択します。 既定では、アプリケーションには 、\"openid\" アクセス許可を介してユーザーのプロファイルにアクセスし、\"offline_access\" アクセス許可を使用して更新トークンを生成する機能が付与されます。 クライアント アプリケーションにこの機能を使用したくない場合は、これらを削除できます。</p> <p><img title=\"Capture4\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto\" border=\"0\" alt=\"Capture4\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e607c1dd-1a5d-4349-98a4-80db5172e293.png\" width=\"610\" height=\"566\"></p> <h3>アクセス トークンの取得</h3> <p>アクセス トークンに対して B2C Azure AD要求を行うのは、ID トークンに対して要求が行われた方法と似ています。 主な違いは、\"scope\" パラメーターに入力された値です。 \"scope\" パラメーターには、アプリが要求している特定のリソースとそのアクセス許可が含まれている。 たとえば、\"\" のアプリ ID URI を持つリソース アプリケーションの \"https://B2CBlog.onmicrosoft.com/notes読み取り\" アクセス許可にアクセスするには、要求のスコープは \"\" になりますhttps://B2CBlog.onmicrosoft.com/notes/read。</p> <p>\"\"、\"openid\"、および \"https://B2CBlog.onmicrosoft.com/notes/readoffline_access\" というスコープを持つ承認コード要求の例を次に示offline_access。</p> <div style=\"margin-left: 40px; border-image: none\">https://login.microsoftonline.com/B2CBlog.onmicrosoft.com/oauth2/v2.0/authorize?</div> <div style=\"margin-left: 40px; border-image: none\">p=<em>&lt;yourPolicyId&gt;</em>&amp; client_id <em>=&lt;appID_of_your_client_application&gt;</em>&amp; nonce=anyRandomValue</div> <div style=\"margin-left: 40px; border-image: none\">&amp;<em>=&lt;redirect_uri redirect_uri_of_your_client_application&gt;</em>&amp; response_type=code</div> <div style=\"margin-left: 40px; border-image: none\">&amp;<strong>scope=https%3A%2F%2FB2CBlog.onmicrosoft.com%2Fnotes%2Fread+openid+offline_access</strong></div> <p>この機能の詳細を確認する場合、またはサンプルを使用して試す場合は、ドキュメントを参照 <a href=\"https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-access-tokens\" target=\"_blank\">してください</a>。</p> <p>UserVoice と Twitter () に <a href=\"https://feedback.azure.com/forums/169401-azure-active-directory/category/160596-b2c\">関するご意見</a> をお寄せください<a href=\"https://twitter.com/azuread\">@azuread</a>。 ご不明な点がある場合は、Stack Overflow ('<a href=\"https://stackoverflow.com/questions/tagged/azure-ad-b2c\" target=\"_blank\">azure-ad-b2c' タグを使用</a>してください) の使用に関するヘルプを受け取ります。</p>"
