### YamlMime:Yaml
ms.openlocfilehash: 7f80f6a82eddbe417e744a2e6dd13d3a051569b6
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909448"
Slug: windows-azure-sql-database-management-with-powershell
Title: Windows Azure SQL Database PowerShell を使用した管理
Summary: '編集者注: この投稿は、Microsoft Data Platform チームのシニア テクニカル&nbsp; ライターである Karthika Raman に関する記事です。  2012 年 11 月Windows Azure PowerShellコマンドレットのリリースでは、いくつかの....'
Content: '<p><strong>エディターの注: </strong>この投稿は、Microsoft Data Platform チームのシニア テクニカル&nbsp; ライターである <a href="https://twitter.com/karaman_ms" target="_blank">Karthika Raman</a> 氏に投稿されています。</p>  <p>2012 年 11 月Windows Azure PowerShellコマンドレットのリリースにより、複数の PowerShell コマンドレットが追加され、Windows Azure SQL Database。&nbsp;追加されたコマンドレットを使用すると、データベース サーバーをプロビジョニングし、ファイアウォール規則を構成し、簡単にデータベースを作成できます。</p>  <p>このブログ記事では、使用を開始するための情報と、Windows Azure サブスクリプションへの接続、サーバーのプロビジョニング、防火規則の構成、データベースの作成と構成から始まるステップ バイ ステップ チュートリアルのコード例を示します。 これには、タスクが完了した後のデータベースとサーバーの削除が含まれます。&nbsp;コマンドレットを使用してWindows Azure SQL DatabaseをWindows Azure SQL Databaseするには、Azure SDK に最新のWindows<a href="https://azure.microsoft.com/en-us/develop/downloads/" target="_blank">する必要があります</a>。</p>  <p>スクリプトの拡張バージョンは、 <a href="https://go.microsoft.com/fwlink/?LinkId=280226" target="_blank">TechNet コード ギャラリーからダウンロードできます</a>。</p>  <p>以前に使用したWindows Azure PowerShell場合は、次の手順に従って開始します。</p>  <ol start="1">  <li>Server 2008 R2 をWindows 8、Windows 7、Windows Server 2012、またはWindowsコンピューターを選択します。</li>  <li>アップロード Azure サブスクリプションに管理証明書Windowsを作成します。 これにより、Azure へのクライアント アクセスWindowsできます。&nbsp;</li>  <li><a href="https://msdn.microsoft.com/en-us/library/jj554332(v=azure.100).aspx#BKMK_install" target="_blank">Azure モジュールをWindowsインストールWindows PowerShell</a>: Windows Azure モジュールをインストールし、Window PowerShell 実行ポリシーを設定します。 構成Windows PowerShell実行ポリシーによって、構成ファイルとスクリプトを実行する条件が決まれます。 コマンドレットを実行するには、Windows Azure PowerShell コマンド シェルを使用するか、Azure コマンドレットを Windows に直接インポートWindows PowerShell。</li>  <li><a href="https://msdn.microsoft.com/en-us/library/jj554332(v=azure.100).aspx#BKMK_Configure" target="_blank">Windows Azure</a> とワークステーション間の接続を構成する: Windows Azure から PublishSettings ファイルをダウンロードしてインポートすることで、管理証明書とサブスクリプションの詳細を構成します。 これを手動で構成するには <strong>、Set-AzureSubscription コマンドレットを使用</strong> します。 次のサンプル コードを使用して、サブスクリプションに接続するときに使用するサブスクリプションと証明書を構成します。&nbsp; これは、サブスクリプションごとに 1 回、新しいクライアント コンピューターごとに 1 回実行する必要があります。</li>  </ol>  <p style="padding-left: 30px;">$thumbprint = "24189B94425ECDF8536C547730A8DDE2B6DF3E5E"</p>  <p style="padding-left: 30px;">$myCert = Get-Item cert:\\CurrentUser\Mythumbprint\$</p>  <p style="padding-left: 30px;">$subID = "e2f275b8-2739-4593-a5e8-6d9ee1539267"</p>  <p style="padding-left: 30px;">Set-AzureSubscription -SubscriptionName "msdn" -SubscriptionId $subID -Certificate $myCert</p>  <div>  <p><em>初期セットアップが完了したら、新しいコマンドレットの管理Windows Azure SQL Databaseできます。</em></p>  </div>  <p>コマンドレットの一覧を表示するにはWindows Azure SQL Database「help sql」と&ldquo;入力します&rdquo;。</p>  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6607.blue-box-powershell.png" alt="" border="0"></p>  <p>サーバーをプロビジョニングし、新しいサーバーにファイアウォール規則を追加し、新しいデータベースを作成するためのステップ バイ ステップのチュートリアルを次に示します。 タスクが完了したら、データベースとサーバーを削除する手順が含まれます。&nbsp; スクリプトの拡張バージョンは、 <a href="https://go.microsoft.com/fwlink/?LinkId=280226" target="_blank">TechNet コード ギャラリーからダウンロードできます</a>。</p>  <ol>  <li>使用するサブスクリプションを選択する:Select-AzureSubscription -SubscriptionName "msdn"<br>  <p>既定のサブスクリプション データ Get-AzureSubscription格納されているサブスクリプションを一覧表示するには、 を使用します。 この <a href="https://msdn.microsoft.com/en-us/library/jj152863.aspx" target="_blank">コマンドレットの使用の</a> 詳細については、このトピックを参照してください。</p>  </li>  <li>最初の手順で指定SQL Database既存のすべての既存のサーバーを一覧表示します。<br><br>Get-AzureSqlDatabaseServer<br>&nbsp; &nbsp;&nbsp;<img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3731.ps-step-2.png" alt="" border="0"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1553/3731.ps-step-2.png"><br><br></a></li>  <li>新しいデータベース サーバー SQL Databaseプロビジョニングする: New-AzureSqlDatabaseServer コマンドレットを使用して、新しいデータベース サーバーを作成します。 場所、administratorLogin、パスワードを指定します。<br>  <p>New-AzureSqlDatabaseServer -location "West US" -AdministratorLogin "mylogin" -AdministratorLoginPassword "my@Password&rdquo;<br>&nbsp; &nbsp; &nbsp;<img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3678.step-3.png" alt="" border="0"></p>  <p>注: サーバーのプロパティを更新するには、 <a href="https://msdn.microsoft.com/en-us/library/jj871051.aspx" target="_blank">Set-AzureSqlDatabaseServer コマンドレットを使用</a> します。</p>  </li>  <li>ファイアウォール規則を作成する: データベース サーバーへの接続を許可するには、接続を許可する IP アドレスの範囲を指定する規則を作成する必要があります。 新しいファイアウォールNew-AzureSqlDatabaseServerFirewallRuleを作成するには、次のコマンドを使用します。 サーバー名と IP アドレス範囲 (開始と終了) を指定します<br>  <p>New-AzureSqlDatabaseServerFirewallRule -ServerName "sub9zmyalg" -RuleName "myrule" -StartIPAddress "111.111.111.222" -EndIPAddress "222.222.222.222"</p>  <p>注: サーバーの規則の一覧を取得するには、 <a href="https://msdn.microsoft.com/zh-cn/library/jj585427" target="_blank">Get-AzureSqlDatabaseServerFirewallRule コマンドレットを使用</a> します。&nbsp;</p>  </li>  <li>Sql 認証を使用してサーバーへの接続を作成します。 これにより、サーバーへの接続コンテキストが確立されます。このコンテキストを使用して、サーバー上のさまざまなタスクを実行できます。これを行うには、次の 2 つの方法があります。<br><br>  <ul>  <li>Get-Credential コマンドレットを使用します。次に示すログインとパスワードの情報を入力するように求められます。<br>&nbsp;</li>  </ul>  <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">$cred = Get-Credential</blockquote>  <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp;<img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3113.step-4.png" alt="" border="0"></blockquote>  <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br>#資格情報を使用して新しいデータベース サーバー接続コンテキストを作成する<br>&nbsp;</blockquote>  <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">New-AzureSqlDatabaseServerContext&nbsp; -ServerName &ldquo;sub9myalg&rdquo; &ndash;Credential $cred<br>&nbsp;</blockquote>  <ul>  <li>ログイン &nbsp;情報を含む資格情報オブジェクトを作成します。<br>&nbsp;</li>  </ul>  <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">$servercredential = new-object <br>System.Management.Automation.PSCredential("mylogin", ("my@Password"&nbsp; | <br>ConvertTo-SecureString -asPlainText -Force))</blockquote>  <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">#接続コンテキストを作成する</blockquote>  <blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">$ctx = $server |New-AzureSqlDatabaseServerContext -Credential $serverCredential&nbsp;<br>&nbsp;</blockquote>  </li>  <li>新しいデータベースを作成する: New-AzureSqlDatabaseコマンドレットを使用して新しいデータベースを作成します。 データベース名を指定した場合、指定した名前のデータベースが他のプロパティの既定値で作成されます。結果のデータベースは、MaxSize が 1 GB で、照合順序が SQL_Latin1_General_CP1_CI_AS である Web エディション データベースになります。<br><br>  <p>&ndash;New-AzureSqlDatabase $ctx DatabaseName &ldquo;mydatabase&rdquo;&nbsp;</p>  <img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7144.step-6.png" alt="" border="0">&nbsp;<br><br>  <p>注: サーバー内のすべてのデータベースの一覧を取得するには、 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj871052.aspx" target="_blank">Get-AzureSqlDatabase コマンドレットを使用</a> します。</p>  </li>  <li>データベースを変更する: Set-AzureSqlDatabaseコマンドレットを使用して、データベースのプロパティを変更します。&nbsp; 次の例は、前の手順で作成したデータベースの最大サイズを変更する方法を示しています。 最初のコマンドレットは MaxSize プロパティを変更し、2 番目のコマンドレットは変更を確認するためにプロパティを表示します。<br>  <p>&ndash;Set-AzureSqlDatabase $ctx Databasename &ldquo;mydatabase&rdquo; &ndash;MaxSizeGB 20</p>  <p>&ndash;Get-AzureSqlDatabase $ctx DatabaseName &ldquo;mydatabase&rdquo;</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7824.step-7.png" alt="" border="0">&nbsp;</p>  </li>  <li>データベースを削除する: Remove-AzureSqlDatabaseコマンドレットを使用して、特定のデータベースを削除します。&nbsp; 次に示す確認プロンプトが表示されます。<br>  <p>&ndash;Remove-AzureSqlDatabase $ctx DatabaseName &ldquo;mydatabase&rdquo;</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7367.step-8.png" alt="" border="0">&nbsp;</p>  </li>  <li>データベース サーバーの削除: データベース サーバーRemove-AzureSqlDatabaseServerデータベース サーバーを削除します。 次に示す確認プロンプトが表示されます。<br>  <p>&ndash;Remove-AzureSqlDatabaseserver ServerName &ldquo;sub9zmyalg&rdquo;</p>  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2450.step-9.png"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2450.step-9.png" alt="" border="0"></a></p>  </li>  </ol>  <p><strong>その他の読み取り</strong></p>  <p><a href="https://msdn.microsoft.com/en-us/library/jj585422.aspx" target="_blank">Windows Azure SQL Databaseコマンドレット</a></p>  <p><a href="" target="_blank"></a></p>  <p><a href="https://www.sqlskills.com/blogs/bobb/getting-windows-azure-sql-database-diagnostics-using-windows-azure-cmdlets/" target="_blank">https://www.sqlskills.com/blogs/bobb/getting-windows-azure-sql-database-diagnostics-using-windows-azure-cmdlets/</a></p>'
