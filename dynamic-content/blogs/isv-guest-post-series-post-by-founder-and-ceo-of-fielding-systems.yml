### YamlMime:Yaml
ms.openlocfilehash: e298724f2515a7cac11fe0360dcd5ba96c169676
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139908895"
Slug: isv-guest-post-series-post-by-founder-and-ceo-of-fielding-systems
Title: 'ISV ゲストポストシリーズ: フィールディング Systems の創設者および CEO による投稿'
Summary: Windows azure isv ブログシリーズの目的は、azure アプリケーションの開発とデプロイの Windows 中に働いていた isv &rsquo; から、いくつかの業績を強調することです。 &...
Content: '<p>Windows azure isv ブログシリーズの目的は、azure アプリケーションの開発とデプロイの Windows 中に取り組んできた isv &rsquo; から、いくつかの業績を強調することです。 &nbsp;フィールディング Systems<i>創設者および CEO Shawn カッター</i><i>によって執筆</i>された今日 &rsquo; の投稿では、企業が<a target="_blank" href="https://www.windowsazure.com/en-us/pricing/free-trial/?WT_id=cmp_pst001_blg_post0091gen">Windows Azure</a>を使用して、石油およびガス業界のお客様向けに web ベースのサービスを提供する方法について説明しています。</p>  <p>-------------------------------------------------------------------------------------------------------------</p>  <p>フィールディング Systems は、やつおよび上流の石油およびガス企業向けの2つの強力な web ベースのサービスを提供しています。これにより、オペレーターは運用アクティビティを効率化し、運用環境の出力をフィールド操作管理、リモート監視、および実稼働分析によって向上させることができます。 &nbsp;各アプリケーションには、完全な機能を備えたモバイルバージョンが含まれており、すべてのユーザーが、iPhone、Android &amp; Windows Phone を含む最新のスマートフォンからデータと操作にアクセスできます。</p>  <p>FieldVisor は、石油およびガスの生産操作で発生するすべてを追跡するために使用できるフィールドオートメーションおよびデータキャプチャアプリケーションです。 &nbsp;ユーザーは、運用環境、機器、サービス、治療履歴、タスク、および運用操作のその他の多くのファセットを追跡できます。 FieldVisor は、ペンと用紙のフィールド操作を置き換え、そのデータに対して堅牢な分析とレポートを提供するために、手動によるデータ入力に重点を置いています。 &nbsp; ScadaVisor、フローメーター、ポンプオフコントローラー、タンク、圧縮機能、PLC、人工リフト、およびその他のさまざまな SCADA デバイスなどのリモートデバイスをリアルタイムで監視します。 &nbsp; これは、独自のクラウドベースの通信と、VisorBridge と呼ばれるポーリングエンジンによってサポートされるため、唯一のクラウドベースのサービスです。 &nbsp; これにより、フィールディングシステムは、他のすべての SCADA サービスプロバイダーよりも確実に競争上の優位性を得ることができます。</p>  <p>もともと、すべてのフィールディング Systems アプリケーションは、独自のデータセンターでホストされていました。 &nbsp;これらのアプリケーションは、azure Windows を最大限に活用するためにアップグレードされ、2011年7月に Windows azure に完全に移行されました。 クラウドへの移行は、サーバー、バックアップ、各アプリケーションで必要とされるネットワークを管理するのではなく、最先端のソフトウェアテクノロジに焦点を当てることを強く望んでいます。 多くの場合、企業では重要な時間とリソースを費やしています。これは、クラウドによって実現される中心となるテクノロジを推進することではなく、ビジネスのサポートに専念します。 &nbsp; クラウドへの移行により、サーバーリソースの過剰な容量を削減し、独自のデータセンターとコロケーションを維持するために必要なソフトウェアライセンスのコストを削減することで、大幅なコストを削減できます。 さまざまなクラウドオプションを十分に評価した後、より強力な開発プラットフォームを提供しているため Windows Azure を選択しました。 &nbsp;を利用すると、Windows Azure では、本質的にはホストされている仮想マシンだけである他のサービスよりもはるかに高いレベルで、市場とスケーラビリティを向上させることができます。</p>  <p>Windows Azure への最初の移行により、ラックスペース、パワー、バックアップ、セカンダリホットサイトのコロケーションに関する既存のデータセンターのコストを最小限に抑えることができました。 &nbsp;ただし、移行以来、オファリングと顧客ベースを拡張しているため、コストは引き続き低下します。&nbsp;</p>  <h3>アーキテクチャ</h3>  <p>fieldvisor、fieldvisor Mobile、scadavisor、scadavisor Mobile は、各顧客のシングルテナント<a target="_blank" href="https://www.windowsazure.com/en-us/home/features/sql-azure/?WT_id=cmp_pst001_blg_post0091sql">SQL Azure</a>データベースを使用する別個のマルチテナント web アプリケーションとして Windows Azure に存在します。 &nbsp;これらのアプリケーションは、すべてのユーザー、ロール、セキュリティ、およびその他のアプリケーション構成をマルチスレッドワーカーロールと共に管理するために、中央の SSO 管理アプリケーションによってサポートされています。これは、アラームと通知の処理、顧客データベースの管理、フィールドデバイスからのリモートデータ収集の実行を目的としています。</p>  <p>現在、次のような Windows Azure クラウドのほぼすべての側面を利用しています。</p>  <ul>  <li><a target="_blank" href="https://www.windowsazure.com/en-us/home/features/compute/?WT_id=cmp_pst001_blg_post0091com">コンピューティング</a> インスタンス: 複数の web ロールとワーカーロール</li>  <li><a target="_blank" href="https://www.windowsazure.com/en-us/home/features/storage/?WT_id=cmp_pst001_blg_post0091sto">Blob Storage</a>: Blob ストレージは、サイトの増分アップグレードと、BacPac を使用した自動 SQL Azure データベースバックアップに使用されます。</li>  <li><a target="_blank" href="https://www.windowsazure.com/en-us/home/features/storage/?WT_id=cmp_pst001_blg_post0091sto">Table Storage</a>: 完全なシステムログを収集するために、データの再処理とパフォーマンスカウンターのデータを一元化するためにテーブルが使用されます。</li>  <li><a target="_blank" href="https://www.windowsazure.com/en-us/home/features/storage/?WT_id=cmp_pst001_blg_post0091sto">Queue Storage</a>: キューは、イベントスケジューリング、リアルタイムデバイスデータ要求、自動通知、およびワーカーロール管理に使用されます。&nbsp;</li>  <li><a target="_blank" href="https://www.windowsazure.com/en-us/home/features/sql-azure/?WT_id=cmp_pst001_blg_post0091sql">SQL Azure</a>: すべての顧客アプリケーションデータは、シングルテナントデータベースに格納され、マルチテナントであるいくつかの中央コア管理データベースと共に格納されます。</li>  <li><a target="_blank" href="https://www.windowsazure.com/en-us/home/features/business-analytics/?WT_id=cmp_pst001_blg_post0091rep">SQL Azure レポート</a>: fieldvisor と scadavisor レポート機能は、SQL Azure レポートでサポートされています。 &nbsp;レポートは、レポートビュー ASP.NET コントロールを使用してユーザーがオンデマンドで実行します。また、スケジュールされたすべてのレポートを管理するワーカーロールプロセスによって制御されるユーザー定義のスケジュールに対しても実行されます。</li>  <li><a target="_blank" href="https://www.windowsazure.com/en-us/home/features/caching/?WT_id=cmp_pst001_blg_post0091cac">キャッシュ</a>: キャッシュは、各アプリケーションのセッションプロバイダーに対して、各 web アプリケーションのキャッシュサポートと共に使用されます。 &nbsp;また、キャッシュは、各 SQL Azure データベースの負荷を制限するために頻繁に使用されます。</li>  </ul>  <p>各アプリケーションのアップグレード中に、さまざまなプロセスの Table Storage と見なされました。 データの複雑さと SQL データベースの存在が必要であるため、すべての中央プロセスでデータベースを使用することにしましたが、バックグラウンド処理、データベースの挿入、自動インポート/エクスポート、リモートデバイスのポーリングには、pub/sub モデルに準拠することを選択しました。</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8712.FSDiagram1.png" alt="" border="0"></p>  <h3>SSO/中央のマルチスレッドワーカーロール</h3>  <p>カスタムシングルサインオン (SSO) サービスは、スケジュールされたタスク、通知、自動インポート/エクスポートなどを処理するすべてのワーカーロールと共に、いくつかの小さなインスタンスに配置されます。 &nbsp;実行される実際の作業と処理のほとんどは、SQL Azure では小さな作業単位として実行されるため、これらのコンピューティングインスタンスに必要なオーバーヘッドは低くなります。</p>  <h3>アプリケーション</h3>  <p>FieldVisor と ScadaVisor およびモバイルバージョンと共に、web サービスと OData サービスをサポートするすべてが、2つの中規模のコンピューティングインスタンスに格納されています。 &nbsp; マルチテナント展開プロセスでは、展開を処理し、IIS を管理して新しいサイトとサービスを作成します。 &nbsp; この図は、各アプリケーションのシングルテナントデータベースを示しています。</p>  <h3>SQL Azure Reporting</h3>  <p>Azure Windows の初期運用環境のデプロイでは、SQL Server 2008 Reporting Services R2 の独自のインスタンスを実行し、fieldvisor と scadavisor 両方のすべてのレポートの処理を処理する必要がありました。 &nbsp;以降は、すべてのレポート処理を SQL Azure レポートに移行し、SQL Azure レポートを使用して運用環境に移行する最初の企業の1つでした。</p>  <h3>worker ロール</h3>  <p>すべての worker ロールインスタンスは、マルチスレッド環境で実行されるように設計されています。各タスクプロセッサには、他のすべてのスレッドを保持する各インスタンスの単一のマスタースレッドを持つ独自のスレッドがあります。 &nbsp;また、単一のマスタースレッドは、コンピューティングインスタンスの1つでエンタープライズマスタースレッドとして機能し、実行する必要があるプロセスとタイミングを決定する意思決定者が1つだけであることを確認します。 &nbsp;このワーカーロールアーキテクチャは、SQL エージェントや、このようなスケジュールされたタスクを処理するための追加のタスクスケジューラを提供しない Windows の制限を埋めるために構築されました。 &nbsp;これらのワーカーロールで実行されているプロセスは、内部管理機能と顧客向けサービスの両方を提供します。 &nbsp;これらのプロセスの例を次に示します。</p>  <ul>  <li>重要なデバイスのアラーム処理</li>  <li>顧客のスケジュールされたレポートの実行</li>  <li>内部の正常性チェックとレポート</li>  <li>電子メール/SMS 通知の送信</li>  <li>インデックスの再作成と blob のバックアップを含むデータベースのメンテナンス</li>  <li>顧客向けの自動インポートとエクスポート</li>  </ul>  <p>マスタースケジューラは Windows Azure キューを利用し、各タスクまたはタスクのグループを処理のためにキューに送信します。 &nbsp;複数のコンピューティングインスタンスで実行されているワーカースレッドは、さまざまなキューを監視し、処理するタスクを選択します。 &nbsp;各インスタンスのマルチスレッドの性質を使用すると、各インスタンス上のすべてのリソースを最大化できるだけではありません。また、将来のタスク処理に対してほぼ無限のスケーラビリティを実現できます。 &nbsp;Windows Azure キューを使用すると、インスタンスがオフラインになったときにワーカーロールを回復可能にすることができます。これらのタスクは、別のインスタンスによって取得および処理されるキューに戻されます。 &nbsp;1つの作業単位はべき等を念頭に置いて設計されているので、各メッセージがキューから処理されるたびに、作業単位には各スレッドが処理するために必要なすべてのデータが含まれています。また、いずれかのワーカーが非表示になった場合は、データが破損するリスクがなくなります。&nbsp;</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5775.FSDiagram2.png" alt="" border="0"></p>  <h3>マルチテナント</h3>  <p>Windows Azure に移行する際に、各アプリケーションを顧客ごとに個別のアプリケーションをプロビジョニングするのではなく、マルチテナントアプリケーションモードで実行するように変換することにしました。 &nbsp;この決定は、次の2つの重要な要因に基づいています。</p>  <ul>  <li>  <p>すべての顧客に対する各アプリケーションのメンテナンスとロールアウト時間の増加</p>  </li>  <li>各顧客に必要な大量のサーバーリソース</li>  </ul>  <p>各アプリケーションは、使用率が高いときに、大規模なインスタンスのすべてのメモリを効率的に消費する大量のメモリを消費する可能性があります。各顧客には、それぞれのサービスに固有の IIS アプリケーションがあります。 &nbsp;ここでは、特定の顧客が使用できるサービスとユーザーの id に基づいて、適切なデータベースへの SQL Azure 接続をマップする追加のデータアクセス層を使用してマルチテナントを処理します。 &nbsp;現在、お客様向けの主要なサービスは2つの中規模のインスタンスでホストされており、大量の使用中に負荷が増加するにつれて、1日のピーク時に処理のサービスを共有できるように、追加のインスタンスを準備することができます。 &nbsp;パフォーマンスカウンターを使用してパフォーマンスを監視し、コンピューティング API を活用してサービスを管理します。 &nbsp;Microsoft のサービスでは、CPU とメモリの使用量という2つの主要なカウンターを確認します。&nbsp;</p>  <p>また、ワーカーロールを使用して blob ストレージ上の zip ファイルの変更を監視し、変更が検出された場合にアプリケーションを更新する、独自のマルチアプリケーションホストのデプロイプロセスと管理レイヤーも作成しました。 &nbsp; このプロセスにより、更新プログラムのロールアウトの管理とメンテナンスのオーバーヘッドが大幅に減少しました。&nbsp;</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3107.FSDiagram3.png" alt="" border="0"></p>  <h3>Windows Azure ワーカーと Web ロールのサイズ設定</h3>  <p>アプリケーションを Windows Azure に移行する前に、診断、パフォーマンス、コンピューティングインスタンスのサイズに関する考慮事項について、各アプリケーションを個別にロードテストしました。 &nbsp;中央 SSO サービスといくつかのワーカープロセスは、問題やパフォーマンスの問題のない2つの小規模なコンピューティングインスタンスで既に実行されています。 &nbsp;これらのインスタンスでの1秒あたりの要求数が最小限で、処理の大半が単純で短時間になり、ピーク時でも IO とメモリの使用量が少なくなるため、これらのプロセスは1つだけ残されました。 &nbsp;必要なリソースが増えると、スループットをスケールアウトするために追加のインスタンスを追加できるようになります。&nbsp;</p>  <p>アプリケーションインスタンスの場合、適切な構成を評価するように複数の構成がテストされています。 &nbsp; テストでは、各アプリケーションのユーザー要求パターンを記録し、テスト Studio で再生します。 &nbsp; テストされる主要な構成は、2-3 中規模のコンピューティングインスタンスと比較して、2-6 の s コンピューティングインスタンスでした。 &nbsp; 中規模のインスタンスにはより多くのメモリが含まれていますが、ネットワークと IO の容量にも違いがあります。</p>  <ul>  <li>S: 100 Mbps</li>  <li>中: 200 Mbps&nbsp;</li>  </ul>  <p>これらの違いは、高負荷テスト中に指数関数的に反映されました。 &nbsp;6つの s コンピューティングインスタンスを含む構成に対して 30-50 requests/sec を生成すると、要求は最終的にキューに入れられ、タイムアウトが発生します。 &nbsp; 中規模のインスタンスは負荷の高いテストを簡単に withstood ことができますが、将来的には大規模なインスタンスではなくスケールアウトを続けることができます。 &nbsp; また、複数のサービスを処理するように中程度のインスタンスを分割することもできます。つまり、4つのコンピューティングインスタンスですべてのサービスの負荷を共有し、2セットの中規模インスタンスをホストしているサービスの50% を持つようにします。</p>  <h3>まとめ</h3>  <p>フィールディングシステムでは、ほぼすべての Windows Azure stack がドライブで使用されており、サーバーの容量、バックアップ、管理について心配することなく、非常にスケーラブルな石油およびガスのソフトウェアサービスの構築に集中できます。 &nbsp;アップグレードを選択して Azure Windows に移行する前に、他のクラウドサービスについて検討しました。 &nbsp;サービスとしてのプラットフォーム (PaaS) 設計の長期的なメリットについて説明し、いくつかのリモートデータセンターに仮想マシンを簡単に追加して管理するという明確な利点を理解しました。 &nbsp;このコンテストはコストセンターの管理に時間とリソースを費やしていますが、主要なテクノロジであるソフトウェアの向上に注力してい &nbsp; ます。microsoft では、azure Windows キャッシュの使用率を高め、azure Service Bus を Windows することで Windows azure をさらに活用することで、スケールをさらに向上させる方法を常に模索しています。 &nbsp; &nbsp; &nbsp;クラウドは、お客様に販売するものではありません。また、Office 365 や Dynamics CRM などのサービスで可能なすべてのものに対して、内部的に使用されます。 &nbsp;私たちはテクノロジの縁を支持ています。&nbsp;</p>'
