### YamlMime:Yaml
ms.openlocfilehash: 83408de5ed486039107fbf6baf8c565fbe10e4f6
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904941"
Slug: bcp-and-sql-azure
Title: BCP と SQL Azure
Summary: '[この記事は SQL Azure チームによって提供されました。]bcp は、SQL Azure データをローカルにバックアップするための優れた方法です。 bcp ベースのバックアップファイルを変更することにより、SQL Azure にデータをインポートできます...'
Content: '<p>[この記事は SQL Azure チームによって提供されました。]</p><p>bcp は、SQL Azure データをローカルにバックアップするのに優れた方法です。 bcp ベースのバックアップファイルを変更することにより、SQL Azure にデータをインポートすることもできます。 このブログ投稿では、次のことについて説明します。 </p>  <ul>  <li>BCP とを使用して、SQL Azure server のテーブルからデータファイルにデータをエクスポートする方法 </li>  <li>BCP ユーティリティを使用して、データファイルから SQL Azure テーブルに新しい行をインポートする方法について説明します。 </li>  </ul>  <h2>BCP とは</h2>  <p><strong><a href="https://msdn.microsoft.com/en-us/library/ms162802(SQL.105).aspx">Bcp ユーティリティ</a></strong>は、Microsoft SQL Server に付属しているコマンドラインユーティリティです。 SQL Azure (または SQL Server) と、ユーザー指定の形式のデータファイルとの間でデータを一括コピーします。 SQL Server 2008 R2 に付属している bcp ユーティリティは、SQL Azure によって完全にサポートされています。 </p>  <blockquote>  <p><span style="font-size: medium;">BCP を使用してデータのバックアップと復元を行うことができ SQL Azure</span></p>  </blockquote>  <p>多数の新しい行を SQL Azure テーブルにインポートしたり、bcp を使用してデータをテーブルからデータファイルにエクスポートしたりできます。 </p>  <p>Bcp ユーティリティは移行ツールではありません。 データファイルまたはテーブルとの間で、スキーマや書式情報を抽出したり、作成したりすることはありません。 つまり、 <strong>bcp</strong> を使用してデータをバックアップする場合は、バックアップするテーブルのスキーマを記録するために、スキーマまたはフォーマットファイルを別の場所に作成する必要があります。 <strong>bcp</strong> データ ファイルには、スキーマ情報やフォーマット情報が 含まれない ので、テーブルまたはビューが削除され、フォーマット ファイルがない場合は、データをインポートできないことがあります。 Bcp ユーティリティには、いくつかのコマンドライン引数があります。 引数の詳細については、 <a href="https://msdn.microsoft.com/en-us/library/ms162802(SQL.105).aspx">SQL Server オンラインブック</a>のドキュメントを参照してください。 ビューで bcp を使用する方法の詳細については、「 <a href="https://msdn.microsoft.com/en-us/library/ms187086(SQL.105).aspx">データの一括エクスポートまたはビューへのデータの一括インポート</a>」を参照してください。 </p>  <h2>SQL Azure からのデータのエクスポート</h2>  <p>Imagine 開発者またはデータベース管理者であることを確認します。 SQL Azure には、上司がバックアップを希望する大量のデータがあります。 </p>  <p>SQL Azure データベースからデータをエクスポートするには、Windows コマンドプロンプトで次のステートメントを実行します。 </p>  <p><i>bcp AdventureWorksLTAZ2008R2: Customer out C:\Users\user\Documents\GetDataFromSQLAzure.txt-c-U username@servername -S tcp: servername. database. windows. net-P password</i></p>  <p>これにより、コマンドラインウィンドウに次の出力が生成されます。 </p>  <p><ins cite="mailto:selcint" datetime="2010-05-19T13:53"><a href=""><img height="65" width="868" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5611.clip_5F00_image0021_5F00_thumb_5F00_37C01547.jpg" alt="clip_image002[1]" border="0" title="clip_image002 [1]" style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px"></a></ins></p>  <p>次のスクリーンショットは、GetDataFromSQLAzure.txt ファイルの最初の24行を示しています。 </p>  <p><a href=""><img height="213" width="628" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0003.clip_5F00_image004_5F00_thumb_5F00_235A4FBC.jpg" alt="clip_image004" border="0" title="clip_image004" style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px"></a> </p>  <p>注: このブログ投稿で紹介している例では、AdventureWorkLTAZ2008R2 データベースを使用しています。 <a href="https://msftdbprodsamples.codeplex.com/releases/view/37304">SQL Server データベースのサンプル</a>からダウンロードできます。 </p>  <h2>SQL Azure へのデータのインポート</h2>  <p>同様に、ローカルデータベースに既存のデータがあり、クラウドに移動する場合もあります。 これを行うには、非常に簡単な方法が必要です。 </p>  <p>SQL Azure データベースにデータをインポートするには、SQL Azure データベース内のコピー先テーブルと同じスキーマ形式のデータファイルを作成します。 </p>  <p>たとえば、次に示すように、GetDataFromSQLAzure.txt ファイルの名前を MoveDataToSQLAzure.txt として変更し、既存のエントリをすべて削除して、5つの新しいエントリを追加します。 </p>  <p><a href=""><img height="105" width="628" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2045.clip_5F00_image006_5F00_thumb_5F00_674E0E06.jpg" alt="clip_image006" border="0" title="clip_image006" style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px"></a> </p>  <p>次に、Windows コマンドプロンプトで次のステートメントを実行します。 </p>  <p><i>bcp AdventureWorksLTAZ2008R2 in C:\Users\user\Documents\MoveDataToSQLAzure.txt-c-U username@servername -S tcp: servername. database. windows. net-P password</i></p>  <p>これにより、コマンドラインウィンドウに次の出力が生成されます。 </p>  <p><ins cite="mailto:selcint" datetime="2010-05-19T14:11"><a href=""><img height="68" width="868" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5756.clip_5F00_image0023_5F00_thumb_5F00_1EB41F35.jpg" alt="clip_image002[3]" border="0" title="clip_image002 [3]" style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px"></a></ins></p>  <p>Bcp ユーティリティには、いくつかのコマンドライン引数が用意されています。 すべての引数の一覧については、 <a href="https://msdn.microsoft.com/en-us/library/ms162802(SQL.105).aspx">SQL Server オンラインブック</a>のドキュメントを参照してください。 </p>  <p>ここで、 &rsquo; これらの例で使用しているものについて説明します。 </p>  <ul>  <li>database_name、database_name 指定されたテーブルまたはビューが存在するデータベースを指定します。 指定しない場合は、ユーザーの既定データベースになります。 <i>table_name</i>は、SQL Azure サーバー (では) にデータをインポートするときに、コピー先のテーブルの名前です。 SQL Azure サーバーからデータをエクスポートする場合は、ソーステーブルを指定します。 </li>  <li>: ファイルからデータベースのテーブルまたはビューにコピー<strong>します。</strong> </li>  <li><strong>out:</strong> データベーステーブルまたはビューからファイルにコピーします。 既存のファイルを指定すると、ファイルは上書きされます。 </li>  <li>-c: 文字データ型を使用して操作を実行します。 </li>  <li>-U: SQL Azure server に接続するために使用するログイン ID を指定します。 接続文字列のログイン名に SQL Azure サーバー名を追加するには、 <i> &lt; login &gt; </i> @ <i> &lt; servername &gt; </i>表記を使用する必要があります。 </li>  <li>-S: 接続先の SQL Azure サーバーを指定します。 SQL Azure サーバーの完全修飾名は<i>servername.database.windows.net</i>です。 </li>  <li>-i: 入力ファイルを指定します。 </li>  <li>queryout<em>:</em> SQL Server 2008 R2 以降では、SQL Azure でも<i>queryout</i>引数がサポートされています。 <i>Queryout</i>引数を使用する場合は、必ず<i>d database_name 引数を追加 &ndash; </i>してください。 それ以外の場合、bcp ユーティリティは接続先のデータベースを見つけることができません。 </li>  </ul>  <p>このブログの投稿では、SQL Azure で bcp を非常に簡単に使用する方法を説明しています。 ローカルデータベースのテーブルに数百万の行がある場合でも、高速で簡単に使用できます。 </p>  <p>質問、懸念事項、コメントがありますか。 これらを下に投稿し <a name="_GoBack"></a> てください。</p>'
