### YamlMime:Yaml
ms.openlocfilehash: af662db71e32a81d59da2f3cedd34a21a0844d80
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891195"
Slug: azure-automation-authenticating-to-azure-using-azure-active-directory
Title: 'Azure Automation: Azure Active Directory を使用して Azure を認証する'
Summary: Azure Automation のユーザーの場合、クラウド サービスを稼働状態に保つ手動、長時間実行、頻繁に繰り返される、エラーが発生しやすいタスクを自動化する場合に、それがいかに役立つのかは既にわかっています。 また、証明書ベースの認証を使用して Azure とAzure Automationを設定するために必要な手順が多数ある場合もあります。 私たちは、Azure AutomationチームAzure PowerShell、より簡単な代替手段を提供します。
Content: >-
  <a href="https://azure.microsoft.com/en-us/services/automation/">Azure Automation</a> のユーザーは、クラウド サービスを稼働状態に保つ手動、長時間実行、頻繁に繰り返される、エラーが発生しやすいタスクを自動化する場合に、それがいかに役立つのかは既にわかっています。 また、証明書ベースの認証を使用して Azure とAzure Automationを設定するために必要な手順が多数ある場合 <a href="https://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx">もあります</a>。 Azure Automation チームと Azure PowerShell チームは、より簡単な代替手段を提供します。Azure Automation は、Azure Active Directory 組織の ID 資格情報ベースの認証を使用して Azure  <strong>に対して認証できます。注: </strong>Microsoft アカウント資格情報 (旧称 LiveIDs) は、Azure Automation で動作しません。


  &nbsp;

  <h2>認証による管理用に Azure をAzure Active Directoryする</h2>

  Azure Automationバージョン 0.8.6 の Azure PowerShell モジュールに含め、OrgId (Azure Active Directory ユーザー) の資格情報ベースの認証を使用して Azure に対して非対話的に認証する機能が導入されました。 次の手順を使用して、この認証の種類Azure Automation Azure と話すアカウントを設定できます。


  &nbsp;

  <h3>管理する azure Azure Active Directory関連付けられているリソースを検索します。</h3>

  <ol>
   <li>管理する Azure Azure portalのサービス管理者として、管理するサービス管理者として Azure Automation。 このユーザーを見つけるには、この Azure サブスクリプションにアクセスできる任意のユーザーとして Azure portal にログインし、[管理者] をクリック<strong></strong>設定クリック<strong>します</strong>。<img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image012.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" /><img title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image001sdfsdfdsf.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="143" border="0" /></li>
   <li>管理する Azure サブスクリプションに関連付けられているディレクトリの名前をメモします。 このディレクトリを見つけるには、[サブスクリプション] <strong>設定</strong>クリック<strong>します</strong>。</li>
  </ol>

  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/08/27/aa-ad-new-image.png"><img class="alignnone size-medium wp-image-202061" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/aa-ad-new-image-636x118.png" alt="aa-ad-new-image" width="636" height="118" /></a>

  <h3></h3>

  <h3>管理するAzure Active Directory Azure サブスクリプションに関連付けられているディレクトリにユーザーを作成します。</h3>

  このディレクトリにユーザーが既にAzure Active Directory場合は、この手順をスキップできます。 この OrgId を使用して Azure を管理する予定です。


  1. [Active Directory Azure portal] をクリックします。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image002.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="219" height="480" border="0" />


  &nbsp;


  2. この Azure サブスクリプションに関連付けられているディレクトリ名をクリックします。 ディレクトリが表示されない場合、またはディレクトリにアクセスするためのアクセス許可を持てない場合は、このディレクトリへの読み取り/書き込みアクセス権を持つユーザーとしてログインするか、管理する <a href="https://technet.microsoft.com/en-us/library/dn629580.aspx" target="_blank">Azure</a> サブスクリプションに関連付けられているディレクトリを変更します (<strong>設定</strong> -&gt; <strong>Subscriptions</strong> -&gt; <strong>Edit</strong> <strong>Directory</strong>)。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image003sdfdsfdsf.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="186" border="0" />


  &nbsp;


  3. [ユーザー] <b>タブをクリック</b> し、[ユーザーの追加 <b>] ボタンをクリック</b> します。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image004.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="360" height="183" border="0" />


  &nbsp;


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image005sddsfdf.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="244" height="84" border="0" />


  &nbsp;


  4. ユーザーの種類として、[組織内の新しいユーザー] を選択します。 作成するユーザーのユーザー名を入力します。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image006.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="247" border="0" />


  &nbsp;


  5. ユーザーのプロファイルに入力します。 ロールの場合は、[ユーザー] を選択します。 多要素認証を有効にしない。 多要素アカウントは、多要素アカウントとAzure Automation。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image008.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="343" border="0" />


  &nbsp;


  6. <b>Create</b> をクリックしてください。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image010.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="292" border="0" />


  &nbsp;


  7. 完全なユーザー名 (@ 記号の後の部分を含む) と一時パスワードを入力します。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image011sdfdsfsdf.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="309" border="0" />

  <h3></h3>

  &nbsp;


  &nbsp;

  <h3>このユーザー Azure Active Directoryこの Azure サブスクリプションの管理を許可する</h3>

  &nbsp;


  1. [<b>設定 ]</b> (StorSimple の下にある [Azure] タブの下部) をクリックします。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image012.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="247" height="360" border="0" />


  &nbsp;


  2. <b>[管理者]</b>


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image013.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="126" border="0" />


  &nbsp;


  3. <b>[追加]</b> ボタンをクリックします。 Azure を管理するように設定するユーザーの完全なユーザー Azure Active Directory名 (@ 記号の後の部分を含む) を入力します。 サブスクリプションの場合は、このユーザーが管理できる Azure サブスクリプションを選択します。 チェック マークをクリックします。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image014.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="360" height="84" border="0" />


  &nbsp;


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image015.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="415" border="0" />

  <h3></h3>

  &nbsp;


  &nbsp;

  <h3>ユーザーのパスワードAzure Active Directory一時パスワードから変更する</h3>

  1. Azure からログ アウトします。


  2. 完全なユーザー名 (@ 記号Azure Active Directory含む) と一時パスワードを使用して、作成したユーザーのユーザーとして Azure にログインします。


  3. これで、ユーザーのパスワードを変更するように求められます。


  &nbsp;


  &nbsp;

  <h3>このAzure Automationを使用してこの Azure Azure Active Directory管理するように構成する</h3>

  &nbsp;


  1. 作成したAzure Automationユーザーのユーザー名とパスワードを含むAzure Active Directory資格情報資産を作成します。 Automation アカウントをクリックし、[資産] タブAzure Automation [設定の追加] ボタンをクリックすることで、資格情報資産を <strong></strong> Azure Automation で <strong>作成</strong>できます。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image017.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="390" border="0" />


  &nbsp;


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image019.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="388" border="0" />


  &nbsp;


  &nbsp;

  <h2>Azure Automation Runbook からの Azure の管理</h2>

  &nbsp;


  Azure と Azure Automation で Azure Active Directory 資格情報を設定したら、この資格情報を使用して Azure Automation Runbook から Azure を管理できます。 前に作成した Automation 資産から Azure Active Directory 資格情報を取得し、それを使用して Azure サブスクリプション内のすべての仮想マシンを表示する Runbook の例を次に示します。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/azure-automation-getazurevmnamessample-1-6-2015.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" border="0" />


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image023.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="143" border="0" />


  &nbsp;


  この Runbook を使用する場合は、 の SubscriptionName パラメーターSelect-AzureSubscriptionする Azure サブスクリプションの名前を入力します。 認証に使用Azure Active Directoryユーザーに、このサブスクリプションへの管理者アクセス権が付与されている必要があります (このプロセスは上記で説明します)。


  &nbsp;


  Azure サブスクリプションの名前は、次の<b>設定タブで</b>確認Azure portal。


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/iuyjhtgrfd.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="247" height="360" border="0" />


  &nbsp;


  <img style="margin: 0px auto; padding-left: 0px; padding-right: 0px; float: none; padding-top: 0px; border: 0px;" title="Azure Automation: Azure Active Directory を使用して Azure を認証する" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/image025.png" alt="Azure Automation: Authenticating to Azure using Azure Active Directory" width="610" height="175" border="0" />


  &nbsp;


  上記の Runbook の例については、こちらから ScriptCenter <a title="を参照" href="https://gallery.technet.microsoft.com/Get-Azure-VMs-using-Active-fd862109">してください</a>。


  管理証明書を使用して Azure Automation から Azure に認証する元の方法は<a href="https://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx"></a>引き続き <a href="https://gallery.technet.microsoft.com/scriptcenter/Connect-to-an-Azure-f27a81bb">Connect-Azure</a> Runbook を介して可能ですが、この Runbook は非推奨になり、代わりに Azure Active Directory を使用した組織 ID 資格情報ベースの認証を使用する必要があります。


  &nbsp;

  <h2>まとめ</h2>

  これで、Azure サービスを管理するために、OrgID ユーザーと組織 ID のAzure Active Directoryが設定Azure Automation。 今後は、クラウド プロセスを自動化するための Runbook の作成を簡単に実行できる必要があります。 この更新プログラムの一環として、この認証を使用するために <a href="https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure&amp;f%5B0%5D.Text=Windows%20Azure&amp;f%5B1%5D.Type=SubCategory&amp;f%5B1%5D.Value=WindowsAzure_automation&amp;f%5B1%5D.Text=Automation&amp;f%5B2%5D.Type=User&amp;f%5B2%5D.Value=SC%20Automation%20Product%20Team&amp;f%5B2%5D.Text=SC%20Automation%20Product%20Team">、すべての Azure Automation</a> サンプルおよびユーティリティ Runbook も更新され、Runbook ギャラリー内の既存のコンテンツを簡単に設定できます。


  次回まで - 常に常にオンにし、自動化します (Azure Active Directory!


  &nbsp;


  次のAzure Automation?このサービスについては、こちらを <a href="https://aka.ms/Q2p1ap" target="_blank">確認し</a>、Twitter のAzure Automation <a href="https://twitter.com/AzureAutomation" target="_blank">に従ってください</a>。


  個人的に連絡を取りたい場合は、 ブログで連絡 <a href="https://jodoglevy.com" target="_blank">するか、</a> Twitter でフォロー <a href="https://twitter.com/jodoglevy" target="_blank">してください</a>。
