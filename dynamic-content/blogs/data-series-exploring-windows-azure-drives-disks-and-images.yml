### YamlMime:Yaml
ms.openlocfilehash: f66e7ac385466732fab21fa9da7dafd21bed41c9
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891113"
Slug: data-series-exploring-windows-azure-drives-disks-and-images
Title: 'データ系列: Windows Azure のドライブ、ディスク、イメージの探索'
Summary: azure Virtual Machines Windows のプレビューでは、Windows Azure Storage に格納されている2つの新しい特殊な種類の blob があります。 azure 仮想マシンのディスクと windows azure の仮想マシンイメージを Windows します。
Content: '<p><a href="https://www.windowsazure.com/en-us/home/scenarios/virtual-machines/">azure Virtual Machines Windows</a>のプレビューでは、azure 仮想マシンのディスクとウィンドウの azure 仮想マシンイメージの Windows の2つの新しい特殊な種類の blob が Windows Azure Storage に格納されています。 もちろん、Windows Azure ドライブの既存のプレビューもあります。 この記事の残りの部分では、ストレージ、ディスク、イメージ、ドライブと呼ばれています。 この記事では、ドライブ、ディスク、イメージの概要と、記憶域との対話方法について説明します。</p>  <h4>仮想ハードドライブ (Vhd)</h4>  <p>ドライブ、ディスク、イメージはすべて、ストレージアカウント内にページ blob として格納されているすべての <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd323654(v=vs.85).aspx"><b>vhd</b></a> です。 実際には、いくつか若干異なる <a href="https://go.microsoft.com/fwlink/?LinkId=137171"><b>VHD 形式</b></a>があります。固定、動的、差分です。 現時点では、Windows Azure では fixed &rsquo; という名前 &lsquo; の形式のみがサポートされています。 この形式では、ディスクオフセット X が blob オフセット X に格納されるように、ファイル形式で論理ディスクが直線的に配置されます。Blob の末尾には、VHD のプロパティを説明する小さなフッターがあります。 ページ blob に格納されているすべてのは、標準の VHD 形式に準拠しているため、この VHD を使用してオンプレミスのサーバーにマウントできます (選択した場合)。 固定フォーマットの場合、ほとんどのディスクに大きな未使用の範囲が含まれるため、容量が無駄になることがよくあります。 ただし、固定 &rsquo; vhd は<a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2010/04/11/using-windows-azure-page-blobs-and-how-to-efficiently-upload-and-download-page-blobs.aspx">ページ blob</a>として保存 &lsquo; されます。これはスパース形式であるため、固定 &rsquo; ディスクと &lsquo; 拡張 &rsquo; 可能ディスクの両方 &lsquo; の利点を同時に利用できます。</p>  <h4>vhd を Windows Azure Storage にアップロードしています</h4>  <p>ストレージアカウントに VHD をアップロードして、PaaS または IaaS に使用することができます。 VHD をストレージにアップロードする場合は、ページ blob がスパースであることを認識するツールを使用し、実際のデータが含まれている VHD の部分のみをアップロードします。 また、動的な vhd がある場合は、アップロードの実行中に動的 VHD を固定 VHD に変換するツールを使用する必要があります。 この2つの操作は csuの ad によって行われ、 <a href="https://azure.microsoft.com/en-us/develop/downloads/">Windows Azure SDK</a>の一部として含まれています。</p>  <h4>永続性と持続性</h4>  <p>ドライブ、ディスク、イメージはすべてストレージに格納されるため、仮想マシンを別の物理コンピューターに移動する必要がある場合でも、データは保持されます。 これは、データが<a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx">Windows Azure Storage アーキテクチャによって提供</a>される耐久性を活用することを意味します。これは、ディスク/ドライブにバッファーされていない、またはフラッシュされたすべての書き込みが、正常にアプリケーションに戻る前に永続性を確保するために、ストレージ内で3回レプリケートされます。</p>  <h4>ドライブ (PaaS)</h4>  <p>ドライブは、PaaS ロール (Worker ロール、Web ロール、および VM ロール) によって、VHD をマウントし、ドライブ文字を割り当てるために使用されます。 これらのドライブの使用方法については、多くの詳細があります。 ドライブは、vm 内で実行されるカーネルモードドライバーを使用して実装されます。そのため、vm 内のドライブとの間のディスク io によって、Windows Azure Storage で vm からページ blob へのネットワーク io が発生します。 次の図は、vm 内で実行されているドライバーを示しています。 VM &rsquo; の仮想ネットワークアダプターを介してストレージと通信しています。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="azure ドライブ" border="0" alt="azuredrive" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6443.azuredrive_5F00_thumb_5F00_0E86B5F0.jpg" width="554" height="327"></a></p>  <p>PaaS ロールでは、ロールごとに最大16台のドライブをマウントできます。</p>  <h4>ディスク (IaaS)</h4>  <p>Windows Azure の仮想マシンを作成すると、プラットフォームによって、少なくとも 1 つのディスクがオペレーティング システム ディスク用に VM に接続されます。 このディスクは、ストレージにページ blob として格納されている VHD としても使用されます。 VM 内のディスクに書き込むと、ディスクへの変更がストレージ内のページ blob に対して行われます。 VM に <a href="https://www.windowsazure.com/en-us/manage/windows/how-to-guides/attach-a-disk/">追加のディスク</a> をデータディスクとして接続することもできます。これらのディスクは、ページ blob としてストレージにも格納されます。</p>  <p>ドライブの場合とは異なり、ディスクの代わりにストレージと通信するコードは VM 内には存在しません。そのため、ディスクに対して IO を実行しても、VM ではネットワークアクティビティが発生しませんが、物理ノードではネットワークアクティビティが発生します。 次の図は、ホストオペレーティングシステムでのドライバーの実行方法を示しています。 VM は、ディスクインターフェイスを介してドライバーに通信し、ホストネットワークアダプターを介して記憶域に通信します。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="azure ドライブ" border="0" alt="azuredrive" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5873.azuredrive_5F00_thumb_5F00_5B4A7C86.jpg" width="557" height="329"></a></p>  <p>仮想マシンがマウントできるディスクの数には制限があります。これは、大規模な仮想マシン用の16個のデータディスクから、1つのデータディスクに対して、追加の小さい仮想マシンに対して異なります。 詳細については、 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj156003">こちら</a>を参照してください。</p>  <p><b>大事な：</b>Windows Azure platform は、ストレージアカウント内のディスクと見なされるすべてのページ blob に<a href="https://msdn.microsoft.com/en-us/library/windowsazure/ee691972.aspx">無期限のリース</a>を保持します。これにより、VM が VHD を使用しているときに、基になるページ blob、コンテナー、およびストレージアカウントを誤って削除しないようにすることができ &rsquo; ます。 基になるページ blob、それが含まれているコンテナー、またはストレージアカウントを削除する場合は、次に示すように、まず VM からディスクをデタッチする必要があります。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="detatchdisk" border="0" alt="detatchdisk" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4774.detatchdisk_5F00_thumb_5F00_41764657.jpg" width="570" height="54"></a></p>  <p>次に、切断するディスクを選択してから、次のように削除します。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="detachdiskfromvm" border="0" alt="detachdiskfromvm" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1145.detachdiskfromvm_5F00_thumb_5F00_04DE47BA.jpg" width="405" height="286"></a></p>  <p>次に、ポータルからディスクを削除する必要があります。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="vmdisks" border="0" alt="vmdisks" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1157.vmdisks_5F00_thumb_5F00_0405E1D0.jpg" width="561" height="99"></a></p>  <p>次に、ウィンドウの下部にある [ディスク &rsquo; の削除] を選択 &lsquo; できます。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="deletedisk" border="0" alt="deletedisk" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1638.deletedisk_5F00_thumb_5F00_5135DB5B.jpg" width="305" height="69"></a></p>  <p><b>注</b>: ディスクを削除しても、ストレージアカウントのディスク (VHD ページ blob) は削除されません。 Windows Azure Virtual Machines に使用できるイメージからのみ関連付けを解除します。 上記の手順をすべて完了したら、Windows Azure Storage REST api またはストレージエクスプローラーを使用して、ストレージアカウントからディスクを削除することができます。<b></b></p>  <h4>イメージ (IaaS)</h4>  <p>Windows Azure では、 &ldquo;1つ以上の Virtual Machines を作成するために使用できるテンプレート VHD を説明するイメージ &rdquo; です。 Windows Azure と一部のパートナーには、Virtual Machines の作成に使用できるイメージが用意されています。 また、既存の Windows Azure 仮想マシンの<a href="https://www.windowsazure.com/en-us/manage/windows/how-to-guides/capture-an-image/">イメージをキャプチャ</a>してイメージを作成したり、 <a href="https://www.windowsazure.com/en-us/manage/windows/common-tasks/upload-a-vhd/">sysprep &rsquo; d イメージ</a>をストレージアカウントにアップロードしたりすることもできます。 イメージも VHD 形式ですが、プラットフォームはイメージに書き込みません。 代わりに、イメージから仮想マシンを作成すると、システムによってストレージアカウントにそのイメージ &rsquo; のページ blob のコピーが作成され、そのコピーが仮想マシン &rsquo; のオペレーティングシステムディスクで使用されます。</p>  <p><b>重要: </b>Azure は、すべてのページ blob、blob コンテナー、およびストレージアカウント内のイメージを考慮するストレージアカウントに対して無期限のリースを保持して Windows ます。 そのため、基になるページ blob を削除するには、[Virtual Machines &rdquo; ] セクションの &ldquo; [ &ldquo; イメージ &rdquo; ] をクリックして、ポータルからイメージを削除する必要があります。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="vmimages" border="0" alt="vmimages" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0552.vmimages_5F00_thumb_5F00_09745274.jpg" width="553" height="144"></a></p>  <p>次に、イメージを選択し、画面の下部にある [イメージ &rdquo; の削除] を &ldquo; クリックします。 これにより、登録済みのイメージのセットから VHD の関連付けが解除されますが、ストレージアカウントからページ blob が削除されることはありません。 その時点で、ストレージアカウントからイメージを削除することができます。</p>  <h4>一時ディスク</h4>  <p>すべての web ロール、worker ロール、VM ロール、および Windows Azure Virtual Machines と呼ばれる、一時ディスクと呼ばれる別のディスクがあります。 これは、スクラッチ領域に使用できるノード上の物理ディスクです。 VM が別の物理マシンに移動されると、このディスク上のデータは失われます。これは、アップグレード時や修正プログラム中に発生する可能性があります。また、実行中のノードに問題があることが Azure によって検出された Windows 場合にも、このディスクは失われます。 一時ディスクに提供されるサイズは、 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj156003">ここで</a>定義されています。</p>  <p>一時ディスクは、オペレーティングシステム &rsquo; のページファイルを格納するのに最適な場所です。<b></b></p>  <p><b>大事な：</b> 一時ディスクは永続的ではありません。 このディスクのみにデータを書き込むようにしてください。データはいつでも失われることがあります。</p>  <h3>課金</h3>  <p><a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx">帯域幅、トランザクション、Storage 容量</a>については、Windows Azure Storage 料金がかかることがあります。 それぞれのユニットごとのコストは、 <a href="https://www.windowsazure.com/en-us/pricing/details/">こちらで</a>確認できます。</p>  <h4>帯域幅</h4>  <p>ドライブは、格納されているストレージアカウントと同じ場所 (たとえば、米国東部) からマウントすることをお勧めします。これにより、最適なパフォーマンスが得られます。また、帯域幅の料金も発生しません。 ディスクを使用する場合は、ディスクが格納されているのと同じ場所でそれらを使用する必要があります。</p>  <h4>トランザクション</h4>  <p>VM に接続すると、ドライブとディスクの両方からのディスク Io が記憶域から満たされます (以下に説明するキャッシュのいずれかのレイヤーが最初に要求を満たすことができる場合を除きます)。 s ディスク io では、IO ごとに1つの Windows Azure Storage トランザクションが発生します。 大容量のディスク Io はより小さな Io に分割されるため、より多くのトランザクション料金が発生します。 この内訳は次のとおりです。</p>  <ul>  <li>ドライブ</li>  <ul>  <li>IO &lt; 2 mb は1トランザクションです</li>  <li>IO &gt; = 2 mb は 2 mb 以下のトランザクションに分割されます</li>  </ul>  <li>ディスク</li>  <ul>  <li>IO &lt; 128 キロバイトは1トランザクションです</li>  <li>IO &gt; = 128 kb は、128 kb 以下のトランザクションに分割されます</li>  </ul>  </ul>  <p>さらに、オペレーティングシステムでは、多くの場合、小規模な順次 Io (通常は 64 kb 未満) に対して少し先読みが行われるため、アプリケーションによって発行された IO サイズよりもサイズの大きい io がドライブ/ディスクになる可能性があります。 プリフェッチされたデータを使用すると、アプリケーションによって発行された Io の数よりもストレージアカウントへのトランザクションが減少する可能性があります。</p>  <h4>ストレージの容量</h4>  <p>Windows Azure Storage は、ページ blob とそのための vhd をスパース形式で格納します。したがって、vhd の有効期間中に実際に書き込まれた vhd 内のデータに対してのみ課金されます。 そのため、ページ blob 内に大きな0の範囲を格納しないようにするため、クイックフォーマット &rsquo; を使用することをお勧めし &lsquo; ます。 VHD を作成するときに、次のように指定して、[クイックフォーマット] オプションを選択できます。</p>  <p><a href=""><img style="display: inline; background-image: none;" title="クイックフォーマット" border="0" alt="quickformat" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6332.quickformat_5F00_thumb_5F00_6FA01C44.jpg" width="556" height="425"></a></p>  <p>また、VHD によって使用されるファイルシステム内のファイルを削除する場合、ほとんどのオペレーティングシステムはこれらの範囲をクリアしたりゼロにしたりしないので、ディスク/ドライブを使用して削除したデータの blob 内でも容量料金を支払うことができます。</p>  <h3>キャッシュ、キャッシュ、その他のキャッシュ</h3>  <p>ドライブとディスクは両方ともディスク上のキャッシュと、一部のメモリ内キャッシュをサポートしています。 オペレーティングシステムとアプリケーションライブラリの多くの層では、メモリ内キャッシュも実行されます。 ここでは、アプリケーション開発者が選択するキャッシュの一部について説明します。</p>  <p>キャッシュを使用すると、パフォーマンスを向上させたり、トランザクションのコストを削減したりできます。 次の表に、ディスクとドライブで使用できるキャッシュの一部を示します。 各の詳細については、表の下で説明します。</p>  <table border="1" cellspacing="0" cellpadding="0">  <tbody>  <tr>  <td valign="top" width="115"></td>  <td valign="top" width="138">  <p>Type</p>  </td>  <td valign="top" width="181">  <p>目的</p>  </td>  <td valign="top" width="204">  <p>データの永続化</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>FileStream</p>  </td>  <td valign="top" width="138">  <p>メモリ</p>  </td>  <td valign="top" width="181">  <p>パフォーマンスを向上させ、シーケンシャルな読み取りと書き込みのために IOs を削減します。</p>  </td>  <td valign="top" width="204">  <p>書き込みは自動的には保存されません。 書き込みを永続化するには、Flush &rdquo; を呼び出し &ldquo; ます。</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>オペレーティングシステムのキャッシュ</p>  </td>  <td valign="top" width="138">  <p>メモリ</p>  </td>  <td valign="top" width="181">  <p>は、パフォーマンスを向上させ、ランダムおよび順次読み取りと書き込みのために IOs を減らします。</p>  </td>  <td valign="top" width="204">  <p>書き込みは自動的には保存されません。 [ファイルハンドルを使用した書き込み] または &ldquo; [フラッシュ &rdquo; ] を使用 &ldquo; して &rdquo; 書き込みを保持します。</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>Windows Azure ドライブキャッシュ</p>  </td>  <td valign="top" width="138">  <p>メモリとディスク</p>  </td>  <td valign="top" width="181">  <p>ストレージへの読み取りトランザクションを減らします。 では、ワークロードに応じて順次 IO のパフォーマンスを向上させることができます。</p>  </td>  <td valign="top" width="204">  <p>書き込みは自動的に保存されます。 ファイルハンドルを使用 &ldquo; した書き込み、または &ldquo; 書き込みが永続化されて &rdquo; いることをフラッシュするためにフラッシュ &rdquo; します。</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>Azure 仮想マシンのディスクキャッシュの Windows</p>  </td>  <td valign="top" width="138">  <p>メモリとディスク</p>  </td>  <td valign="top" width="181">  <p>トランザクションをストレージに減らします。 では、ワークロードに応じて順次 IO のパフォーマンスを向上させることができます。 起動時間が短縮されます。</p>  </td>  <td valign="top" width="204">  <p>書き込みは自動的に保存されます。 ファイルハンドルを使用 &ldquo; した書き込み、または &ldquo; 書き込みが永続化されて &rdquo; いることをフラッシュするためにフラッシュ &rdquo; します。</p>  </td>  </tr>  <tr>  <td valign="top" width="115">  <p>ディスクまたはドライブのキャッシュなし</p>  </td>  <td valign="top" width="138">  <p>該当なし</p>  </td>  <td valign="top" width="181">  <p>では、ワークロードに応じてランダム IO と順次 IO のパフォーマンスを向上させることができます。</p>  </td>  <td valign="top" width="204">  <p>書き込みは自動的に保存されます。 ファイルハンドルを使用 &ldquo; した書き込み、または &ldquo; 書き込みが永続化されて &rdquo; いることをフラッシュするためにフラッシュ &rdquo; します。</p>  </td>  </tr>  </tbody>  </table>  <h4>FileStream (ディスクとドライブの両方に適用されます)</h4>  <p>.NET framework &rsquo; の <a href="https://msdn.microsoft.com/en-us/library/y0bs3w9t">FileStream</a> クラスは、ディスクへの io を減らすために、読み取りと書き込みをメモリにキャッシュします。 一部の FileStream コンストラクターはキャッシュサイズを取得し、他のコンストラクターは既定の8k キャッシュサイズを選択します。 最小キャッシュサイズは8バイトであるため、クラスでメモリキャッシュを使用しないように指定することはできません。 <a href="https://msdn.microsoft.com/en-us/library/ee474552">FileStream (bool)</a> API を呼び出すことにより、バッファーをディスクに強制的に書き込むことができます。</p>  <h4>オペレーティングシステムのキャッシュ (ディスクとドライブの両方に適用されます)</h4>  <p><strong>FILE_FLAG_WRITE_THROUGH</strong>または<strong>FILE_FLAG_NO_BUFFERING</strong>を使用してファイルを開くときに明示的にオフにしない限り、オペレーティングシステム自体は読み取りと書き込みの両方に対してメモリ内バッファリングを行います。 Windows のインメモリキャッシュ動作の詳細については、 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx#caching_behavior">こちら</a>を参照してください。</p>  <h4>Azure ドライブキャッシュの Windows</h4>  <p>ドライブを使用すると、ノード &rsquo; s ローカル一時ディスクを読み取りキャッシュとして使用するか、キャッシュをまったく使用しないかを選択できます。 ドライブ &rsquo; s キャッシュの領域は、web ロールまたはワーカーロール &rsquo; の一時ディスクから割り当てられます。 このキャッシュはライトスルーであるため、書き込みは常にストレージに直ちにコミットされます。 読み取りは、ローカルディスクから、またはストレージから実行されます。</p>  <p>ドライブのローカルキャッシュを使用すると、読み取り &lsquo; がキャッシュにヒット &rsquo; したときにシーケンシャル IO 読み取りパフォーマンスが向上します。 次の場合、順次読み取りでキャッシュがヒットします。</p>  <ol>  <li>データは以前に読み取られています。 データは、最初の書き込みではなく、最初に読み取られたときにキャッシュされます。</li>  <li>キャッシュは、すべてのデータを保持するのに十分な大きさです。</li>  </ol>  <p>多くの場合、blob にアクセスすることで、ローカルディスクよりも高い頻度でランダム Io を実現できます。 ただし、これらのランダム Io では、ストレージトランザクションのコストが発生します。 ストレージに対するトランザクションの数を減らすには、ランダムな Io にもローカルディスクキャッシュを使用できます。 最良の結果を得るには、ディスクへのランダム書き込みが 8 KB にアラインされ、IO サイズが 8 KB の倍数になっていることを確認します。</p>  <h4>Azure 仮想マシンのディスクキャッシュの Windows</h4>  <p>バーチャルマシンを展開する場合、OS ディスクには次の2つのホストキャッシュオプションがあります。</p>  <ol>  <li>読み取り/書き込み (既定値) &ndash; キャッシュの書き戻し</li>  <li>読み取り/書き込み (キャッシュ経由)</li>  </ol>  <p>仮想マシンにデータディスクを設定すると、次の3つのホストキャッシュの選択肢が表示されるようになります。</p>  <ol>  <li>読み取り/書き込み &ndash; のライトバックキャッシュ</li>  <li>キャッシュを使用した読み取り &ndash; 書き込み</li>  <li>なし (既定)</li>  </ol>  <p>データディスクと OS ディスクに使用するキャッシュの種類は、現在ポータル経由で公開されていません。 ホストキャッシュの種類を設定するには、サービス管理 Api ( <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj157199">データディスクの追加</a> または <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj157190">データディスクの更新</a>) または Powershell コマンド (<a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj152837">Azuredatadisk</a> または <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj152851">set azuredatadisk</a>) のいずれかを使用する必要があります。</p>  <p>読み取りキャッシュは、ホスト OS のディスクとメモリの両方に格納されます。 書き込みキャッシュは、ホスト OS のメモリに格納されます。</p>  <p>警告: アプリケーションで <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">FILE_FLAG_WRITE_THROUGH</a>が使用されていない場合、物理マシンが予期せずクラッシュしたときにデータが書き込まれるのを待機しているため、書き込みキャッシュによってデータが失われる可能性があります。</p>  <p>読み取りキャッシュを使用すると、読み取りがキャッシュにヒット &rsquo; し &lsquo; たときにシーケンシャル IO 読み取りパフォーマンスが向上します。 次の場合、順次読み取りでキャッシュがヒットします。</p>  <ol>  <li>データは以前に読み取られています。</li>  <li>キャッシュは、すべてのデータを保持するのに十分な大きさです。</li>  </ol>  <p>ディスクのキャッシュ &rsquo; のサイズは、インスタンスのサイズとマウントされたディスクの数によって異なります。 キャッシュは、最大 4 つのデータ ディスクにのみ有効にすることができます。</p>  <h4>Windows Azure ドライブと VM ディスクのキャッシュなし</h4>  <p>Windows Azure Storage では、キャッシュに使用されるノードのローカルディスクよりも高い頻度でランダム io を提供できます。 アプリケーションでランダム Io を大量に実行する必要があり、スループットが重要な場合は、上記のキャッシュを使用しないことを検討してください。 ただし、ios の Windows Azure Storage はトランザクションのコストを発生させることに注意してくださいが、ios はローカルキャッシュにはありません。</p>  <p>Windows の Azure ドライブキャッシュを無効にするには、Mount () API を呼び出すときに、キャッシュサイズに 0 &rsquo; を渡し &lsquo; ます。</p>  <p>仮想マシンのデータディスクの場合、既定の動作ではキャッシュが使用されません。 データディスクでキャッシュを有効にした場合は、 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj157190">Update Data disk</a> SERVICE management API または <a href="https://msdn.microsoft.com/en-us/library/windowsazure/jj152851">Set azuredatadisk</a> powershell コマンドを使用して無効にすることができます。</p>  <p>仮想マシンのオペレーティングシステムディスクの場合、既定の動作ではキャッシュが使用されます。 アプリケーションで大量のランダムな IOs データファイルを使用する場合は、キャッシュが無効になっているデータディスクにそれらのファイルを移動することを検討してください。</p>  <p>  <p>Andrew Edwards と Brad Calder</p>'
