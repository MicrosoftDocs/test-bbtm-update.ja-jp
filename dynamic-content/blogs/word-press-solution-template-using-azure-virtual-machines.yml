### YamlMime:Yaml
ms.openlocfilehash: 25a819c58227e2d13b25c5e2981c307cbf0987a0
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890598"
Slug: word-press-solution-template-using-azure-virtual-machines
Title: MySQL 仮想マシンでサポートされている Azure App Service 上の WordPress
Summary: 拡張性の高い高可用性 WordPress アプリに最適な Azure App Service と Azure virtual machines を組み合わせた、WordPress 向けのハイブリッドソリューションテンプレートをデプロイします。
Content: "<div style=\"background-color: rgb(192, 192, 192);padding:10px \"><strong>更新: このテンプレートは一時的に削除されました。このことを回避するには、このテンプレートを<a href=\"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fsunbuild%2Fazure-quickstart-templates%2Fdev%2Fwordpress-mysql-replication%2Fazuredeploy.json\">ここ</a>からデプロイします。 &nbsp; </strong>今後の更新については、このブログ投稿をご確認ください。</div>\n\n<p>&nbsp;</p>\n\n<p>お客様からのフィードバックに基づいて、ハイブリッド Azure Resource Manager (ARM) テンプレートを作成し、Azure virtual machines で実行されている MySQL database クラスターによってサポートされる Azure App Service Web Apps で実行される WordPress アプリケーションの作成を自動化します。 Azure Marketplace でこのテンプレートを発表することをお待ちしております。</p>\n\n<p>このテンプレートのプロパティを次に示します。</p>\n\n<ul>\n <li>Azure 仮想マシンが MySQL 5.6 サーバーをホストするために CentOS 6.6 が使用されます。</li>\n <li>GTID ベースのレプリケーションが構成およびテストされている</li>\n <li>Azure VNet に2ノードの MySQL マスタースレーブ構成をプロビジョニングします。この構成では、2つのデータディスクが Raid にストライピングされます。standard storage と premium storage の両方がサポートされています。</li>\n <li>2つの Vm の前にロードバランサーがプロビジョニングされるため、Vm がインターネットに直接公開されることはありません。MySQL と SSH ポートは、ネットワークセキュリティグループのルールを使用してロードバランサーを介して公開されます。</li>\n <li>MySQL の正常性の監視に使用できる各 MySQL インスタンスの HTTP ベースの正常性プローブを構成します。</li>\n</ul>\n\n<p>次の図は、このソリューションテンプレートの Azure のデプロイアーキテクチャを示しています。</p>\n\n<p><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a9d69ec6-d9bd-419c-be1d-f57966bb768d.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; margin-right: auto; margin-left: auto; display: block; width: 610px; height: 415px; background-image: none;\" title=\"\"></p>\n\n<p>オープンソースベースのデータソリューションを市場に届けるための迅速なアプローチをお探しの場合は、 <a href=\"https://azure.microsoft.com/en-us/trial/free-trial-open-source/\">無料試用版</a> を確認し、Azure Marketplace のさまざまなソリューションをご確認ください。</p>\n\n<h3>手順 1</h3>\n\n<p>デプロイするにはここをクリックしてください。または、 <a href=\"https://portal.azure.com\">Azure portal</a>にアクセスして、Marketplace で MySQL レプリケーションクラスター &rdquo; を使用して WordPress を検索 &ldquo; することもできます。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f48f62fd-f868-40bb-a14d-14c749e6817f.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f48f62fd-f868-40bb-a14d-14c749e6817f.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 480px; height: 440px; background-image: none;\" title=\"\"></a></p>\n\n<h3>ステップ 2</h3>\n\n<p>プランのカバーページで [作成 &quot; ] をクリック &quot; した後、[基本 &quot; ] ページのパラメーター &quot; に入力します。 既存のリソースグループまたは新しいリソースグループを選択できます。 場所を選択するときに、premium storage が利用可能な <a href=\"https://azure.microsoft.com/en-us/regions/#services\">場所を</a> 選択します。 Premium storage は、すべてのデータセンターでまだ使用できるわけではないため、premium storage を使用するには、DS シリーズの Vm を使用する必要がある場合があります。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/98b6f455-ddc0-4f56-bd99-79f24ea8bd31.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/98b6f455-ddc0-4f56-bd99-79f24ea8bd31.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 308px; height: 360px; background-image: none;\" title=\"\"></a></p>\n\n<h3>手順 3.</h3>\n\n<p>[WordPress information] ページで、 <a href=\"https://azure.microsoft.com/en-us/pricing/details/app-service/\">利用可能な価格レベル</a>に従って、Web サイトの SKU を選択します。 このテンプレートは、Basic、Standard、およびプレミアム価格レベルをサポートしています。 Web アプリと WordPress データベースユーザーの資格情報の web サイトインスタンスのサイズも選択する必要があります。 WordPress データベースユーザーには、強力なパスワードを使用します。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/62fb3af3-f2a2-4689-8002-e026111a53df.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/62fb3af3-f2a2-4689-8002-e026111a53df.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 324px; height: 360px; background-image: none;\" title=\"\"></a></p>\n\n<h3>手順 4</h3>\n\n<p>&quot;[データベースクラスター情報 &quot; ] セクションで、仮想マシンのサイズとストレージアカウントの種類を指定します。</p>\n\n<ul>\n <li>MySQL サーバーの一意の名前を選択します。 完全な DNS 名は、 <em>mysqldns_name &gt; の形式 &lt; になります。 &lt;&gt;cloudapp.azure.com</em></li>\n <li>仮想マシンノードのサイズを選択します。 仮想マシンの価格について <a href=\"https://azure.microsoft.com/en-us/pricing/details/virtual-machines/\">は、こちら</a>を参照してください。</li>\n <li>一意の Azure ストレージ名を指定し、Azure storage の名前付け規則に従います。 Azure ストレージアカウントの種類を選択します。 データベースノードに DS シリーズの vm を選択する場合は、Premium storage のパフォーマンスを最大限に活用するために、既定の LRS ではなく、ストレージアカウントの種類としてプレミアム-LRS を選択することをお勧めします。</li>\n <li>VM イメージと MySQL サーバーにアクセスするためのユーザー資格情報を入力します。</li>\n</ul>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fd9ddc60-ffd6-4da7-849f-b8afb41bd5c2.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fd9ddc60-ffd6-4da7-849f-b8afb41bd5c2.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 294px; height: 480px; background-image: none;\" title=\"\"></a></p>\n\n<h3>手順 5.</h3>\n\n<p>仮想ネットワークの情報を入力します。 既存の仮想ネットワークを使用することも、新しい仮想ネットワークを作成することもできます。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/bf29d847-966c-4367-97d8-f09a855e4c34.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/8b0957f2-83a1-4361-92bf-b96a2de23fe3.png\" style=\"border-width: 0px; border-image-source: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 480px; height: 448px; background-image: none;\" title=\"\"></a></p>\n\n<h3>手順 6.</h3>\n\n<p>テンプレートに入力されたすべてのデータの概要を確認します。</p>\n\n<p>注: MySQL の Web サイト名、ストレージ名、ドメイン名は一意である必要があります。</p>\n\n<h4><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ddb5697e-1c2a-412b-ba22-4a137359fd8a.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d2cf5fea-5485-4f2a-a1ae-5446dcc492ba.png\" style=\"border-width: 0px; border-image-source: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 480px; height: 430px; background-image: none;\" title=\"\"></a></h4>\n\n<h3>手順 7.</h3>\n\n<p>プライバシーポリシーと使用条件を確認します。 <strong>選択した</strong><a href=\"https://azure.microsoft.com/en-us/pricing/\">価格レベル</a><strong>に従って、web アプリと Azure の仮想マシンに対して課金され</strong>ます。 たとえば、web アプリ層 S2 (標準、中規模) および D2 仮想マシンを選択した場合、推定コストは <em>$565</em>になります。 <a href=\"https://azure.microsoft.com/en-us/pricing/calculator/\">料金計算ツール</a>を使用してコストを評価してから、[<strong>作成</strong>] をクリックしてください。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6034ed24-0aab-4628-b95f-0a6267ac2206.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/19144435-1068-4383-9d60-007b7df37493.png\" style=\"border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 480px; height: 427px; background-image: none;\" title=\"\"></a></p>\n\n<p>このテンプレートを改善するために、フィードバックをお寄せください。このテンプレートを Azure App Service し<a href=\"https://feedback.azure.com/forums/169385-web-apps-formerly-websites\">てください。</a></p>\n\n<h3>トラブルシューティング</h3>\n\n<p>デプロイが失敗した場合は、手順 1. で使用したリソースグループに移動し、失敗したデプロイをクリックします。 エラーを展開し、エラーの原因となった最も古いイベントまで下にスクロールして、詳細なエラーメッセージを表示します。</p>\n\n<p>&nbsp; <a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7dc48054-61c3-4a25-9c6d-78df932c9a62.png\"><img alt=\"\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d924039f-613e-4798-9ec7-449c38f4ccc3.png\" style=\"border-width: 0px; border-image-source: none; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; width: 610px; height: 337px; background-image: none;\" title=\"\"></a></p>\n\n<p>エラーが一時的なものである場合、または無効なパラメーターによって発生した場合は &rsquo; 、リソースグループ全体を削除して、他のリソースが含まれていないことを確認し、再度デプロイします。</p>\n\n<h3>MySQL にアクセスする方法</h3>\n\n<p>パブリック DNS 名を使用して、MySQL サーバーにアクセスできます。 既定では、マスターサーバーにはポート3306、スレーブサーバーは3307にアクセスできます。 また、既定では、リモートホストからアクセスするためのすべての特権を持つユーザー管理者が作成されます。 たとえば、次のコマンドを使用してマスターにアクセスします。</p>\n\n<pre class=\"prettyprint\">\nmysql -h mysqldnsname.eastus.cloudapp.azure.com -u admin &ndash;p </pre>\n\n<p>MySQL サーバーが mysqldnsname.eastus.cloudapp.azure.com の場合は、MySQL コマンドラインを使用してデータベースにアクセスできます。 <a href=\"https://www.mysql.com/products/workbench/\">MySQL ワークベンチ</a>を使用してデータベースにアクセスすることもできます。 SSH を使用して仮想マシンにアクセスできます。 既定では、2つの Vm のパブリック SSH ポートは64001と64002です。 VM 内で次のコマンドを実行して、MySQL 正常性プローブを確認することができます。 MySQL が正常であることを示すには、200を返します。</p>\n\n<pre class=\"prettyprint\">\nwget \nwget </pre>\n\n<h3>MySQL の正常性を監視する方法</h3>\n\n<p>Mysql の正常性を確認するには、MySQL プローブに HTTP クエリを発行し、クエリが200状態コードを返すことを確認します。 次のコマンドを実際の DNS 名と場所に置き換えます。</p>\n\n<pre class=\"prettyprint\">\nwget \nwget <a href=\"\"></a></pre>\n\n<p><a href=\"https://github.com/Azure/azure-quickstart-templates/tree/master/mysql-replication\">GitHub リポジトリ</a>で追加のテンプレートを検索します。</p>"
