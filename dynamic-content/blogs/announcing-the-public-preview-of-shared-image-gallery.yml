### YamlMime:Yaml
ms.openlocfilehash: 19a9fce7cff93cd7277bac376ff31598dfc9ff46
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139893267"
Slug: announcing-the-public-preview-of-shared-image-gallery
Title: 共有イメージ ギャラリーのパブリック プレビューの発表
Summary: 2018 年 5 月に、Shared Image Gallery の限定プレビューが開始されました。 導入レベルを非常に高く評価し、フィードバックに基Shared Image Gallery改善しました。
Content: >-
  <p>2018 年 5 月に、Shared Image Gallery の限定プレビュー <a href="https://azure.microsoft.com/en-us/blog/shared-image-gallery-now-in-limited-public-preview/" target="_blank">が開始されました</a>。 導入レベルを非常に高く評価し、フィードバックに基Shared Image Gallery改善しました。 本日は、このサービスのパブリック プレビューをお知らせShared Image Gallery。</p>


  <p>Shared Image Galleryは、Azure で仮想マシン (VM) イメージのカスタム管理を容易にする Azure ベースのソリューションを提供します。 Shared Image Galleryでは、リージョン内またはリージョン間でアプリケーションを他のユーザーと共有する簡単な方法が提供され、リージョン間の拡張や DevOps プロセスの迅速化、リージョン間の HA/DR セットアップの簡素化などが可能になります。 Shared Image Gallery、カスタム イメージから数千の VM をすばやく同時にデプロイできます。</p>


  <h2>イメージの管理</h2>


  <p>Shared Image Gallery、顧客イメージの管理に役立つ 3 つの新しいリソースが導入されています。 階層の順序は次のとおりです。</p>


  <ul>
   <li>共有イメージ ギャラリー</li>
   <li>イメージの定義</li>
   <li>イメージ バージョン</li>
  </ul>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7d42aaf0-4f56-462a-b7f4-65c8a284565d.png"><img alt="Shared Image Gallery" border="0" height="673" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9a91bbc3-9ddc-47bc-8927-babd0a051bf0.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="Shared Image Gallery" width="892"></a></p>


  <p>これら 3 つのリソースを使用して、組織内で使用される可能性があるさまざまなカスタム イメージを整理できます。 たとえば、定期的に更新されるすべてのバージョンに共通のイメージ定義を定義できます。</p>


  <h2>サブスクリプション間でのイメージの共有</h2>


  <p>Shared Image Gallery で導入された 3 つの新しいリソースの種類は、ロール ベースのリソース グループを使用して、別のユーザー、サービス プリンシパル、または AD グループと共有Access Control。 共有されると、イメージと同じ AD テナント内の任意のサブスクリプションに VM または仮想マシン スケール セット (VMSS) を作成できます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/473f7d38-629c-40c8-be43-3515378f96db.png"><img alt="image" border="0" height="395" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/125683d4-fc7d-44ed-9964-741a234e4c89.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="イメージ" width="720"></a></p>


  <h2>異なる Azure リージョンへのレプリケート</h2>


  <p>Shared Image Galleryを使用すると、異なるリージョン間でイメージ バージョンをレプリケートできます。 つまり、すべてのイメージ バージョンを 1 つのリージョンに発行し、必要に応じて異なるリージョンにレプリケートできます。 レプリケーションが完了したら、そのリージョンに VM または VMSS をデプロイできます。 Shared Image Gallery、バージョンを互いに独立して異なるリージョンにレプリケートできます。 このシナリオの 1 つの例として、最新バージョンが常にグローバルにレプリケートされるのに対し、次に示すように、ストレージ コストを節約するために古いバージョンは 1 つのリージョンでのみレプリケートされます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3990c211-5536-46b1-9d82-3fb31cc9ce64.png"><img alt="image" border="0" height="387" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9781b1af-c42b-4097-a3f5-b9bd7b477d0e.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="イメージ" width="624"></a></p>


  <h2>VM/VMSS デプロイのスケール</h2>


  <p>Shared Image Gallery replicaCount という概念が導入されています。これは、リージョン内のイメージに保持するコピーの数です。 これは、同じイメージから 100/1000 台の VM を同時に作成しようとしているシナリオで役立ちます。 すべての VM が同じストレージ BLOB からデータを読み取りを試みたので、マネージド イメージがボトルネックになる可能性があります。 追加のレプリカを使用すると、読み取りが異なるレプリカに確実に広がり、VM デプロイ セットのボトルネックになる可能性を減らします。 すべてのリージョンの既定値として使用するグローバル レプリカ数と、特定のリージョンのリージョン レプリカ数をオーバーライドする方法を指定できます。 次の例では、イメージ バージョンのレプリカ数は 5 です。 そのため、そこから 50 台の同時実行 VM を作成しようとすると、各レプリカに拡散されます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/980f6e0f-1c56-4c85-99d3-41dcb5b7d6b7.png"><img alt="image" border="0" height="333" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4e720d9f-1bef-4335-95e7-d035e1b917ed.png" style="margin: 0px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="イメージ" width="720"></a></p>


  <h2>リージョン別の提供状況</h2>


  <p>Shared Image Galleryソース リージョンとターゲット リージョンの概 &ldquo;念&rdquo; について &ldquo;説明&rdquo; します。</p>


  <ul>
   <li><strong>ソース リージョン</strong> &ndash; ソース リージョンは、元のイメージ バージョンが作成される場所です。</li>
   <li><strong>ターゲット リージョン</strong> &ndash; これらは、イメージのレプリケート先として Azure に伝えるリージョンです。 これらは、イメージ バージョンの作成後に更新できます。 これらは、イメージ バージョンから VM または VMSS を作成できるリージョンです。</li>
  </ul>


  <p>現在使用できるリージョンを次に示します。</p>


  <table border="0" cellpadding="1" cellspacing="0">
   <tbody>
    <tr>
     <td valign="top"><strong>ソース リージョンでギャラリーを &ldquo;作成する&rdquo;</strong></td>
     <td valign="top"><strong>バージョンをターゲット リージョンに &ldquo;レプリケートする&rdquo;</strong></td>
    </tr>
    <tr>
     <td valign="top"><strong>米国中西部</strong></td>
     <td valign="top">すべての Azure Public Cloud リージョン</td>
    </tr>
    <tr>
     <td valign="top"><strong>米国中南部</strong></td>
     <td valign="top">&nbsp;</td>
    </tr>
    <tr>
     <td valign="top"><strong>米国東部 2</strong></td>
     <td valign="top">&nbsp;</td>
    </tr>
    <tr>
     <td valign="top"><strong>東南アジア</strong></td>
     <td valign="top">&nbsp;</td>
    </tr>
    <tr>
     <td valign="top">"<strong>西ヨーロッパ</strong>"</td>
     <td valign="top">&nbsp;</td>
    </tr>
   </tbody>
  </table>


  <h2>はじめに CLI を使用する</h2>


  <p>共有イメージ ギャラリーはプレビュー段階ですが、使用するには、事前に機能を登録しておく必要があります。 この機能をShared Image Galleryするには:</p>


  <pre>

  az feature register --namespace Microsoft.Compute --name GalleryPreview

  az provider register -n Microsoft.Compute</pre>


  <p>機能の登録には数分かかる場合があります。 次のコマンドを使用して、進行状況を確認できます。</p>


  <pre>

  az provider show -n Microsoft.Compute</pre>


  <h3>イメージ ギャラリーを作成する</h3>


  <pre>

  az group create -n rg -l westcentralus

  az sig create -g myGalleryRG --gallery-name myGallery</pre>


  <h3>イメージ定義を作成する</h3>


  <pre>

  az sig image-definition create -g myGalleryRG --gallery-name myGallery --gallery-image-definition myImageDefinition --publisher myPublisher --offer myOffer --sku myLinux1--os-type Linux</pre>


  <h3>イメージ バージョンを作成する</h3>


  <pre>

  az sig image-version create -g sig1 --gallery-name gal1 --gallery-image-definition image1 --gallery-image-version 1.0.2 --target-regions &quot;West Central US&quot; &quot;South Central US=1&quot; &quot;East US 2=1&quot; --replica-count 5 --managed-image &lt;resource-id-of-the-managed-image&gt;</pre>


  <h3>VM を作成する</h3>


  <pre>

  az vm create -g rg -n rg-vm --image /subscriptions/&lt;sub-id&gt;/resourceGroups/rg/providers/Microsoft.Compute/galleries/gallery1/images/gallery-image1/versions/1.0.0</pre>


  <h3>VMSS を作成する</h3>


  <pre>

  az vmss create --resource-group myResourceGroup --name myScaleSet --admin-username azureuser --generate-ssh-keys --image /subscriptions/&lt;sub-id&gt;/resourceGroups/rg/providers/Microsoft.Compute/galleries/gallery1/images/gallery-image1/versions/1.0.0</pre>


  <h2>ドキュメント リンク</h2>


  <ul>
   <li><a href="https://docs.microsoft.com/azure/virtual-machines/linux/shared-image-galleries" target="_blank">共有イメージ ギャラリーの概要</a></li>
   <li><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/shared-images" target="_blank">CLI でのShared Image Galleryの使用 CLI でのShared Image Galleryの使用</a></li>
   <li><a href="https://docs.microsoft.com/azure/virtual-machines/linux/shared-images#create-a-vm" target="_blank">共有イメージ ギャラリーから VM を作成する仮想マシンから VM を作成Shared Image Gallery</a></li>
   <li><a href="https://docs.microsoft.com/azure/virtual-machine-scale-sets/shared-images-cli#create-a-scale-set-from-the-custom-vm-image" target="_blank">共有イメージ ギャラリーから VMSS を作成する仮想マシンから VMSS を作成Shared Image Gallery</a></li>
  </ul>
