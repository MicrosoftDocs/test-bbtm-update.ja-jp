### YamlMime:Yaml
ms.openlocfilehash: 7e955e484c1451f5280b6ab0d688b39d1777ca5f
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139903529"
Slug: isv-guest-post-series-softlibrary-and-kern4cloud-on-windows-azure
Title: 'ISV ゲストポストシリーズ: Windows Azure での softlibrary と Kern4Cloud'
Summary: 'エディター &rsquo; のメモ: Miguel Parejo によって作成された最新 &rsquo; の投稿、softlibrary では、企業が Windows azure と Windows azure Marketplace を使用してマルチテナントを実行および販売する方法を説明しています...'
Content: '<p><b><i>エディター &rsquo; のメモ:</i></b> <i>&rsquo;Miguel Parejo によって作成された、CTO の softlibrary は、azure と Windows azure Marketplace を Windows 使用してマルチテナント情報管理サービスを実行および販売する方法について説明しています。<img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2275.MiquelParejo.jpg" alt="" style="float: right;" height="114" border="0" width="97"></i></p>  <p>Softlibrary は、1988のバルセロナ (スペイン) で開始された会社です。 その後、常に情報管理に関与し、最先端のカスタムソリューションを顧客に提供してきました。 この目的のために、会社は最初から Microsoft のプラットフォームとアーキテクチャを採用しています。</p>  <p>Kern4Cloud は、企業の性質からのものであるかどうかにかかわらず、情報管理に重点を置いたマルチテナントサービスです。 すべての情報ライフサイクルを処理して、公開、分類と分類、字句セマンティックおよび類義語辞典システム、バージョンコントロール、多言語、ライブ翻訳、ワークフローの各プロセス用の一連のツールを提供できます。</p>  <p><a target="_blank" href="https://www.windowsazure.com/en-us/pricing/free-trial/?WT.mc_id=cmp_pst001_blg_post0109gen">Azure Windows</a> 、情報やサービスが信頼性の高い安全な方法で保持される<a target="_blank" href="https://www.bsigroup.com/en/Assessment-and-certification-services/Client-directory/CertificateClient-Directory-Search-Results/?pg=1&amp;licencenumber=IS+533913&amp;searchkey=standardXeqXISO/IEC%2027001XandXcompanyXeqXMicrosoft">認定</a>データセンターに存在するため、Azure を選択しました。 高パフォーマンスのソリューションを提供するために、Azure リソースが拡張されることも Windows。</p>  <p>システム内の既存情報の1つの部分は XML 形式で保存されます。そのため、異種ソースを標準と国際化に変換するブラックボックスとして Kern4cloud を見ることもできます。</p>  <p>Kern4Cloud を使用して一般的なフローを実現する方法を見てみましょう &rsquo; 。 お客様の会社は <i>プライバシーポリシー</i> に関する声明を持っている可能性があり、時間の経過と共に変更される可能性があります。 最初のバージョンをインポートした後は、新しいバージョンを作成したり、既存のバージョンを複製したり、ソリューションの一部として使用可能なメインの変換エンジンを使用して、その場でバージョンを翻訳したりすることもできます。 また、ファイルを純粋な XML に変換することもできます。そのため、後で <a target="_blank" href="https://en.wikipedia.org/wiki/WYSIWYM">WYSIWYM</a> エディターと呼ばれる独自のエディターを使用してファイルを編集できます。 これらはすべて、K4C という名前の web コンポーネントで実現できます。社内. 会社は、発行前に一部の部門が同意を与えるように構成されている可能性があります。 このため、最初にワークフローを作成して、発行プロセスに関係する部署のみに対して、ステートメントの読み取りと修正、準拠している法律のレビュー、翻訳の修正、およびドキュメントを発行して使用できるようにするための同意の付与を強制することができます。</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3113.Softlibrary1.png" alt="" border="0"></p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6064.Softlibrary2.png" alt="" height="344" border="0" width="553"></p>  <h3>課題</h3>  <p>Azure Windows 最初に見たときに、アーキテクチャと設計段階にコスト効率に優れた方法がいくつか含まれていることに気付きました。 Windows Azure にソリューションを最初から移行または作成するときに考慮する必要がある請求書ドライバーがいくつかあります。 幸いなことに、Microsoft はこのプロセスをはるかに簡単にするために、いくつかの追加機能を提供しています。 次のように説明します。</p>  <ul>  <li><a target="_blank" href="https://msdn.microsoft.com/en-us/library/windowsazure/ff394114.aspx">動的管理ビュー</a>: <a target="_blank" href="https://www.windowsazure.com/en-us/home/features/sql-azure/?WT.mc_id=cmp_pst001_blg_post0109sql">SQL Azure</a>で使用して、データベースの大きさと、サイズを増減してコストを安定化する方法を決定します。</li>  <li><a target="_blank" href="https://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-metrics-using-metrics-to-track-storage-usage.aspx">Storage メトリック</a><b>:</b>ストレージを追跡して、トランザクションと容量のメトリックを確認します。<b></b></li>  </ul>  <p>他にもツールがありますが、コスト効率の良い戦略を見てみてください。 これは、開発者がこれまでに実行したことのない方法でコードを設計、移行、適応、および記述するという主な課題でした。 プロジェクト内のすべての利害関係者は、新しいパラメーターである cost を考慮に入れる必要があります。 &rsquo;Azure では、もう1つの方法ではコストが高く Windows ことを意味していません。</p>  <p>コアコンポーネントを再設計したら、もう1つの課題に直面しました。 マルチテナントサービスでユーザーを認証するにはどうすればよいですか。 Windows Azure には Access Control Service (ACS) が付属しています。 ACS を使用すると、id を透過的な方法で処理し、承認プロセスに専念できます。</p>  <h3>アーキテクチャ</h3>  <p>Kern4cloud が &rsquo; 何をしているかがわかります。これを実行しているユーザーを、後で &rsquo; Windows Azure コンポーネントにマップします。</p>  <p>&rsquo;主なコンポーネントの一覧を次に示します。</p>  <ul>  <li><b>K4C。Workplace: </b>UI のコア。 ユーザーは、1つのウィンドウで、バージョン、編集、発行、削除、バッチ操作、並べ替え、検索、データのフィルター処理を簡単に行うことができます。 すべての情報がグリッドにまとめられ、可視性が向上し、使いやすさが向上します。 概要については、最初の画像を参照してください。<b></b></li>  <li><b>K4C。管理</b>者: 管理者がすべてのプロパティを管理できる場所 (スタイルとマッピングの編集、ユーザーのグループ、ユーザーのアクセス許可、ワークフローなど)。<b></b></li>  <li><b>リポジトリ: </b>リポジトリは3つあります。 1つはバイナリドキュメント (Office、画像、ビデオなど) 用で、もう1つは XML ファイル用 (抽出された情報とメタデータを含むもの)、最後に K4C によって処理されるすべての情報です。2つのデータベースに格納される高速検索に使用される管理およびインデックス付きデータ。<b></b></li>  <li><b>ワークフロー: </b>このコンポーネントは、ユーザーが定義したすべてのワークフロープロセスを扱います。<b></b></li>  </ul>  <p>これはアーキテクチャの eagle ビューです。 Windows Azure コンポーネントにどのようにマップされている &rsquo; かを見てみましょう &rsquo; 。</p>  <p>詳細 &rsquo; については、ここで説明する必要がある1つの点について説明します。 Kern4Cloud モデリングサービスは、2つの主要なユーザーに提供されます。</p>  <ul>  <li><b>個々のユーザー</b>: ディスククォータ領域が制限され、一部の機能が無効になり、記憶域リソースを共有します。</li>  <li><b>ビジネスユーザー</b>: 企業がこのモデルをサブスクライブすると、一連のプライベートリソースが自動的にプロビジョニングされます。 会社内のすべてのユーザーは、K4C を介して共通リポジトリにアクセスします。社内. ただし、K4C はありません。管理者は、管理者が組織内の情報を分離するのに役立ちます。</li>  </ul>  <p>次に、このアーキテクチャで最も重要な Windows Azure のコンポーネントとサービスを示す4つの図があります。 これらの間には、読みやすくするために省略された相互作用があります。</p>  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4520.Softlibrary3.png" alt="" border="0"></p>  <ul>  <li><b>図 1:</b> Web ロール K4C を表示します。Workplace and K4C。両方とも同じホステッドサービスにデプロイされます。 これらはシステムのエントリポイントであり、UI を持つもののみです。 インデックス作成エンジンと K4C が原因で、SQL Azure から最新情報を取得します。Workplace コンポーネントは、ユーザーがデータを操作して変更したときに、それが確実に存在することを保証します。 Full-Text インデックス作成のサポートは現在 SQL Azure では利用できないため、インデックス作成エンジンには少し余分な作業が必要です。 最近では、 &rsquo; <a target="_blank" href="https://www.hadooponazure.com/">Hadoop</a> の使用を開始しました。これは優れた方法であると考えられるからです。</li>  <li><b>図 2:</b>現時点では、これらのすべてのロールは、同じホステッドサービスにデプロイされます (ただし、図1のものとは異なります)。  <ul>  <li><b>ワークフローとインデックス: </b>これらは Worker ロールです。 1つ目は、ワークフローキューからメッセージをポップして処理することです。 インデックス作成 worker ロールは、すべての情報を一貫性のある状態にするためのサービスです。 また、ワークフローキューにメッセージをプッシュするためのドキュメントの変更も検出されます。 ボトルネックを最小限に抑えるためにマルチスレッド化されています。 ただし、1つのインスタンスのリソースは制限されるため、スケーリングが必要になります。 現時点では、このコンポーネントは手動でスケーリングしていますが、 <a target="_blank" href="https://entlib.codeplex.com/wikipage?title=EntLib5Azure">azure Windows の Enterprise Library 5.0 統合パック</a>のコンポーネントである Windows azure 自動スケールアプリケーションブロック (abi) を含む新しいバージョンを準備しています。 CPU とメモリの使用量とネットワーク負荷に基づいて、このコンポーネントおよび他の K4C コンポーネントの自動スケールを計画しています。</li>  <li><b>K4C。Windows.storage.fileproperties</b>:<b> </b>これは、バイナリファイルを処理して XML に変換する web サービスです。 <i>プライバシーポリシー</i>のサンプルに従って、K4C でマップできるいくつかのスタイルを使用して環境内の Word ファイルで構成されているとします。XML タグに管理者がいます。 新しいバージョンを保存すると、マッピングが適切に設定されている場合、インデックス作成ロールはこのサービスにファイルを送信します。結果は XML になり、さらに編集するために使用できます。 これにより、さまざまなプラットフォームやデバイスで情報を表示できます。</li>  <li><b>K4C。Backoffice:</b> &rsquo; web サイトと K4C システム間の中間層です。 <i>プライバシーポリシー</i>に関する声明を web サイト &rsquo; に表示する場合は、このサービスに要求する必要があります。これは他のお客様にも共有されますが、データの分離を保証するために Access Control Service に依存しています。そのため &rsquo; &rsquo; 、要求を行う前に ACS を認証する必要があります。<br> システムの各ロールには、独自のスケーリングパラメーターがあります。 CPU 使用率のみ、他のネットワーク使用率などに基づいてスケールする必要があります。 スケーリングパラメーターが以前にデプロイされたものと類似している場合は、特定のホステッドサービスにロールをデプロイします (ただし、これはこれだけではありません)。 K4C.今後、Backoffice はサードパーティのユーザーによって使用されるようになったことがあります。そのため、拡大縮小のパラメーターは大幅に異なると考えられます。 そのため、このコンポーネントの新しいバージョンを独自のホステッドサービスにデプロイすることを計画しています。</li>  <li><b>図 3: </b>SQL Azure サーバーは、1人の顧客ごとにデータを保持します。 個々のユーザーは2つのデータベースを共有し、企業は独自のペアを持ちます。 機密情報はすべて、データ層で適切に暗号化されます。</li>  <li><b>図 4: </b>2つのストレージアカウントがあります。 1つは顧客用で、もう1つは、、診断、およびバックアップの展開用です。 XML データは、各顧客 id のパーティションキーを使用してテーブルに格納されます。そのため、 <a href="https://msdn.microsoft.com/en-us/library/windowsazure/hh508997.aspx">ここで</a>説明するように、データはさまざまなサーバーから提供されます。 TableServiceContext クラスをオーバーライドし、WritingEntity イベントと<i>ReadingEntitity</i>イベントを受け取りまし &rsquo; た。そのため、テーブルに書き込む前に xml データを暗号化して圧縮し、テーブルから使用した後にもう1つの方法を使用します。 <b></b></li>  </ul>  </li>  </ul>  <h3>Azure Marketplace との統合の Windows</h3>  <p>最後に、 <a target="_blank" href="https://www.windowsazure.com/en-us/home/features/marketplace/?WT.mc_id=cmp_pst001_blg_post0109mkt">Windows Azure Marketplace</a>で発行されるアプリケーションを提出することによって、Kern4Cloud を強化することにしました。 クラウドベースのソリューションの最適な移行先として、お客様がサービスを安全にサブスクライブして、過去のお客様の課金を行うことができるプラットフォームである &rsquo; ことがわかりました。 顧客がサービスをサブスクライブする場合は、Windows Azure Marketplace にアクセスし、 <a target="_blank" href="https://datamarket.azure.com/application/aafe31b8-4859-4a93-ad49-ffe69baeec82">Kern4Cloud</a>を検索する必要があります。 最適なオファリングを選択した後、Windows Azure Marketplace は、Windows Live ID アカウントでログインし、クレジットカード番号などの課金情報を提供するように依頼します。 Windows Azure Marketplace では、サブスクリプションは毎月請求されます。そのため、最初の月はすぐに課金されます。 お客様は、請求プロセスを信頼します。これ &rsquo; は、Microsoft と isv が提供するのは、一部のルールに従うだけで、Windows Azure Marketplace にそのオファリングの価格を提供する必要があるためです。 プロセス全体は高速で安全で、顧客とプロバイダーにとって信頼性が高くなります。</p>  <p>さらに、ソリューションを Marketplace に統合するのは非常に簡単です。 基本的に、Windows Azure トレーニングキット (WATK) に記載されている適切なサンプルに記載されている手順に従う必要があります。 Microsoft は、Azure ベースのソリューション Windows 構築するための優れたサンプルとベストプラクティスを再収集しています。 Windows Azure Marketplace 統合プロジェクトは個別に見つけることができますが、キット全体をダウンロードすることをお勧めします。</p>  <p>次の例では、これがどのように動作するかを見てみましょう &rsquo; 。</p>  <ol>  <li>お客様は Windows Azure Marketplace でソリューションを見つけ、サブスクライブすることを希望しています。 請求とサブスクリプションの情報が提供されると、Marketplace は顧客を web サイトの AzureMarketplaceOAuthHandler ハンドラーにリダイレクトし、新しい顧客がサブスクライブしたことを通知します。</li>  <li>web サイトでは、要求が Windows Azure Marketplace から実際に送信されていることを確認する必要があります。 このタスクは、WATK で検索する &rsquo; AzureMarketplace という名前のプロジェクトによって処理されます。 プロジェクトをアタッチするか、DLL を参照することができます。 これには前述のハンドラーが含まれているため、 <i>web.config</i>に次の行を追加する必要もあります。</li>  </ol>  <p><span style="color: #0000ff;">&lt;</span><span style="color: #993300;">ハンドラー</span><span style="color: #0000ff;">&gt;</span><br>&lt;<span style="color: #993300;">追加</span> &nbsp;<span style="color: #ff0000;">name</span><span style="color: #0000ff;">= "AzureMarketplaceOAuthHandler"</span> &nbsp; <span style="color: #ff0000;">動詞</span><span style="color: #0000ff;">= "*"</span><br> <span style="color: #ff0000;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path</span><span style="color: #0000ff;">= "AzureMarketplaceOAuthHandler"</span> <span></span><span style="color: #ff0000;"></span><br><span style="color: #ff0000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type<span style="color: #0000ff;">= "microsoft. azureマークした場所。 AuthorizationResponseHandler, Microsoft AzureMarketplace. oauthutility"/ &gt; </span></span></p>  <p><span style="color: #0000ff;">&lt;</span>/<span style="color: #993300;">ハンドラー</span><span style="color: #0000ff;">&gt;</span></p>  <p>このプロジェクトは、Microsoft identity Model および Microsoft identity model. OAuth ライブラリにも依存しています。</p>  <ol>  <li>要求の発信元が Windows Azure Marketplace からのものであることが確認されると、お客様には、顧客がサブスクライブしていることが通知されます。そのため、必要に応じて追加情報を要求することができます。 これを行うには、web サイトに5つのクラスを追加する必要があります。 そのうちの1つは、web サイトを純粋に定義する情報を Azure Marketplace クライアント Windows として読み取るために使用されます。 この情報は、次のように <i>web.config</i> に格納されている必要があります。</li>  </ol>  <p><span style="color: #0000ff;">&lt;</span><span style="color: #993300;">azureMarketplaceConfiguration</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">appSpecificAzureMarketplaceOAuthClientId</span><span style="color: #0000ff;">= "YOUR_CLIENT_ID"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">appSpecificAzureMarketplaceOAuthClientSecret &nbsp; </span><span style="color: #0000ff;"> = &nbsp; &ldquo; CLIENT_ECRET_KEY "</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">App固有の Redirecturl&nbsp;</span><span style="color: #0000ff;">=&nbsp;</span><br><span style="color: #0000ff;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ""</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">appSpecificWellKnownPostConsentUseUri</span>&nbsp;<span style="color: #0000ff;">=&nbsp;</span><br><span style="color: #0000ff;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ""/&gt;</span></p>  <p>この情報は、Marketplace で定義されているものと同じである必要があります (プレイグラウンドであるかどうかにかかわらず)。</p>  <p>もちろん、セクション要素も追加する必要があります。</p>  <p><span style="color: #0000ff;">&lt;</span><span style="color: #993300;">セクション</span> &nbsp;<span style="color: #ff0000;">name</span><span style="color: #0000ff;">= "azureMarketplaceConfiguration" &nbsp; </span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;"></span><span style="color: #0000ff;">「名前空間」と入力します。AzureMarketplaceConfiguration、 &nbsp; アセンブリ " &nbsp; </span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #ff0000;">Requirepermission</span><span style="color: #0000ff;">= "false"/ &gt; </span></p>  <p>テスト Url は運用環境で置き換える必要があることに注意してください。</p>  <p>もう1つの重要なクラスは、Subサブスクリプション<b>です。 </b>これは、Marketplace 要求の最終的な宛先になります。 ここでは、すべての要求を処理するために<i>CreateSubscription</i>メソッドと<i>サブスクライブ解除</i> &nbsp; メソッドを作成します。 次の行を <i>global.asax (Application_Start </i>メソッド<i>)</i>に追加する必要があります。</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008080;">AzureMarketplaceProvider ConfigureOAuth</span>(<span style="color: #0000ff;">新しい</span> &nbsp; <span style="color: #008080;">subscriptionutils</span>());</p>  <p>&rsquo;これで完了です。 Web サイトでは、Marketplace からのサブスクリプション要求だけを取得し、ニーズに応じて処理することができるようになりました。</p>  <h3>簡単に</h3>  <p>オンプレミスシステムからの移行は簡単ではありませんでしたが、thrilling one です。 Windows Azure には、任務を達成するために必要なすべてのサービスが用意されています。 これまでに、いくつかの考慮事項を行う必要がありました。 そのうちの1つは、web 上に存在するいくつかのディスカッションを考え、クラウドがその死亡を意味するかどうかを言います。 私たちの経験では、IT 部門 &rsquo; が非表示になったことがわかったので、 &rsquo; これらのプラットフォームにのみ使用する必要があります。 さらに、メインストリームへのハイブリッドクラウドの導入により、議論が間もなく終了するものと考えています。</p>  <p>私たち &rsquo; は、このブログシリーズに最初のスペイン企業を執筆する機会を Microsoft に感謝しています。 ここに示されているいくつかの側面に関する詳細情報が必要な場合は、無料で <a target="_blank" href="mailto:masinfo@softlibrary.es">お問い合わせ</a>ください。</p>'
