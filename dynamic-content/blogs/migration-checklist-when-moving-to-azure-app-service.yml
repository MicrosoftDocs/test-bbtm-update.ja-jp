### YamlMime:Yaml
ms.openlocfilehash: 69596f7f38ac468ff322c6ec72be2b905f6040eb
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895390"
Slug: migration-checklist-when-moving-to-azure-app-service
Title: 移行に移行する際の移行チェックリストAzure App Service
Summary: Azure PaaS サービスにアプリケーションを移行する際に考慮すべき点について、顧客、同僚、パートナーから継続的に要求を受け取っていますが、具体的には App Service。
Content: >-
  <p>Azure PaaS サービスにアプリケーションを移行する際に考慮すべき点について、顧客、同僚、パートナーから継続的に要求を受け取っていますが、具体的には App Service。</p>


  <p>この投稿では、これらのケースの大部分をカバーしようとし、既存のアプリケーションを Azure App Service に移行する予定の顧客/パートナーにチェックリストと準備ができていることを示します。</p>


  <p>まず、アプリケーション&rsquo;をアプリケーションに移行する前に、さまざまな考慮事項を確認Azure App Service</p>


  <ul>
   <li><strong>ポート バインド</strong> - Azure App Service HTTP トラフィックの場合はポート 80、HTTPS トラフィックの場合はポート 443 がサポートされます。 Azure App Service への移行後に他のポートを使用しているサイトがある場合は、これが使用される唯一のポートです。</li>
   <li><strong>GAC (グローバル アセンブリ キャッシュ) でのアセンブリの使用- </strong>これはサポートされていません。 アセンブリをローカル ビンに配置する場合は、ビン配置を検討してください。</li>
   <li><strong>IIS5 互換モード</strong>- IIS5 互換モードはサポートされていません。 このAzure App Service Web アプリと、その下のすべてのアプリケーションは、特定のアプリケーション プール設定のセットを使用して同じワーカー プロセスで実行されます。</li>
   <li><strong>IIS7+ スキーマの準拠</strong>- IIS スキーマで定義されていない 1 つ以上の要素や属性Azure App Service使用されています。 XDT 変換の使用を検討してください。</li>
   <li><strong>サイトごとに 1 つのアプリケーション プール-</strong> このAzure App Service Web アプリと、その下のすべてのアプリケーションを同じアプリケーション プールで実行します。 IIS に異なるアプリケーション プールを持つアプリケーションがある場合は、共通設定を使用して 1 つのアプリケーション プールを確立するか、アプリケーションごとに個別の Web アプリを作成します。</li>
   <li><strong>COM および COM+ コンポーネント-</strong> Azure App Service COM コンポーネントをプラットフォームに登録できない場合。 サイトまたはアプリケーションで COM コンポーネントを使用する場合、これらはマネージド コードで書き換え、サイトまたはアプリケーションと一緒にデプロイする必要があります。</li>
   <li><strong>ISAPI 拡張機能 - </strong>Azure App Serviceは ISAPI 拡張機能の使用をサポートできます。ただし、DLL はサイトにデプロイし、web.config を介して登録する必要があります。</li>
  </ul>


  <p>上記の制限を考慮したら、アプリケーションを移行する必要があります。 移行の最も簡単な形式は、Azure App Service Migration Assistant。 Azure App Service移行サイトとツールを使用して、Windows および Linux Web サーバーから Azure App Service にサイトを移行できます。 このツールの移行の一環として、Azure Web Appsデータベースが作成され、コンテンツが発行され、データベースが発行されます。</p>


  <p>このツールは、サーバーと Linux Windows両方で使用できます。 Windows Server の移行ツールは、ローカル コンピューターまたはリモート コンピューターから動作します。 これにより、サーバー 2003 以降で実行されている IIS Windows移行できます。</p>


  <p>詳細については、「<a href="https://www.movemetothecloud.net/WindowsMigration">Windows Site Migration Tool」</a>を参照してください。</p>


  <p>Linux サイト移行ツールを使用すると、Apache を実行している Linux Web サーバーからクラウドにサイトを移行できます。 この時点でサポートされているのは Apache のみです。</p>


  <p>詳細については <a href="https://www.movemetothecloud.net/LinuxMigration">、Linux Site Migration Tool に関するページ</a> を参照してください。</p>


  <p>移行を決定したら、次の領域を考慮して、アプリケーションを移行する必要Azure App Service。</p>


  <ul>
   <li><strong>オンプレミスの統合</strong> - アプリケーションが Azure に移行されない他のアプリケーションと通信している場合は、アプリケーションがクラウドに移行するときに通信がどのように行うのかを検討する必要があります。 解決策の 1 つは、他のアプリケーションが REST を使用してインターネットを介して通信を行う方法です。 これには、サーバーをインターネットに公開する追加のリスクは言うまでもなく、両方のアプリケーションの変更が必要な場合があります。 もう 1 つの方法は、アプリケーションがホストされている Azure App Service からオンプレミス サーバーへのセキュリティで保護された接続を確立する方法です。 これは、要件に応じて、次の方法で行うことができます。分離された App Service プランを使用して<a href="https://docs.microsoft.com/en-us/azure/app-service/environment/intro">アプリを App Service Environment</a> にデプロイし、Azure VNet との <a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet">VNET</a> 統合を有効にし、この Azure VNET とオンプレミスの間にサイト間 VPN を確立してから、App Service とオンプレミス VM 間のルートを有効にし、ハイブリッド接続を確立します。<a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-hybrid-connections"></a>&ndash; すべてのアプローチの詳細な比較では、別のブログ投稿が必要です。</li>
   <li><strong>認証 &ndash;</strong> オンプレミスの場合は、AD との相互信頼が必要だったので、認証なしまたは Windows 認証で問題ありません。 Azure に移行する場合は、 を使用して認証を有効にするAzure Active Directory。 つまり、構成の一部を変更して、ユーザーを認証するために Azure AD。 <a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-mobile-how-to-configure-active-directory-authentication">詳細については、ドキュメント サイトを参照してください</a>。</li>
   <li><strong>セッションの状態 &ndash;</strong> 理想的なケースでは、スケール/切り替えの際にアプリケーションをステートレスにできます。 それができない場合は、セッション状態を Azure Redis Cache に永続化するように <a href="https://docs.microsoft.com/en-us/azure/redis-cache/cache-aspnet-session-state-provider">構成してください</a>。</li>
   <li><strong>ファイルの永続化 &ndash;</strong> 通常、Web サイトでは、永続化する必要があるファイルをアップロードする必要がある場合があります。 このAzure App Service、BLOB ストアのような何かを言うように、App Service外部のファイルを永続化する必要があります。 アプリケーションを変更して、Azure Storage SDK または REST API を使用してファイルを保存およびアクセスします。</li>
   <li><strong>App 設定/接続文字列 &ndash;</strong> 環境に基づいて変更される App 設定 と接続文字列が表示されるのに対し、同じものがあります。 環境に基づいて変更される場合は、異なるデプロイ スロットに対してオーバーライドできるよう、ポータル/テンプレートでも定義します。</li>
   <li><strong>ログ &ndash;</strong>&nbsp; ログ記録フレームワークがローカルに保存されたファイルにログ記録している場合は、ログを Azure Diagnostics に記録するか、一元化された BLOB ストアに更新する必要があります。 また、アプリケーションのAzure アプリ インサイト詳細な分析情報を得る方法を含め、アプリケーションを追加できます。</li>
   <li><strong>証明 書 &ndash;</strong> 証明書は直接移行されません。 Azure で動作するには、証明書を明示的にアップロードする必要があります。 <a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-web-tutorial-custom-ssl">詳細については、SSL 証明書のバインドに関するドキュメントを参照してください</a>。 Azure から証明書を直接購入することもできます。 <a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-purchase-ssl-web-site">詳細については、SSL 証明書の購入に関するドキュメントを参照してください</a>。</li>
   <li><strong>カスタム ドメイン &ndash;</strong> カスタム ドメインは、CNAME レコードの変更Web Apps Azure ドメインに関連付けできます。 また、DNS を検証するためにApp Service更新する必要があります。 <a href="https://docs.microsoft.com/en-us/azure/app-service/app-service-web-tutorial-custom-domain">マップ カスタム ドメインのドキュメントの詳細については、こちらを参照してください</a>。</li>
   <li><strong>電子メール &ndash; </strong>電子メールの送信には SMTP サーバーが必要です。 App Serviceでは同じ情報が提供されないので、アプリケーション内で構成App Service。 Azure IaaS VM で電子メールを送信するように SMTP サーバーを設定することもできますが、制限が適用されます。 リレー サービスを使用して電子メールを送信することをお勧めします (&ndash;例: <a href="https://blogs.msdn.microsoft.com/benjaminperkins/2017/01/11/sending-email-from-an-azure-web-app-using-an-o365-smtp-server/">Office 365)。</a></li>
   <li><strong>LDAP クエリ &ndash;</strong> AD などの LDAP ストアに対してクエリを実行する内部アプリケーションを構築している場合、これらのアプリケーションは、AZURE APP SERVICE。 具体的には、Active Directory の場合は、AD を Azure AD に移動し、グラフ API を使用して Azure に必要なクエリを実行できます。 このためには、ディレクトリ オブジェクトのクエリを許可するために、アプリケーションを Azure AD登録する必要があります。 グラフ API の完全な一覧はこちらです。</li>
   <li><strong>共有/リンク されたデータベースクエリ</strong> - 複数のデータベースを持つアプリケーションには、追加の考え方を付け加える必要があります。 複数のデータベース間クエリがある場合は、データベースをエラスティック プールに移動し、エラスティック クエリ<a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-query-overview"></a>を使用してデータベース間でクエリを実行する必要があります。 データベース ステートメント内にリンクされたデータベースがある場合、これは Azure では許可されません。 これには、リンクされたデータベース クエリを回避するために、ソリューションの再アーキテクチャが必要な場合があります。</li>
   <li><strong>SQL Server機能</strong> -&nbsp;サーバー レベルには、サーバー レベルの機能が多数あるので、Azure SQL Database。 プレビューには制限<a href="https://sqldatabase-migrationpreview.azurewebsites.net/">がありますがSQL Managed Instanceそれまで</a>は、次の点を考慮する必要があります。 <ul>
    <li><strong>SQL エージェント</strong> &ndash;スケジュールされた特定のアクティビティを実行SQLエージェントを持つ多数のデータベースが表示されます。 この機能の一部は、エラスティック ジョブを使用 <a href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-query-overview">して実装できます</a>。 残りの部分については、Web ジョブや Web ジョブの<a href="https://docs.microsoft.com/en-us/azure/app-service/web-sites-create-web-jobs">設定、あるいは</a>その他の<a href="https://azure.microsoft.com/en-us/services/functions/">Azure Functions。</a></li>
    <li><strong>SSIS </strong>&ndash; VM に SSIS をデプロイするか、データの読み込みAzure Data Factory移行する方法があります。</li>
    <li><strong>SSRS</strong> &ndash;SSRS を VM にデプロイしたり、アプリケーションでカスタマイズされたレポートを使用したり、Power BIを使用して直感的なレポートを生成することができます。</li>
    <li><strong>SSAS</strong> &ndash; SSAS は、SSAS と呼ばれる別のサービスAzure Analysis Services。</li>
   </ul>
   </li>
  </ul>


  <p>上記のすべてのソリューションでは、パブリック DNS を使用してサーバーに接続Azure SQL Database必要があります。 ファイアウォールを使用して、必要なソースへの接続が明示的に許可SQLできます。</p>


  <ul>
   <li><strong>SQL ファイアウォール</strong> &ndash;これは見過ごされる場合が多いですが、接続を有効にするには、Azure SQL Database IP を指定する必要があります。 これには、アプリケーションとサービスの使用を管理SSMSクライアント AZURE APP SERVICE。</li>
  </ul>
