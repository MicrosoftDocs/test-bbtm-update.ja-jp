### YamlMime:Yaml
ms.openlocfilehash: db7da4a9d4c6861b67e02dd730f712a2b60c765c
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139893146"
Slug: cleardb-migration-to-azure-database-for-mysql
Title: ClearDB から Azure Database for MySQL への Web アプリの移行
Summary: Azure Web アプリで ClearDB データベースを移行して、Azure Database for MySQL。
Content: >-
  <p>Azure Database for MySQL の導入により、既存&rsquo;の Web アプリを MySQL データベース プロバイダーとして ClearDB を使用して Azure Database for MySQL に移行する方法について、顧客から多くの関心と質問がありました。 ClearDB を使用するのではなく、MySQL In-App をプロバイダーとして使用し、Azure Database for MySQL に移行する場合は、このブログに既に書かれているので、確認する<a href="https://blogs.msdn.microsoft.com/appserviceteam/2017/03/06/migrate-development-database-on-mysql-in-app-to-production-mysql-database/"></a>必要があります。&rsquo;このブログでは、&rsquo;Wordpress&rsquo; Web サイト データベースを ClearDB から Azure Database for MySQL に移行し、新しいデータベース サーバーを指す Web アプリを更新します。</p>


  <h2>移行の準備</h2>


  <p>データ&rsquo;移行を行うツールとして MySQL Workbench を使用します。 もちろん、他の一般的なツールや CLI も使用できます。 まず、 <a href="https://dev.mysql.com/downloads/workbench/">MySQL Workbench をダウンロードします。</a> &rsquo;MySQL Workbench をダウンロードしてインストールしたら、移行を開始するために ClearDB データベースへの接続を作成する必要があります。 接続を作成するには、&rsquo;ClearDB データベースに関する情報が必要です。</p>


  <p>Azure Portal で ClearDB データベースを開き、左側のナビゲーション <strong>ウィンドウで [</strong> プロパティ] タスクをクリックします。 MySQL Workbench 接続を作成する&rsquo;次の手順に必要な場合は、これを開いた状態にしてください。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/007efab1-65e8-4e9f-9c16-2038ec614ede.jpg"><img alt="2017-07-28_11-00-05" border="0" height="638" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/db24f3e9-7800-4392-b4ed-7a67a993f2c5.jpg" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="2017-07-28_11-00-05" width="635"></a></p>


  <p>次に、MySQL Workbench を開き、ホーム画面の上部にある [+] アイコンをクリックして新しい接続を作成します。 [新<strong></strong>しい接続のセットアップ] 画面で、接続に名前を付け (&ndash;&ldquo;[My ClearDB データベース&rdquo;] を選択した場合は何でもできます)、ClearDB データベースのプロパティを開いたブラウザーに戻り、MySQL Workbench の各フィールドに <strong>HOSTNAME、USERNAME</strong>、<strong>PASSWORD </strong>をコピーします。 MySQL Workbench&rsquo; にパスワードを入力するには、最初に [コンテナーに格納] ボタンをクリック <strong>する&hellip;</strong> 必要があります。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2e5178ba-217a-4247-bfce-569559ce2dff.png"><img alt="image" border="0" height="590" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/de75eae2-42c1-4957-b924-bf983f0a216d.png" style="margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="989"></a></p>


  <p>これが完了したら、接続を保存し、接続用に別の新しい接続を作成Azure Database for MySQL。 アプリケーションをまだ&rsquo;作成していないAzure Database for MySQL、その方法に関するドキュメント <a href="https://docs.microsoft.com/en-us/azure/mysql/quickstart-create-mysql-server-database-using-azure-portal">のクイック スタート</a> を参照してください。 ClearDB と同様に、ポータル&rsquo;からユーザー名、ユーザー名、パスワードをAzure Database for MySQLする必要があります。&nbsp; ただし、これを行う前に、&rsquo;サーバーへの制御アクセスを構成Azure Database for MySQLがあります。</p>


  <p>Azure portal で Azure Database for MySQL Server を開き、左側のナビゲーション ウィンドウ <strong>で [接続</strong> セキュリティ] 設定をクリックします。&nbsp; 移行プロセスをわかりやすくするために、[SSL 接続の強制] トグル スイッチを [無効] に切り替えて、 <strong>SSL</strong> 接続を無効 <strong>にしました</strong>。 <strong>+</strong>ファイアウォール規則に関して、画面の上部にある [自分の IP の追加] アイコンをクリックして、ファイアウォールにローカル IP&rsquo; アドレスを追加するか、または私の場合は、すべての IP アドレスに当面の間、自分のサーバーへのアクセスを許可するファイアウォール規則を作成します。 後で、自分のデータベース サーバーに接続するために Web アプリを構成するときに、適切&rsquo;な IP アドレスを追加し、この規則を削除します。 サーバーの SSL 接続の構成の詳細については、ドキュメントを参照 <a href="https://docs.microsoft.com/en-us/azure/mysql/howto-configure-ssl">してください。</a></p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/35d11717-affd-4fcc-9868-e7fd3c9a2100.png"><img alt="image" border="0" height="485" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1c8e5233-0e97-4ea6-bb34-4280b6058f0f.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="1037"></a></p>


  <p>Azure Database for MySQL サーバーへのアクセスを構成したので、ClearDB データベース サーバーの場合と同様に、新しい MySQL Workbench 接続を作成し続けできます。&nbsp;お使Azure Database for MySQLサーバーを開き、メインの Essentials&rsquo; ダッシュボードで、[サーバー名] と <strong></strong> [サーバー管理者<strong></strong>ログイン名] がメイン ページに表示されます。 パスワードはここでは公開されません。 サーバーのパスワード&rsquo;を覚えていない場合は、[要] ウィンドウの左上隅にある [パスワードのリセット<strong></strong>] オプションを使用していつでもリセットできます。 この情報を使用して、ClearDB データベースの場合と同じ方法Azure Database for MySQLサーバーの MySQL Workbench に別の接続を作成します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/273ab27f-8ee1-4c01-b5ac-5be7dd619796.png"><img alt="image" border="0" height="371" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9db722ca-dcc9-42eb-80a8-7940bf1f7c2f.png" style="margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="1044"></a></p>


  <h2>データの移行</h2>


  <p>MySQL Workbench を開き、[<strong>データベース</strong>] を<strong></strong>クリックし、ドロップダウンから [移行ウィザード] をクリックして、データベースの移行を開始します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e9a84c67-c36e-4894-bc88-7ab7e6d9b3f5.png"><img alt="image" border="0" height="421" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/88334681-bb3e-49d8-a464-92686978be9d.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="630"></a></p>


  <p>移行ウィザードで、ソース&rsquo; データベース サーバーとターゲット データベース サーバーを選択する必要があります。 ソースの場合は、最初に作成した ClearDB データベース サーバー接続を選択し、変換先として、作成が完了した Azure Database for MySQL サーバーを選択します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/11c58e84-9307-4461-bce0-425c9e0785d1.png"><img alt="image" border="0" height="519" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9db4afa4-dd09-4de9-80c5-6381a7baf640.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="888"></a></p>


  <p>移行するスキーマを確認する画面が表示されるまで、ウィザードを続行します。 必ず、アプリケーションに適用できるスキーマのみを移行してください。 Wordpress アプリケーションの場合、該当するスキーマは 1 つのみです。 スキーマの名前は、ClearDB によってスキーマ名がランダムに生成されるのと同様である必要があります。</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b593f9ca-a918-4dad-8e84-87d15be9cdcf.png"><img alt="image" border="0" height="380" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/329c66c5-5dff-4e28-9aa7-0aec6ac98a4f.png" style="border-image: none; display: inline; background-image: none;" title="イメージ" width="535"></a></p>


  <p>移行するソース スキーマを選択すると、移行ウィザードで選択された残りの移行が既定値になります。 Azure Database for MySQL サーバーがソースの ClearDB データベースと同じリージョンにあると仮定した場合でも、データベースの移行にかかる時間は長くする必要があります。</p>


  <h2>Azure Web アプリの構成</h2>


  <p>データベースが移行されたので、&rsquo;Web アプリをアプリケーションに接続する必要Azure Database for MySQL。 データベース&rsquo;へのアクセスを Web アプリ専用に制限する場合は、Web アプリと Azure Database for MySQL のファイアウォール規則の両方を更新する必要があります。 最初&rsquo;にこれを行うので、次のページで Web アプリを開Azure portal。 左側のナビゲーション ウィンドウで、[プロパティ] <strong>を選択し</strong> 、[送信 <strong>IP アドレス] をメモします</strong>。 これらは、ドメイン内でファイアウォール規則を作成する特定の IP アドレスAzure Database for MySQL。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/60ad0912-d28f-494d-9e2e-11cc7bd33831.png"><img alt="image" border="0" height="462" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c8b9d26e-7d5a-4548-b72c-ef06d926c4a8.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="878"></a></p>


  <p>Azure Database for MySQL サーバーを開き、各 IP アドレスのファイアウォール規則を作成して、Web アプリからサーバーへのアクセスを許可します。 これは、ファイアウォール規則を追加する場合の前述と同じプロセスです。</p>


  <p>次に、Azure Web アプリに戻り、左側の<strong></strong>ナビゲーション ウィンドウで [アプリケーション設定] を開き、主な問題<strong></strong>の [接続文字列] セクションまで下にスクロールします。 ここで、新しいデータベース サーバーを指す接続文字列を変更する必要があります。 文字列値をクリックして直接編集できます。 データベース名を保持する ClearDB からデータベース (スキーマ<strong></strong>) をそのまま移行した場合、Database 値を除くすべての値を置き換える必要があります。 私の場合、元の接続文字列は次のようになります。</p>


  <blockquote>

  <p><strong>Database=acsm_8cb9eb8d372ebbd;Data Source=us-cdbr-azure-west-b.cleardb.com;ユーザー ID=b8c2e429e67ac2;Password=47bd9069</strong></p>

  </blockquote>


  <p>新しいサーバーサーバーをポイントAzure Database for MySQL更新すると、次のように表示されます。</p>


  <blockquote>

  <p><strong>Database=acsm_8cb9eb8d372ebbd;Data Source=jasonsnewserver.mysql.database.azure.com;ユーザー ID=jason@jasonsnewserver;Password=MyPassword12</strong></p>

  </blockquote>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c7086831-20ea-4e81-93a0-bccd74bd51c9.png"><img alt="image" border="0" height="518" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/faa17b2c-b2ac-4a69-877d-fbf698f80792.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="イメージ" width="1052"></a></p>


  <p>画面の上部にある [ <strong>保存 </strong>] ボタンを&rsquo;クリックしてください。必要な操作は完了です。 既存&rsquo;の Web アプリAzure Database for MySQLを使用する必要があります。 おめでとうございます。</p>


  <p>Jason - <a href="https://twitter.com/JasonMA_MSFT">JasonMA_MSFT</a></p>
