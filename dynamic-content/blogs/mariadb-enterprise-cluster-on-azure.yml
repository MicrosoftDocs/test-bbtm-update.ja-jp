### YamlMime:Yaml
ms.openlocfilehash: 1d581366aa23b121c4ec2ade91fdea9dd3174390
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895475"
Slug: mariadb-enterprise-cluster-on-azure
Title: Azure でのクラスター®の MariaDB Enterprise
Summary: Microsoft Azure Marketplace での MariaDB Enterprise クラスターの発表を発表します。 このオファリングは、MaxScale を使用して、3ノードの実稼働対応 MariaDB Galera クラスターをプロビジョニングします。
Content: >-
  <p>Microsoft Azure でオープンソーステクノロジを使用して開発者にファーストクラスのエクスペリエンスを提供するための継続的な取り組みの一環として、現在、Microsoft Azure Marketplace での MariaDB Enterprise クラスターの発表を発表します。</p>


  <p>MariaDB は、Booking.com や Wikipedia などのサイトで数十億のユーザーを強化するデータベースです。 MariaDB Enterprise Server (HP、Wikipedia、ドイツのテレ、Virgin、Booking.com などのグローバルブランドを含む) をサブスクライブしている、45を超えるユーザーグローバルおよび500のお客様を対象として200万います。</p>


  <p>この発表により、開発者と dba は MariaDB maxscale &reg; を使用して3ノードの実稼働対応 MariaDB Enterprise クラスターをプロビジョニングできるようになりました。これは、サイズが D2/DS2 以上の仮想マシンを使用します。 MariaDB Enterprise Cluster with Galera テクノロジは、同期レプリケーション、スレーブラグなしのクラスターノードへの読み取りと書き込み、クラスターに参加している新しいノードの自動メンバーシップ制御、クラスターからのノードの削除などの機能によって高可用性とスケーラビリティを実現するマルチマスタークラスターです。</p>


  <p>MariaDB MaxScale は、クライアントアプリケーションをデータベースクラスターの複雑さから分離するデータベースゲートウェイです。 負荷分散に加えて、MariaDB MaxScale はログ記録、フィルター処理、および監視のメカニズムも提供します。 このアーキテクチャの MaxScale Vm は2つのシリーズ仮想マシンで、データディスクが接続されていません。 &nbsp; Azure ロードバランサーは、高可用性を実現するために、MaxScale Vm の前に配置されます。 &nbsp; Vm には、ロードバランサー &rsquo; のパブリック IP または DNS を介してアクセスできます。</p>


  <p>すべての Vm は、OpenLogic CentOS 7.2 に基づくカスタム VM イメージで実行されます。 次の図は、Azure での MariaDB デプロイアーキテクチャを示しています。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ff029fa4-18dd-40bf-8e36-56d6c297ec61.png"><img alt="image" border="0" height="373" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/da77470d-8402-42d7-a9b4-c242d9dd01ce.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="絵" width="640"></a></p>


  <p>このオファリングは、MariaDB Corporation とのパートナーシップによって提供されています。これは、高可用性、スケーラビリティ、およびパフォーマンスを必要とする SaaS、クラウド、オンプレミスアプリケーション向けのオープンソースデータベースソリューションのリーダーです。</p>


  <p>現在発表されているものなどのパートナーシップでは、microsoft は、ハイパースケールのハイブリッドクラウドプラットフォームにおけるオープンソースの専門家向けのファーストクラスのエクスペリエンスを提供します。 &nbsp; オープンソースベースのデータソリューションとアプリケーションの市場投入までの時間を短縮したい場合や、クラウドネイティブのオープンソースソリューションの調査を開始する場合は、 <a href="https://azure.microsoft.com/en-us/trial/free-trial-open-source/" target="_blank">試用版を確認</a> して無料でご利用いただけます。</p>


  <h2>作業の開始</h2>


  <p><a href="https://azure.microsoft.com/en-us/marketplace/partners/mariadb/cluster-maxscale/" target="_blank">Azure Marketplace では、</a>MariaDB Enterprise クラスターを利用できます。 デプロイするには、Azure portal にアクセスし、[新規] を選択して、MariaDB を検索します。 &nbsp;必ず [MariaDB Enterprise Cluster + MariaDB maxscale] を選択してください。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/bc6c594f-9d68-4d28-af1f-1a01913c357d.png"><img alt="Marketplace" border="0" height="347" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f2009f13-2d46-4e6a-9f67-a0538642a836.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="コンバーター" width="640"></a></p>


  <h2>手順 1</h2>


  <p>プランのカバーページで [作成] をクリックした後、[基本] ページのパラメーターに入力します。</p>


  <ul>
   <li>&rsquo;MariaDB Enterprise ダウンロードトークンをまだ持っていない場合は、<a href="https://mariadb.com/my_portal" target="_blank">無料で入手</a>できます。 配置を成功させるには、トークンが有効である必要があります。</li>
   <li>場所を選択するときは、premium storage がすべてのデータセンターでまだ利用できないことに注意してください。 そのため、DS シリーズの Vm で premium storage を使用する場合は、premium storage が利用可能な <a href="https://azure.microsoft.com/en-us/regions/#services" target="_blank">場所を選択</a> してください。&nbsp;&nbsp;</li>
  </ul>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f1a8bafe-7c1a-443c-bd39-b1505c9b9bc8.png"><img alt="Step1Basics" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/84799aa7-7b8b-4df1-a0c7-6077fa44c83b.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="Step1Basics" width="434"></a></p>


  <h2>ステップ 2</h2>


  <p>[VM 構成] ページで、VM のサイズとストレージアカウントの種類を指定します。</p>


  <ul>
   <li>データベースノードに DS シリーズの vm を選択する場合は、Premium storage のパフォーマンスを最大限に活用するために、既定の LRS ではなく、ストレージアカウントの種類としてプレミアム-LRS を選択することをお勧めします。</li>
   <li>選択した VM サイズに基づいて、サブスクリプション内の VM コアの既定のクォータを超える場合があります。 このような場合は、サポートチケットを開き、コアクォータを増やすリージョンを指定し、必要なコアの種類が ARM (Azure Resource Manager) であることを指定できます。</li>
   <li>SSH 公開キーは、有効な SSH キーである必要があります。</li>
  </ul>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6e76f999-de82-48b8-8dab-ce9939278673.png"><img alt="image" border="0" height="496" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9866c762-6c0b-4be6-8575-d7334b9f29fe.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="絵" width="429"></a></p>


  <h2>手順 3.</h2>


  <p>[アプリアクセスの構成] ページで、クライアントアプリケーションがクラスターにアクセスするために必要な情報を指定します。</p>


  <ul>
   <li>既定では、DNS 名の前に手順1で指定したクラスター名が付加されます。 完全な DNS 名は次のようになります。<br>
  &lt;クラスター名 &gt; 。 &lt;&gt;cloudapp.azure.com<br>

  この名前が使用可能であることを確認できます。存在しない場合は、別の名前に変更できます。</li>
   <li>アプリケーションのユーザー名とパスワードは、クラスターにアクセスするためにクライアントアプリケーションによって使用されます。</li>
   <li>Load Balancer の表示 &rdquo; には、次の2つの &ldquo; オプションがあります。 <ul>
    <li>&ndash;MariaDB の MaxScale エンドポイントは内部ロードバランサー経由でのみアクセスできます。</li>
    <li>パブリック &ndash; MariaDB の MaxScale エンドポイントは、インターネットからアクセスできます。</li>
   </ul>
   </li>
   <li>アプリケーションスキーマ/データベースは、クライアントアプリケーション用に作成されるデータベースの名前です。</li>
  </ul>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c8d9596a-5f9b-453d-ae5a-5606f1aeba00.png"><img alt="image" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3af61b9e-de72-4524-b61a-d7dfe02230ac.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="絵" width="437"></a></p>


  <p>ウィザードに従ってパラメーターを確認し、クラスターを作成します。 デプロイが完了するまでに約 15 ~ 25 分かかります。 クラスターの準備ができたら、手順3でパブリックロードバランサーを有効にした場合は、次のコマンドを使用してリモートにアクセスできます。</p>


  <blockquote>

  <pre class="prettyprint">

  mysql &ndash;h &lt;domain name label&gt;.&lt;location&gt;.cloudapp.azure.com &ndash;P 4006 &ndash;u &lt;App username&gt; &ndash;p</pre>

  </blockquote>


  <p>または、手順 3. で内部ロードバランサーを有効にした場合は、同じ DNS 名を使用して MaxScale に SSH 接続し、Azure VNET 内からクラスターに接続することもできます。 &nbsp; 2つの MaxScale ノードの既定の SSH ポートは2201と2202です。 &nbsp; 内部ロードバランサーの既定のプライベート IP は10.0.1.10 です。</p>


  <blockquote>

  <pre class="prettyprint">

  mysql &ndash;h 10.0.1.10 &ndash;P 4006 &ndash;u &lt;App username&gt; &ndash;p</pre>

  </blockquote>


  <h2>トラブルシューティング</h2>


  <p>デプロイに失敗した場合は、手順 1. で指定したリソースグループに移動します。 &nbsp; 失敗したデプロイをクリックします。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/797e3dca-d9da-40f0-9e61-77567894013e.png"><img alt="failure1" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/69d13bad-c775-4c10-8bce-bb95c5b78376.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="failure1" width="628"></a></p>


  <p>エラーを展開し、エラーの原因となった最も古いイベントまで下にスクロールして、詳細なエラーメッセージを表示します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d9aefb41-4e3b-432f-8a47-f976b0a37387.png"><img alt="failure2" border="0" height="480" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2a12468f-54be-4ac8-b3e6-063e1e76644b.png" style="border-width: 0px; padding-top: 0px; padding-right: 0px; padding-left: 0px; display: inline; background-image: none;" title="failure2" width="608"></a></p>


  <p>エラーが一時的なものである場合、または無効なパラメーターが原因で発生した場合は &rsquo; 、MariaDB クラスターの外部で作成された他のリソースが含まれていない場合 &rsquo; は、リソースグループ全体を削除し、再度デプロイすることができます。</p>


  <h2>追加情報</h2>


  <ul>
   <li><a href="https://mariadb.com/kb/en/mariadb-enterprise/mariadb-enterprise-cluster-in-azure-quick-guide/" target="_blank">Azure での MariaDB Enterprise クラスター-クイックガイド</a>&nbsp;</li>
   <li><a href="https://mariadb.com/kb/en/mariadb-enterprise/mariadb-enterprise-cluster-in-azure-usage-and-administration/" target="_blank">Azure での MariaDB Enterprise クラスター-使用状況と管理</a></li>
  </ul>
