### YamlMime:Yaml
ms.openlocfilehash: 028202cba1ed80287b576963c2f774cf58ced271
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139894148"
Slug: announcing-geospatial-support-in-azure-documentdb
Title: Azure DocumentDB での地理空間のサポートの発表
Summary: documentdb サービスの最新の更新プログラムには、地理空間データの自動インデックス作成のサポートに加えて、documentdb に格納されている近接クエリを実行するための SQL サポートが含まれています。
Content: >-
  <p>Azure DocumentDB での<strong>地理空間インデックス作成とクエリ</strong> &nbsp; のサポートを発表いたします。 documentdb サービスの最新の更新プログラムには、地理空間データの自動インデックス作成のサポートに加えて、documentdb に格納されている近接クエリを実行するための SQL サポートが含まれています。 <a href="https://www.nuget.org/packages/Microsoft.Azure.DocumentDB/">.NET SDK のバージョンの</a>説明をダウンロードすると、ポイントと多角形を表す新しい型、DocumentDB コレクションでの空間インデックス作成と有効化のサポート、および空間クエリを実行するための新しい LINQ クエリ演算子も&#39;ます。 「Azure DocumentDB &quot; <a href="https://www.vldb.org/pvldb/vol8/p1668-shukla.pdf">でのスキーマに依存しないインデックス作成</a>」で &quot; 説明したように、documentdb &rsquo; のデータベースエンジンは、本当にスキーマに依存しないように設計されており、JSON のファーストクラスのサポートを提供しています。 また、DocumentDB の書き込み最適化データベースエンジンは、 <strong><a href="https://geojson.org/geojson-spec.html">GeoJSON</a> &nbsp; 標準で表される空間データをネイティブに &nbsp; 認識</strong>するようになりました。</p>


  <h2>SQL を使用した地理空間 &nbsp; データのクエリ</h2>


  <p><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/08/12/Geo-spatial-150-01.png"><img alt="Geo-spatial 150-01" class="alignnone size-medium wp-image-329531" height="369" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Geo-spatial-150-01-548x369.png" width="548"></a><strong>&nbsp;</strong>DocumentDB では、どのような種類のクエリを実行できますか。 DocumentDB の &nbsp; <a href="https://www.documentdb.com/sql/demo#geospatial">プレイグラウンド</a>でお試しください。 火山に関する JSON データを含む科学的なデータセットを使用して、プレイグラウンドに DocumentDB コレクションを事前に作成し&#39;ました。 たとえば、ここでは、組み込み関数 &nbsp; の<strong>ST_DISTANCE</strong>を使用して、ワシントン州 &nbsp; 100 km 内のすべての火山 &nbsp; を返すクエリを&#39;します。 <strong>特定の半径内の場所を検索する:</strong> <a href="https://www.documentdb.com/sql/demo#geospatial"> <img alt="GeospatialDistance" class="alignnone size-medium wp-image-329561" height="275" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/GeospatialDistance-636x275.png" width="636"> </a>また、ST_WITHIN &nbsp; を使用<strong> &nbsp; </strong>して、ポイントが多角形内に存在するかどうかを確認することもできます。 一般的なポリゴンは、郵便番号、州境界、自然形状などの境界を表すために使用されます。 インデックス作成ポリシーに空間インデックスを含めると、 &quot; クエリ内 &quot; でインデックスを使用して効率的に処理が行われます。 <strong>多角形の境界内の場所を検索します。</strong> <a href="https://www.documentdb.com/sql/demo#geospatial"> <img alt="GeospatialWithin" class="alignnone size-medium wp-image-329541" height="269" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/GeospatialWithin-636x269.png" width="636"> </a>ここでは、この機能について説明する必要があるのは&#39;です。 <em> &quot; バックエンドでは、場所と距離 &rdquo; に関する大量のデータを LINQ でクエリすることにより、DocumentDB を最新の場所ベースの &ldquo; アプリケーションに最適なバックエンドにすることができます。 &rdquo; -ライアングルーミング、創設者、Trekkit.com</em></p>


  <h2>&nbsp;</h2>


  <h2>Azure DocumentDB での空間インデックス &nbsp; のしくみ</h2>


  <p>簡単に言うと、geometry は測地座標から2D 平面 &nbsp; に投影され、 <strong>quadtree</strong>を使用してセルに段階的に分割されます。 これらのセルは、その位置に基づき、<strong>ヒルベルト空間充填曲線</strong>内で一次元にマッピングされ、ポイントの局所性が維持されます。 さらに、位置情報データのインデックスを作成するとき、そのデータに、<strong>テセレーション</strong>と呼ばれるプロセスが適用されます。つまり、特定の位置と交差するすべてのセルが特定され、キーとして DocumentDB のインデックスに保存されます。 クエリの実行時、ポイントやポリゴンなどの引数は、同様にテセレーションを経て関連するセル ID 範囲が抽出された後、インデックスからデータを取得するために使用されます。 この機能の詳細について <a href="https://azure.microsoft.com/en-us/documentation/articles/documentdb-geospatial">は、こちら</a>を参照してください。</p>


  <h2>Sdk を使ってみる</h2>


  <p>ここでは、<a href="https://www.nuget.org/packages/Microsoft.Azure.DocumentDB/">こちら</a>またはサポートされている他のプラットフォーム (Node.js、Java、Python、または JavaScript) のいずれかを<a href="https://msdn.microsoft.com/en-us/library/azure/dn781482.aspx">使用して</a>、DocumentDB .net SDK のバージョン2を Nuget からダウンロードして、空間クエリデータ &nbsp; を &nbsp; 開始します。 また、空間データにインデックスを作成してクエリを実行するためのコードサンプルを含む <a href="https://github.com/Azure/azure-documentdb-net/tree/master/samples/code-samples/Queries.Spatial">Github プロジェクト</a> も作成しました。 ヘルプが必要な場合、またはご質問がある場合は、 <a href="https://stackoverflow.com/questions/tagged/azure-documentdb">stack overflow の開発者フォーラム</a>に &nbsp; ご連絡いただくか、DocumentDB エンジニアリングチームとの1:1 チャットをスケジュールしてください。 最新の DocumentDB のニュースと機能については、Twitter <a href="https://twitter.com/DocumentDB">@DocumentDB</a> でフォロー &nbsp; して最新情報を入手してください。</p>
