### YamlMime:Yaml
ms.openlocfilehash: 0dbd60c2694d43bc8bc084ecbf3185c64ec4cd27
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139903601"
Slug: deploy-a-fhir-sandbox-in-azure
Title: Azure に FHIR サンドボックスをデプロイする
Summary: HIMSS 2019 に関連して、Azure でエンタープライズ グレードのマネージド FHIR® API を顧客に提供する Azure API for FHIR を発表しました。 それ以降、新しい構成オプションと機能を使用してサービスの改善に取りかかっています。
Content: >-
  <p><em>このブログ記事は、シニア プログラム マネージャーの Michael Hansen 氏によって作成Microsoft Azure。</em></p>


  <p><a href="https://www.himssconference.org/" target="_blank">HIMSS 2019</a> に関連して、Azure でエンタープライズ グレードのマネージド <a href="https://azure.microsoft.com/en-us/blog/lighting-up-healthcare-data-with-fhir-announcing-the-azure-api-for-fhir/" target="_blank">FHIR</a>&reg; API を顧客に提供する Azure API for FHIR を発表しました。 それ以降、新しい構成オプションと機能を使用してサービスの改善に取りかかっています。 現在取り組み中の機能の一部には、認証構成と SMART on FHIR Azure Active Directory プロキシが含まれます。これは、Azure API for FHIR でのいわゆる <a href="https://smarthealthit.org/" target="_blank">SMART on FHIR</a> EHR の起動を可能にします。</p>


  <p>サービスと構成オプションの使用方法を示すサンドボックス環境を開発しました。 このブログ記事では、Azure にサンドボックスをデプロイする方法に重点を置いています。 後のブログ記事では、さまざまな構成オプションの技術的な詳細について説明します。</p>


  <p>このAzure API for FHIRチームは、サンプル <a href="https://github.com/Microsoft/fhir-server-samples" target="_blank">アプリケーションGitHubリポジトリを管理します</a>。 製品エンジニアリング チームは、製品エンジニアリング チームによって管理され、製品エンジニアリング チームの最新の機能とAzure API for FHIR。 リポジトリには、患者ダッシュボード アプリケーション、Azure Function が含まれています。このアプリケーションは <a href="https://synthetichealth.github.io/synthea/" target="_blank">、Patientea</a> で生成された患者データを読み込み、SMART on FHIR アプリケーション用のサンプル テンプレートを読み込む機能です。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/95141083-d522-426a-b910-cae3d36439ed.png"><img alt="Diagram displaying SMART on FHIR applications" border="0" height="334" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7447373b-2057-48cf-ba36-615fb0abba50.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="SMART on FHIR アプリケーション" width="408"></a></p>


  <h2>デプロイの手順</h2>


  <p>リポジトリには、サンドボックス シナリオのデプロイに使用できる完全に自動化された PowerShell スクリプトが含まれています。 デプロイ スクリプトによって、アプリケーションAzure Active Directoryテスト ユーザーが作成されます。 Azure サブスクリプションに関連付けられているテナントにこれらの Azure Active Directory オブジェクトを作成しない場合は、データ プレーンのアクセス制御に使用する別の <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant" target="_blank">Azure Active Directory</a> テナントを作成することをお勧めします。</p>


  <p>デプロイ スクリプトは PowerShell 用に記述され、 <a href="https://docs.microsoft.com/en-us/powershell/module/azuread/?view=azureadps-2.0" target="_blank">AzureAd PowerShell モジュールを使用します</a>。 お使いの&rsquo;コンピューター上の PowerShell にアクセス権を持てない場合は、次の<a href="https://azure.microsoft.com/en-us/features/cloud-shell/" target="_blank">Azure Cloud Shell。</a> Cloud Shell では、以下を使用してサンドボックス環境をデプロイできます。</p>


  <pre>

  # Clone source code repository

  cd $HOME

  git clone <a href="https://github.com/Microsoft/fhir-server-samples">https://github.com/Microsoft/fhir-server-samples</a>

  cd fhir-server-samples/deploy/scripts


  # Log in to Azure AD:

  Connect-AzureAd -TenantDomain &lt;mytenantdomain&gt;.onmicrosoft.com


  # Connect to Azure Subscription

  Login-AzureRmAccount


  # Selection subscription

  Select-AzureRmSubscription -SubsciptionName &ldquo;Name of your subscription&rdquo;


  # Deploy Sandbox

  .\Create-FhirServerSamplesEnvironment.ps1 -EnvironmentName &lt;NameOfEnvironment&gt; -EnvironmentLocation westus2 -AdminPassword $(ConvertTo-SecureString -AsPlainText -Force &quot;MySuperSecretPassword&quot;)</pre>


  <p>環境のデプロイには約 5 分かかります。 デプロイ スクリプトでは、環境と同じ名前のリソース グループが作成されます。 そこに、サンドボックスに関連付けられているすべてのリソースが表示されます。</p>


  <h2>合成データの読み込み</h2>


  <p>環境リソース グループには、FhirImport という名前のコンテナーを &ldquo;持つストレージ アカウントが含まれる。&rdquo; このストレージ アカウントに Ingestea 患者バンドルをアップロードすると、そのバンドルが取り込まれる。</p>


  <h2>患者ダッシュボードの使用</h2>


  <p>患者ダッシュボードには、次の 2 つのバージョンがあります。</p>


  <ul>
      <li>&lt;https:// NameOfEnvironment&gt; dash.azurewebsites.net: これは、患者の ASP.NET ダッシュボードです。 このGitHubには、この患者ダッシュボード<a href="https://github.com/Microsoft/fhir-server-samples/tree/master/src/FhirDashboard" target="_blank">のソース</a> コードが含まれています。</li>
      <li>&lt;https:// NameOfEnvironment&gt; js.azurewebsites.net: これは単一ページの JavaScript アプリケーションです。 ソース <a href="https://github.com/Microsoft/fhir-server-samples/tree/master/src/FhirDashboardJS" target="_blank">コードは</a>、GitHubにあります。</li>
  </ul>


  <p>これらの URL に移動すると、ログインするように求めるメッセージが表示されます。 &lt;管理者ユーザーはデプロイ スクリプトによって作成され、NameOfEnvironment-admin@&gt;&lt;mytenantdomain.onmicrosoft.com&gt; というユーザー名を持ち、パスワードはデプロイ時に選択したパスワードになります。 一部の患者を、Ofea アップデータを使用してアップロードした場合は、患者の一覧を表示できる必要があります。 これにより、JavaScript ダッシュボードのビューが表示されます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6f7c61ad-569c-42c5-bbe0-9d706eef40c2.png"><img alt="JavaScript dashboard" border="0" height="499" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6cb22908-a94b-46e1-af45-94fed1079ea3.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="JavaScript ダッシュボード" width="712"></a></p>


  <p>特定の患者の詳細をクリックすると、詳細情報を取得できます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6ec32e0a-61e0-422c-8111-817c8f9b9ea1.png"><img alt="Details on a specific patient information on JavaScript" border="0" height="606" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ecd3c397-c7f0-44ef-bce3-cdca93382dd3.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="JavaScript の患者情報" width="638"></a></p>


  <p>SMART on FHIR アプリケーションのリンクを使用して、この患者の成長チャート アプリケーションを取得することもできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1c6ba6cb-f4a0-4c35-afbe-8ad69e331483.png"><img alt="SMART on FHIR applications showing the growth chart application of a patient" border="0" height="925" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/96c645ae-fa8c-42e6-b28a-26778e37e058.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="患者の成長チャート アプリケーションを示す SMART on FHIR アプリケーション" width="1114"></a></p>


  <p>サンドボックスには、その他の便利なツールが含まれています。 例として、&ldquo;<a href="https://docs.microsoft.com/en-us/azure/healthcare-apis/access-fhir-postman-tutorial" target="_blank">Postman</a> などのツールを使用して FIR API にアクセスするために使用できるトークンを含む FHIR エンドポイントの詳細については、 [About me&rdquo;]/(自分について)リンクを参照してください。</p>


  <h2>サンドボックスの削除</h2>


  <p>アプリケーションと FHIR サンドボックスのAzure API for FHIR完了すると、次の方法で簡単に削除できます。</p>


  <pre>

  .\Delete-FhirServerSamplesEnvironment.ps1 -EnvironmentName &lt;NameOfEnvironment&gt;</pre>


  <p><em>FHIR&reg; は HL7 の商標であり、HL7 の許可を得て使用されます</em></p>
