### YamlMime:Yaml
ms.openlocfilehash: cb86aa04045a5ee7926b5ca80733de283e4fce56
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909194"
Slug: analyzing-your-azure-search-traffic
Title: Azure Search トラフィックの分析
Summary: 検索サービス内で何が起こっているのかを知ることができるようになりました。また、Search Traffic Analytics の最初のフェーズがロールアウトされたことをお知らせします。
Content: >-
  <p>ユーザーを理解するのに最適なリソースは、サイトまたはアプリの検索ボックスです。ユーザーが何かを検索するたびに、必要なものを正確に指示します。 検索では、ユーザーがアプリで必要なものを簡単に見つけられるようにするだけでなく、ユーザーが探しているものや、アプリが配信されているかどうかをアプリの所有者が把握できるようにすることもできます。</p>


  <p>e コマースアプリがある Imagine、最も一般的なクエリがわかっていれば、ユーザーに人気のある製品に関する有益な情報を得ることができます。また、クエリの結果がまったく返されない場合は、現在提供されていない製品に関するヒントを提供して、在庫に追加することができます。</p>


  <p>検索サービス内でどのような&#39;が発生しているかを把握できるようにするために&#39;d さん、検索 Traffic Analytics の最初のフェーズをロールアウトしたことを <a href="https://feedback.azure.com/forums/263029-azure-search/suggestions/6847144-provide-some-sort-of-usage-feedback-qps">お知らせします</a> 。これにより、検索サービスを可視化し、ユーザーとその動作に関する洞察を得ることができます。</p>


  <p>では、どのように動作するのでしょうか。 検索サービスに要求が行われるたびに、必要に応じて、その要求をいくつかの有用な情報と共にログに記録し、集計を行い、いくつかの重要なメトリックを計算することができます。 検索 Traffic Analytics を有効にすると、その2つのデータストリームが自分の<a href="https://azure.microsoft.com/en-us/services/storage/">Azure Storage</a>アカウントにコピーされます。 特に、 &rsquo; 次の2つの blob コンテナーがあります。</p>


  <ul>
   <li><strong>操作ログ</strong>: これらは検索サービスログで、すべての要求がこのコンテナーで利用できるようになります。 これにより、検索対象製品 &rdquo; や &ldquo; 、空の結果を返す検索用語など、ビジネス上の疑問 &ldquo; に対する回答を得ることができます。また、 &rdquo; インデックス作成率や API バージョンの使用状況などの運用面もあります。</li>
   <li><strong>メトリック</strong>: 運用面の集計計算が提供されます。 現在利用可能なメトリックは待機時間のみですが、QPS のような他のユーザーを近日中に追加することに取り組んでいます。</li>
  </ul>


  <p>検索ドメインは大幅に異なる場合があります。これ &rsquo; は、データアクセス層と使用量と分析レイヤーを分離することにしたためです。 お好みの方法でデータを操作および分析する柔軟性を提供したいと考えています。</p>


  <h2>Power BI を使用したデータの分析</h2>


  <p>非常に簡単に開始 &rsquo; できるようにするために、Power BI と提携して、基本的なダッシュボードを数分で使用できる<a href="https://go.microsoft.com/fwlink/p/?LinkId=718214">コンテンツパック</a>を提供します。また、独自のニーズに合わせてカスタマイズしたり、新しい視覚エフェクトを作成したり、チームとレポートを共有したりすることができます。</p>


  <p>Power BI を Azure Search analytics ストレージに接続すると、サービスによって過去30日間のデータが収集され、サービスの異なるディメンションに対して4つのレポートが生成されます。</p>


  <h3>1. &nbsp; &nbsp; &nbsp; 検索<img alt="Search report" border="0" height="344" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3b582aef-0d15-48d9-b0a0-0ab7715716a0.png" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" title="レポートの検索" width="610"></h3>


  <p>ユーザーが検索する方法を一目で確認できます。 時間の経過に伴う検索ボリューム、最も一般的な検索クエリ、結果のないクエリを確認できます。 また、インデックス間の検索の分布を示す2つの視覚化と、時間の経過と共に返されるドキュメントの数も含まれます。</p>


  <h3>2. &nbsp; &nbsp; &nbsp; インデックス作成</h3>


  <p><img alt="Indexing report" border="0" height="351" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/747df87f-7900-44b3-a904-bdcfafc049ab.png" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" title="インデックス作成レポート" width="610">前のレポートと似ていますが、この場合はインデックス作成操作に重点を置いています。 時間の経過と共にインデックスが作成されたドキュメントの数を確認することができます。特に、インデックス作成の負荷が高いサービスの場合は、503s の数を示すグラフも含まれています。これにより、システムに過剰な負荷がかかっているかどうかを理解するのに役立ちます。</p>


  <h3>3. サービスの &nbsp; &nbsp; &nbsp; 統計</h3>


  <p><img alt="Service stats report" border="0" height="343" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7dc8eb9d-caa6-40b8-802f-28891759f05d.png" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" title="サービス統計レポート" width="610"></p>


  <p>このレポートには、サービスに対して実行されたすべての操作に関する情報が表示されます。 API のバージョンまたは操作のカテゴリをドリルダウンして、検索サービスによって特定の結果が返される原因となったクエリを確認できます。 この最後の部分は、失敗した要求を引き起こすバグを追跡するのに非常に役立ちます。</p>


  <h3>4. &nbsp; &nbsp; &nbsp; 待機時間</h3>


  <p><img alt="Latency report" border="0" height="346" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/37cf3d1d-6fe0-4bb5-a721-1117a54d52c8.png" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-image: none" title="待機時間レポート" width="610"><br>

  このレポートでは、待機時間のメトリックに関する詳細情報が提供されます。 検索とインデックス作成の待機時間を別々に調べることができます。また、クエリの負荷の増加に対応するために追加のレプリカが必要かどうかを特定するのに役立つすべての操作を含む、システム全体の待機時間を確認することもできます。</p>


  <p>必要に応じてレポートやダッシュボードを編集および変更し、ユーザーにとって重要なデータを強調表示できることに注意してください。 非常に高いデータ読み込みや特定のビジネス上の質問など、より高度なシナリオに対応できる <a href="https://azure.microsoft.com/en-us/services/hdinsight/">Azure HDInsight</a> サンプルに取り組んでいます。</p>


  <h2>検索トラフィックの分析を有効にする</h2>


  <p>この機能を有効にするには、 <a href="https://portal.azure.com/">Azure Portal</a>の Azure Search ブレードにアクセスし、[設定] の下で検索 Traffic Analytics を見つけます。 データを格納するために使用するストレージアカウント &rsquo; を選択し、[ログとメトリック] を選択します。 検索サービスと同じリージョンにストレージアカウントが必要になります。 このストレージアカウントには、標準コストが適用されます。</p>


  <p>有効にすると、5 ~ 10 分以内にデータがストレージアカウントに送信されるようになります。 データは JSON blob として blob ストレージに格納され、1つのコンテナーにつき1時間につき1つのファイルが存在します。 詳細については、ドキュメントの「検索を有効にする方法」および「ログとメトリックスキーマの完全な説明 <a href="https://azure.microsoft.com/en-us/documentation/articles/search-traffic-analytics">」</a>を参照してください Traffic Analytics。</p>


  <h2>最後に</h2>


  <p>この新しい使用可能なデータをすべて使用することをお勧めします。プレビューテスト段階では、お客様の満足度が非常に高くなっています。 マイクロソフトでは、お客様のエクスペリエンスを向上させるために役立つサービスに関する新しい情報を入手し、運用上の観点から検索サービスがどのように実行されているかをより正確に把握できるようになっています。 このデータにより、1人の顧客がインデックス作成コードのバグを発見し、修正しました。もう1つは、すべてのでを最新の API バージョンに更新しました。</p>


  <p>&rsquo;この機能がどのように役立つかについては、お待ちください。 <a href="https://portal.azure.com/#create/Microsoft.Search">Azure Search</a>サービスに Connect て、ご意見をお聞か<a href="https://feedback.azure.com/forums/263029-azure-search/">せ</a>ください。</p>
