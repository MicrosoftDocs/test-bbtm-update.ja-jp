### YamlMime:Yaml
ms.openlocfilehash: 9fe8e0820238872ca1906380bf8816fd9fb36150
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139893129"
Slug: cloud-migration-and-disaster-recovery-of-load-balanced-multi-tier-applications-using-azure-site-recovery
Title: 負荷分散された多層アプリケーションのクラウド移行とディザスター リカバリー
Summary: Azure 仮想マシンの可用性セットのサポートは、多くのお客様から非常に期待Azure Site Recoveryされています。 本日は、可用性セットでAzure Site Recovery仮想マシンの作成をサポートする機能が追加されました。
Content: "<p>Microsoft Azure 仮想マシンの可用性セットのサポート<a href=\"https://aka.ms/asr-avsetblog-azureavset\" target=\"_blank\"></a>は、アプリケーションのクラウド移行またはディザスター リカバリーに製品を使用している多くの Azure Site Recovery のお客様から、非常に期待されている機能でした。 本日は、可用性セット内でのAzure Site Recovery仮想マシンの作成がサポートされるのをお知らせ <a href=\"https://aka.ms/asr-avsetblog-avset\">します</a>。 これにより、アプリケーションの同じ層の複数の仮想マシン間でトラフィックを分散する内部ロード バランサーまたは外部ロード バランサーを構成できます。 アプリケーションのクラウド移行&nbsp;とディザスター リカバリーという Azure Site Recovery の約束により、このファーストクラスの可用性セットとロード バランサーの統合により、プライマリ サイトで実行した場合と同じ保証を使用して、Microsoft Azure で障害が発生したアプリケーションをより簡単に実行できます。</p>\n\n<p>このシリーズの前 &ndash;のブログでは、仮想マシンではなく、アプリケーションのクラウド移行とディザスター リカバリーの復旧に関連する重要性と複雑さについて <a href=\"https://aka.ms/asr-apprecovery\">学習しました</a>。 次のブログでは、アプリケーションのワンクリック クラウド移行とディザスター リカバリーを実行する方法について説明した復旧計画の詳細 <a href=\"https://aka.ms/asr-avsetblog-oneclickdr\">について説明しました</a>。 このブログでは、 を使用して負荷分散された多層アプリケーションをフェールオーバーまたは移行する方法Azure Site Recovery。</p>\n\n<p>復旧計画での可用性セットとロード バランサーの実際の使用状況を示すには、SQL Always On バックエンドを備える 3 層の SharePoint ファームが使用されています。&nbsp;1 つの復旧計画を使用して、このファーム全体のフェールオーバー SharePointされます。</p>\n\n<p>&nbsp;</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e53d6d9d-defc-4fef-9b47-a643dc08d06c.jpg\"><img alt=\"Disaster Recovery of three tier SharePoint Farm\" height=\"436\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d80d491e-9f46-4b23-9312-bd59fa6b74c1.jpg\" style=\"display: inline\" title=\"3 つの階層のディザスター SharePoint ファーム\" width=\"780\"></a></p>\n\n<p>&nbsp;</p>\n\n<p>次に示すのは、このファームで実行する必要がある場合に、SharePointの可用性セットとロード バランサーを設定する手順Microsoft Azure。</p>\n\n<ol>\n <li>Recovery Services コンテナーの下で、各アプリケーション層仮想マシンの [コンピューティングとネットワーク] 設定に移動し、その仮想マシンの可用性セットを構成します。</li>\n <li>Web 層の仮想マシンごとに別の可用性セットを構成します。</li>\n <li>2 つのアプリケーション層の仮想マシンと、復旧計画のグループ 1 とグループ 2 の 2 つの Web 層仮想 <a href=\"https://aka.ms/asr-avsetblog-recoveryplan\">マシンをそれぞれ</a> 追加します。</li>\n <li>まだ行ってない場合は、次のボタンをクリックして、最も一般的な Azure Site Recovery <a href=\"https://aka.ms/asr-avsetblog-runbooks\">Automation Runbook</a> を Azure Automation アカウントにインポートします。\n <blockquote>\n <p>&nbsp;<a href=\"https://aka.ms/asr-automationrunbooks-deploy\"><img alt=\"DeployToAzure\" border=\"0\" height=\"45\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/620a6faa-ef67-4cd9-9681-31626a3422b4.png\" style=\"border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px\" title=\"DeployToAzure\" width=\"215\"></a></p>\n </blockquote>\n </li>\n <li>スクリプト ASR-SQL-FailoverAG をグループ 1 の事前手順として追加します。&nbsp;&nbsp;</li>\n <li>グループ 1 ASR-AddMultipleLoadBalancers 2 の両方に、事後手順としてスクリプト を追加します。</li>\n <li>スクリプトで説明Azure Automationを使用して、新しい変数を作成します。 この例では、これらは使用される正確なコマンドです。</li>\n</ol>\n\n<pre>\n $InputObject = @{&quot;TestSQLVMRG&quot; = &quot;SQLRG&quot; ;\n                 &quot;TestSQLVMName&quot; = &quot;SharePointSQLServer-test&quot; ;\n                 &quot;ProdSQLVMRG&quot; = &quot;SQLRG&quot; ;\n                 &quot;ProdSQLVMName&quot; = &quot;SharePointSQLServer&quot;;\n                 &quot;Paths&quot; = @{\n                     &quot;1&quot;=&quot;SQLSERVER:\\SQL\\SharePointSQL\\DEFAULT\\AvailabilityGroups\\Config_AG&quot;; \n                     &quot;2&quot;=&quot;SQLSERVER:\\SQL\\SharePointSQL\\DEFAULT\\AvailabilityGroups\\Content_AG&quot;}; \n                 &quot;406d039a-eeae-11e6-b0b8-0050568f7993&quot;=@{                             \n                     &quot;LBName&quot;=&quot;ApptierInternalLB&quot;;\n                     &quot;ResourceGroupName&quot;=&quot;ContosoRG&quot;};             \n                 &quot;c21c5050-fcd5-11e6-a53d-0050568f7993&quot;=@{\n                     &quot;LBName&quot;=&quot;ApptierInternalLB&quot;; \n                     &quot;ResourceGroupName&quot;=&quot;ContosoRG&quot;};\n                 &quot;45a4c1fb-fcd3-11e6-a53d-0050568f7993&quot;=@{\n                     &quot;LBName&quot;=&quot;WebTierExternalLB&quot;;\n                     &quot;ResourceGroupName&quot;=&quot;ContosoRG&quot;};\n                 &quot;7cfa6ff6-eeab-11e6-b0b8-0050568f7993&quot;=@{\n                     &quot;LBName&quot;=&quot;WebTierExternalLB&quot;;\n                     &quot;ResourceGroupName&quot;=&quot;ContosoRG&quot;}}\n\n$RPDetails = New-Object -TypeName PSObject -Property $InputObject  | ConvertTo-Json\n\nNew-AzureRmAutomationVariable -Name &quot;SharePointRecoveryPlan&quot; -ResourceGroupName &quot;AutomationRG&quot; -AutomationAccountName &quot;ASRAutomation&quot; -Value $RPDetails -Encrypted $false</pre>\n\n<p>これで復旧計画のカスタマイズが完了し、フェールオーバーの準備が整いました。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/891f4fa9-9365-4805-9558-b448c10e792a.jpg\"><img alt=\"Azure Site Recovery SharePoint Recovery Plan\" height=\"708\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/09629eb5-c6c5-495f-84bd-caed24637606.jpg\" style=\"display: inline\" title=\"Azure Site Recovery SharePoint復旧計画\" width=\"446\"></a></p>\n\n<p>&nbsp;</p>\n\n<p>フェールオーバー (またはテスト フェールオーバー) が完了し、SharePoint ファームが Microsoft Azureされると、次のように表示されます。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/51a65dd5-bafb-456b-bd40-880e2f4987b4.jpg\"><img alt=\"SharePoint Farm on Azure failed over using Azure Site Recovery\" height=\"488\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2d0cf4c1-4347-4cd7-ba0f-1570171b68a1.jpg\" style=\"display: inline\" title=\"SharePointを使用して Azure 上のファームをAzure Site Recovery\" width=\"662\"></a></p>\n\n<p>&nbsp;</p>\n\n<p>このデモ ビデオを見て、このすべてが動作しているのを確認してください。Azure Site Recovery が提供する組み込みのコンストラクトを使用する方法では、シングルクリック復旧計画を使用して 3 層アプリケーションをフェールオーバーできます。 復旧計画では、次のタスクが自動化されます。</p>\n\n<ol>\n <li>可用性グループSQL Always Onで実行されている仮想マシンにフェールオーバー Microsoft Azure</li>\n <li>アプリケーション ファームの一部だった Web 層とアプリ層の仮想マシンをSharePointする</li>\n <li>可用性セット内にあるアプリケーション ファームのアプリケーション層SharePointに内部ロード バランサーをアタッチする</li>\n <li>可用性セット内のサーバー ファームの Web 層SharePointに外部ロード バランサーをアタッチする</li>\n</ol>\n\n<p>&nbsp;<iframe allowfullscreen=\"\" frameborder=\"0\" height=\"540\" src=\"https://channel9.msdn.com/Series/Azure-Site-Recovery/Disaster-Recovery-of-load-balanced-multi-tier-applications-using-Azure-Site-Recovery/player\" width=\"960\"></iframe></p>\n\n<p>アプリケーションの完全復旧を確実に成功に向け、Azure Site Recovery はディザスター リカバリーと移行のすべてのニーズに対応するワンストップ ショップです。 私たちのミッションは、Microsoft Azure の機能を使用してディザスター リカバリーを民主化し、階層 1 の最も高いアプリケーションがビジネス継続性プランを持つだけでなく、組織の&#39;の IT アプリケーションの 100% のディザスター リカバリー計画を実現する作業終了を設定できる説得力のあるソリューションを提供します。</p>\n\n<p>追加の製品情報を<a href=\"https://aka.ms/asr-info\">確認し</a>、ワークロードの保護と移行を開始し、現在、Microsoft AzureをAzure Site Recoveryできます。 Azure Site Recovery の強力なレプリケーション機能は、VMware または Hyper-V 上で実行されている場合でも、レプリケートする新しい物理サーバーまたは仮想マシンごとに 31 日間無料で使用できます。 アプリの詳細についてはAzure Site Recovery方法に関 <a href=\"https://aka.ms/asr-videos\">するビデオを参照してください</a>。 <a href=\"https://aka.ms/asr-forums\">MSDN の Azure Site Recovery</a> フォーラムにアクセスして追加情報を確認したり、他の顧客と対話したり、<a href=\"https://aka.ms/asr-uservoice\">Azure Site Recovery User Voice</a> を使用して、次に有効にしたい機能をお知らせします。</p>"
