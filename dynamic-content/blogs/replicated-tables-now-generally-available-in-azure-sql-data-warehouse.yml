### YamlMime:Yaml
ms.openlocfilehash: bee3c88b73d81a776dd7bace645768a698049f0b
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139910456"
Slug: replicated-tables-now-generally-available-in-azure-sql-data-warehouse
Title: レプリケートされたテーブルが Azure SQL Data Warehouse で一般提供SQL Data Warehouse
Summary: レプリケートされたテーブルが Azure SQL Data Warehouse で一般提供されています。大規模なデータ ウェアハウスのパフォーマンスの鍵となるのは、データがシステム全体に分散される方法です。...
Content: >-
  <p>新しい種類のテーブル分散であるレプリケートされたテーブルが<a href="https://aka.ms/sqldw">、Azure</a> SQL Data Warehouse (SQL DW) で一般提供されました。 SQL DW は、複雑なクエリを高速かつペタバイト単位のデータ全体で実行するために調整された、フル マネージドで柔軟で安全なクラウド データ ウェアハウスです。</p>


  <p>大規模なデータ ウェアハウスのパフォーマンスの鍵は、データがシステム全体に分散される方法です。 クエリがテーブル間で結合され、データが異なる方法で分散される場合は、クエリを完了するためにデータ移動が必要です。 データを変換してビジネス ルールを読み込み、強化、適用する場合も同じことを言える可能性があります。 レプリケート テーブルを使用すると、すべてのコンピューティング ノードでデータを使用できます。そのため、データ移動が排除され、クエリの実行速度が速くなります。 場合によっては、小さなディメンション テーブルや、レプリケート テーブルとラウンド ロビン テーブルの選択によって、データ移動が減り、パフォーマンスが向上する可能性があります。 すべての最適化手法と同様に、パフォーマンスの向上は異なる場合があります。テストする必要があります。</p>


  <p><img width="417" height="284" title="replicated-table" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="replicated-table" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2d65a6d3-8c51-4113-88c5-21a505549b05.png" border="0"></p>


  <h2>パフォーマンスを向上させるデータ移動の削減</h2>


  <p>レプリケートテーブルのパブリック プレビュー期間中、SQL Data Warehouse のお客様は、ラウンド ロビン分散を使用する場合と比較して、レプリケートされたテーブルを使用してデータを変換する際に、最大 5 倍のパフォーマンス向上が見えます。</p>


  <p>TPC-H スキーマと Q2 クエリを使用したクエリ パフォーマンスの向上の例を見て、レプリケートされたテーブルのクエリの利点を紹介します。 TPC-H 仕様ごとの Q2 は、次のビジネス上の質問に回答します。</p>


  <blockquote>

  <p>最小コストサプライヤー クエリでは、特定の種類とサイズの各部分について、特定のリージョンで、それを最低コストで提供できるサプライヤーを検索します。 そのリージョン内の複数のサプライヤーが、同じ (最小) コストで必要な部品の種類とサイズを提供している場合、このクエリでは、口座残高が最も高いサプライヤーのパーツが一覧表示されます。 このクエリでは、サプライヤーの口座残高 (名前と国)、部品の番号と製造元、サプライヤーの住所、電話番号、コメント情報が一覧表示されます。</p>

  </blockquote>


  <p>スキーマ実装の観点<a href="https://docs.microsoft.com/azure/sql-data-warehouse/design-guidance-for-replicated-tables" target="_blank"></a><a name="_GoBack"></a>から、このクエリでは、設計ガイダンスのドキュメントに合わせて 3 つの小さなテーブルが活用され、サプライヤー、国、地域などのレプリケートテーブルの主要候補です。 クエリの観点から、これらのテーブルには、このクエリを完了するために合計 6 回アクセスされます。 DW400 での実行中の実行時間とレプリケートテーブルなしの実行時間と、1 TB のスケールファクターを比較したクエリ実行グラフを次に示します。 DW SQL設定、TPC-H クエリ、およびスケール ファクターによって異なる結果が生成される場合があります。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2b3a6a52-11fe-45ea-bbc9-b5879e9b8b21.jpg"><img width="459" height="275" title="ElaspedTimeChart" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="ElaspedTimeChart" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3746a02c-eabb-4248-b776-8a135be57649.jpg" border="0"></a></p>


  <p>コールド キャッシュ (SQL バッファー キャッシュ) を使用したこのクエリでは、ラウンド ロビン テーブルの分散からレプリケートされたテーブル分散へのパフォーマンスの向上は 13 倍です。 ウォーム キャッシュは 100 倍を超える速くなります。 ラウンド ロビンの場合に必要なデータ移動は固定コストです。これは、ウォーム キャッシュされた実行がパフォーマンスをさらに向上させる主な理由です。 設計ガイダンスに従って、レプリケート<a href="https://docs.microsoft.com/azure/sql-data-warehouse/design-guidance-for-replicated-tables" target="_blank"></a>されたテーブルの動作を理解し、ワークロードに適したシナリオで確実に活用してください。</p>


  <h2>ディメンションをレプリケート テーブルとして再作成する</h2>


  <p>以前は、SQL Data Warehouse、参照テーブル、またはディメンション テーブルを含むインスタンスでは、既定のラウンド ロビン分散が使用されています。 クエリの実行中に、各コンピューティング ノードにデータがコピーされ、クエリの実行時間が長くなります。 さらに、システム リソースは、データを移動するために、システム上の他のクエリから取り出されます。 日付ディメンションなどのディメンション テーブルは、次のコード サンプルを使用して再作成できます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6894370e-b56b-40e2-9b9b-054fd71a9e21.jpg"><img width="240" height="146" title="RenameQuery" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" alt="RenameQuery" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/cb52b1be-d1a2-4e93-9023-267585bfbe89.jpg" border="0"></a></p>


  <h2>次のステップ</h2>

  <p>レプリケートされたテーブルは、すべてのバージョンの Azure SQL Data Warehouse で使用できます。 作業を開始するには:</p>

  <ul><li>レプリケートテーブル <a href="https://docs.microsoft.com/azure/sql-data-warehouse/design-guidance-for-replicated-tables" target="_blank">の詳細については、</a> 設計ガイダンスを参照してください。&nbsp; </li><li><a href="https://docs.microsoft.com/en-us/azure/sql-data-warehouse/create-data-warehouse-portal" target="_blank">今すぐ開始SQL Data Warehouse</a> Azure サービスを作成します。</li><li>POC のサポートが必要な場合は、直接 <a href="https://azure.microsoft.com/services/sql-data-warehouse/information-request/" target="_blank">お問い合わせください</a>。 </li><li>Twitter でフォローして、最新の Azure SQL Data Warehouseの最新情報と機能を確認してください<a href="https://twitter.com/AzureSQLDW" target="_blank">@AzureSQLDW</a>。<br>

  </li></ul>
