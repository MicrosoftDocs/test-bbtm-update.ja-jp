### YamlMime:Yaml
ms.openlocfilehash: cd7375309ebba420ca03a0a57178ff78b7e6ed6b
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895636"
Slug: azure-linux-vm-infrastructure-monitoring-and-diagnostics-2
Title: Azure Linux VM インフラストラクチャの監視と診断
Summary: この投稿では、Azure で実行されている Linux 仮想マシン用に最近リリースされた (現在プレビュー中) 新しい監視機能の詳細について説明します。
Content: >-
  現在、Azure で多数Virtual Machines Linux ワークロードが実行されています。 <a href="https://azure.microsoft.com/blog/2014/09/02/windows-azure-virtual-machine-monitoring-with-wad-extension/">9 月の投稿</a>では、Azure で実行されている VM の監視と診断を行うメトリックを設定、構成、読み取る方法Windowsを共有しました。 この投稿では、Azure 上で実行されている Linux 仮想マシン<b>用にリリース</b>し(現在プレビュー中)、新しい監視機能について詳しく説明します。


  最近、ユーザーが監視と診断を有効にし、Azure VM でサポートされているのと同じ Azure 拡張機能テクノロジを利用するときに、Azure で実行されている Linux VM に対して有効になっている監視エージェントを公開しました。 詳細については、Azure <a href="https://msdn.microsoft.com/en-us/library/azure/dn606311.aspx">VM の拡張機能と機能に関するページを参照してください</a>。 Azure Linux VM の監視と診断を有効にするには、 <a href="https://portal.azure.com">ポータル UI で</a> [診断]、 [Azure CLI]、PowerShell、または Azure SDK を使用して監視エージェントを有効にしてインストールします。 詳細とドキュメントについては、Linux 診断拡張機能を使用した Linux VM のパフォーマンスと診断データ <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-linux-diagnostic-extension/">の監視に関するページを参照してください</a>。


  Azure VM で監視を有効にするには、監視エージェントが次のように有効になっている必要があります。


  &nbsp;

  <h3>ポータルの使用:</h3>

  <a href="https://portal.azure.com">[監視/診断] を選択します </a>次に示すように ON – この手順では、仮想マシンの診断情報の収集を開始するために必要な監視エージェントをインストールします。


  &nbsp;


  <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/06/01/2015-05-28_21h58_12.png"><img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-width: 0px;" title="2015-05-28_21h58_12" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-05-28_21h58_12_thumb.png" alt="2015-05-28_21h58_12" width="1117" height="664" border="0" /></a>

  <h3>Azure CLIサンプル:</h3>

  <pre class="prettyprint"># azure vm extension set myvm LinuxDiagnostic Microsoft.OSTCExtensions 2.0 --private-config-path PrivateConfig.json</pre>

  <h3></h3>

  <h3>PowerShell サンプル:</h3>

  <pre class="prettyprint">Set-AzureVMExtension -ExtensionName “LinuxDiagnostic” -VM $vm -Publisher “Microsoft.OSTCExtensions” -Version 2.0 -PrivateConfiguration “PrivateConfig.json” | Update-AzureVM</pre>

  &nbsp;


  使用可能な場合は、バージョン 2.0 からそれより後のバージョンに変更できます。 監視構成といくつかのサンプルの設定の詳細については、「Linux 診断拡張機能を使用した Linux VM のパフォーマンスと診断データの監視」 <a href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-linux-diagnostic-extension/">を参照してください</a>。

  <h3></h3>

  <h3>Azure SDK の使用:</h3>

  次の SDK ドキュメント 「 Microsoft Azure <a href="https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring/">Monitoring Services Management Library」を参照してください</a>。


  Linux VM で診断が有効になると、ポータルまたは上記の他のクライアント ツールから後で取得できるさまざまなメトリックが収集されます。 収集されるメトリックの一覧は、追加のメトリックとワークロード固有のメトリックをサポートするために、将来拡大または変更される可能性があります。ただし、現在、次のメトリックがサポートされています。

  <ul>
   <li>CPU DPC 時間</li>
   <li>CPU IO 待機時間</li>
   <li>CPU アイドル時間</li>
   <li>CPU 割り込み時間</li>
   <li>CPU の便利な時間</li>
   <li>CPU の割合</li>
   <li>CPU 使用率 - ゲスト OS</li>
   <li>CPU 特権時間</li>
   <li>CPU ユーザー時間</li>
   <li>ディスク キューの長さ</li>
   <li>ディスクの読み取り</li>
   <li>ディスク読み取りゲスト OS</li>
   <li>ディスクの読み取り時間</li>
   <li>ディスク読み取り</li>
   <li>ディスク合計バイト数</li>
   <li>ディスク転送時間</li>
   <li>ディスク転送</li>
   <li>ディスクの書き込み</li>
   <li>ディスク書き込みゲスト OS</li>
   <li>ディスクの書き込み時間</li>
   <li>ディスク書き込み</li>
   <li>Mem. パーセントを利用可能</li>
   <li>Mem. キャッシュで使用される</li>
   <li>使用可能なメモリ</li>
   <li>メモリの割合</li>
   <li>使用されたメモリ</li>
   <li>Network In</li>
   <li>Network Out</li>
   <li>ネットワークの競合</li>
   <li>ネットワーク受信ゲスト OS</li>
   <li>ネットワーク送信ゲスト OS</li>
   <li>ネットワーク合計バイト数</li>
   <li>受信したパケット数</li>
   <li>パケット受信エラー</li>
   <li>送信されたパケット</li>
   <li>送信されたパケット のエラー</li>
   <li>ページ読み取り</li>
   <li>ページの書き込み</li>
   <li>ページ</li>
   <li>使用可能なスワップ</li>
   <li>使用可能なスワップ率</li>
   <li>スワップの使用率</li>
   <li>スワップの使用</li>
  </ul>

  &nbsp;


  これらのメトリックと関連する KPI (主要業績評価指標) をポータルから表示および分析するには、同じメカニズムを使用して、Azure にデプロイされた VM に関する他のデータを表示できます。次のメニュー項目を参照してください。

  <div>

  <table border="0" width="399" cellspacing="0" cellpadding="2">

  <tbody>

  <tr>

  <td valign="top" width="203"><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/06/01/2015-05-31_11h22_30.png"><img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-width: 0px;" title="2015-05-31_11h22_30" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-05-31_11h22_30_thumb.png" alt="2015-05-31_11h22_30" width="354" height="480" border="0" /></a></td>

  <td valign="top" width="194"><a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2015/06/01/2015-05-31_11h17_04.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="2015-05-31_11h17_04" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/2015-05-31_11h17_04_thumb.png" alt="2015-05-31_11h17_04" width="201" height="480" border="0" /></a></td>

  </tr>

  </tbody>

  </table>

  </div>

  &nbsp;


  ここまでは、Azure 監視エージェントを利用して、Azure Linux VM からの監視データと診断データを有効、構成、読み取る方法について詳しくは説明しました。 VM Windowsについては、このブログの詳細<a href="https://azure.microsoft.com/blog/2014/09/02/windows-azure-virtual-machine-monitoring-with-wad-extension/">を参照してください</a>。


  &nbsp;


  このブログでは、Azure にデプロイされた Linux VM を監視するのに役立つオプションをまとめていました。 新しい Azure Linux エージェント (現在プレビュー中) を使用して Azure Linux VM をデプロイするときに、既定で使用できるオプションについて説明しました。そのため、フィードバックも大いに評価されます。これにより、Linux または Azure IaaS で実行されている仮想マシンを使用して、実行中の Azure VM を監視および診断するのに十分な柔軟性が得Windows役立ちます。


  &nbsp;

  <h2>その他の参照情報</h2>

  <ul>
   <li><a href="https://azure.microsoft.com/en-us/documentation/services/operational-insights/" target="_blank">運用管理によるインフラストラクチャインサイト</a></li>
   <li><a href="https://azure.microsoft.com/en-us/documentation/services/application-insights/" target="_blank">Application Insight を使用したアプリケーション監視</a></li>
  </ul>

  &nbsp;


  共同作成者: Ning Kuang、Stephen Siciliano、Thomas Pham、およびIlialid のムース
