### YamlMime:Yaml
ms.openlocfilehash: f57e7d8af7c7ae8d56394c74c00fb4a29e9e74c5
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896596"
Slug: azure-container-registry-preview-of-repository-scoped-permissions
Title: 'Azure Container Registry: リポジトリ スコープのアクセス許可のプレビュー'
Summary: Azure Container Registry (ACR) チームは、UserVoice で最も投票された項目である、リポジトリ スコープのロールベースのアクセス制御 (RBAC) アクセス許可のプレビューを展開しています。
Content: >-
  <p><a href="https://aka.ms/acr" target="_blank">Azure Container Registry (</a>ACR) チームは、<a href="https://feedback.azure.com/forums/903958-azure-container-registry/suggestions/31655977-configure-permissions-at-a-repository-level" target="_blank">UserVoice</a> で最も投票された項目である、リポジトリ スコープのロールベースのアクセス制御 (RBAC) アクセス許可のプレビューを展開しています。 このリリースでは、フィードバックを試して提供するコマンド ライン インターフェイス <a href="https://aka.ms/acr/repository-permissions" target="_blank">(CLI)</a> エクスペリエンスが提供 <a href="https://github.com/azure/acr/issues" target="_blank">されています</a>。</p>


  <p>ACR では、レジストリ <a href="https://aka.ms/acr/authentication" target="_blank">全体に</a> <a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-roles" target="_blank"></a> 対するロールベースのアクセス権を持つ ID を使用して、いくつかの認証オプションが既にサポートされています。 ただし、複数チームのシナリオでは&rsquo;、複数のチームを 1 つのレジストリに統合して、各チームの特定のリポジトリへのアクセスを制限することができます。 リポジトリ スコープ RBAC でこの機能が有効になります。</p>


  <p>リポジトリ スコープのアクセス許可が便利になる可能性があるシナリオの一部を次に示します。</p>


  <ul>
      <li>
      <p>組織内の特定のユーザー グループへのリポジトリ アクセスを制限します。 たとえば、特定のリポジトリを対象とするイメージを構築する開発者に書き込みアクセス権を提供し、それらのリポジトリからデプロイするチームへの読み取りアクセス権を提供します。</p>
      </li>
  </ul>


  <ul>
      <li>
      <p>何百万もの IoT デバイスに、特定のリポジトリからイメージをプルするための個別のアクセス権を提供します。</p>
      </li>
      <li>
      <p>外部組織に特定のリポジトリへのアクセス許可を付与します。</p>
      </li>
  </ul>


  <p>このリリースでは、リポジトリ スコープの RBAC アクセス許可を実装するメカニズムとしてトークンを導入しました。 トークンは、レジストリでの認証に使用される資格情報です。 ユーザー名とパスワード、または Azure Active Directory(AAD) オブジェクト (Azure Active Directory ユーザー、サービス プリンシパル、マネージド ID など) でサポートできます。 このリリースでは、ユーザー名とパスワードによってサポートされるトークンを提供しました。 今後のリリースでは、ユーザー、サービス Azure Active Directoryマネージド ID Azure Active Directoryオブジェクトによってサポートされるトークンがサポートされます。 図 1 を参照してください。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/03841ee3-9a02-47cd-8403-5a4264d7e6bf.png"><img alt="repo" border="0" height="471" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c5b32d7d-72b0-47eb-b249-b75288a4498c.png" style="border: 0px currentcolor; margin-right: auto; margin-left: auto; display: block; background-image: none;" title="レポ" width="1024"></a></p>


  <p align="center">*Azure Active Directory (AAD) のサポートは、将来のリリースで利用できる予定です。</p>


  <p align="center">図 1</p>


  <p>次の図 2 では、トークンとスコープ マップの関係について説明します。</p>


  <ul>
      <li>
      <p>トークンは、レジストリでの認証に使用される資格情報です。 1 つ以上のリポジトリを対象にした、許可される一連のアクションがあります。 トークンを生成したら、それを使用してレジストリで認証できます。 Docker ログインは、次のコマンドを使用して実行できます。</p>
      </li>
  </ul>


  <p>docker login --username mytoken&nbsp;--password-stdin myregistry.azurecr.io。</p>


  <ul>
      <li>
      <p>スコープ マップは、トークンに適用するリポジトリのアクセス許可をグループ化するレジストリ オブジェクトです。 1 つ以上のリポジトリへのアクセスのグラフが提供されます。 スコープ付きリポジトリのアクセス許可をトークンに適用するか、他のトークンに再適用することができます。 トークンの作成時&#39;スコープ マップを適用しない場合は、アクセス許可設定を保存するために、スコープ マップが自動的に作成されます。</p>
      </li>
  </ul>


  <p>スコープ マップは、一連のリポジトリに対して同じアクセス権を持つ複数のユーザーを構成するのに役立ちます。</p>


  <p align="center"><img alt="Relationship between tokens and scope-maps" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3a2a2a15-0ccf-4f36-84eb-5df895084c12.png" style="margin-right: auto; margin-left: auto; display: block;" title="トークンとスコープ マップの関係">図 2</p>


  <p>お客様が IoT デプロイにコンテナーとその他 <a href="https://github.com/opencontainers/artifacts" target="_blank">の</a> アートファクトを使用すると、デバイスの数が数百万に増える可能性があります。 IoT のスケールをサポートするために、Azure Container Registryトークンを使用してリポジトリ ベースの RBAC を実装しました (図 3)。 トークンは、サービス プリンシパルまたはマネージド ID の代わりではありません。 IoT デプロイ シナリオのスケーラビリティを提供する追加オプションとしてトークンを追加できます。</p>


  <p><a href="https://aka.ms/acr/repo-permissions" target="_blank">この記事では</a> 、レジストリ内の特定のリポジトリに制限されたアクセス許可を持つトークンを作成する方法について説明します。 トークンベースのリポジトリのアクセス許可を導入すると、ユーザーまたはサービスに、リポジトリへのスコープ付きおよび時間制限付きアクセス権を提供できます。Azure Active Directory ID は不要です。 今後、新しいオブジェクトによってサポートされるトークンAzure Active Directoryされます。 この新機能をご確認ください。この機能に関するフィードバックをお知<a href="https://github.com/azure/acr/issues" target="_blank">GitHub</a>。</p>


  <p><img alt="Tokens" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e75dd6ac-4c51-4c77-be4f-165e028976f9.png" style="margin-right: auto; margin-left: auto; display: block;" title="トークン"></p>


  <p align="center">図 3</p>


  <h2>可用性とフィードバック</h2>


  <p>Azure CLIエクスペリエンスはプレビュー中です。 常に、既存の機能と製品ロードマップのアイデアに関するフィードバックをお寄せください。</p>


  <p><a href="https://aka.ms/acr/roadmap" target="_blank">ロードマップ</a>: 計画された作業を可視化します。</p>


  <p><a href="https://aka.ms/acr/uservoice" target="_blank">UserVoice</a>: 既存の要求に投票するか、新しい要求を作成します。</p>


  <p><a href="https://aka.ms/acr/issues" target="_blank">問題</a>: 既存のバグや問題を表示したり、新しいバグや問題をログに記録したりします。</p>


  <p><a href="https://docs.microsoft.com/azure/container-registry/" target="_blank">ACR ドキュメント</a>: ACR のチュートリアルとドキュメント。</p>
