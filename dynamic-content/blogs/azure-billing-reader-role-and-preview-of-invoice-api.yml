### YamlMime:Yaml
ms.openlocfilehash: e642ebb4f350c8c7762e2cf8e2a7f8bce02702b2
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891821"
Slug: azure-billing-reader-role-and-preview-of-invoice-api
Title: Azure の課金閲覧者ロールと請求書 API のプレビュー
Summary: 現在、新しく構築されたロールである課金閲覧者ロールが追加されたことをお知らせします。 新しい請求閲覧者ロールでは、Vm やストレージアカウントなどのサービスにアクセスせずに、課金情報のみにアクセスを委任することができます。 このロールのユーザーは、サブスクリプションスコープのコストレポートデータの表示や請求書のダウンロードなど、Azure の課金管理操作を実行できます。 また、現在、サブスクリプションの請求書をプログラムでダウンロードできる新しい請求 API のパブリックプレビューをリリースしています。
Content: >-
  <p align="left">現在、新しく構築されたロールである課金閲覧者ロールが追加されたことをお知らせします。 新しい請求閲覧者ロールでは、Vm やストレージアカウントなどのサービスにアクセスせずに、課金情報のみにアクセスを委任することができます。 このロールのユーザーは、サブスクリプションスコープのコストレポートデータの表示や請求書のダウンロードなど、Azure の課金管理操作を実行できます。 また、現在、新しい請求 API のパブリックプレビューをリリースしています。これにより、サブスクリプション &rsquo; の請求書をプログラムでダウンロードできるようになります。</p>


  <p align="left"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/44f004fb-cb7e-40e2-a120-2f6f08a6a39e.png"><img alt="billing-reader-view" height="406" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/106f1f74-6ea0-41e2-8a2c-760d33aa8093.png" style="margin-right: auto; margin-left: auto; float: none; display: block;" title="課金-閲覧者-表示" width="480"></a></p>


  <h2 align="left">追加のユーザーが請求書をダウンロードできるようにする</h2>


  <p align="left">現時点では、サブスクリプションのアカウント管理者だけが請求書をダウンロードして表示できます。 アカウント管理者は、サブスクリプションスコープのロール、所有者、共同作成者、閲覧者、ユーザーアクセス管理者、請求閲覧者、サービス管理者、共同管理者などのユーザーが請求書を表示できるようになりました。 請求書には個人情報が含まれているため、アカウント管理者は、サブスクリプションスコープロールのユーザーに請求書の表示を許可するアクセスを有効にする必要があります。 サブスクリプションスコープロールのユーザーが請求書を表示できるようにする手順は次のとおりです。</p>


  <ol>
   <li>
   <div align="left">アカウント管理者の資格情報を使用して Azure 管理ポータルにログインします。</div>
   </li>
   <li>
   <div align="left">追加のユーザーに請求書のダウンロードを許可するサブスクリプションを選択します。</div>
   </li>
   <li>
   <div align="left">サブスクリプションブレードで、[請求] セクションの [請求書] タブを選択します。 [請求書へのアクセス] コマンドをクリックします。 追加のユーザーが請求書をダウンロードできるようにする機能はプレビュー段階であり、すべての請求書が利用できるとは限りません。 アカウント管理者は、すべての請求書にアクセスできます。<br>
   <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c79b47ea-097e-4d12-bf61-06de244e8f9b.png"><img alt="AA-optinAnnotated" height="309" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/076f7809-25e4-489f-b781-5942aeee3048.png" style="display: inline;" title="AA-Op/注釈付き" width="480"></a></div>
   </li>
   <li>
   <div align="left">サブスクリプションスコープのロールが請求書をダウンロードできるようにする<br>
   <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/83faf179-3e40-45f4-bca2-8f56007b12a8.png"><img alt="AA-optinAllow" height="299" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c0e12f45-e3bd-43bf-b3c4-dde0974f2185.png" style="display: inline;" title="AA-Op/Allow" width="360"></a></div>
   </li>
  </ol>


  <h2>課金閲覧者ロールにユーザーを追加する方法</h2>


  <p><a href="https://go.microsoft.com/fwlink/?linkid=845126" target="_blank">管理者ロール</a>に属しているユーザー (所有者、ユーザーアクセス管理者、サービス管理者、共同管理者など) は、課金閲覧者へのアクセスを他のユーザーに委任できます。 課金閲覧者のユーザーは、使用量や請求書などのサブスクリプションスコープの課金情報を表示できます。 現時点では、課金情報は非エンタープライズサブスクリプションに対してのみ表示されます。 Enterprise サブスクリプションのサポートは今後提供される予定です。</p>


  <ol>
   <li>課金閲覧者アクセスを委任するサブスクリプションを選択します</li>
   <li>[サブスクリプション] ブレードで、[Access Control (IAM)] を選択します。<br>
   <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/984c166f-c0ea-4da4-a45c-4b609cb76bf5.png"><img alt="select-iam" height="204" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0f8bf245-92ab-4d4c-a095-abf1414e8892.png" style="display: inline;" title="選択-iam" width="360"></a></li>
   <li>[追加] をクリックします。</li>
   <li>課金閲覧 &rdquo; 者ロールの選択 &ldquo;<br>
   <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/fea79ae4-f280-4e66-99ff-e73b4fda208d.png"><img alt="select-roles" height="124" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/e53ee978-a3e1-4cfe-8c91-1435538f1142.png" style="display: inline;" title="ロールの選択" width="360"></a></li>
   <li>サブスクリプションスコープの課金情報へのアクセスを委任するユーザーを選択または追加します<br>
   <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b02c1bca-05a6-47f3-9f5f-57040d0091e7.png"><img alt="add-user" height="254" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/a9a80475-c72f-4ad9-9fd6-82129093ffa0.png" style="display: inline;" title="ユーザーの追加" width="360"></a></li>
  </ol>


  <p>課金閲覧者ロールのユーザーに許可されるアクセスの完全な定義については、 <a href="https://go.microsoft.com/fwlink/?linkid=845094">組み込みのロール</a>に関するドキュメントを参照してください。</p>


  <h2>新しい請求 API を使用した請求書のダウンロード</h2>


  <p>これまでは、Azure 管理ポータルを使用して、サブスクリプションの請求書のみをダウンロードすることができました。 管理者 (所有者、共同作成者、閲覧者、サービス管理者、共同管理者) および課金閲覧者のロールで、ユーザーがプログラムによってサブスクリプションの請求書をダウンロードできるようにしています。 Invoice API を使用すると、Azure サブスクリプションの現在および過去の請求書をダウンロードできます。 API preview では、一部の請求書をダウンロードできない場合があります。 詳細な API ドキュメントが用意されており、サンプルを <a href="https://go.microsoft.com/fwlink/?linkid=845124">ダウンロード</a>することもできます。 API を使用して請求書をダウンロードする機能は、サポート、エンタープライズ契約、Azure インオープンプランなど、特定のサブスクリプションの種類では使用できません。 API を使用して請求書をダウンロードできるようにするには、アカウント管理者が、前述のように、サブスクリプションスコープロール内のユーザーのアクセスを有効にする必要があります。<br>

  Azure PowerShell を使用して、サブスクリプションの最新の請求書を簡単にダウンロードでき<a href="https://docs.microsoft.com/en-us/powershell/azureps-cmdlets-docs/" target="_blank">ます。</a></p>


  <ol>
   <li>ログインを使用したログイン <strong>-connect-azurermaccount</strong></li>
   <li><strong>Set-azurermcontext-SubscriptionId &lt; subscription Id &gt; </strong>を使用してサブスクリプションのコンテキストを設定する</li>
   <li>最新の請求書の URL を取得するには、 <strong>AzureRmBillingInvoice &ndash; latest</strong>を実行します。</li>
  </ol>


  <p>出力では、最新の請求書ドキュメントを PDF 形式でダウンロードするための請求書リンクが返されます。例を次に示します。</p>


  <pre class="prettyprint">

  PS C:\&gt; Get-AzureRmBillingInvoice -Latest
           Id                           : /subscriptions/{subscription ID}/providers/Microsoft.Billing/invoices/2017-02-09-117274100066163
           Name                   : 2017-02-09-117274100066163
           Type                     : Microsoft. Billing/invoices
           InvoicePeriodStartDate : 1/10/2017 12:00:00 AM
           InvoicePeriodEndDate   : 2/9/2017 12:00:00 AM
           DownloadUrl            : https://{billingstorage}.blob.core.windows.net/invoices/{invoice identifier}.pdf?sv=2014-02-14&amp;sr=b&amp;sig=XlW87Ii7A5MhwQVvN1kMa0AR79iGiw72RGzQTT% 2Fh4YI%3D&amp;se=2017-03-01T23%3A25%3A56Z&amp;sp=r
           DownloadUrlExpiry      : 3/1/2017 3:25:56 PM

  </pre>


  <p>ローカルディレクトリに請求書をダウンロードするには、次のように実行します。</p>


  <pre class="prettyprint">

  PS C:\&gt; Get-AzureRmBillingInvoice -Latest

  PS C:\&gt; Invoke-WebRequest -Uri $invoice.DownloadUrl -OutFile &lt;directory&gt;\InvoiceLatest.pdf</pre>


  <p>今後、この API を追加すると、 &nbsp; 課金機能へのプログラムによるアクセスが拡張されます。</p>
