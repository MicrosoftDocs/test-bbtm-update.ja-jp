### YamlMime:Yaml
ms.openlocfilehash: 980a4e166f0232e1ed27efa081b62b935e51d3a1
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909909"
Slug: data-series-sql-server-in-windows-azure-virtual-machine-vs-sql-database
Title: 'データ系列: Windows Azure 仮想マシンと SQL Database の SQL Server'
Summary: >-
  このブログ投稿は最新ではありません。 最新の情報については、 を参照してください。

      Understanding Azure SQL Database and SQL Server in Azure VMs
      Azure SQL Database
      SQL Server in Azure Virtual Machines

  &...
Content: >-
  <strong>このブログ投稿は最新ではありません。最新情報については、以下を参照してください。</strong>

  <ul>
   <li><a href="https://azure.microsoft.com/en-us/documentation/articles/data-management-azure-sql-database-and-sql-server-iaas/">Azure VM の Azure SQL Database と SQL Server について</a></li>
   <li><a href="https://msdn.microsoft.com/en-us/library/azure/ee336279.aspx">Azure SQL Database</a></li>
   <li><a href="https://msdn.microsoft.com/en-us/library/azure/jj823132.aspx">Azure Virtual Machines における SQL Server</a></li>
  </ul>

  &nbsp;


  次の2つのクラウドデータベースを決定する際の重要な基準は、特定のソリューションに適した選択肢です。

  <ul>
   <li>SQL Server box 製品エディションとの完全な互換性</li>
   <li>制御とコスト</li>
   <li>データベースのスケールアウトの要件</li>
  </ul>

  一般に、この2つのオプションは、さまざまな目的に最適化されています。

  <ul>
   <li>SQL Database は、可能な限り最小の<b>コストを削減</b>するように最適化されています。クラウドにスケールアウトデータ層を構築するための非常に迅速で簡単な方法が用意されています。お客様は、 <b>仮想マシンやデータベースソフトウェアをプロビジョニングしたり保守したりする必要がない</b>ため、継続的な管理コストを削減できます。</li>
   <li>Windows Azure VM で実行される SQL Server は、<b>既存のアプリケーションやハイブリッドアプリケーションとの互換性を保つ</b>ために最適化されています。完全な SQL Server box 製品の機能を提供し、管理者が専用の SQL Server インスタンスとクラウドベースの VM を完全に制御できるようにします。</li>
  </ul>

  <h3>SQL Server Box 製品エディションとの互換性</h3>

  機能と互換性の観点からは、Windows Azure VM で SQL Server 2012 (またはそれ以前のエディション) を実行することは、独自のデータセンターでホストされている vm で、完全な SQL Server box 製品を実行することとは異なります。これはフルボックス製品であり、サポートされている機能はのエディションによって異なり SQL Server デプロイする (AlwaysOn 可用性グループは、現在のプレビューリリースではなく ga でのサポートを対象としていますが、Windows クラスタリングは ga では利用できません)。Windows Azure VM で SQL Server を実行する利点は、インフラストラクチャの購入や保守を行う必要がないことです。これにより、tco を下げることができます。既存の SQL Server ベースのアプリケーションは、正しいエディションをデプロイしている限り、Windows Azure VM で実行されている SQL Server で "のみ動作" します。アプリケーションにフル SQL Server Enterprise エディションが必要な場合は、SQL Server Enterprise エディションを Windows Azure VM にデプロイしている間は、既存のアプリケーションが動作します。 これには、SQL Server Integration Services、Analysis Services、Reporting Services などの機能が含まれます。 コードの移行は必要ありません。また、アプリケーションをクラウドまたはオンプレミスで実行できます。今月発表されている新しい<a href="https://www.windowsazure.com/en-us/home/features/networking/?WT.mc_id=cmp_pst001_blg_post0140vn" target="_blank">Windows azure Virtual Network</a>を使用すると、SQL Server を実行している Windows azure VM をオンプレミスドメインにドメイン参加させることもできます。 これは、1つの企業の信頼境界下でオンプレミスとオフプレミスの両方にまたがるハイブリッドアプリケーションを開発できるようにするために不可欠です。また、SQL Server を含む VM イメージは、Windows Azure 内で提供されるストックイメージギャラリーからクラウドに作成することも、既存のデプロイからオンプレミスで作成し Windows Azure にアップロードすることもできます。 VM イメージは、デプロイされると、SQL Server ライセンスモビリティを使用してオンプレミスとクラウドの間で移動できるようになります。これは、ソフトウェアアシュアランス (SA) を使用して SQL Server ライセンスを取得しているお客様に提供されます。


  一方、Windows Azure SQL Database は、SQL Server のすべての機能をサポートしているわけではありません。非常に大きな機能のサブセットがサポートされていますが (この機能のセットは時間の経過と共に増加しています)、フル SQL Server Enterprise エディションではなく、前述の SQL Database のさまざまな設計目標に基づいて、常に違いが存在します。 SQL Database と SQL Server box 製品の重要な機能レベルの違いについて説明している MSDN の<a href="https://msdn.microsoft.com/en-us/library/windowsazure/ff394115" target="_blank">ガイド</a>を参照してください。ただし、これらの違いはありますが、SQL Server Management Studio や SQL Server Data Tools などのツールは SQL Database SQL Server と共に使用することも、オンプレミスと Windows Azure VM で実行することもできます。 簡単に言うと、Windows azure VM で SQL Server を実行することは、多くの場合、既存のアプリケーションとサービスを、完全な SQL Server box 製品との互換性を持つ Windows azure に移行し、1つの企業の信頼境界内でオンプレミスとクラウドにまたがるハイブリッドアプリケーションとサービスを構築するための最適なルートです。ただし、新しいクラウドベースのアプリケーションやサービスについては、以下で説明する理由により、SQL Database の方が適している可能性があります。

  <h3>制御とコスト</h3>

  SQL Server 実行されている Windows Azure VM は、box 製品と同じデータベース機能を提供します。これは、コストと管理のオーバーヘッドを最小限に抑えるためにサービスとして SQL Database します。たとえば、SQL Database では、クラウド内のコンピューティングリソースに対して料金がかかることはありません。代わりに、データベースのサイズに基づいて、データベースの消費料金を支払います。 100 MB のデータベースの場合は1か月あたり $5.00、150 GB のデータベースでは1か月あたり $228.00 になります (1 つの SQL Database データベースの現在のサイズ制限)。


  また、Azure VM Windows で実行されている SQL Server はアプリケーションの互換性を最大限に発揮しますが、お客様が理解する必要がある SQL Database には、次の2つの重要な機能があります。

  <ul>
   <li>高可用性 (HA) と99.9% のデータベース稼働時間の SLA が組み込まれています</li>
   <li>SQL Database フェデレーション</li>
  </ul>

  SQL Database では、高可用性は追加コストなしの標準機能です。Windows Azure SQL Database を作成するたびに、そのデータベースはプライマリノードと複数のオンラインレプリカに対して実際に動作します。これにより、プライマリノードで障害が発生した場合、セカンダリノードは、アプリケーションのダウンタイムなしで、秒以内に自動的に置き換えられます。これは、SQL Database を使用した99.9% のアップタイム SLA を追加料金なしで提供する方法です。


  Windows Azure VM の SQL Server の場合、仮想マシンインスタンスは、商用リリースで SLA (99.9% のアップタイム) を持ちます。 この SLA は、SQL Server データベースではなく、VM 自体を対象としています。 データベース HA の場合、SQL Server 2012 を実行している複数の vm を構成し、AlwaysOn 可用性グループをセットアップすることができますが、これには手動の構成と管理が必要になります。また、オンプレミスの HA 構成の場合と同様に、運用する各セカンダリに対して余分な料金が発生します。


  Windows Azure VM で SQL Server 実行されている場合は、オペレーティングシステムとデータベースの構成を制御できるだけでなく (構成する専用の vm であるため)。 ただし、時間の経過と共にこの VM を構成して保守することができます。これには、OS とデータベースソフトウェアの修正プログラムの適用とアップグレード、ウイルス対策、バックアップツールなどの追加ソフトウェアのインストールが含まれます。SQL Database では、vm 内で実行されていないため、vm 構成を制御することはできません。 ただし、データベースソフトウェアは自動的に構成され、Microsoft によってデータセンターで修正およびアップグレードされるため、管理コストが削減されます。


  Windows Azure VM に SQL Server を使用すると、vm のサイズを制御することもできます。これにより、小規模なコンピューティング、ストレージ、メモリ構成から、より大きな vm サイズへの<b>スケールアップ</b>が可能になります。 一方、SQL Database は、スケールアウトとスケールアップによるスループットレートの向上を実現するために設計されています。これは、フェデレーションと呼ばれる SQL Database の固有の機能によって実現されます。フェデレーションを使用すると、単一の論理データベースを多数の物理ノードに分割 (シャード) するのが非常に簡単になり、最も要求の厳しいデータベース駆動型アプリケーションのスループットが非常に高くなります。SQL Database フェデレーション機能は、SQL Database の一意の PaaS 特性と、ほとんどの摩擦を使用しないプロビジョニングと自動管理によって可能です。SQL Database フェデレーションについては、以下で詳しく説明します。

  <h3>データベースのスケールアウトの要件</h3>

  Windows Azure VM と SQL Database で実行されている SQL Server を選択するためのもう1つの重要な評価基準は、パフォーマンスとスケーラビリティです。お客様は、パフォーマンス向上のために高度に最適化されたハードウェアを購入できるため、独自のハードウェアで SQL Server を実行するときに、最適な垂直方向のスケーラビリティ ("スケールアップ") が常に得られます。 Windows azure VM で SQL Server 実行されている場合、1つのデータベースのパフォーマンスは Windows Azure で可能な最大の仮想マシンイメージに制限されます。その概要は、8個の仮想 cpu、14 gb の RAM、16 TB のストレージ、および 800 MB/秒のネットワーク帯域幅を備えた VM です。 Storage は、パフォーマンスのために最適化され、顧客が構成できます。また、お客様は AlwaysOn 可用性グループ (プレビューリリースではなく GA) を構成して実行し、必要に応じて、読み取り専用のセカンダリまたはその他のスケールアウトメカニズム (スケーラブルな共有データベース、ピアツーピアレプリケーション、分散パーティションビュー、データ依存ルーティングなど) を使用してパフォーマンスを向上させることもできます。


  一方、SQL Database では、お客様は、お客様が構成する必要のない、共有リソース間で動作する cpu や SQL Database メモリの数を選択することはありません。SQL Database のリソース使用量のバランスを取ることによって、どのリソースも継続的に1つのアプリケーションには存在しないようにします。ただし、これは、1つの SQL Database がスループット機能に限定されており、特定のデータベースが特定のリソース制限を超えてプッシュされた場合に自動的に調整されることを意味します。しかし、SQL Database フェデレーションと呼ばれる機能を使用すると、ネイティブのスケールアウト機能を使用してはるかに高いスケーラビリティを実現できます。フェデレーションを使用すると、単一の論理データベースを複数の物理ノードに簡単に分割できます。


  SQL Database のこのネイティブ機能により、スケールアウトの設定と管理が非常に簡単になります。たとえば、SQL Database を使用すると、データベースを短時間または数百のノードに簡単にパーティション分割できます。各ノードはデータ層の全体の容量に追加されます (この機能を利用するようにアプリケーションを特別に設計する必要があることに注意してください)。パーティション分割操作は T SQL の1行と同じように簡単であり、パーティションの再分割中でもデータベースはオンラインのままです。SQL Database フェデレーションの詳細については、こちらを参照してください。

  <h3>まとめ</h3>

  このブログでは、Windows Azure VM (IaaS) と Window Azure SQL Database (PaaS) で実行される SQL Server の主な相違点と類似点について紹介しました。幸いなことに、この2つのモデルの間にはお客様が選択できることがあります。また、2つのモデルを簡単に組み合わせて、さまざまな種類のソリューションに対応することができます。

  <table style="border-color: #0033cc; border-width: 0px; border-style: solid; width: 547px; height: 648px;" border="0" frame="box" rules="all" cellspacing="0" cellpadding="3">

  <tbody>

  <tr>

  <td valign="bottom" width="190">

  <p align="center"><b>条件</b></p>

  </td>

  <td valign="bottom" width="156">

  <p align="center"><b>Windows Azure VM 内の SQL Server</b></p>

  </td>

  <td valign="bottom" width="138">

  <p align="center"><b>Windows Azure SQL データベース</b></p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190"><b>ソリューションまでの時間</b></td>

  <td valign="bottom" width="156">&nbsp;</td>

  <td valign="bottom" width="138">&nbsp;</td>

  </tr>

  <tr>

  <td valign="bottom" width="190">既存のアプリを移行する</td>

  <td valign="bottom" width="156">

  <p align="center">高速</p>

  </td>

  <td valign="bottom" width="138">

  <p align="center">中</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">新しいアプリを構築する</td>

  <td valign="bottom" width="156">

  <p align="center">中</p>

  </td>

  <td valign="bottom" width="138">

  <p align="center">高速</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190"><b>ソリューションのコスト</b></td>

  <td valign="bottom" width="156">

  <p align="center"></p>

  </td>

  <td valign="bottom" width="138">

  <p align="center"></p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">ハードウェア管理</td>

  <td valign="bottom" width="156">

  <p align="center">なし</p>

  </td>

  <td valign="bottom" width="138">

  <p align="center">なし</p>

  </td>

  </tr>

  <tr>

  <td width="190">ソフトウェア管理 (データベース &amp; OS)</td>

  <td valign="bottom" width="156">

  <p align="center">手動</p>

  </td>

  <td valign="bottom" width="138">

  <p align="center">なし</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">コンピューターの高可用性</td>

  <td valign="bottom" width="156">

  <p align="center">自動 (商用リリースで99.9% のアップタイム SLA)</p>

  </td>

  <td valign="bottom" width="138">

  <p align="center">該当なし</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">データベースの高可用性</td>

  <td valign="bottom" width="156">

  <p align="center">追加の Vm と AlwaysOn を使用した手動セットアップ (商用リリース) では、DBM です。ログ配布による DR、トランザクションレプリケーション</p>

  </td>

  <td valign="bottom" width="138">

  <p align="center">Standard 機能 (99.9% DB アップタイム SLA)</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">コスト</td>

  <td valign="bottom" width="156">

  <p align="center">Medium</p>

  </td>

  <td valign="bottom" width="138">

  <p align="center">低</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190"><b>モデルのスケール</b></td>

  <td width="156">

  <p align="center"></p>

  </td>

  <td width="138">

  <p align="center"></p>

  </td>

  </tr>

  <tr>

  <td width="190">スケールアップ</td>

  <td width="156">

  <p align="center">X-大 VM (8 コア、14 GB RAM、最大 16 TB のディスク領域)</p>

  </td>

  <td width="138">

  <p align="center">サポートされていません</p>

  </td>

  </tr>

  <tr>

  <td width="190">Scale-Out</td>

  <td width="156">

  <p align="center">AlwaysOn 読み取り専用セカンダリを使用した手動、スケーラブルな共有データベース、ピアツーピアレプリケーション、分散パーティションビュー、およびデータ依存ルーティング (手動セットアップ、およびアプリケーションはこれらの機能用に設計する必要があります)</p>

  </td>

  <td width="138">

  <p align="center">SQL Database フェデレーション (データ層で自動化され、フェデレーション向けに設計されたアプリケーションを使用)</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190"><b>コントロール &amp; のカスタマイズ</b></td>

  <td width="156">

  <p align="center"></p>

  </td>

  <td width="138">

  <p align="center"></p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">OS と VM</td>

  <td width="156">

  <p align="center">フル コントロール</p>

  </td>

  <td width="138">

  <p align="center">コントロールなし</p>

  </td>

  </tr>

  <tr>

  <td width="190">SQL Server データベースの互換性、カスタマイズ</td>

  <td width="156">

  <p align="center">データベースエンジン、SSIS、SSAS、SSRS などの SQL Server 2012 box 製品の機能の完全なサポート</p>

  </td>

  <td width="138">

  <p align="center">SQL Server 2012 機能の大規模なサブセット</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190"><b>ハイブリッド</b></td>

  <td width="156">

  <p align="center"></p>

  </td>

  <td width="138">

  <p align="center"></p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">ドメイン参加と Windows 認証</td>

  <td width="156">

  <p align="center">はい</p>

  </td>

  <td width="138">

  <p align="center">不可能</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">Azure データ同期を使用したデータの同期</td>

  <td width="156">

  <p align="center">サポートされています</p>

  </td>

  <td width="138">

  <p align="center">サポート</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190"><b>管理の容易性</b></td>

  <td width="156">

  <p align="center"></p>

  </td>

  <td width="138">

  <p align="center"></p>

  </td>

  </tr>

  <tr>

  <td width="190">リソースガバナンス &amp; のセキュリティレベル</td>

  <td width="156">

  <p align="center">SQL インスタンス/VM</p>

  </td>

  <td width="138">

  <p align="center">論理 DB サーバー</p>

  </td>

  </tr>

  <tr>

  <td width="190">ツールのサポート</td>

  <td width="156">

  <p align="center">SSMS、System Center、SSDT などの既存の SQL Server ツール</p>

  </td>

  <td width="138">

  <p align="center">SSMS、System Center、SSDT などの既存の SQL Server ツール</p>

  </td>

  </tr>

  <tr>

  <td valign="bottom" width="190">大規模な管理機能</td>

  <td width="156">

  <p align="center">普通</p>

  </td>

  <td width="138">

  <p align="center">良い</p>

  </td>

  </tr>

  </tbody>

  </table>

  -Gregory、部長、製品マーケティング、SQL Server
