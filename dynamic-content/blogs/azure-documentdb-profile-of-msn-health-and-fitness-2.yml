### YamlMime:Yaml
ms.openlocfilehash: dd33bbcd09bd1174de993793aa9ee8eda3df8f14
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139889274"
Slug: azure-documentdb-profile-of-msn-health-and-fitness-2
Title: 'Azure DocumentDB: MSN の正常性と適性のプロファイル'
Summary: 今年の初め、MSN 内のさまざまなチームは、MSN 内のすべての垂直に統一された分散ストレージ システムの必要性を実現しました。 統合は、デバイス間でさまざまな垂直およびソーシャル コンピューティング機能を有効にするには非常に重要でした。
Content: >-
  <p>MSN.com は、最も信頼されている Web ブランドの 1 つです。 これは、世界中の 26 の市場で 10 億を超えるポータルであり、現在、世界中で 50 億を超える月間ユーザーをサポートしています。 MSN.com は、Microsoft の Information and Content Experience (ICE) グループの一部であり、ヘルスとフィットネス、財務、自動車、エンタテインメント、天気、食べ物、飲み物、ビデオ、旅行、ニュース、スポーツなど、コンシューマー向け垂直エクスペリエンスの豊富なセットで構成されています。 これらの垂直エクスペリエンスは、拡張性が高く、疎結合され、世界中の何百万人ものユーザーをサポートするように設計されています。 これらの垂直は、ブラウザーだけでなく、複数のプラットフォーム (Windows Phone、iOS、Android など) 間で個別のアプリケーションとしてリリースされます。</p>


  <h3><strong>非常にスケーラブルでスキーマフリーでクエリ可能な分散データ ストアを探している</strong></h3>


  <p>長年にわたり、さまざまな目的 MSN.com のデータ ストアとキャッシュ ソリューションを使用するために進化してきました。 今年の初め、MSN 内のさまざまなチームは、MSN 内のすべての垂直に統一された分散ストレージ システムの必要性を実現しました。 統合は、デバイス間でさまざまな垂直およびソーシャル コンピューティング機能を有効にするには非常に重要でした。 ICE チームは、既存のストレージ ソリューションを、ユーザー データ ストア (UDS) と呼ばれる単一の Azure ベースの分散ストレージ システムに変更し、置き換えました。 UDS では、次のサポートが必要です。</p>


  <ol>
   <li>+100M の直接認証ユーザーを持つ +425M の一意の MSN ユーザーをサポートするために、要件をスケーリングします。 20 TB のドキュメント ストレージの初期容量要件。</li>
   <li>15ms 未満では、99% の要求に対する書き込み待機時間と 1 桁の読み取り待機時間。</li>
   <li>同じ基になるデータ全体の承認スコープ。</li>
   <li>豊富なクエリとトランザクションのサポートを備えるスキーマフリー ストレージ。</li>
   <li>さまざまな一連の垂直スキーマをサポートするデータ モデル拡張機能。</li>
   <li>データに基づく Hadoop ベースの分析。</li>
   <li>すべての MSN 市場とユーザーにサービスを提供するためにグローバルに使用できます。</li>
  </ol>


  <p>&nbsp; MSN は、Azure のさまざまなソリューションを評価した後、UDS のコア コンポーネントとして Azure DocumentDB を使用することを決定しました。 正常性と適性は、新しい MSN の立ち上げで Azure DocumentDB で初めて有効になる <a href="https://blogs.microsoft.com/blog/2014/09/29/new-msn-arrives/">MSN 垂直の 1 つです</a>。 他の MSN の垂直は、Azure DocumentDB 上にレイヤー化された更新された UDS アーキテクチャの使用を間もなく開始します。</p>


  <h3><strong>正常性と適性のシナリオ</strong></h3>


  <p>正常性と適性の垂直は、さらに次を含むさまざまな機能で構成されています。</p>


  <ul>
   <li><b>[大食い</b>トラッカー]: ユーザーは毎日の食事取り入れジャーナルを維持できます。 各食べ物のエントリは、料理に関連付けられている、食品、太った、カルブ、およびプロテインなどを持っています。</li>
   <li><b>演習トラッカー</b>: ユーザーは距離、時間、および体重を含むジャーナルトレーニング演習を行います。</li>
   <li><b>GPS トラッカー</b>: ユーザーは GPS 対応の電話で実行できます。 実行は GPS 座標と共に記録されます。 実行メタデータは DocumentDB に格納されます。</li>
   <li><b>歩数計</b>: ユーザーステップは、歩数計対応電話 (すべての新しい Nokia フォン) で追跡され、UDS に格納されます。</li>
   <li><b>Weight Tracker</b>。 ユーザーは自分の体重を追跡できます。</li>
   <li><b>分析</b>: 食生活、演習、GPS、ステップ データの履歴データに関する分析。</li>
   <li><b>お気に入りとカスタム</b>: ユーザーは、お気に入りの食品や演習を保存できます。 ユーザーは、関連付けられたメタデータを使用してカスタムの食品や演習を作成できます。 お気に入りの機能を、記事、健康状態、健康状態などの他のデータ型に拡張する予定です。</li>
  </ul>


  <p>&nbsp; 新しい MSN ポータルが起動すると、Health and Fitness の垂直操作を行うユーザーは、バック エンドで Azure DocumentDB を使用してデータを格納し、クエリを実行しています。 立ち上げ時に、Health and Fitness の垂直では、SSD でサポートされるドキュメント ストレージの 150 容量ユニット (CUs) がプロビジョニングされ、3 つの地理的リージョンにまたがってスループットがプロビジョニングされました。 正常性および適性アプリケーションでは、1 つの DocumentDB データベースを持つ 1 つの DocumentDB データベース アカウントを各リージョンに作成します。 正常性および適性アプリケーションでは、単調な読み取り、書き込み、および独自の書き込みの読み取り保証を保証するセッション整合性を使用して DocumentDB データベース アカウントを構成しました。 これにより、読み取りスケーラビリティが非常に高く、書き込みの待機時間のターゲットを満たします。 各 DocumentDB データベースには、MSN ユーザーのセットに属するドキュメントを含むコレクションのセットが格納されます。 ドキュメントのサイズは 1 KB &ndash; 10 KB です。 コレクション内のドキュメントには、共通のスキーマは想定されません。 ほとんどのコレクションは、最適な書き込みスループット、特定のドキュメント パスの自動インデックス作成、および最小限のインデックス オーバーヘッドを実現するように構成されています。 複数のプラットフォームでさまざまな垂直をサポートするユーザー データ ストアの全体的なアーキテクチャを以下に示します。 このアーキテクチャでは、異なるスキーマ セットを格納する機能を含む DocumentDB の全機能を活用し、すべての垂直方向に豊富なクエリ機能を提供します。 <a href="https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/10/08/Azure-DocumentDB-v2.png"><img alt="Azure DocumentDB v2" border="0" height="644" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Azure-DocumentDB-v2_thumb.png" style="border: 0px currentColor; border-image: none; padding-top: 0px; padding-right: 0px; padding-left: 0px;" title="Azure DocumentDB v2" width="1083"></a> 新しい <b><i>MSN ユーザー データ ストアは、Azure DocumentDB</i></b> 上に構築されています。UDS フレームワークは、使用可能な容量に基づいて、ユーザー情報を複数のコレクションに分散します。 各ユーザー&rsquo; データはドキュメントに保存されます。 UDS では、ユーザー ID に基づいてドキュメントをコレクションのセットに配布し、スケーラビリティ、高スループット、効率的なクエリを実現することで、水平方向のスケール ソリューションを維持します。 MSNs&rsquo; ユーザー データ ストアの背後にあるプリンシパル アーキテクトである Saud Alこni と彼のチームは、Azure DocumentDB チームと密接に関わりを持っています。 Saud は、DocumentDB での経験を次の言葉で要約しています。</p>


  <blockquote><i>&ldquo;統合データ ストレージレイヤーの &ndash; 設計の一環として、Azure でホストされている OSS オファリングと他の Azure ストレージ サービスの両方で、さまざまなストレージ ソリューションを評価しました。最終的には、DocumentDB を使用することを決定しました。これは、スキーマフリーのドキュメント、マルチドキュメント トランザクション、スケーラビリティとパフォーマンスの目標に対するクエリに関する主要な要件を満たしたためです。DocumentDB では、ノイズの多い近隣の問題が発生することなく、予測可能なパフォーマンス保証が提供されます。また、DocumentDB のスケーリングは、 &ndash; 単に単に US を追加および削除するだけで、非常に簡単です。アプリケーションには、DocumentDB の .NET および JavaScript クライアント SDK を幅広く使用しています。DocumentDB の全体的なエクスペリエンスは、非常に生産的でした。私のチームは、数か月で DocumentDB 上のアプリケーションを再ターゲットにしました。&rdquo;</i></blockquote>


  <p>新しいポータルの立ち上げに関する MSN チームの皆さん、おめでとうございます。 DocumentDB チームは、この取り組みへの参加に感激しています。</p>
