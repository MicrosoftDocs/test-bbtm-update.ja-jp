### YamlMime:Yaml
ms.openlocfilehash: e91df32ef361f2571c2e1b09ef5bf31eac2b7c3e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139893237"
Slug: automate-linux-vm-os-updates-using-ospatching-extension
Title: OSPatching 拡張機能を使用して Linux VM OS の更新を自動化する
Summary: Linux 用 Azure VM OSPatching 拡張機能を使用すると、Azure VM 管理者は、カスタマイズされた構成を使用して VM OS の更新を自動化できます。
Content: "<p>Linux 用 Azure VM OSPatching 拡張機能を使用すると、Azure VM 管理者は、カスタマイズされた構成を使用して VM OS の更新を自動化できます。 VM 拡張機能を初めて使用する場合は、ここでバックグラウンドを <a href=\"https://azure.microsoft.com/blog/2014/04/11/vm-agent-and-extensions-part-1/\"><span style=\"font-size: small;\">確認</span></a><span style=\"font-size: small;\"> してください。 </span></p>\n\n<h2>前提条件</h2>\n\n<ul>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">最新の Microsoft Azure Linux エージェント (最小バージョン 2.0.6)</span></span></li>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">&nbsp;</span></span><a href=\"https://azure.microsoft.com/en-us/documentation/articles/xplat-cli/\" km.title=\"\" ms.cmpgrp=\"body\" ms.cmpnm=\"Cross-Platform CLI\" ms.cmptyp=\"link\" ms.interactiontype=\"1\" ms.pgarea=\"content\" ms.title=\"\"><span style=\"font-size: small;\"><u><font color=\"#0066cc\">クロスプラットフォーム CLI</font></u></span></a>&nbsp;または <a href=\"https://azure.microsoft.com/en-us/downloads/\" km.title=\"\" ms.cmpgrp=\"body\" ms.cmpnm=\"Azure PowerShell\" ms.cmptyp=\"link\" ms.interactiontype=\"1\" ms.pgarea=\"content\" ms.title=\"\"><span style=\"font-size: small;\"><u><font color=\"#0066cc\">Azure PowerShell</font></u></span></a>。</li>\n</ul>\n\n<p>2015 年 12 月の更新プログラム:<br />\n1.Linux 用 Azure VM OSPatching 拡張機能で Azure Resource Manager モデルがサポートされました。ARM&nbsp; モデルで LINUX 用 OS Pathching 拡張機能を実行するサンプル Powershell スクリプトと CLI スクリプトについては、GitHub リリース ドキュメントを参照してください。&nbsp;<a href=\"https://github.com/Azure/azure-linux-extensions/tree/master/OSPatching\">https://github.com/Azure/azure-linux-extensions/tree/master/OSPatching</a><br />\n2.&nbsp;Linux 2.0&nbsp; 用の Azure VM OSPatching 拡張機能が再提供され、次の 2 つのオプションが追加されます: 1。 修正プログラムを適用する前にアイドル状態を確認する。 2.修正プログラムの適用後のシステム状態の検証</p>\n\n<p>A. アイドル状態の確認:<br />\n修正プログラムを適用する前に、拡張機能はユーザー指定のスクリプトを呼び出すことによって、VM の状態を確認します。 このスクリプトから 1 が返された場合は、修正プログラムの適用に進み、それ以外の場合は停止します。 スクリプトは Azure storge または&nbsp; Github&nbsp; にあります。場所の URL を パラメーターとして指定する必要があります。<br />\nB. 修正プログラムの適用後のシステム状態の検証<br />\n修正プログラムの適用後、拡張機能はユーザー指定のスクリプトを呼び出してシステムの正常性を確認し、その結果を拡張機能のログ ファイルに報告します。 スクリプトは Azure&nbsp; storge または&nbsp; Github&nbsp; にあります。場所の URL を パラメーターとして指定する必要があります。</p>\n\n<h2>サポートされている関数</h2>\n\n<p>OSPatching 拡張機能を使用して、次の仮想マシンの OS 更新プログラムを構成できます。</p>\n\n<ul>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">OS 修正プログラムをインストールする頻度と頻度を指定する</span></span></li>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">インストールするパッチを指定する</span></span></li>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">更新後の再起動動作を構成する</span></span></li>\n</ul>\n\n<h2>拡張パラメーター</h2>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: small;\">管理者は、次のパラメーターを使用して OS の更新プログラムを構成できます。パラメーターでは大文字と小文字が区別されます。</span></span></p>\n\n<table border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n    <tbody>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><b><span style=\"font-size: medium;\">パラメーター</span></b></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><b><span style=\"font-size: medium;\">説明</span></b></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><b><span style=\"font-size: medium;\">値の型</span></b></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><b><span style=\"font-size: medium;\">既定値</span></b></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">intervalOfWeeks</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">更新頻度 (週) </span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">整数。 </span><span style=\"font-size: small;\">1 から開始します。</span><span style=\"font-size: small;\">例: &quot;intervalOfWeeks&quot; : &quot;1&quot;</span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">&ldquo;1&rdquo;</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">Dayofweek</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">修正プログラムの適用日 (週) は</span><span style=\"font-size: small;\">、1 週間に複数の日を指定できます。</span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">文字列。 </span><span style=\"font-size: small;\">の列挙体&ldquo;日曜日、&ldquo;&rdquo;月曜日、&rdquo;火曜日&ldquo;、&rdquo;水曜日&ldquo;、&rdquo;木曜日&rdquo;&ldquo;、金曜日&rdquo;&ldquo;、土曜日&rdquo;&ldquo;、毎日 (複数&ldquo;|&rdquo;の値</span>を分離するために使用)。<span style=\"font-size: small;\">例: &quot;dayOfWeek&quot; : &quot;日曜日|水曜日&quot;</span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">&ldquo;毎日&rdquo;</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">startTime</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">パッチ適用の開始時刻</span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">文字列。 </span><span style=\"font-size: small;\">&ldquo;hr:mine.g&rdquo;</span><span style=\"font-size: small;\">. &quot;startTime&quot; : &quot;03:00&quot; の形式で、時間の範囲は 0 から 23 です。以下のその他の注意事項。.<b><sup>1</sup></b></span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">空の文字列</span> <span style=\"font-size: small;\">(ワンオフ モード)</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">installDuration</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">インストールに許容される合計時間</span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">文字列。 </span><span style=\"font-size: small;\">&ldquo;hr:minse.g&rdquo;</span><span style=\"font-size: small;\">. &quot;installDuration&quot; の形式: &quot;00:30&quot;。 </span><span style=\"font-size: small;\">以下のその他の注意事項。<b><sup>2</sup></b></span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">&ldquo;01:00&rdquo;</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">カテゴリ</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">インストールするパッチの種類</span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">文字列。 </span><span style=\"font-size: small;\">の列挙体&ldquo;重要&rdquo;および&ldquo;重要AndRecommended&rdquo;。</span><span style=\"font-size: small;\">例: カテゴリ &quot;&quot; : &quot;重要AndRecommended&quot;</span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">&ldquo;重要AndRecommended&rdquo;</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">rebootAfterPatch</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">修正プログラムの適用後の再起動動作 </span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">文字列。 </span><span style=\"font-size: small;\">の列挙体 &ldquo;必須&rdquo; (常に再起動)、 &ldquo;NotRequired&rdquo; (再起動しない) &ldquo; 、自動&quot; (VM&rsquo; の現在の再起動メカニズムを使用)。</span><span style=\"font-size: small;\">例: &quot;rebootAfterPatch&quot; : &quot;Auto</span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">&ldquo;自動&rdquo;</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">無効</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">この拡張機能を無効にするフラグを設定します。 </span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">文字列。 </span><span style=\"font-size: small;\">&ldquo;True&rdquo; または &ldquo;Falsee.g&rdquo;</span><span style=\"font-size: small;\">. &quot;disabled&quot; : &quot;False&quot;</span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">&ldquo;誤り&rdquo;</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"90\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">停止</span></span></td>\n            <td valign=\"top\" width=\"151\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">OS 更新プロセスを取り消すフラグ</span></span></td>\n            <td valign=\"top\" width=\"245\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">文字列。 </span><span style=\"font-size: small;\">&ldquo;True&rdquo; または &ldquo;Falsee.g&rdquo;</span><span style=\"font-size: small;\">. &quot;stop&quot; : &quot;False&quot;</span></span></td>\n            <td valign=\"top\" width=\"114\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">&ldquo;誤り</span>&rdquo;</span></td>\n        </tr>\n    </tbody>\n</table>\n\n<blockquote><span style=\"font-size: small;\"><span style=\"font-size: small;\"><b><sup>1</sup></b> startTime &ldquo;が空の文字列に設定されている場合は、インストールがワン&rdquo;</span>オフ モードに設定されます。詳細については、以下のシナリオ 3 を参照してください。<span style=\"font-size: small;\"><b><sup>2</sup></b> installDuration&nbsp; の場合、実際のインストールがユーザーが指定した時間を超えた場合、更新プロセスはインストールを停止し、次回のスケジュールされたインストール時に再開します。ただし、インストールステージによっては、インストールが常に停止するとは限らなくなった場合があります。その場合は、許可された時間を超える可能性があります。</span></span></blockquote>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: small;\">また、ダウンロードの制限は 1 時間に制限されています。ダウンロード時間が 1 時間を超えると、ダウンロード プロセスは停止され、次回から再開できます。拡張機能によってエラーがログ ファイルに記録 &ldquo;されます。詳細については、「状態の確認」&rdquo; セクションを参照してください。</span> </span></p>\n\n<h2><span style=\"font-size: small;\"><span style=\"font-size: large;\"><span style=\"font-size: x-large;\">サンプル スクリプトとユーザー シナリオ</span></span></span></h2>\n\n<h2><span style=\"font-size: small;\"><span style=\"font-size: small;\">サンプルの PowerShell スクリプトと xPlat コマンドの主なシナリオを次に示します。パラメーターでは大文字と小文字が区別されます。</span> </span></h2>\n\n<h2><span style=\"font-size: small;\"><span style=\"font-size: small;\"><strong><span style=\"font-size: large;\">シナリオ 1: 定期的な OS 更新プログラムの設定</span></strong></span></span></h2>\n\n<h2><span style=\"font-size: small;\"><span style=\"font-size: small;\">定期的な修正プログラムの適用では、&ldquo;intervalOfWeeks&rdquo;&ldquo;、dayOfWeek、startTime を使用してスケジュールを&rdquo;&ldquo;構成できます&rdquo;。サンプル スクリプトを次に示します。</span> </span></h2>\n\n<h2><span style=\"font-size: small;\"><strong><span style=\"font-size: medium;\"><span style=\"font-size: small;\">PowerShell スクリプト:</span></span></strong></span></h2>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\n# Sample PowerShell script to configure an OS update schedule\n# Get the VM\n$vm = Get-AzureVM -ServiceName &quot;Your Service Name&quot; -Name &quot;Your VM Name&quot;\n# Set the extension information\n$ExtensionName=&quot;OSPatchingForLinux&quot;\n$version=&quot;1.0&quot;\n$Publisher=&quot;Microsoft.OSTCExtensions&quot;\n\n# Set the parameter value\n# The OS updates for &ldquo;ImportantAndRecommended&rdquo; patches will start at &ldquo;03:00&rdquo; on &ldquo;Sunday&rdquo; and &ldquo;Wednesday&rdquo; every week. \n$PrivateConfig = &#39;{\n    &quot;disabled&quot; : &quot;False&quot;,\n    &quot;stop&quot; : &quot;False&quot;,\n    &quot;rebootAfterPatch&quot; : &quot;Auto&quot;,\n    &quot;intervalOfWeeks&quot; : &quot;1&quot;,\n    &quot;dayOfWeek&quot; : &quot;Sunday|Wednesday&quot;,\n    &quot;startTime&quot; : &quot;03:00&quot;,\n    &quot;category&quot; : &quot;ImportantAndRecommended&quot;,\n    &quot;installDuration&quot; : &quot;00:30&quot; }&#39;\n$PublicConfig = &#39;{}&#39;\n\n# Apply the configuration to the extension\nSet-AzureVMExtension -ExtensionName $ExtensionName -VM $vm -Publisher $Publisher -Version $version -PrivateConfiguration $PrivateConfig -PublicConfiguration $PublicConfig | Update-AzureVM</span></pre>\n\n<p><span style=\"font-size: small;\"><strong><span style=\"font-size: medium;\"><span style=\"font-size: small;\">Xplat コマンド:</span></span></strong></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\nnode bin/azure vm extension set &quot;Your VM Name&quot; OSPatchingForLinux Microsoft.OSTCExtensions 1.0 -i &#39;{}&#39; -t &#39;{&quot;disabled&quot;:&quot;False&quot;,&quot;stop&quot;:&quot;False&quot;,&quot;rebootAfterPatch&quot;:&quot;Auto&quot;,&quot;intervalOfWeeks&quot;:&quot;1&quot;,&quot;dayOfWeek&quot;:&quot;Sunday|Wednesday&quot;,&quot;startTime&quot;:&quot;03:00&quot;,&quot;category&quot;:&quot;ImportantAndRecommended&quot;,&quot;installDuration&quot;:&quot;00:30&quot;}&#39;</span></pre>\n\n<p><span style=\"font-size: small;\"><strong><span style=\"font-size: medium;\"><span style=\"font-size: large;\">シナリオ 2: 既存の</span></span></strong>修正プログラムの構成を変更する 次の例のように、更新スケジュール設定 <span style=\"font-size: small;\">(&ldquo;intervalOfWeeks&rdquo;&ldquo;、dayOfWeek&rdquo;&ldquo;、startTime&rdquo;) を変更できます。</span></span></p>\n\n<p><span style=\"font-size: small;\"><strong><span style=\"font-size: medium;\"><span style=\"font-size: small;\">PowerShell スクリプト:</span></span></strong></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\n# Get the VM\n$vm = Get-AzureVM -ServiceName &quot;Your Service Name&quot; -Name &quot;Your VM Name&quot;\n# Set the extension information\n$ExtensionName=&quot;OSPatchingForLinux&quot;\n$version=&quot;1.0&quot;\n$Publisher=&quot;Microsoft.OSTCExtensions&quot;\n\n# Set the parameter value\n# Here we modify the &ldquo;intervalOfWeeks&rdquo; to &ldquo;2&rdquo; and &ldquo;dayOfWeek&rdquo; to &ldquo;Monday&rdquo;. The rest are unchanged\n$PrivateConfig = &#39;{\n    &quot;disabled&quot; : &quot;False&quot;,\n    &quot;stop&quot; : &quot;False&quot;,\n    &quot;rebootAfterPatch&quot; : &quot;Auto&quot;,\n    &quot;intervalOfWeeks&quot; : &quot;2&quot;,\n    &quot;dayOfWeek&quot; : &quot;Monday&quot;,\n    &quot;startTime&quot; : &quot;03:00&quot;,\n    &quot;category&quot; : &quot;ImportantAndRecommended&quot;,\n    &quot;installDuration&quot; : &quot;00:30&quot; }&#39;\n$PublicConfig = &#39;{}&#39;\n\n# Apply the configuration to the extension\nSet-AzureVMExtension -ExtensionName $ExtensionName -VM $vm -Publisher $Publisher -Version $version -PrivateConfiguration $PrivateConfig -PublicConfiguration $PublicConfig | Update-AzureVM</span></pre>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: medium;\"><strong><span style=\"font-size: small;\">xPlat コマンド:</span></strong></span></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\nnode bin/azure vm extension set &quot;Your VM Name&quot; OSPatchingForLinux Microsoft.OSTCExtensions 1.0 -i &#39;{}&#39; -t &#39;{&quot;disabled&quot;:&quot;False&quot;,&quot;stop&quot;:&quot;False&quot;,&quot;rebootAfterPatch&quot;:&quot;Auto&quot;,&quot;intervalOfWeeks&quot;:&quot;2&quot;,&quot;dayOfWeek&quot;:&quot;Monday&quot;,&quot;startTime&quot;:&quot;03:00&quot;,&quot;category&quot;:&quot;ImportantAndRecommended&quot;,&quot;installDuration&quot;:&quot;00:30&quot;}&#39;</span></pre>\n\n<p><span style=\"font-size: small;\">拡張機能は設定の状態を記憶しません。既存の設定を変更する場合は、変更する予定がない場合でも、各パラメーターの値を再度指定する必要があります。そうしないと、値は既定値にリセットされます。<span style=\"font-size: small;\">&ldquo;&rdquo;&rsquo;現在の OS 更新設定は、状態ファイルから確認&ldquo;&rdquo;</span>できます。詳細については、以下の「状態の確認」セクションを参照してください。 &nbsp;</span></p>\n\n<p><span style=\"font-size: small;\"><strong><span style=\"font-size: large;\"><span style=\"font-size: medium;\"><span style=\"font-size: large;\">シナリオ 3: 1 回の修正プログラムの適用</span></span></span></strong> </span></p>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: small;\">場合によっては、重要な修正プログラムのインストールなど、更新プログラムをすぐにインストールする必要があります。他の設定を変更せずに startTime&rdquo; を空の文字列に設定することで、OS &ldquo;の更新をワンオフ モードとして構成できます。OS の更新は、構成の直後に開始されます。</span> <span style=\"font-size: small;\">One-Off</span> <span style=\"font-size: small;\">&ldquo;修正プログラムの適用は 1 回だけ実行され、その後は最後の定期的な更新設定に自動的に戻ります。1 回だけモードを設定するときに startTime&rdquo; に加えて設定を変更する必要がある場合は、元の設定を再開するために、ワンオフパッチ適用後に各パラメーターの値を指定して、スクリプトを再度実行する必要があります。 設定を変更する方法については、シナリオ 2 を参照してください。</span> </span></p>\n\n<p><span style=\"font-size: small;\"><strong><span style=\"font-size: medium;\"><span style=\"font-size: small;\">PowerShell スクリプト:</span></span></strong></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\n# Get the VM\n$vm = Get-AzureVM -ServiceName &quot;Your Service Name&quot; -Name &quot;Your VM Name&quot;\n# Set the extension information\n$ExtensionName=&quot;OSPatchingForLinux&quot;\n$version=&quot;1.0&quot;\n$Publisher=&quot;Microsoft.OSTCExtensions&quot;\n\n# Set the parameter value\n# Here we set the &ldquo;startTime&rdquo; to empty string for one-off mode\n$PrivateConfig = &#39;{\n    &quot;disabled&quot; : &quot;False&quot;,\n    &quot;stop&quot; : &quot;False&quot;,\n    &quot;rebootAfterPatch&quot; : &quot;Auto&quot;,\n    &quot;startTime&quot; : &quot;&quot;,\n    &quot;category&quot; : &quot;ImportantAndRecommended&quot;,\n    &quot;installDuration&quot; : &quot;00:30&quot; }&#39;\n\n$TimeStamp = (Get-Date).Ticks\n$PublicConfig = &#39;{&quot;timestamp&quot; : &quot;&#39; + $TimeStamp + &#39;&quot;}&#39;\n\n# Apply the configuration to the extension\nSet-AzureVMExtension -ExtensionName $ExtensionName -VM $vm -Publisher $Publisher -Version $version -PrivateConfiguration $PrivateConfig -PublicConfiguration $PublicConfig | Update-AzureVM</span></pre>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: medium;\"><strong><span style=\"font-size: small;\">xPlat コマンド:</span></strong></span></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\nnode bin/azure vm extension set &quot;Your VM Name&quot; OSPatchingForLinux Microsoft.OSTCExtensions  1.0 -i &#39;{&quot;timestamp&quot;:&quot;&#39;`(date +%s)`&#39;&quot;}&#39; -t &#39;{&quot;disabled&quot;:&quot;False&quot;,&quot;stop&quot;:&quot;False&quot;,&quot;rebootAfterPatch&quot;:&quot;Auto&quot;,&quot;startTime&quot;:&quot;&quot;,&quot;category&quot;:&quot;ImportantAndRecommended&quot;,&quot;installDuration&quot;:&quot;00:30&quot;}&#39;</span></pre>\n\n<p><span style=\"font-size: small;\"><strong><span style=\"font-size: large;\"><span style=\"font-size: medium;\"><span style=\"font-size: large;\">その他のシナリオ:</span></span></span></strong> <span style=\"font-size: small;\">デバッグ用の OS 更新プログラムを停止できます。stop パラメーター&ldquo;を true&rdquo;&rdquo; に設定&ldquo;すると、現在の更新が完了すると OS の更新が停止します。</span> </span></p>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: medium;\"><strong><span style=\"font-size: small;\">PowerShell スクリプト:</span></strong></span></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\n# Get the VM\n$vm = Get-AzureVM -ServiceName &quot;Your Service Name&quot; -Name &quot;Your VM Name&quot;\n# Set the extension information\n$ExtensionName=&quot;OSPatchingForLinux&quot;\n$version=&quot;1.0&quot;\n$Publisher=&quot;Microsoft.OSTCExtensions&quot;\n\n# Set the parameter value\n# When you set the &ldquo;stop&rdquo; parameter to true, the OS update will stop after the current update is finished.\n$PrivateConfig = &#39;{\n    &quot;disabled&quot; : &quot;False&quot;,\n    &quot;stop&quot; : &quot;True&quot;    \n }&#39;\n$PublicConfig = &#39;{}&#39;\n\n# Apply the configuration to the extension\nSet-AzureVMExtension -ExtensionName $ExtensionName -VM $vm -Publisher $Publisher -Version $version -PrivateConfiguration $PrivateConfig -PublicConfiguration $PublicConfig | Update-AzureVM</span></pre>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: medium;\"><strong><span style=\"font-size: small;\">xPlat コマンド:</span></strong></span></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\nnode bin/azure vm extension set &quot;Your VM Name&quot; OSPatchingForLinux Microsoft.OSTCExtensions  1.0 -i &#39;{}&#39; -t &#39;{&quot;disabled&quot;:&quot;False&quot;,&quot;stop&quot;:&quot;True&quot;}&#39;</span></pre>\n\n<p><span style=\"font-size: small;\">&nbsp;<span style=\"font-size: small;\"><strong>手動 OS 更新に切り替える場合&ldquo;は、disable&rdquo; パラメーターを true に設定&ldquo;できます&rdquo;。</strong></span><span style=\"font-size: medium;\"><strong><span style=\"font-size: small;\">PowerShell スクリプト:</span></strong></span></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\n# Get the VM\n$vm = Get-AzureVM -ServiceName &quot;Your Service Name&quot; -Name &quot;Your VM Name&quot;\n# Set the extension information\n$ExtensionName=&quot;OSPatchingForLinux&quot;\n$version=&quot;1.0&quot;\n$Publisher=&quot;Microsoft.OSTCExtensions&quot;\n\n# Set the parameter value\n# When you set the &ldquo;disabled&rdquo; parameter to true, the OSPatching extension is disabled.\n$PrivateConfig = &#39;{\n    &quot;disabled&quot; : &quot;True&quot;\n }&#39;\n$PublicConfig = &#39;{}&#39;\n\n# Apply the configuration to the extension\nSet-AzureVMExtension -ExtensionName $ExtensionName -VM $vm -Publisher $Publisher -Version $version -PrivateConfiguration $PrivateConfig -PublicConfiguration $PublicConfig | Update-AzureVM</span></pre>\n\n<p><span style=\"font-size: small;\"><strong><span style=\"font-size: medium;\"><span style=\"font-size: small;\">xPlat コマンド:</span></span></strong></span></p>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\nnode bin/azure vm extension set &quot;Your VM Name&quot; OSPatchingForLinux Microsoft.OSTCExtensions  1.0 -i &#39;{}&#39; -t &#39;{&quot;disabled&quot;:&quot;True&quot;}&#39;</span></pre>\n\n<p><span style=\"font-size: small;\">&nbsp;</span></p>\n\n<h4><span style=\"font-size: small;\"><span style=\"font-size: large;\"><span style=\"font-weight: bold;\"><span style=\"font-size: x-large;\">状態の確認</span></span></span></span></h4>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: medium;\"><strong><span style=\"font-size: large;\">OS 更新プログラムの構成状態と構成の設定</span></strong></span></span></p>\n\n<ul>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">拡張機能のデプロイの状態を確認するには、次の PowerShell コマンドを実行します。 </span></span></li>\n</ul>\n\n<pre class=\"prettyprint\">\n<span style=\"font-size: small;\">\nGet-AzureDeployment -ServiceName &quot;Your Service Name&quot;</span></pre>\n\n<ul>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">Azure Portal に拡張機能の状態と最終的な OS 更新設定が表示されます。この機能は数週間以内に使用できます。</span></span></span></li>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">詳細な拡張機能の状態と最終的な OS&nbsp; 更新設定を確認するには、VM 内の次の場所にあるファイルを参照できます: &ldquo;/var/lib/waagent/Microsoft.OSTCExtensions.OSPatchingForLinux-version/status/&rdquo; </span></span></li>\n</ul>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: medium;\"><strong><span style=\"font-size: large;\">OS の更新状態の確認</span></strong></span></span></p>\n\n<ul>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">OS の修正プログラム適用プロセスでは、VM 内の次のファイルの状態とエラーがログに記録されます: &ldquo;/var/log/azure/Microsoft.OSTCExtensions.OSPatchingForLinux/version&gt;/&lt;extension.log&rdquo; &ldquo;および /var/log/waagent.log&rdquo;。</span></span></li>\n    <li><span style=\"font-size: small;\"><span style=\"font-size: small;\">OS の修正プログラム適用プロセスでは、ダウンロードおよびインストールされたパッケージの一覧も VM 内の次のファイルに記録されます。 &ldquo;ファイル /var/lib/waagent/package.downloaded&rdquo; にダウンロードされたパッケージ。 &ldquo;/var/lib/waagent/package.patched ファイルにインストールされたパッケージ&rdquo;。 </span></span></li>\n</ul>\n\n<p><span style=\"font-size: small;\">&nbsp;<span style=\"font-size: large;\"><span style=\"font-weight: bold;\"><span style=\"font-size: x-large;\">その他の注意事項</span></span></span> </span></p>\n\n<p><span style=\"font-size: small;\"><span style=\"font-size: small;\">OSPatching では、OS 修正プログラムの適用に次の Linux コマンドが利用されます。OSPatching 拡張機能を使用する場合は、競合を回避するために、以下に示すのと同じコマンドを使用するアプリケーションを停止することをお勧めします。ほとんどの場合、複数のプロセスで同時に実行することはできません。</span></span></p>\n\n<table border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n    <tbody>\n        <tr>\n            <td valign=\"top\" width=\"63\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">いいえ。</span></span></td>\n            <td valign=\"top\" width=\"78\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">コマンド</span></span></td>\n            <td valign=\"top\" width=\"138\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">Linux OS</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"63\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">1</span></span></td>\n            <td valign=\"top\" width=\"78\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">apt-get</span></span></td>\n            <td valign=\"top\" width=\"138\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">Ubuntu</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"63\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">2</span></span></td>\n            <td valign=\"top\" width=\"78\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">yum</span></span></td>\n            <td valign=\"top\" width=\"138\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">CentOS、Oracle</span></span></td>\n        </tr>\n        <tr>\n            <td valign=\"top\" width=\"63\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">3</span></span></td>\n            <td valign=\"top\" width=\"78\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">zypper</span></span></td>\n            <td valign=\"top\" width=\"138\"><span style=\"font-size: small;\"><span style=\"font-size: small;\">SUSE</span></span></td>\n        </tr>\n    </tbody>\n</table>"
