### YamlMime:Yaml
ms.openlocfilehash: acae44bf40d826c7306e7c0866bce501aeb78ac6
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891577"
Slug: introducing-the-azure-terraform-resource-provider
Title: Azure Terraform リソース プロバイダーの紹介
Summary: 新しい Azure Resource Provider for HashiCorp Terraform のプライベート プレビューをお知らせします。このプレビューにより、azure のお客様は Azure Resource Manager (ARM) を使用して、ネイティブの Azure リソース プロバイダーである場合と同様に、Terraform プロバイダーを使用して依存リソースをプロビジョニングおよび構成できます。
Content: >-
  <p>新しい Azure Resource Provider for HashiCorp <a href="https://azure.microsoft.com/en-us/solutions/devops/terraform/">Terraform</a> のプライベート プレビューをお知らせします。このプレビューにより、Azure のお客様は Azure Resource Manager (ARM) を使用して、ネイティブの Azure リソース プロバイダーである場合と同様に、Terraform プロバイダーを使用して依存リソースをプロビジョニングおよび構成できます。</p>


  <p>Terraform に多額の投資を行い、HashiCorp と密接に提携して、Terraform を使用してリソースを管理する顧客に対する Azure の深い豊富なサポートを実現しています。 この新しい機能は、ARM を直接使用して、Terraforms&rsquo; の広範で多様なプロバイダーの利点を Azure 経由で直接利用できるお客様を可能にするようにしています。</p>


  <p>この新しい Azure リソース プロバイダー (RP) によって有効になるシナリオは多数ある。 たとえば、お客様は Azure Container Service (AKS) に新しい Kubernetes クラスターを作成する ARM テンプレートを作成し、Terraform OSS プロバイダーを介して、ポッド、サービス、シークレットなどの Kubernetes リソースを依存リソースとして作成できます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1f933e0f-ab45-479b-ab76-69a42734c9e8.png"><img alt="tf-arm" border="0" height="456" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7a089b2b-b7a2-4856-a596-0fbaa5a9aa60.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="tf-arm" width="1531"></a></p>


  <p align="center"><em>Terraform RP を使用して ARM API を使用して、Azure の内部または外部にサードパーティのリソースをプロビジョニングします。</em></p>


  <h2>リソース プロバイダーの使用</h2>


  <p>プロバイダーは、次の 2 つの型を公開します。</p>


  <ul>
   <li>providerregistrations</li>
   <li>resources</li>
  </ul>


  <h2>Providerregistrations 型</h2>


  <p><strong> providerregistrations 型</strong>は Terraform のプロバイダーの種類に関連付け、接続と認証の情報が含まれている。</p>


  <p>次の例では、新しい <strong>providerregistration</strong> が作成され、 <strong>providertype</strong> プロパティが kubernetes に設定されているリソースのプロパティで、 <a href="https://www.terraform.io/docs/providers/kubernetes/index.html" target="_blank">Terraform Kubernetes Provider</a> を使用するように RP に指示します。設定オブジェクトでは、プロバイダーの <strong>inline_config</strong> プロパティを、既存の AKS マネージド Kubernetes クラスターの資格情報 (<strong>kubeconfig</strong>) に設定します。 資格情報は、AKS リソースに<strong> 対して ListCredential</strong> アクションを呼び出すことによって取得されます。</p>


  <pre>

  {
     &quot;type&quot;: &quot;Microsoft.TerraformOSS/providerregistrations&quot;,
     &quot;name&quot;: &quot;[parameters(&#39;resourceName&#39;)]&quot;,
     &quot;apiVersion&quot;: &quot;2018-05-01&quot;,
     &quot;location&quot;: &quot;northeurope&quot;,
     &quot;properties&quot;: {
        &quot;providertype&quot;: &quot;kubernetes&quot;,
        &quot;settings&quot;:
        {
         &quot;inline_config&quot;: &quot;[Base64ToString(ListCredential(resourceId(&#39;Microsoft.ContainerService/managedClusters/accessProfiles&#39;, parameters(&#39;resourceName&#39;),&#39;clusterAdmin&#39;), &#39;2017-08-31&#39;).properties.kubeConfig)]&quot;
        }
      }
  }</pre>


  <h2>リソースの種類</h2>


  <p>リソースの種類は、Terraform のリソースの種類にマップされます。 次のリソースの例では、Kubernetes クラスターにポッドを作成するために新しいリソースの種類が定義されています。<strong>resourcetype</strong> プロパティは <strong>kubernetes_pod</strong> に設定されています。このプロパティは、Terraform <strong>kubernetes_pod</strong> リソースを使用するように RP に指示します。このリソースは、<strong>providerId</strong> プロパティを以前に作成した <strong>providerregistrations</strong> 型の<strong> resourceId</strong> に設定することで、特定の kubernetes クラスターにバインドされます。 設定プロパティ スキーマは、Terraform 内のリソースで受け取 <a href="https://www.terraform.io/docs/providers/kubernetes/r/pod.html" target="_blank">kubernetes_pod引数に</a> 直接マップされます。</p>


  <pre>

  {
     &quot;type&quot;: &quot;Microsoft.TerraformOSS/resources&quot;,
     &quot;name&quot;: &quot;NginxPod&quot;,
     &quot;apiVersion&quot;: &quot;2018-05-01&quot;,
     &quot;location&quot;: &quot;northeurope&quot;,
     &quot;properties&quot;: {
        &quot;providerId&quot;: &quot;[resourceId(&#39;Microsoft.TerraformOSS/providerregistrations&#39;, parameters(&#39;resourceName&#39;))]&quot;,
        &quot;resourcetype&quot;: &quot;kubernetes_pod&quot;,
        &quot;settings&quot;: {
           &quot;metadata&quot;: [
              {
                &quot;name&quot;: &quot;nginx&quot;,
                &quot;labels&quot;: {
                   &quot;App&quot;: &quot;nginx&quot;
                 }
              }
           ],
           &quot;spec&quot;: [
             {
               &quot;container&quot;: {
                 &quot;image&quot;: &quot;nginx:1.7.8&quot;,
                 &quot;name&quot;: &quot;nginx&quot;,
                 &quot;port&quot;: {
                   &quot;container_port&quot;: 80
                }
              }
            }
          ]
        }
      },
      &quot;dependsOn&quot;: [
        &quot;[resourceId(&#39;Microsoft.TerraformOSS/providerregistrations&#39;, parameters(&#39;resourceName&#39;))]&quot;
     ]
  }</pre>


  <p>これらの種類はどちらも、リソース プロバイダーのトップ レベルのリソースとしてモデル化されています。つまり、 <a href="https://docs.microsoft.com/en-us/azure/role-based-access-control/overview" target="_blank">Azure Role Based Access Control (RBAC)</a> を使用してプロバイダー情報をセキュリティで保護し、そのプロバイダー内のリソースを管理する必要があるユーザーが資格情報と接続情報にアクセスする必要が生じなことを意味します。 さらに、リソース参照を <strong>providerregistration</strong> に変更するだけで、複数の環境で使用できるリソース テンプレートのセットを 1 つ作成することもできます。 <a href="https://docs.microsoft.com/en-us/azure/azure-policy/azure-policy-introduction" target="_blank">Azure Policy</a> 、この新しいリソース プロバイダーの使用を管理するためにも適用できます。</p>


  <h2>最初のプライベート プレビュー リリースでサポートされている Terraform プロバイダー</h2>


  <p>最初のプライベート プレビュー リリースでは、次の 3 つのプロバイダーがサポートされています。</p>


  <ul>
   <li><a href="https://www.terraform.io/docs/providers/kubernetes/index.html" target="_blank">Kubernetes</a></li>
   <li><a href="https://www.terraform.io/docs/providers/cloudflare/index.html" target="_blank">Cloudflare</a></li>
   <li><a href="https://www.terraform.io/docs/providers/datadog/index.html" target="_blank">Datadog</a></li>
  </ul>


  <p>プライベート プレビューからパブリック プレビューから GA に移行する場合は、追加のプロバイダーのサポートを追加します。 私たちの目的は、実行可能な数の <a href="https://www.terraform.io/docs/providers/index.html" target="_blank">Terraform</a> プロバイダーをサポートすること (他のクラウド プラットフォームを除く) です。 リリース後は、新しいプロバイダーが Terraform に追加されると、Azure でも有効にするように取り組む予定です。</p>


  <h2>プライベート プレビューに参加する方法</h2>


  <p>プライベート プレビューへのアクセスに関心がある場合は、 <a href="https://aka.ms/tfossrp" target="_blank">この Azure TerraformOSS リソース プロバイダーのプライベート プレビューアンケートに記入してください</a>。</p>
