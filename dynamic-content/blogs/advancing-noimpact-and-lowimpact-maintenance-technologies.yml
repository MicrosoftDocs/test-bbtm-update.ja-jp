### YamlMime:Yaml
ms.openlocfilehash: 3f314eae5956b6e723d889cbbff5da6aab0c8478
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891329"
Slug: advancing-noimpact-and-lowimpact-maintenance-technologies
Title: 影響なしおよび影響の少ないメンテナンス テクノロジの進化
Summary: この投稿では、信頼できる一連のクラウド サービスを提供する取り組みの一環として、プラットフォームの可用性を引き続き向上させるいくつかの取り組みを強調する、7 月のブログ投稿で開始された信頼性シリーズを引き続き紹介しています。
Content: >-
  <p>&ldquo;この投稿では、信頼<a href="https://azure.microsoft.com/en-us/blog/tag/advancing-reliability/" target="_blank"></a>できる一連のクラウド サービスを提供<a href="https://azure.microsoft.com/en-us/blog/advancing-microsoft-azure-reliability/" target="_blank"></a>する取り組みの一環として、プラットフォームの可用性を引き続き向上させるいくつかの取り組みを強調する、7 月のブログ投稿で開始された信頼性シリーズを引き続き紹介しています。 今日は、&rsquo;ホット パッチ適用、メモリ保持メンテナンス、ライブ マイグレーションなど、影響を受けない影響の少ない更新テクノロジに対して行った投資をダブルクリックしたいと考えました。 過去&rsquo; 1 年間に多数のセキュリティと信頼性の修正プログラムをホスト インフラストラクチャにデプロイしました。その多くは、お客様に影響やダウンタイムを与えずに実装されました。 以下の投稿は、以下で説明するいくつかの更新テクノロジのプログラム マネージャーである、コア オペレーティング システム チームの John Slack によって書かされました。&rdquo; - Mark Russinovich、CTO、Azure</p>


  <hr>

  <p><em>この投稿は、これらのテクノロジを担当するエンジニアリング チームの Apurva Thanky、立ち上がり、1000000000000000000000000000000000000000000000000000000012111111111111111111111111111121111111</em></p>


  <p>&nbsp;</p>


  <p>Azure ホスト インフラストラクチャを定期的に更新して、プラットフォームの信頼性、パフォーマンス、およびセキュリティを向上させます。 これらのメンテナンス更新プログラムの目的&lsquo;&rsquo;は異なりますが、通常、ホスティング環境でのソフトウェア コンポーネントの更新やハードウェアの使用停止が含まれています。 5 年前に戻った場合、これらの更新プログラムの一部を適用する唯一の方法は、ホスト全体を完全に再起動することでした。 このアプローチでは、顧客の仮想マシン (VM) が一度に数分ダウンしました。 それ以降、フリートを更新する際の顧客への影響を最小限に抑えるために、さまざまなテクノロジに投資してきました。 現在、ホスト オペレーティング システムに対する更新プログラムの大部分は、完全な透明性と、ホット パッチを使用した顧客への影響をゼロにした場所にデプロイされています。 更新プログラムにホット パッチを適用できないまれなケースでは、通常、影響の少ないメモリ保持更新テクノロジを利用して更新プログラムをロールアウトします。</p>


  <p>これらのテクノロジを使用する場合でも、他にも、より影響の大きなメンテナンスを行う必要があるまれなケースがあります (障害のあるハードウェアの退避や古いハードウェアの使用停止など)。 このような場合は、ライブ マイグレーション、VM 内通知、および計画メンテナンスの組み合わせを使用して、顧客の制御を提供します。</p>


  <p>この領域への継続的な投資のおかげで、ホスト メンテナンス アクティビティの大部分が、影響を受けるインフラストラクチャでホストされている VM に影響を与えるのではない時点です。 この&rsquo;投稿は、Azure の更新プログラムが影響を最小限に抑えるのに使用するさまざまな手法について透過的に記述しています。</p>


  <h2>プラン A: ホット パッチ適用</h2>


  <p>関数レベルのホット &ldquo;パッチ&rdquo; 適用では、お客様の VM のダウンタイムを発生させずに、実行中のコードに対して対象を絞った変更を行う機能が提供されます。 これは、ホスト上の&lsquo;&rsquo;関数のすべての新しい呼び出しを、その関数の更新されたバージョンにリダイレクトすることで行います。そのため、影響なし更新テクノロジと見なされます。 可能な限り、ホット パッチを使用してホストの更新プログラムを適用し、そのホストで実行されている VM への影響を完全に回避します。 2017 年から Azure でホット パッチを使用しています。 それ以降、ホット パッチを適用できる範囲を広げることに取り組み続け、 例として、2018 年にハイパーバイザーにホット パッチを適用するために、ホスト オペレーティング システムを更新しました。 今後は、ファームウェアのホット パッチについて確認しています。 これは、業界が一般的に焦点を当て&#39;場所です。 ファームウェアは常に、&lsquo;&rsquo;更新する必要がある場合、サーバーを再起動する必要がある場合と見なされますが、お客様のエクスペリエンスが非常に高い結果を生み出すのはわかっています。 ハードウェア&#39;、独自のファームウェアを検討して、ホット パッチを適用し、段階的に更新可能にしました。</p>


  <p>一部の大規模なホスト更新プログラムには、関数レベルのホット パッチ適用を使用して適用できない変更が含まれています。 これらの更新については、メモリ保持メンテナンスの使用に努めしています。</p>


  <h2>プラン B: メモリ保持メンテナンス</h2>


  <p>&lsquo;&rsquo;メモリ保持メンテナンスでは、ゲスト VM を一時停止し (RAM でメモリを保持しながら)、ホスト サーバーを更新してから、VM を再送信し、クロックを自動的に同期します。 最初に、2018 年に Azure のメモリ保持メンテナンスを使用しました。 その後、3 つの重要な方法でテクノロジを改善しました。 まず、ホストを再起動せずにサービスを提供できるホスト コンポーネントを対象とした、メモリ保持メンテナンスの影響が少ないバリアントを開発しました。 次に、お客様が一時停止した期間を短縮しました。 3 つ目は、メモリ保持メンテナンスで更新できる VM の種類の数を拡張しました。 この領域では引き続き作業を行っていますが、メモリ保持メンテナンスの一部のバリアントは、さまざまな技術的な理由から、M、N、H シリーズの VM など、一部の特殊な VM オファリングと互換性がありません。</p>


  <p>まれに、より影響の大きなメンテナンス (ホストの再起動、VM の再デプロイなど) を行う必要がある場合は、お客様に事前に通知され、ワークロードに適した時間にメンテナンスを実行する機会が与えられる場合があります。</p>


  <h2>プラン C: セルフサービス メンテナンス</h2>


  <p>セルフサービス メンテナンスには、顧客とパートナーに時間のウィンドウを提供する必要があります。この時間内に、VM で影響の大きなメンテナンスを開始する時期を選択できます。 この初期セルフサービス フェーズは、通常、約 1 か月続き、組織が独自のスケジュールでメンテナンスを実行し、ユーザーに中断が発生したり、中断を最小限に抑える権限を与えることができます。 このセルフサービスウィンドウの最後&mdash;に、スケジュールされたメンテナンス フェーズが開始されます。このフェーズでは、Azure によってメンテナンスが自動的に実行されます。 どちらのフェーズでも、&mdash;お客様は、PowerShell/CLI でクエリを実行することで、Azure Service Health または更新されていない VM を完全に可視化できます。 Azure では、2018 年に初めてセルフサービス メンテナンスが提供されました。 一般に、管理者は、Azure が VM のメンテナンスを自動的に実行するのを待つのではなく、セルフサービス フェーズを利用します。</p>


  <p>さらに、お客様が <a href="https://azure.microsoft.com/en-us/services/virtual-machines/dedicated-host/" target="_blank">Azure Dedicated Hosts</a> または <a href="https://docs.microsoft.com/en-us/azure/security/fundamentals/isolation-choices#isolated-virtual-machine-sizes" target="_blank">Isolated</a> 仮想マシンを使用して完全なホスト マシンを所有している場合、最近、影響がゼロ以外のすべてのプラットフォームの更新に対するメンテナンス制御を提供し始めました。 これには、数秒だけ一時停止する再起動のない更新プログラムが含まれます。 これは、数秒間&rsquo;続く場合でも中断を維持できる非常に機密性の高いワークロードを実行している VM に役立ちます。 お客様は、35 日間のローリング ウィンドウで、これらのゼロ以外の影響を与える更新プログラムを適用する場合を選択できます。 この機能はパブリック プレビュー中であり、詳細については、この専用のブログ記事 <a href="https://azure.microsoft.com/en-us/blog/maintenance-control-for-platform-updates/" target="_blank">を参照してください</a>。</p>


  <p>ホストがハードウェアの低下の&rsquo;兆候を示す場合など、イン Place Update テクノロジは実行可能でない場合があります。 このような場合、計画メンテナンスによる顧客制御またはライブ マイグレーションを通じて、VM の別のホストへの移動を開始する方法が最適です。</p>


  <h2>プラン D: ライブ マイグレーション</h2>


  <p>ライブ マイグレーションでは、実行中の顧客 VM を 1 つのソース ホストから&ldquo;&rdquo;別の移行先ホストに&ldquo;移動する必要&rdquo;があります。 ライブ マイグレーションは、仮想マシンの実行中に VM&rsquo; のローカル状態 (RAM とローカル ストレージを含む) を移行元から移行先に移動することで開始します。 ほとんどのローカル状態が移動すると、ゲスト VM では通常 5 秒以下の短い一時停止が実行されます。 その一時停止後、VM は宛先ホストでの実行を再開します。 Azure は、2018 年にメンテナンスのためにライブ マイグレーションの使用を開始しました。 現在、新しいAzure Machine Learningハードウェア障害が予測される場合、ライブ マイグレーションを使用してゲスト VM を事前に別のホストに<a href="https://azure.microsoft.com/blog/improving-azure-virtual-machine-resiliency-with-predictive-ml-and-live-migration/" target="_blank">移動できます</a>。</p>


  <p>その他のトピックの中で、計画メンテナンスと AI 運用については、Igal Figlins&rsquo; の最近の Ignite 2019 &ldquo;セッション「Azure での回復力のあるアプリケーションの構築」で説明しました。&rdquo; これらに <a href="https://myignite.techcommunity.microsoft.com/sessions/82913?source=sessions" target="_blank">関する追加</a> のコンテキストについては、こちらを参照してください。また、Azure が提供するさまざまな回復力のあるサービスを利用して、本質的に回復力のあるアプリケーションを構築する方法の詳細については、こちらを参照してください。</p>


  <h2>Azure メンテナンスの将来</h2>


  <p><embed https:="" myignite.techcommunity.microsoft.com="" sessions="" source="sessions" video="">まとめると、Azure でメンテナンスを実行する方法は、適用される更新プログラムの種類によって大きく異なります。 詳細に関係なく、Azure は常に、お客様のワークロードに対して可能な限り最小限の影響を確実にするためのビューでメンテナンスに取り組む必要があります。 この投稿では、これを実現するために使用するテクノロジのいくつかについて説明し、引き続きカスタマー エクスペリエンスの向上に取り組んでいます。 将来に向けて、機械学習ベースの分析情報と自動化に多額の投資を行い、可用性と信頼性を維持しています。 最終的に &ldquo;、この AI 運用&rdquo; モデルは、予防的なメンテナンスを実行し、自動化された軽減策を開始し、インシデント中の要因と依存関係を人間のエンジニアよりも効果的に特定します。 引き続き学習と進化を続ける中で、これらのトピックに関するより多くの情報をお待ちしています。</p>


  <p>&nbsp;</p>


  <p>&nbsp;</p>
