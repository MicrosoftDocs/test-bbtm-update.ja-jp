### YamlMime:Yaml
ms.openlocfilehash: 245237cf67b4b2e3ffe134259d983d26c2ebe71b
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139909896"
Slug: device-provisioning-a-manufacturing-timeline-for-tpm-devices
Title: 'デバイスプロビジョニング: TPM デバイスの製造タイムライン'
Summary: IoT Hub Device Provisioning Service を使用する多数の人が、デバイスでハードウェアセキュリティモジュール (Hsm) を使用するのが簡単であるため、その使用を開始しています。 この投稿では、EK を抽出するタイミングと、TPM の所有権を要求するタイミングに関する一般的なガイダンスを提供して、所有者キーが生成されるようにします。
Content: >-
  <div style="background:#eee;border:1px solid #ccc;padding:5px 10px;"><strong>更新:</strong>Azure IoT デバイスに関する関連情報については、 <a data-bi-area="undefined" data-bi-id="page-clicked-link" data-bi-view="undefined" data-event="page-clicked-link" href="https://docs.microsoft.com/en-us/azure/iot-dps/concepts-device-oem-security-practices">Azure IoT デバイスの製造元のセキュリティプラクティス</a>に関するドキュメントを参照してください。</div>


  <p><a href="https://docs.microsoft.com/en-us/azure/iot-dps">IoT Hub Device Provisioning Service</a>を使用する多数のスタッフが、デバイスでハードウェアセキュリティモジュール (hsm) の使用を開始しています。これは、プロビジョニングサービスで hsm を簡単に使用できるためです。 これはすばらしいことです。チームは、お客様のソリューションのセキュリティを向上させることを大好きています。 ただし、多数のお客様が Hsm、特にトラステッドプラットフォームモジュール (Tpm&#39;) を初めて利用するため、既存の製造プロセスに Tpm がどのように適合するかについて、いくつかの質問を受けました。 このブログ投稿は、わかりやすくするために役立ちます。</p>


  <p>この記事は、認証に x.509 証明書を使用するデバイスではなく、HMAC キーのサポートとその保証キーを持つ TPM 2.0 を使用しているデバイスのみに関連しています。 <a href="https://azure.microsoft.com/en-us/blog/azure-iot-supports-new-security-hardware-to-strengthen-iot-security/">このブログ投稿</a>では、x.509 証明書を使用した Device Provisioning Service でのセキュリティ保護されたハードウェアの詳細についてご確認ください。 TPM は、業界で広く採用されている Trusted Computing Group の ISO 標準です。TPM の詳細については、<a href="https://trustedcomputinggroup.org/tpm-library-specification/">完全な TPM 2.0 仕様</a>または <a href="https://www.iso.org/standard/66510.html">ISO/IEC 11889 仕様</a>を参照してください。</p>


  <p>製造プロセスのある時点で、デバイスから保証キー (EK) を抽出し、TPM の所有権を取得して、デバイスで所有者キーを使用できるように&#39;する必要があります。 EK 抽出と所有権の要求は、製造プロセスで異なるタイミングで発生する可能性があります。これは、顧客に対して多くの柔軟性を提供するため、非常に優れています。 しかし、多くの人が、HSM (yay!) を使用して IoT デバイスのセキュリティを向上させ、TPM のライフサイクルを新たに追加することになっています (特に、この時点では、多くの製造プロセスが設計フェーズにある可能性があるため)。 この投稿では、EK を抽出するタイミングと、TPM の所有権を要求するタイミングに関する一般的なガイダンスを提供して、所有者キーが生成されるようにします。</p>


  <p><strong>ソフトウェア Tpm のいくつかの注意事項:</strong></p>


  <ul>
      <li>私は、独立した、ファームウェア、または統合された TPM を使用し&#39;再利用することを前提としています。また、必要に応じて、ソフトウェアまたは非不連続の TPM を使用することについても説明しまし &rsquo; た&#39;。 ソフトウェア TPM を&#39;再利用する場合は、追加の手順が必要&#39;になることがあります。ソフトウェア Tpm にはさまざまな&#39;実装を含めることができ、そのすべてをカバーすることはできますが、次のタイムラインに基づいて、特定のソフトウェア TPM に対してどのように動作するかを確認することができます。&#39;</li>
      <li>ソフトウェアでエミュレートされた TPM はプロトタイプの作成やテストには適していますが、ディスクリート TPM、ファームウェア TPM、または統合された TPM と同じレベルのセキュリティを提供することはできません。 &rsquo;実稼働環境でソフトウェア tpm を使用しないようにしてください。 TPM の種類については、<a href="https://trustedcomputinggroup.org/wp-content/uploads/TPM-2.0-A-Brief-Introduction.pdf" target="_blank">こちら</a>をご確認してください。</li>
  </ul>


  <p>次に示すのは、TPM が実稼働プロセスを通過してデバイスで終了する一般的なタイムラインです。各製造プロセスは少し異なります。この投稿では、最も一般的なパターンについてのみ説明します。 TPM を使用して製造デバイスに新しい&#39;する場合は、次のようにキーを使用するタイミングについてのガイダンスとして機能します。 しばらくの間 Tpm を使用してデバイスを製造している場合は、現在のプロセスが適切に機能しているかどうかをお勧めします。</p>


  <h3>手順 1:<strong> </strong>TPM が製造されている</h3>


  <ul>
      <li>デバイスで使用するために TPM 製造元から Tpm を購入している場合は、EK_pubs を抽出し、物理的な出荷に加えて EK_pubs の一覧を提供するかどうかを確認してください。 また、プロビジョニングサービス &rsquo; の共有アクセスポリシーを使用して、tpm 製造元に登録リストへの書き込みアクセス権を付与し、登録リストに tpm を追加することもできますが、これは実稼働プロセスの早い段階であり、TPM 製造元に特定の程度の信頼が必要になる可能性があります。 ご自身の責任で行ってください。</li>
      <li>デバイスの製造元に販売する Tpm を製造する場合は、顧客に EK_pubs のリストと物理 Tpm を提供して、手順を保存することを検討してください。</li>
      <li>独自のデバイスで使用するために Tpm を製造する場合は、製造プロセス内の場所を特定して、EK_pub を抽出すると最も便利です。 これは、この後の手順のいずれかで発生する可能性があります。私は、製造プロセスとその発生について理解するために信頼しています。</li>
  </ul>


  <h3>手順 2:TPM がデバイスにインストールされる</h3>


  <p>実稼働プロセスのこの時点で、デバイスがどのデバイスプロビジョニングサービスに通信するかを把握し、自動プロビジョニングのためにデバイスを登録一覧に追加することができます。 デバイスプロビジョニングサービスを使用した自動デバイスプロビジョニングの詳細については、 <a href="https://docs.microsoft.com/en-us/azure/iot-dps/about-iot-dps">ドキュメント</a>を参照してください。</p>


  <ul>
      <li>まだ&#39;していない場合は、EK_pub を抽出しておくと時間がかかることがあります。</li>
      <li>インストールプロセスによっては、現時点で TPM の所有権を取得することができます。</li>
  </ul>


  <h3>手順 3:デバイスにファームウェアとソフトウェアがインストールされる</h3>


  <p>これは、Device Provisioning Service クライアントが、プロビジョニング用の ID スコープとグローバル URL と共にインストールされるときです。</p>


  <ul>
      <li>これは、EK_pub を抽出する最後の機会です。 サードパーティがデバイスにソフトウェアをインストールしている場合は、EK_pub を既に抽出しておくことをお勧めします。</li>
      <li>これは、TPM の所有権を取得する必要がある場合に行います。これは、デバイス上で何かを実行&#39;ためです。</li>
      <li>ソフトウェア TPM に関する注意: ソフトウェア TPM もインストールされている場合があります。 ソフトウェア TPM がインストールされているときに、EK_pub を展開する必要があります。</li>
  </ul>


  <h3>手順 4: デバイスがボックス化され、倉庫に送信され、最終的なインストールを待機している</h3>


  <p>デバイスは、フィールドにデプロイされる前に、6-12 か月間ウェアハウスに配置されることがあります。</p>


  <h3>手順 5:デバイスが使用場所に設置される</h3>


  <p>デバイスが最終的な場所に到着すると、デバイスプロビジョニングサービスを使用した自動プロビジョニングが行われます。</p>


  <p><br>

  もちろん、すべての製造プロセスに固有の特性があり、上記のタイムラインがプロセスと完全に一致するとは限りません。 適切な判断を行い、問題が発生し&#39;場合は Microsoft サポートにお問い合わせください。</p>


  <p>デバイスプロビジョニングサービスでの TPM 構成証明の詳細については、こちらの <a href="https://azure.microsoft.com/blog/device-provisioning-identity-attestation-with-tpm">ブログ記事</a>をご覧ください。</p>


  <p>Limerick を使用して合計を計算するには、次の手順を実行します。</p>


  <p>Tpm を使用するすべてのユーザーに対して<br>

  とについて質問があります。<br>

  所有権を取得するには<br>

  の安全性チップ<br>

  基本的には、すべてが依存するだけです。</p>
