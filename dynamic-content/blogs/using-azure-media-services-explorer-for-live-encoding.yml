### YamlMime:Yaml
ms.openlocfilehash: a1b1d850e6e35986d65c97c1e3be0bb486b58c9f
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896991"
Slug: using-azure-media-services-explorer-for-live-encoding
Title: Live Encoding に Azure Media Services エクスプローラーを使用する
Summary: 2014年10月にリリースされたため、Azure Media Services エクスプローラーツールにいくつかの新機能が追加されました。 この記事では、このツールをライブエンコードに使用する手順について説明します。
Content: >-
  2014年10月に<a href="https://azure.microsoft.com/blog/2014/10/08/managing-media-workflows-with-the-new-azure-media-services-explorer-tool/" target="_blank">リリース</a>されたため、Azure Media Services Explorer (amse) ツールに多くの新機能が追加されました。 このブログでは、このツールをライブエンコードに使用する手順について説明します (Azure 管理ポータルの使用方法の詳細については、こちら <a href="https://azure.microsoft.com/en-us/documentation/articles/media-services-portal-creating-live-encoder-enabled-channel/" target="_blank">を参照し</a> てください)。 このブログは、サービスの <a href="https://azure.microsoft.com/blog/2015/04/13/an-introduction-to-live-encoding-with-azure-media-services/" target="_blank">live encoding 機能</a> について理解していることを前提としています。


  &nbsp;

  <h2>作業の開始</h2>

  作業を開始するには、次の手順に従います。

  <ol>
   <li>最新 (3.20 またはそれ以降) の<a href="https://aka.ms/amse">Azure Media Services エクスプローラー</a> (amse) ツールをインストールする</li>
   <li>チャネルを作成する Azure データセンターに対して、適度に高い (10-15 Mbps の) BW 接続があることを確認します。</li>
   <li>RTMP または Smooth プロトコル経由でシングルビットレートのライブストリームを送信できるライブエンコーダーにアクセスできることを確認します。 便宜上、このドキュメントの残りの部分では、telestream からの<a href="https://www.telestream.net/controls/wirecast/download-wirecast.htm">Wirecast Pro</a> (v 6.0.3 以降) の無料試用版を参照しています。</li>
  </ol>

  <blockquote><b>注</b>: RTP を使用してテストする場合は、までお問い合わせ <a href="mailto:amslived@microsoft.com">amslived@microsoft.com</a> ください。 ネットワーク接続の要件は、このプロトコルに対してはるかに厳しくなります。</blockquote>

  &nbsp;

  <h2>ライブイベントをストリーミングする</h2>

  まず、amse ツールを起動し、Azure Media Services アカウントに接続します。 ツールバーでツールが起動したら、Live\Create channel にアクセスします。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="チャンネルの作成" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Create-Channel.png" alt="Create Channel" width="290" height="170" border="0" />


  &nbsp;


  開いたウィンドウで、[Live Encoding] オプションでチャネル名として "Standard" を指定し、入力プロトコルとして [RTMP] を選択します。 次に、[チャンネルの作成] ボタンをクリックします。 初期テストでは、デバッグを容易にするために IP アドレスを制限しないことをお勧めします。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="チャネル v2 の作成" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Create-Channel-v2.png" alt="Create Channel v2" width="501" height="597" border="0" />


  &nbsp;


  チャネルが開始されるのを待ちます。これには、データセンターのビジー状態によっては20分かかることがあります。 待機中に、Wirecast Pro を設定できます。 アプリケーションを起動し、[+] ボタンの上にマウスポインターを移動します。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast001" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast001.png" alt="Wirecast001" width="620" height="442" border="0" />


  &nbsp;


  "統合カメラショット" などのカメラフィードをソースとして選択します。ソースとしてファイルを使用しないように注意してください。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast002" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast002.png" alt="Wirecast002" width="621" height="354" border="0" />


  &nbsp;


  カメラの出力が小さな [ショット] ウィンドウに表示されます。 それをクリックすると、プレビューウィンドウにカメラの出力が表示されます。 次に、Wirecast の出力を構成します。 メインメニューで、[出力- &gt; 出力設定] にアクセスします。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast003" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast003.png" alt="Wirecast003" width="626" height="484" border="0" />


  &nbsp;


  [出力先の選択] ダイアログボックスで、[RTMP Server] を選択します。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast004" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast004.png" alt="Wirecast004" width="244" height="103" border="0" />


  [出力設定] ダイアログボックスで、変換先として [Azure Media Services] を選択すると、編集が必要な次の "出力設定" ダイアログが表示されます。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast005" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast005.png" alt="Wirecast005" width="968" height="519" border="0" />


  &nbsp;


  "エンコード" プリセットが "Azure 16:9" に事前に選択されていることに注意してください。 ただし、[新しいプリセット] オプションを使用してエンコード設定を変更する必要があります。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast006" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast006.png" alt="Wirecast006" width="738" height="105" border="0" />


  &nbsp;


  "AMS のテスト" などの新しい名前を付けます。 [オプション] ウィンドウで、"h.264 エンコーダー" を "MainConcept" に設定し、プリセットを保存します。 ビデオとオーディオの集計ビットレートは最大 10 Mbps で、Wirecast を実行しているシステムから維持できる持続帯域幅と、チャネルを作成する Azure データセンターの下にあることに注意してください。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast007" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast007.png" alt="Wirecast007" width="564" height="620" border="0" />


  &nbsp;


  次に、チャネルの取り込み URL を [アドレス] フィールドに入力します。 これは AMSE から取得できます。これを行うには、[ライブ] タブでチャネル行をクリックし、[入力 URL をクリップボードにコピーします。プライマリ入力 URL] を選択します。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast008" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast008.png" alt="Wirecast008" width="482" height="332" border="0" />


  [Wirecast] ダイアログボックスは次のようになります。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast009" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast009.png" alt="Wirecast009" width="968" height="517" border="0" />


  [OK] をクリックし、次に AMSE に戻り、チャネルが "実行中" の状態であることを確認します。 これで、ストリーミングを開始する準備ができました。 Wirecast ウィンドウで矢印をクリックします。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast010" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast010.png" alt="Wirecast010" width="594" height="129" border="0" />


  ストリームボタンを押して、チャネルへのライブエンコードされたデータのプッシュを開始します。 ストリーミングが開始されると、そのボタンのインジケーター ' light ' が赤に変わります。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast011" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast011.png" alt="Wirecast011" width="226" height="42" border="0" />


  しばらく待つと、ライブエンコーダーが実行されていることを確認するチャネルの出力のために、チャネルの "プレビュー URL" を取得できるようになります。 AMSE ツールでチャネルを右クリックし、次に示すオプションを使用します。


  <img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto; display: block; padding-right: 0px; border-width: 0px;" title="Wirecast012" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Wirecast012.png" alt="Wirecast012" width="298" height="286" border="0" />


  この url を<a href="https://aka.ms/amsplayer" target="_blank">Azure Media Services Player</a>の [url] ボックスに貼り付けて、出力を表示することができます。 プレビュービデオに問題がなければ、プログラムを作成して、他のクライアントでそのストリームを再生できます。

  <blockquote><strong>注:</strong> テスト (またはライブイベントの終了) が完了すると、すべてのプログラムとチャネルを停止する必要があります。これにより、ライブエンコードの使用に対する課金が停止されます。</blockquote>

  <h2>の既知の問題</h2>

  <ol>
   <li>チャネルの開始には、データセンターのビジー状態に応じて、最大20分かかることがあります。</li>
   <li>Wirecast Pro を使用する場合は、「mainconcept」のエンコーダーオプションを使用する必要があります。</li>
   <li>ライブフィードをチャネルに接続するときに誤りが生じた場合は、そのチャネル (Ctl + Shift + H) をリセットする必要があります。完了するまで最大5分かかることがあります。</li>
  </ol>
