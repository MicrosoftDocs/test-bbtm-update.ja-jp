### YamlMime:Yaml
ms.openlocfilehash: 773955dde0a11c75e7cb70b4461fb07849133df1
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904799"
Slug: gain-on-oltp-price-performance-with-azure-sql-virtual-machines
Title: Azure SQL Virtual Machines を使用した OLTP の価格-パフォーマンスの向上
Summary: '現在、ほとんどのアプリケーションでは、オンライントランザクション処理 (OLTP) トランザクションが実行されています。 '
Content: >-
  <p><em>この投稿は、青木さん、シニアプログラムマネージャー、Sadashivan Krishnamurthy、プリンシパルアーキテクト、および Bob のアーキテクトによって共同作成されています。</em></p>


  <p>現在、ほとんどのアプリケーションでは、オンライントランザクション処理 (OLTP) トランザクションが実行されています。 OLTP ワークロードの例として、オンラインバンキング、オンラインブックの購入、航空券の予約、テキストメッセージの送信、テレマーケティングの送信などがあります。 OLTP ワークロードには、データベース内の少量のデータの挿入、更新、削除が含まれ、主に多数のユーザーによる大量のトランザクションを処理します。 OLTP ワークロードの大部分は読み取り負荷が高く、多様なトランザクションを使用し、さまざまなデータ型を利用しています。</p>


  <p>azure では、さまざまな<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes-memory" target="_blank">azure 仮想マシンシリーズ</a>と<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types#disk-comparison" target="_blank">azure ディスクオプション</a>を使用して<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-iaas-overview" target="_blank">azure Virtual Machines (VM) に SQL Server</a>することで、ワークロードに対して多くの価格パフォーマンス上の利点がもたらされます。 Intel ベースの<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes-memory#esv3-series" target="_blank">Es_v3 シリーズ</a>や AMD ベースの<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes-memory#easv3-series-preview" target="_blank">Eas_v3 シリーズ</a>などのメモリ最適化された<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes-memory" target="_blank">VM シリーズ</a>は、非常に低コストで高い仮想 cpu (vcpu) をメモリ比に提供します。 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/constrained-vcpu" target="_blank">制約 vCPU 対応の VM サイズ</a> &nbsp;vcpu abailable を VM に制限し、同じメモリ、ストレージ、入出力 (i/o) の帯域幅を維持することで、SQL Server ライセンスのコストを削減します。 &nbsp;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types#premium-ssd" target="_blank">プレミアムソリッドステートドライブ</a>(ssd) は、高パフォーマンスと低待機時間の管理ディスクを提供します。これには、SQL Server のデータとログファイルに必要な IOPS とスループットの機能が搭載されています。 &nbsp;一貫したパフォーマンスを実現するために最適化された、 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types#standard-ssd" target="_blank">Standard ssd</a>、コスト効率のよいストレージオプションは、ほとんどの SQL Server バックアップファイルに最適な変換先として提供されます。</p>


  <p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/premium-storage-performance#disk-caching" target="_blank">azure blobcache</a>は、プレミアムディスクの大きな IOPS 容量に加えて、ミッションクリティカルな OLTP ワークロードにとって大きな価値をもたらします。 azure 仮想マシンには、非常に優れた高パフォーマンスの i/o 容量を無料で提供します。 Blobcache は、VM RAM とローカル SSD を組み合わせることによって実現される多層キャッシュテクノロジです。 読み取り専用 blobcache を使用して premium SSD で管理されたディスク上のデータファイルを SQL Server ホストし、基になるディスク &rsquo; 機能を超える高パフォーマンスの読み取り i/o を利用できます。 高スケールの Vm には、ほとんどのアプリケーションのすべてのデータファイルをホストできる非常に大きな Blobcache サイズが付属しています。 Blobcache からのすべての i/o アクティビティは無料であるため、非常に高いパフォーマンスの読み取りによってアプリケーションのスループットを向上させ、書き込みに対してのみ料金を支払うことができます。 <strong>現在、OLTP ワークロードの大部分は読み取りと書き込みの比率が 10 ~ 1 であると考えていますが、これは最大90% の価格パフォーマンスの向上を実現しています。</strong></p>


  <p>さらに、i/o 待機時間が非常に短いワークロードでは、 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/disks-types#ultra-disk" target="_blank">Azure ウルトラディスクによっ</a> て、高スループットと高 IOPS レベルで一貫性のある低待機時間のディスクストレージが提供されます。 I/o 待機時間でワークロードがボトルネックになっている場合、ウルトラディスクはアプリケーションのスループットを最大化します。</p>


  <p>読み取りと書き込みの比率、トランザクションの複雑さ、およびスケールパターンに基づいて、パフォーマンス測定に <a href="https://www.tpc.org/tpce/default.asp" target="_blank">tpc-E</a> または <a href="https://www.tpc.org/tpcc/default.asp" target="_blank">tpc-C</a> を使用することができます。 一般に、TPC-E は、これらの日の OLTP ワークロードの大部分を表します。これには、複雑なトランザクションと読み取り/書き込みの比率が高くなります。 書き込みを集中的に行うワークロードが単純なトランザクションを実行している場合、パフォーマンスの検証のための TPC/C ベンチマークの単純さを活用できます。 <strong>スケールダウンされた TPC と HammerDB kit を使用した Azure Virtual Machines での SQL Server パフォーマンスの詳細なテストについては、こちらの<a href="https://techcommunity.microsoft.com/t5/SQL-Server/Optimize-OLTP-Performance-with-SQL-Server-on-Azure-VM/ba-p/916794" target="_blank">記事</a>を参照してください。</strong></p>


  <h2>Azure Virtual Machines での SQL Server の概要</h2>


  <p><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-iaas-overview" target="_blank">Azure SQL Virtual Machine</a> service は、VM、ストレージ、SQL Server 構成に対するフルコントロールを提供し、ワークロード &rsquo; の特定の要件に最もコスト効率の高いソリューションを柔軟にデプロイできます。 現在<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-register-with-resource-provider?tabs=powershell" target="_blank">SQL vm リソースプロバイダー</a>によって有効になっているパフォーマンスが最適化された<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-storage-configuration" target="_blank">ストレージ構成</a>を持つ SQL VM を作成し、 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance" target="_blank">SQL 仮想マシンのパフォーマンスのベストプラクティス</a>により、ワークロードのコストパフォーマンスを向上させることができます。</p>


  <p><a href="https://portal.azure.com/#create/Microsoft.FreeSQLServerLicenseSQLServer2017DeveloperonWindowsServer2016" target="_blank">ここ</a>をクリックして、Azure Virtual Machines で無料の SQL Server Developer edition イメージを使用したテストを開始します。</p>


  <p><a href="https://datamigration.microsoft.com/" target="_blank">データ移行ガイド</a>を使用して Azure の移行を開始します。</p>
