### YamlMime:Yaml
ms.openlocfilehash: 72286dae27be03f2d42823be9103f864960c1f64
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139910915"
Slug: backing-up-your-sql-azure-database-using-database-copy
Title: データベースコピーを使用して SQL Azure データベースをバックアップする
Summary: '[この記事は SQL Azure チームによって提供されました。]SQL Azure 用の Service Update 4 のリリースでは、SQL Azure で実行中のデータベースのスナップショットを作成できるようになりました。 これにより、...'
Content: '<p>[この記事は SQL Azure チームによって提供されました。]</p><p>SQL Azure 用の Service Update 4 のリリースでは、SQL Azure で実行中のデータベースのスナップショットを作成できるようになりました。 これにより、運用データベースへの変更を実装する前、または実稼働データベースに似たテストデータベースを作成する前に、バックアップをすばやく作成できます。</p>  <p>バックアップは、ソースデータベースにダウンタイムが発生しないトランザクションメカニズムを使用して、SQL Azure データセンターで実行されます。 データベースは、同じデータセンター内の新しいデータベースに完全にコピーされます。 別のサーバー (同じデータセンター内)、または別のデータベース名を持つ同じサーバーにコピーすることを選択できます。 </p>  <p>コピー処理で作成された新しいデータベースは、コピーが完了した時点で、コピー元データベースとのトランザクション的な一貫性を保持しています。 これは、スナップショットの時刻がコピーの終了時刻であり、コピーの開始時刻ではないことを意味します。</p>  <h2>作業の開始</h2>  <p>Transact SQL は次のようになります。</p>  <pre class="csharpcode"><span class="kwrd">CREATE</span> <span class="kwrd">DATABASE</span> destination_database_name      <span class="kwrd">AS</span> COPY <span class="kwrd">OF</span> [source_server_name.]source_database_name</pre>      <p>Adventure Works データベースを同じサーバーにコピーするには、次のように実行します。</p>    <pre class="csharpcode"><span class="kwrd">CREATE</span> <span class="kwrd">DATABASE</span> [AdvetureWorksBackup] <span class="kwrd">AS</span> COPY <span class="kwrd">OF</span> [AdventureWorksLTAZ2008R2]</pre>      <p>このコマンドは、移行先 SQL Azure サーバーの master データベースに接続しているときに実行する必要があります。</p>    <h2>コピーを監視する</h2>    <p>現在コピーしているデータベースを監視するには、sys.dm_database_copies という名前の新しい動的管理ビューに対してクエリを実行し <b>ます。</b></p>    <p>クエリの例は次のようになります。</p>    <pre class="csharpcode"><span class="kwrd">SELECT</span> *  <span class="kwrd">FROM</span> sys.dm_database_copies</pre>      <p>ここでは、上のアドベンチャー Works コピーからの出力を示します。</p>    <p><a href=""><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="clip_image001" border="0" alt="clip_image001" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7318.clip_5F00_image001_5F00_thumb_5F00_7DEB7A30.png" width="903" height="87"></a></p>    <h2>必要なアクセス許可</h2>    <p>データベースを別の SQL Azure サーバーにコピーする場合は、移行元サーバーと移行先サーバーに、コマンドを実行しているのとまったく同じログイン/パスワードが存在している必要があります。 ログインには、移行元サーバーに対する <b>db_owner</b> 権限と、転送先サーバー上の <b>dbmanager</b> が必要です。 アクセス許可の詳細については、MSDN の記事「 <a href="https://msdn.microsoft.com/en-us/library/ff951624.aspx">SQL Azure でのデータベースのコピー</a>」を参照してください。</p>    <p>1つ注意すべき点は、データベースをコピーするサーバーが、同じサービスアカウントに属している必要がないことです。 実際には、このデータベースコピーコマンドを使用して、データベースをサードパーティに渡したり、転送したりすることができます。 データベースを転送するユーザーが、転送先サーバーに対する適切な権限を持っていて、ログインとパスワードの一致があれば、データベースを転送できます。 この方法については、今後のブログ投稿で説明します。</p>    <h2>別のサーバーにコピーする理由</h2>    <p>同じサーバーまたは別のサーバーにコピーする場合は、データセンターで同じリソース割り当てを取得します。 各サーバーは、物理マシンではなく、エンドポイントにすぎません。詳細については、「」または「ブログ投稿」を参照してください。 それでは、別のサーバーにコピーするのはなぜですか。 2 つの理由があります。</p>    <ul>    <li>新しいデータベースには、SQL Azure ポータルでコピー先データベースとは異なる管理者アカウントを使用する必要があります。 これは、テストサーバーがテストサーバーを所有していて、必要に応じてデータベースを作成および削除できる実稼働データベースからテストサーバーにデータベースをコピーする場合に適しています。</li>      <li>課金のために、新しいデータベースを別のサービスアカウントで使用する場合。</li>  </ul>    <h2>まとめ</h2>    <p>コピーの詳細については、MSDN の記事「 <a href="https://msdn.microsoft.com/en-us/library/ff951624.aspx">SQL Azure でのデータベースのコピー</a>」を参照してください。 質問、懸念事項、コメントがありますか。 これらを下に投稿してください。</p>'
