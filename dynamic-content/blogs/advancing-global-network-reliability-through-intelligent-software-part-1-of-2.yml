### YamlMime:Yaml
ms.openlocfilehash: 49715fc88d00ac42fff550ecb0bee32e677f1ce2
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896662"
Slug: advancing-global-network-reliability-through-intelligent-software-part-1-of-2
Title: インテリジェントなソフトウェアによるグローバルネットワークの信頼性の向上-第2部
Summary: この2部構成のシリーズでは、インテリジェントなソフトウェアによるグローバルネットワークの信頼性の向上について説明し、ネットワーク設計にどのように取り組んでいるか、および信頼性とパフォーマンスの両方を改善するためにどのように継続的に取り組んでいるかについて説明します。
Content: >-
  <p style="margin-left: 40px;">Microsoft のグローバルネットワークは、220を超える azure<em>データセンターを介して、170エッジサイト経由で60の azure リージョンを経由して接続し、世界中の地上波と subsea fiber を超え165000て世界中のリージョンに分散しています。 &rsquo; &ldquo;グローバルネットワークは、世界中の戦略的に配置されたエッジポイント (Pop) でピアリングを使用して、インターネットの残りの部分に接続します。世界中で、世界中の何百万もの人間が Microsoft Azure、Office 365、Dynamics 365、Xbox、Bing、その他多くの Microsoft クラウドサービスにアクセスしています。これにより、グローバルネットワーク上で1日あたり数十億個の要求と、1秒あたりに転送されたテラバイトのデータが変換されます。このグローバルネットワークの信頼性が非常に重要であることは言うまでもあり &rsquo; <a href="https://www.aka.ms/AdvancingReliability" target="_blank">ません。その</a>ため、主要なプログラムマネージャー <strong>Mahesh Nayak</strong>とプリンシパルソフトウェアエンジニア<strong>Umesh Krishnaswamy</strong>に対して、この2部構成の投稿をお寄せください。ネットワーク設計にどのように取り組んでいるか &rsquo; 、および信頼性とパフォーマンスの両方を改善するためにどのように継続的に取り組んでいるか &rsquo; について説明します。 &rdquo; &mdash; </em>Mark Russinovich、CTO、Azure</p>


  <hr>

  <p><em>「 <a href="https://azure.microsoft.com/en-us/blog/advancing-global-network-reliability-through-intelligent-software-part-2-of-2/">インテリジェントソフトウェアパート2によるグローバルネットワークの信頼性の向上</a>」を参照してください。</em></p>


  <p>Microsoft &rsquo; のグローバルネットワークは、ハイウェイシステムに似ています。 ハイウェイ接続の主要都市と道路法では、小さな都市を主要都市に接続します。 このたとえると、Azure リージョンにグループ化されたデータセンターは主要都市であり、エッジ Pop は小さな都市です。 データセンター、エッジ、およびグローバルネットワークのネットワーク資産は、1つのプールによって共有されます。 これらは、すべての車両が使用できる複数のレーンを持つ一般的な幹線道路であると考えてください。 これにより、リソースを共有し、変更に適応し、すべてのお客様にメリットをもたらす機能を開発することができます。 インターネットサービスプロバイダー、クラウドプロバイダー、およびコンテンツ配信ネットワークには、一部のグローバルとローカルのネットワーク &mdash; が似ているため、エッジ pop でネットワークにリンクします。 データセンター間のトラフィックと、1つのデータセンターとエッジとの間のトラフィックは、すべて Microsoft &rsquo; のハイウェイシステムで維持されます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/30da6c42-c33b-4ebb-9289-c4c35876aef9.png"><img alt="Azure Global Network map." border="0" height="525" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5f1b2ac0-1d6e-4331-86e4-748ec2a7a13f.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Azure グローバルネットワークマップ。" width="1024"></a></p>


  <p>ネットワークシステムの信頼性は当社の最優先事項であり、マイクロソフトはシステムを継続的に改善しています。 ハイパースケールのネットワークインシデントは避けられませんが、これらの機会を利用して、さまざまな要因から学習し、可用性の設計原則を検討して、サービスの信頼性を高めることができます。 2020年10月より前に、一部のルートでのネットワークの輻輳が短時間発生し、他の Microsoft クラウドサービスに影響を与えた、まれなサービスインシデントが発生しました。 この特定の問題には優れた学習があり、これらの学習をソフトウェアとプロセス &mdash; に組み込み、以下のように呼んでいます。</p>


  <h2>主要設計原則</h2>


  <p>乗客に高速で信頼性の高い輸送を提供するハイウェイシステムと同様に、次のガイドラインに従って、最大の信頼性とパフォーマンスを提供するようにグローバルネットワークを設計しました。</p>


  <ul>
      <li><strong>冗長トポロジを使用する適切にプロビジョニングされたネットワーク:</strong> 複数の同時障害を処理し、単一障害点を排除するために、冗長性を備えたハードウェアおよびソフトウェアの障害ドメインを設計します。 需要が高い、または危機的な時間帯にサービスレベルの目標を満たすのに十分な容量でネットワークを設計します。</li>
      <li><strong>リスクの変更:</strong> 変更は、大規模なネットワークでは一定です。 ただし、小さな変更によって、重大で不測の影響が生じる可能性があります。 安全なデプロイプラクティスに従って、爆風の半径を減らし、自動ロールバックを使用して、デプロイフェーズ間に十分な焼き付ける時間を与え、手動による介入を排除します。</li>
      <li><strong>ネットワークの管理、監視、および操作を行うインテリジェントなソフトウェアシステム:</strong> 物理的なインフラストラクチャは、ファイバーカット、ハードウェア障害、需要の急増、破壊気象イベント、および破壊などのリスクを常に伴います。 トポロジ、要求、トラフィックルーティング、エラー、パフォーマンスのリアルタイムのビューを維持し、ネットワークイベントから自動的に回復するソフトウェアシステムを構築します。</li>
      <li><strong>近接:</strong> お客様のトラフィックは、ネットワークのパフォーマンスを制御できるように、全体的な取り組みのためにグローバルネットワーク上でフローする必要があります。 リージョン内のすべてのトラフィックは、ネットワーク内に完全にとどまります。</li>
      <li><strong>フィードバックループと AI を使用した改善:</strong> 継続的ラーニングは、信頼性の任務に不可欠です。 すべてのインシデントは、根本原因および関与する要因を特定するために、徹底的に分析されます。問題が発生したことを理解することは、重要な学習機会です。 テレメトリデータと共に自己学習機能を使用して、より迅速なトリアージ、より深い分析、および人のオペレーターへの参加を行います。</li>
  </ul>


  <h2>リスクのない変更</h2>


  <p>変更は、サービスの更新と改善を展開し、脆弱性やインシデントに迅速に対応する必要がある場合に、避けられ、有益です。 変更は、統合環境、カナリア領域、および大量のロールアウトを構築するために徐々にロールアウトされます。この変更プロセスは、ゼロタッチオペレーションシステムによって宣言されています。 検証サイクルでは、グローバルネットワークの完全なエミュレーションに Open network Emulator を使用し、リアルタイム操作チェッカーはネットワークに対する各変更のリスクを検証します。</p>


  <h2>ネットワーク Emulator (1) &mdash; ネットワークのソフトウェアエミュレーションを開く</h2>


  <p>Astronauts は、領域を確保するために準備するときに、各手順を忠実性の高いエミュレーターですべての手順を実施します。 同様に、ネットワークに変更を加えた場合は、忠実性の高いネットワークエミュレーターで検証します。 グローバルネットワーク全体は、1つのネットワーク Emulator (1 つ) と呼ばれるソフトウェアエミュレーション環境でインスタンス化できます。 ネットワークデバイスは、Azure のコンテナーと仮想マシンで実行されているソフトウェアのイメージでエミュレートされます。 複数のネットワークデバイスが1つのホストでエミュレートされるため、大規模なテスト用にネットワーク全体をインスタンス化できます。 ネットワークリンクは、仮想拡張 LAN (VXLAN) トンネルでエミュレートされます。 ネットワークトポロジとデバイスの構成は、運用構成システムからダウンロードされます。 ソフトウェアコントローラーは、エミュレートされたデバイスと対話していることを無関係しています。 これにより、運用環境に入る前に大規模なテストを行うことができます。 各チームは、継続的インテグレーションのために独立した環境を備えています。 また、実際のデバイスと相互運用して、実際のハードウェアのテストに使用することもできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/daf3df45-6fdf-4dca-b741-d5a6c0f7779a.png"><img alt="Azure Global Network emulator." border="0" height="437" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/546a3434-ce05-4117-8a79-a21e144686c7.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="Azure グローバルネットワークエミュレーター。" width="1024"></a></p>


  <p>&nbsp;</p>


  <p>ネットワークデバイスソフトウェアのアップグレード、修正プログラムの展開、新しい構成の変更、または新しいコントローラーソフトウェアの展開を行う必要がある Imagine ます。 変更を実行し、変更をロールバックするプロシージャのメソッド全体は、1つでテストされます。 1つは、構成、デバイスソフトウェア、デバイス間の相互運用性、およびスケーリングの問題にバグを提示しました。 1つの検証は、の安全なデプロイフレームワークに統合されています。</p>


  <p>概要で説明した最近のサービスインシデント (<a href="https://status.azure.com/en-us/status/history" target="_blank">Microsoft と Azure サービスにアクセス</a>する場合は 10/7) については、Azure リージョン間でのネットワークトラフィックのルーティングを制御するコンポーネントのバージョン更新のコードの不具合が原因であり、実稼働のスケールとスコープでのみ発生します。 めったに発生しない問題を発見するには、運用前の検証プロセスを使用して、混乱テストを実行して、仮想化環境で同様の問題が頻繁に発生するようにします。 混乱テストでは、ネットワークが正常な状態に復元されるかどうかを確認するために、ランダムな障害が急増しています。 このインシデントの後、トラフィックエンジニアリングコントローラーの回復性を向上させるために、テストカバレッジと焼き付けるの時間を1つに増やしました。</p>


  <h2>リアルタイム操作チェッカー (ROC) &mdash; ネットワークシミュレーター</h2>


  <p>リアルタイム操作チェッカー (ROC) は、計画的な変更または計画外のダウンタイムがリアルタイムネットワークに与える影響を検証します。 たとえば、ROC は、次の2時間の間、ノードまたはリンクをオフラインにすることが安全であるという質問 &ldquo; に答えます。 &rdquo; 回答は、ネットワークの現在の状態、続行が許可されている他の変更、次の2時間のネットワーク要求、および分離や輻輳が発生する可能性がある新しい障害のリスクによって異なります。 1つのエミュレーションでは、ROC がシミュレートします。</p>


  <p>ROC はライブトポロジとオンデマンドフィードを使用し、デバイスの転送とキュー、および障害および負荷のシナリオでのソフトウェアコントローラーの動作をシミュレートします。 これらのシミュレーションは Azure Batch を使用して並列化され、結果を数分で利用できます。 ROC トークンは、ユーザーが開始してサービスによって開始される変更に対して付与されます。 ROC トークンを使用しなくても、ネットワークの変更は続行できません。 また、お客様のファイバープロバイダーパートナーによるメンテナンスも、リスクを測定し、毎日の操作で是正措置を実行するために ROC でシミュレートされています。</p>


  <h2>ゼロタッチ操作</h2>


  <p>サイズのネットワークを運用している場合は、手動による構成の変更を避ける必要があります。 ネットワークが大きすぎて、人間が監視してすべての正常性信号に応答し、構成の変更に意図した結果があったかどうかを判断することはできません。 自動変更はソフトウェアシステムによってネットワークに配信され、事前チェックと事後チェックでラップされ、変更前後の安全性と正常性を分析します。 変更は直ちにロールバックされるか、正常性シグナルが失敗した場合はブロックされます。</p>


  <p>自動変更は、内部的にヒューズ、Clockwerk、ワープという3つのサービス &mdash; を使用して適用されます。 ヒューズ&#39;の強度は、ネットワークデバイスソフトウェアのアップグレードなどの反復可能なタスクを実行しています。 より安全であるため、ヒューズの方が高速で、エンジニアが解放されます。 Clockwerk とワープは、人間中心またはアドホックな変更で特殊化されています。 エンジニアは、自動チェックとロールバックでラップされた一連の変更を実行するために、ステートフルワークフローを記述します。 ユーザーは、ワークフロー内で人間の入力を提供するために、最新の web インターフェイスを介してワークフローと対話します。 このようなワークフローの例としては、技術者がハードウェアを交換する前に、デバイスからトラフィックをドレインする必要があるネットワークデバイスのハードウェアを置き、安全な方法でデバイスに復元することが挙げられます。 対話型の修復操作を行うために変更が必要な場合、エンジニアは仮想コンソールにコマンドを入力します。これらのコマンドは、デバイスに送信される前に、安全チェックの内部で再度確認され、ラップされます。 これらのシステムはすべて連携して、手動で変更する必要がなくなります。</p>


  <p>すべての自動化された変更は、ROC フレームワークを利用しています。また、さまざまな医療、モニター、およびその他の正常性信号を利用して、変更を継続的に分析し、お客様 &mdash; に悪影響を及ぼすことなくほとんどのヒントでロールバックできるようにします。</p>


  <h2>容量計画</h2>


  <p>最大の信頼性とパフォーマンスを提供するには、容量予測とデプロイ速度が不可欠です。 幹線道路システムの例えとして、容量計画では、レーンまたは新しいハイウェイを追加する場所、追加する必要があるタイミング、トラフィックに備えておく必要があるタイミング、および閉じるものを決定します。</p>


  <p>容量計画のプロセスでは、まずネットワークのトポロジを設定します。 トポロジ分析システムでは、ネットワークと外部ソースの可用性メトリック、新しい Azure リージョン buildouts、および外部の待機時間の測定値を使用して、将来のトポロジを生成します。 需要予測プラットフォームは、さまざまなアルゴリズムを使用して複数の月のトラフィックマトリックスを生成し、それらを実績をスコア付けして、ブレンドされた予測を作成します。 拡張サポート (ORCAS) 用に最適化された反復可能なコンパイラは、将来の要求とトポロジのために大規模なネットワークシミュレーションを実行します。 ORCAS は、信頼性、使用率、効率性をプログラムによって評価し、12万を超えるバックボーンルートと6000の <a href="https://en.wikipedia.org/wiki/Shared_Risk_Resource_Group" target="_blank">共有リスクリンクグループ</a> (SRLG) を介してネットワークを進化させる方法を提案します。</p>


  <p>複数の障害が発生したエンティティに関連する数千のエラーシナリオは、最悪の場合に必要な容量を決定するために、traffic management controller の反応と共にシミュレートされます。 平均経過時間 (MTBF) や平均修復時間 (MTTR) などの履歴パフォーマンスデータは、短期と長期の両方で容量の要件を最適化するために使用されます。 この信号は、キャパシティワークフローオートメーションエンジンに送信され、容量の配信が適時に完了します。 このエンドツーエンドシステムは、 <a href="https://azure.microsoft.com/en-us/blog/azure-responds-to-covid19/" target="_blank">COVID-19 からの需要</a> の変化に対応するために広く使用されており、2か月以内に追加のバックボーン容量の 110 tbps を提供しました。</p>


  <p>光ファイバーパスの多様性は、信頼性の高い容量を確保するために非常に重要です。 ファイバーパスは、道路をサポートする pavement のようなものです。あふれ pavement は、それを使用するすべての道路に影響します。 ファイバーパスとファイバーの交差点、電源、およびコンジット上のその他のメタデータに関する Geo 空間情報は、共有のリスクを計算するために使用されます。 このデータのカバレッジを積極的に追跡し、ファイバパートナーとのパートナーシップによって最新の情報を維持します。</p>


  <h2>まとめ</h2>


  <p>信頼性の高いネットワーク接続は、シームレスな always on クラウドサービスエクスペリエンスに不可欠です。 ソフトウェア主導型のクラウドスケールネットワークを構築しました。これにより、クラウドの需要を迅速に成長させ、絶えず進化していくことをサポートする柔軟性と制御が向上します。</p>


  <p>第2部では、ソフトウェアによって管理されるトラフィック管理についてさらに詳しく説明します。これ &rsquo; により、最新の復元性の最適化、修復ルーティングの異常検出、帯域幅のサービス品質 (QoS)、および継続的な監視が実行されます。</p>


  <p><em>「 <a href="https://azure.microsoft.com/en-us/blog/advancing-global-network-reliability-through-intelligent-software-part-2-of-2/">インテリジェントソフトウェアパート2によるグローバルネットワークの信頼性の向上</a>」を参照してください。</em></p>
