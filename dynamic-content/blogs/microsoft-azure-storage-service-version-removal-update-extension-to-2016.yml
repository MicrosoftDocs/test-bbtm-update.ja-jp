### YamlMime:Yaml
ms.openlocfilehash: 124198e399cb7d48febde3f7ca1b5691caff071a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139894979"
Slug: microsoft-azure-storage-service-version-removal-update-extension-to-2016
Title: 'Microsoft Azure Storage: サービスバージョンの削除の更新-拡張機能2016'
Summary: "Storage サービスでは、バージョン管理を使用して、使用可能な操作、特定の要求の処理方法、および返される内容を制御します。 お客様からのフィードバックに基づいて、この投稿に記載されている具体的な変更を加えています。 \n"
Content: >-
  <p><strong><em>更新: このブログ投稿は適用されなくなりました。Azure Storage サービスバージョン削除プランの最新情報については、以下を参照してください。</em></strong><em><a href="https://azure.microsoft.com/en-us/blog/azure-storage-service-version-update-2016">https://azure.microsoft.com/en-us/blog/azure-storage-service-version-update-2016</a></em></p>


  <p>Storage サービスでは、バージョン管理を使用して、使用可能な操作、特定の要求の処理方法、および返される内容を制御します。</p>


  <p><a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2014/08/05/microsoft-azure-storage-service-version-removal.aspx">2014</a>では、Microsoft Azure Storage サービスの特定のバージョンが2015年12月9日に削除されることを発表しました。 お客様からのフィードバックに基づいて、次の表の詳細に変更を加えています。</p>


  <ol>
      <li>一部の REST API バージョンおよび影響を受けるクライアントライブラリの削除日を遅らせます。 これには、バージョン2009-07-17 以前のすべての REST エンドポイントが含まれます。 このサービス削除の有効日は2016年8月1日です。</li>
      <li>エンドポイント2011-08-18 および2009-09-19 の削除日は無期限に延期されます。 これはすぐに有効になります。 これらのバージョンは、将来のある時点では削除される予定ですが、今後12か月以内には削除されません。 削除の正確な日付は Azure ブログでお知らせします。12か月の通知が提供されます。</li>
      <li>SAS 認証および匿名アクセスの特定のバージョンが含まれていない要求については、サービスバージョン2014-04-05 の使用を開始します。 ただし、すべてのバージョンの SharedKey/SharedKeyLite 認証済み要求は拒否されます。 有効日は2016年8月1日です。</li>
      <li>最後に、バージョン2012-02-12 以降のレベルと可用性をサポートするための変更はありません。</li>
  </ol>


  <table border="1" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: currentColor; border-image: none; border-collapse: collapse; mso-border-alt: solid windowtext .5pt; mso-yfti-tbllook: 1184; mso-padding-alt: 0in 5.4pt 0in 5.4pt;">
      <tbody>
          <tr style="mso-yfti-irow: 0; mso-yfti-firstrow: yes;">
              <td style="background: rgb(166, 166, 166); padding: 0in 5.4pt; border: 1pt solid windowtext; border-image: none; mso-border-alt: solid windowtext .5pt; mso-background-themecolor: background1; mso-background-themeshade: 166;" valign="top" width="239">
              <h1 style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">エンドポイント</h1>
              </td>
              <td style="background: rgb(166, 166, 166); border-width: 1pt 1pt 1pt medium; border-style: solid solid solid none; border-color: windowtext windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-background-themecolor: background1; mso-background-themeshade: 166; mso-border-left-alt: solid windowtext .5pt;" valign="top" width="175">
              <h1 style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">アクション</h1>
              </td>
              <td style="background: rgb(166, 166, 166); border-width: 1pt 1pt 1pt medium; border-style: solid solid solid none; border-color: windowtext windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-background-themecolor: background1; mso-background-themeshade: 166; mso-border-left-alt: solid windowtext .5pt;" valign="top" width="207">
              <h1 style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">[有効]</h1>
              </td>
          </tr>
          <tr style="mso-yfti-irow: 1;">
              <td style="border-width: medium 1pt 1pt; border-style: none solid solid; border-color: currentColor windowtext windowtext; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="239">
              <p align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">2008 (ドキュメント化されていませんが、バージョンなしの要求を処理するために使用)</p>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="175">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">削除</h1>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="207">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">2016年8月1時</h1>
              </td>
          </tr>
          <tr style="mso-yfti-irow: 2;">
              <td style="border-width: medium 1pt 1pt; border-style: none solid solid; border-color: currentColor windowtext windowtext; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="239">
              <p align="justify" class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/en-us/library/windowsazure/dn592122.aspx" target="_blank">バージョン2009-04-14</a></p>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="175">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">削除</h1>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="207">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">2016年8月1時</h1>
              </td>
          </tr>
          <tr style="mso-yfti-irow: 3;">
              <td style="border-width: medium 1pt 1pt; border-style: none solid solid; border-color: currentColor windowtext windowtext; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="239">
              <p align="justify" class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/en-us/library/windowsazure/dn592117.aspx" target="_blank">バージョン2009-07-17</a></p>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="175">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">削除</h1>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="207">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">2016年8月1時</h1>
              </td>
          </tr>
          <tr style="mso-yfti-irow: 4;">
              <td style="border-width: medium 1pt 1pt; border-style: none solid solid; border-color: currentColor windowtext windowtext; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="239">
              <p align="justify" class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/library/azure/dn592121.aspx" target="_blank">バージョン2009-09-19</a></p>

              <p align="justify" class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><u>(.Net クライアントライブラリ v 1.5.1 はこれを使用します)</u></p>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="175">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">延期</h1>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="207">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">該当なし</h1>
              </td>
          </tr>
          <tr style="mso-yfti-irow: 5;">
              <td style="border-width: medium 1pt 1pt; border-style: none solid solid; border-color: currentColor windowtext windowtext; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="239">
              <p align="justify" class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/library/azure/dn592120.aspx" target="_blank">バージョン 2011-08-18</a></p>

              <p align="justify" class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><u>(.Net クライアントライブラリ v1.0 はこれを使用します)</u></p>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="175">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">延期</h1>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="207">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">該当なし</h1>
              </td>
          </tr>
          <tr style="mso-yfti-irow: 6; mso-yfti-lastrow: yes;">
              <td style="border-width: medium 1pt 1pt; border-style: none solid solid; border-color: currentColor windowtext windowtext; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="239">
              <p align="justify" class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/en-us/library/azure/dn592123.aspx" target="_blank">バージョン2012-02-12</a></p>

              <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/en-us/library/azure/dn592124.aspx" target="_blank">バージョン 2013/08/15</a></p>

              <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/en-us/library/azure/mt347886.aspx" target="_blank">バージョン2014-02-14</a></p>

              <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/en-us/library/azure/mt584141.aspx" target="_blank">バージョン2015-02-21</a></p>

              <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><a href="https://msdn.microsoft.com/en-us/library/azure/dd894041.aspx" target="_blank">バージョン2015-04-05</a></p>

              <p class="MsoNormal" style="margin: 0in 0in 0pt; line-height: normal;"><u>&nbsp;</u></p>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="175">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">変更なし</h1>
              </td>
              <td style="border-width: medium 1pt 1pt medium; border-style: none solid solid none; border-color: currentColor windowtext windowtext currentColor; padding: 0in 5.4pt; mso-border-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-top-alt: solid windowtext .5pt;" valign="top" width="207">
              <h1 align="justify" style="margin: 12pt 0in 0pt; line-height: normal; mso-outline-level: 1;">該当なし</h1>
              </td>
          </tr>
      </tbody>
  </table>


  <p>アプリケーションのアップグレードをすぐに計画して実装してください。サービスのバージョンが削除されても影響を受けません。 また、最新の機能を利用できるように、最新のサービスバージョンとクライアントライブラリを定期的に更新することをお勧めします。 これがどのように影響するか、および必要な操作の詳細については、「」を参照してください。</p>


  <h2>これらの変更はどのようにマニフェストに反映されますか。</h2>


  <h4>明示的にバージョン管理された要求</h4>


  <p>削除されたバージョンのいずれかに設定された HTTP x-ms バージョン要求ヘッダーを使用して明示的にバージョン管理されている要求、または削除されたバージョンのいずれかに設定された SAS 要求 api バージョンパラメーターでは、無効なバージョンヘッダーを使用した要求と同様に、HTTP 400 (Bad Request) 状態コードで</p>


  <h4>明示的なバージョンのない SharedKey/SharedKeyLite 要求</h4>


  <p>Account &rsquo; s 共有キーを使用して署名された要求の場合、HTTP x-ms バージョンを使用して明示的なバージョンが指定されていない場合、要求は以前にドキュメント化されていない2008バージョンで処理されていました。 今後、バージョンが明示的に指定されていない場合、処理は HTTP 400 (Bad Request) で失敗します。</p>


  <h4>Sv &rdquo; パラメーターがなく &ldquo; 、バージョンが &ldquo; x-ms の SAS 要求&rdquo;</h4>


  <p>バージョン2012-02-12 より前では、sas 要求では、SAS トークンの sv &rdquo; パラメーターに &ldquo; バージョンが指定されていませんでした。 これらの要求の SAS トークンパラメーターは、2009-07-17 REST 処理バージョンのルールを使用して解釈されています。 これらの要求は引き続き機能しますが、要求は2015-04-05 バージョンで処理されるようになります。 このケースでは、非推奨のバージョンを使用してバージョン &rdquo; x-ms を送信 &ldquo; するか、アカウントに既定のバージョンを設定することをお勧めします。</p>


  <h4>明示的なバージョンのない匿名要求</h4>


  <p>バージョンが指定されていない匿名要求 (認証なし) の場合、要求はバージョンに依存しないと見なされます。 1 2016 年8月有効で、匿名要求はバージョン2015-04-05 で処理されます。 匿名要求に使用されるバージョンは、今後変更される可能性があります。</p>


  <p>注: バージョンなしの要求が新しいサービスバージョンで処理されるときに、互換性に影響する変更があるかどうかは保証されません。 これらの要求のインスタンスには、ブラウザーによって開始される http 要求、および Storage クライアントライブラリを使用しないアプリケーションからのサービスバージョンが指定されていない http 要求が含まれます。 アプリケーションが匿名要求に対して (たとえば、ブラウザーから) のバージョンの utf-8 を送信できない場合は、インスタンスの Blob service に対して、Set Blob Service Properties を使用してアカウントの既定の REST バージョンを設定できます。</p>


  <h4>既定のサービスバージョン</h4>


  <p><a href="https://msdn.microsoft.com/en-us/library/azure/hh452235.aspx">Set Blob Service のプロパティ (REST API)</a>を使用して、要求の既定のバージョンが2009-09-19 以上に設定されている場合は、バージョンセットが使用されます。 既定のサービスバージョンが、現在削除されているバージョンに設定されている場合、その要求は明示的にバージョン管理されていると見なされ、400の無効な要求で &ldquo; 失敗します。 &rdquo; 既定のサービスバージョンがまだサポートされているバージョンに設定されている場合、そのバージョンは引き続き使用されます。</p>


  <h4>クライアント ライブラリ</h4>


  <p>クライアントライブラリとツールの最新バージョンは、この発表の影響を受けません。 ただし、.Net クライアントライブラリ v 1.5.1 は <a href="https://msdn.microsoft.com/library/azure/dn592121.aspx">バージョン 2009-09-19</a> を使用し、そのバージョンが最終的に削除されると影響を受けます。 このライブラリをまだ使用している場合は、バージョンが削除される前に最新の .Net クライアントライブラリに更新してください。 さまざまな REST エンドポイントを使用する .Net クライアントライブラリの一覧については、 <a href="https://msdn.microsoft.com/en-us/library/azure/dn744252.aspx">ここ</a>をクリックしてください。 Non-.Net ライブラリを使用している場合は、影響を受けないようにしてください。 詳細については、この<a href="https://blogs.msdn.com/b/windowsazurestorage/archive/2014/08/05/microsoft-azure-storage-service-version-removal.aspx">記事</a>の「<b>サポートされている最小バージョン/ライブラリ/SDK &rsquo; s </b>」セクションを参照してください。</p>


  <h4>Azure CloudDrive</h4>


  <p>Azure CloudDrive を使用している場合は、REST <a href="https://msdn.microsoft.com/library/azure/dn592121.aspx">バージョン 2009-09-19</a>を使用しているため、この発表の影響を受けません。 CloudDrive の移行について、近い将来に発表いたします。</p>


  <h2>どうすればよいですか。</h2>


  <p>古いバージョンを削除した後もアプリケーションが正常に動作するようにするには、次の操作を行う必要があります。</p>


  <h4>アプリケーションを調べて、使用しているバージョンを確認します</h4>


  <p>まず、アプリケーションで使用している REST バージョンを確認します。 アプリケーションがコントロールの下にあり、Azure Storage を呼び出すすべてのコンポーネントが認識されている場合は、上記の一覧に対してコンポーネントを確認するか、またはストレージを呼び出すために独自のコードを記述している場合はコードを調べて、これを確認できます。</p>


  <p>より強力なチェックとして、またはどのバージョンのコンポーネントが配置されているかが不明な場合は、 <a href="https://msdn.microsoft.com/en-us/library/hh343270.aspx">ログ記録を有効に</a>することができます。これにより、ストレージアカウントに対して行われた要求がログに記録されます。 ログには、 <a href="https://msdn.microsoft.com/en-us/library/hh343259.aspx">要求のバージョンが含ま</a>れています。これを使用すると、計画済みの削除でバージョンを使用して要求が行われているかどうかを確認できます。</p>


  <p>サンプルログエントリを次に示します。この例では、使用されているバージョンが赤色 &ndash; で強調表示されています。この場合、要求は匿名でバージョン管理されていない <b>getblob</b> 要求であり、 <b>2009-09-19</b> バージョンを暗黙的に使用します。</p>


  <p>1.0; 2011-08-09T18:52: 40.9241789 Z;GetBlobAnonymousSuccess; 200; 18; 10; anonymous;;myaccount; blob; &quot;https://myaccount.blob.core.windows.net/thumbnails/lake.jpg? timeout = 30000 &quot; ; &quot;/myaccount/thumbnails/lake.jpg&quot; ; a84aa705-8a85-48c5-b064-b43bd22979c3; 0; 123.100.2.10;<b>2009-09-19</b>; 252; 0; 265; 100; 0; &quot; ;;0x8CE1B6EA95033D5 &quot; ;金曜日、09-8 ~ 11 18:52:40 GMT;、;、 &quot; 8/9/2011 6:52:40 PM ba98eb12-700b-4d53-9230-33a3330571fc&quot;</p>


  <p>上記と同様に、ログエントリを参照して、削除されているサービスバージョンへの参照を識別できます。</p>


  <h4>変更する内容</h4>


  <p>削除するバージョンが使用されていることを示すログエントリが見つかった場合は、そのコンポーネントを検索して、動作し続けることを確認する必要があります (非バージョンの要求は、 &ndash; 上記で説明したとおりに機能しなくなる場合があります)。または、使用するバージョンを変更する適切な手順を実行します。 最も一般的には、次の2つの手順のいずれかが使用されます。</p>


  <ol>
      <li>要求で指定されたバージョンを変更します。 クライアントライブラリを使用している場合は、ライブラリ/ツールの新しいバージョンに移行することで、これを実現できます。 可能であれば、最新バージョンに移行して、最大限の改善と修正を行うことができます。</li>
      <li>既定のサービスバージョンを、サポートされているバージョンのいずれかに設定して、削除する前に動作を検証できるようにします。 これは、明示的なバージョンのない匿名要求にのみ適用されます。</li>
  </ol>


  <p>アプリケーションを新しいバージョンに移行する場合は、サービスのバージョンごとに上記のリンクされた変更リストを確認し、十分にテストして、アプリケーションが更新された後 &rsquo; に正常に動作していることを確認する必要があります。 サービスバージョンの更新には、含まれている構文中断の両方が含まれていることに注意してください (要求は、エラーまたは形式が非常に異なる形式の応答を受信します)。また、セマンティックの中断 (要求は、何かが異なるという応答を受信します)。</p>


  <h4>移行後の検証</h4>


  <p>移行後、ログで使用されている以前のバージョンが見つからなことを確認します。 古い&nbsp; バージョン (たとえば、1 日に 1 回実行されるスケジュールされたタスク) を引き続き使用するタスク/ワークロードがほとんど実行されていない場合は、十分な期間ログを確認してください。</p>


  <h2>まとめ</h2>


  <p>以前のサービス バージョンが <b>2016</b> 年 8 月 1 日に削除された場合に影響を受けずに、アプリケーションのアップグレードを今すぐ開始することをお勧めします。 さらに、ストレージ サービスに対して行われたすべての要求を明示的にバージョン管理するベスト プラクティスと見なされます。</p>


  <p>バージョン<a href="https://msdn.microsoft.com/en-us/library/azure/dd894041.aspx">管理の詳細については、MSDN</a> に関するページをAzure Storageベスト プラクティスを参照してください。</p>
