### YamlMime:Yaml
ms.openlocfilehash: f1d6722501d9272ffcc15662c7f84c2cef32f892
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892744"
Slug: sap-on-azure-architecture-designing-for-performance-and-scalability
Title: SAP on Azure アーキテクチャ - パフォーマンスとスケーラビリティのための設計
Summary: これは、優れた SAP on Azure アーキテクチャの設計に関する4部構成のブログシリーズの第2部です。 ブログシリーズの第1部では、セキュリティの設計に関するトピックについて説明しました。
Content: >-
  <p>これは、SAP on Azure アーキテクチャの設計に関する4部構成のブログシリーズの第2部です。 ブログシリーズの第1部では、 <a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-architecture-designing-for-security/" target="_blank">セキュリティの設計に関する</a>トピックについて説明しました。 堅牢な SAP on Azure アーキテクチャは、セキュリティ、パフォーマンスとスケーラビリティ、可用性と回復性、および効率と操作の柱に基づいて構築されています。 このブログでは、パフォーマンスとスケーラビリティの設計に焦点を当てています。&nbsp;</p>


  <h2>SAP 用のネットワークとストレージにおける Microsoft のサポート</h2>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ded7d4cc-a491-46ad-a1cd-5ff48c75777e.png"><img align="right" alt="image" border="0" height="340" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/f07533ad-ed4a-46d3-a442-ba56e5286e7a.png" style="border: 0px currentcolor; border-image: none; float: right; display: inline; background-image: none;" title="イメージ " width="441"> </a> Microsoft Azure は、SAP アプリケーションを実行するための eminent パブリッククラウドです。 ミッションクリティカルな SAP アプリケーションは、Azure 上で信頼性の高い方法で実行されます。これは、SAP 資産のスケール、機敏性、コスト削減を実現する、ハイパースケールのエンタープライズ実績のあるプラットフォームです。</p>


  <p>SAP HANA 認定された <a href="https://www.sap.com/dmc/exp/2014-09-02-hana-hardware/enEN/iaas.html#categories=Microsoft%20Azure" target="_blank">IaaS クラウドオファリング</a> の最大のポートフォリオにより、お客様は、19 GB から 6 tb までのメモリまで、認定された仮想マシン上で SAP HANA 運用スケールアップアプリケーションを実行できます。 さらに、HANA や BW/4HANA などのスケールアウトアプリケーションを SAP HANA ために、Azure は 2 tb の仮想マシンと最大16ノードをサポートしています (合計で 32 TB)。 現時点で大規模なスケールを必要とするお客様にとって、Azure では、SAP HANA 規模で 20TB (TDIv5 で 24 TB) までのベアメタル HANA l インスタンスを提供し SAP HANA ており、60 TB (TDIv5 を使用した 120 TB) にスケールアウトすることができます。</p>


  <p><a href="https://customers.microsoft.com/en-us/story/cona-services-partner-professional-services-azure" target="_blank">Cona サービス</a>などのお客様は、SAP HANA scale out の実装を使用して、パブリッククラウドの最大の SAP HANA ワークロードの一部を実行しています。&nbsp;</p>


  <h2>パフォーマンスのための設計</h2>


  <p>パフォーマンスは、ビジネスプロセスをデジタル化し、デジタル変革を促進するための主要なドライバーです。 SAP ERP、S/4HANA などの実稼働 SAP アプリケーションは、効率を最大限に高め、エンドユーザーエクスペリエンスを向上させるために、パフォーマンスを高める必要があります。 そのため、Azure 上の SAP アプリケーションのコンピューティング、ストレージ、およびネットワークについて、詳細なサイズ設定の演習を実行することが不可欠です。</p>


  <h3>パフォーマンスのためのコンピューティングの設計</h3>


  <p>一般に、Azure で実装する SAP システムの適切なサイズを確認するには、参照のサイズ設定を使用する方法と SAP クイックサイジングを使用する方法の2つがあります。</p>


  <p>既存のオンプレミスシステムの場合は、システム構成とリソース使用率のデータを参照する必要があります。 システム使用率の情報は、SAP OS コレクターによって収集され、SAP transaction OS07N と、その監視アラートを使用して報告できます。 システムパフォーマンスと統計情報の収集ツールを利用することで、同様の情報を取得できます。 新しいシステムでは、 <a href="https://service.sap.com/quicksizer" target="_blank">SAP クイックサイジング</a>を使用する必要があります。</p>


  <p>次のリンクでは、Azure Virtual Machines 種類ごとにネットワークとストレージのスループットを得ることもできます。</p>


  <ul>
   <li><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes?toc=%2fazure%2fvirtual-n..." target="_blank">Azure での Windows Virtual Machines のサイズ</a></li>
   <li><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-net..." target="_blank">Azure での Linux Virtual Machines のサイズ</a></li>
  </ul>


  <h3>高パフォーマンスの記憶域の設計</h3>


  <p>SAP およびメモリの要件に基づいて適切なデータベース仮想マシンを選択するだけでなく、ストレージ構成が SAP データベースの IOPS とスループットの要件を満たすように設計されていることを確認することが重要です。 選択した仮想マシンに、IOPS とスループットの要件を設定する <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-network%2ftoc.json" target="_blank">機能が</a> あることに注意してください。 Azure premium managed disks は、IOPS とスループットの値を集計するためにストライピングできます。たとえば、5 x P30 のディスクでは、25,000 IOPS と 1000 MB/秒のスループットが提供されます。</p>


  <p>SAP HANA データベースの場合は、運用環境のシナリオに対応する <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/hana-vm-operations-storage" target="_blank">ストレージ構成</a> ガイドラインと、コストを意識した非運用環境のバリアントを公開しています。 運用環境の推奨事項に従うことで、ストレージがすべての SAP HCMT Kpi を正常に通過するように構成されていることが確認されます。これにより、/ボリュームに関連付けられているディスクで <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/how-to-enable-write-accelerator">書き込みアクセラレータ</a> を有効にする必要があります。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0d8e1917-0dab-4e0a-9ce9-f1d2c58087fd.png"><img align="right" alt="image" border="0" height="264" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/47e253bf-ed68-4bdc-84a5-0b4fa25309e0.png" style="border: 0px currentcolor; border-image: none; float: right; display: inline; background-image: none;" title="image " width="603"> </a> Ultra Disks は、SAP HANA や任意のデータベース (SQL、Oracle など) などの i/o 集中型のワークロードに対して、一貫したパフォーマンスと短い待機時間を実現するように設計されています。Ultra disk を使用すると、premium ディスクで必要とされる複数のディスクをストライピングすることなく、1つの Ultra DISKS で最大仮想マシン i/o の制限に至ることができます。</p>


  <p>2019年9月に、Azure Ultra Disk Storage は米国東部2、南部東アジア、北ヨーロッパリージョンで<a href="https://azure.microsoft.com/en-us/blog/announcing-ultra-ssd-the-next-generation-of-azure-disks-technology-preview/" target="_blank">一般公開</a>されています。 および DSv3 と ESv3 の VM タイプでサポートされています。 Windows と Linux OS ホストの両方でサポートされている VM のサイズについては、FAQ を参照してください。 この<a href="https://www.youtube.com/watch?v=D8hMu4jJAwo&amp;feature=youtu.be&amp;t=3558" target="_blank">ビデオでは、Ultra Disk Storage の優れたパフォーマンスを示し</a>ます。</p>


  <h3>パフォーマンスを向上するためのネットワークの設計</h3>


  <p>Azure のフットプリントが増加するにつれて、1つの可用性ゾーンが複数の物理データセンターにまたがることがあります。これにより、ネットワークの待機時間が SAP アプリケーションのパフォーマンスに影響を与える可能性があります。 近接配置グループ (PPG) は、Azure のコンピューティングリソースが物理的にそれぞれの近くに配置されていることを確認し、ネットワーク待機時間 (SAP アプリケーションとデータベース Vm のコロケーション) を実現する論理的なグループです。 詳細については、PPGs を使用した SAP アプリケーションのデプロイに関する <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/sap-proximity-placement-scenarios" target="_blank">詳細なドキュメント</a> を参照してください。</p>


  <p>SAP デプロイアーキテクチャ内で PPGs を検討し、SAP アプリケーションとデータベース Vm で高速ネットワークを有効にすることをお勧めします。 高速ネットワークでは、仮想マシンに対してシングルルート i/o 仮想化 (SR-IOV) を有効にすることで、ネットワークパフォーマンスが向上します。これにより、データパスからホストがバイパスされます。 SAP アプリケーションサーバーからデータベースサーバーへの待機時間は、 <a href="https://techcommunity.microsoft.com/t5/Running-SAP-Applications-on-the/SAP-on-Azure-General-Update-March-2019/ba-p/377456" target="_blank">Abapmeter report/ssacat</a>を使用してテストできます。</p>


  <p><a href="https://docs.microsoft.com/azure/expressroute/expressroute-global-reach" target="_blank">Expressroute Global Reach</a> を使用すると、オンプレミスから異なるリージョンの Azure に expressroute 回線をリンクして、オンプレミスのネットワーク間でプライベートネットワークを作成することができます。 Global Reach を SAP HANA l インスタンスデプロイに使用して、オンプレミスから別のリージョンにデプロイされた HANA l インスタンスユニットへの直接アクセスを有効にすることができます。 また、GlobalReach では、異なるリージョンにデプロイされた HANA l インスタンスユニット間の直接通信を有効にすることができます。</p>


  <h3>スケーラビリティのための設計</h3>


  <p>Azure Mv2 Vm では、すぐに 208 vCPUs/6 TB まで、12 TB まで拡張できます。 12 TB を超えるデータベースが必要な場合は、SAP HANA Large Instances (HLI)、専用のベアメタルオファリングが用意されています。 サーバーハードウェアは、HANA TDI 認定コンピューティング、ネットワーク、およびストレージインフラストラクチャを含む大きなスタンプに埋め込まれています。これには、36 Intel CPU コア/768 GB のメモリの最大サイズ (480 秒の CPU コアと 24 TB のメモリ) のさまざまなサイズが含まれます。</p>


  <h4>Azure グローバルリージョンのハイパースケール</h4>


  <p>Azure には他のクラウドプロバイダーよりも多くのグローバルリージョンがあり、アプリケーションを世界中のユーザーに近づけ、データの保存場所を維持し、お客様に包括的なコンプライアンスと回復性のオプションを提供するために必要なスケールを提供しています。 2019年3四半期のうち、 <a href="https://azure.microsoft.com/en-us/global-infrastructure/regions/" target="_blank">Azure は合計54のリージョンにまたがり、140の国で利用でき</a>ます。</p>


  <p><a href="https://customers.microsoft.com/en-gb/story/carlsberg-consumer-goods-azure" target="_blank">Carlsberg グループ</a>などのお客様は、重要な SAP アプリケーションを中心として、Azure への移行によってイノベーションを実現するために、プラットフォームに変換されています。 Carlsberg の Azure への <a href="https://customers.microsoft.com/en-us/story/carlsberg-group-adds-security-lowers-costs-with-azure-migration-including-sap" target="_blank">移行</a> には、700のサーバーと350アプリケーション &mdash; が含まれています。これには、メインの sap データベース用に8テラバイトを含む、1.6 ペタバイトのデータを含む不可欠な sap アプリケーション &mdash; が含まれます。</p>


  <p>このブログでは、SAP on Azure に対して高いパフォーマンスと拡張性を備えたアーキテクチャの設計に関するいくつかのトピックに触れました。<br>

  お客様が SAP から Azure への道をコンシューマライゼーションにしている間、高パフォーマンスで拡張性の高いアーキテクチャを系統的にデプロイするために、デプロイのさまざまな段階で、Azure を使用して SAP アプリケーションをホストおよび実行する <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/get-started" target="_blank">SAP on Azure</a> ことについて理解を深めていただくことをお勧めします。 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/sap-deployment-checklist" target="_blank">Azure の計画とデプロイのための sap ワークロードチェックリスト</a>をコンパスとして使用して、お客様 &rsquo; の sap 未開発デプロイまたはオンプレミスから Azure への移行プロジェクトのさまざまなフェーズを移動できます。</p>


  <p>このシリーズのブログ #3 では、可用性と回復性の設計について説明します。</p>
