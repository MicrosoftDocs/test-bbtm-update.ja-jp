### YamlMime:Yaml
ms.openlocfilehash: 4b272db0ae0f5f861e2dfac2ffdb81e61b1987aa
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139910699"
Slug: network-isolation-options-for-machines-in-windows-azure-virtual-networks
Title: Windows Azure Virtual Network 内のマシンのためのネットワーク分離のオプション
Summary: 最近、Windows Network Security Whitepaper (こちらからダウンロード) を公開しました。このホワイトペーパーでは、お客様がプラットフォームのネイティブ機能を活用して最適な保護を行う方法に関する分析情報を提供しています。
Content: >-
  最近、お客様がプラットフォームのネイティブ機能を活用して情報資産を最適に保護する方法に関する分析情報を提供する Windows Network Security Whitepaper (こちらから<a href="https://download.microsoft.com/download/4/3/9/43902EC9-410E-4875-8800-0788BE146A3D/Windows%20Azure%20Network%20Security%20Whitepaper%20-%20FINAL.docx">ダウンロード) を</a>公開しました。


  このホワイトペーパーでは、 <strong>Walter Myers</strong> プリンシパル コンサルタントからのこの投稿が展開され、ネットワーク レベルで Virtual Network 内の VM を分離する方法が説明されています。

  <h6>はじめに</h6>

  エンタープライズ環境では、アプリケーションの分離が重要な懸念事項です。企業のお客様は、さまざまな環境を承認されていないアクセスや望ましくないアクセスから保護する必要があります。これには、特定のバック エンド ネットワークまたはサブネットワーク内のマシンで、IP アドレスのホワイトリストに基づいて特定のクライアントまたは他のコンピューターが特定のエンドポイントに接続できるだけの従来のフロントエンドとバック エンドのシナリオが含まれます。これらのシナリオは、クライアント アプリケーションがインターネット、Azure 環境内、または VPN 接続を介してオンプレミスから仮想マシン アプリケーション サーバーにアクセスする場合でも、Windows Azure で簡単に実装できます。

  <h6>マシンの分離オプション</h6>

  このホワイト ペーパーでは、Azure プラットフォーム上でマシンの分離を実装できる基本的なWindowsがあります。

  <ol>
   <li>1 つの仮想ネットワークにデプロイされたマシン間</li>
   <li>個別の仮想ネットワークにデプロイされたマシン間</li>
   <li>両方の仮想ネットワークを使用してオンプレミスから VPN 接続が確立されている個別の仮想ネットワークにデプロイされたマシン間</li>
  </ol>

  これらのオプションについては、以下のセクションで詳しく説明します。


  既定では、Windowsから作成されたサーバー仮想マシンには、2 つのパブリック エンドポイント (具体的には RDP 接続とリモート PowerShell 接続) があります。管理者によって追加される追加のエンドポイントを除き、他のパブリック エンドポイントはありません。これらのエンドポイントと、管理者によって作成されたその他のエンドポイントは、特定の IaaS 仮想マシン上のアクセス制御リスト (ACL) で保護できます。この記事の執筆時点では、ACL は IaaS 仮想マシンでは使用できますが、PaaS Web ロールまたは worker ロールでは使用できません。

  <h6>ネットワーク ACL の動作</h6>

  ACL は、ルールの一覧が格納されたオブジェクトです。 ACL を作成して仮想マシン エンドポイントに適用すると、仮想マシンのホスト ノードでパケット フィルター処理が行います。 つまり、リモート IP アドレスからのトラフィックは、仮想マシンではなく ACL 規則を照合するホスト ノードによってフィルター処理されます。 これにより、仮想マシンがパケット フィルター処理で貴重な CPU サイクルを費やすのを防ぐのです。


  仮想マシンが作成されると、すべての受信トラフィックをブロックする既定の ACL が作成されます。 ただし、入力エンドポイント (ポート 3389 など) が作成された場合は、そのエンドポイントのすべての受信トラフィックを許可する既定の ACL が変更されます。前に説明したように、Azure ギャラリーから仮想マシンを作成すると、次のポータルに示したように、PowerShell エンドポイントと RDP エンドポイントは標準のプライベート ポートを使用して作成されますが、ランダムに生成されたパブリック ポートを使用して作成されます。その後、リモート サブネットからの受信トラフィックはそれらのエンドポイントに制限され、ファイアウォールのプロビジョニングは必要ありません。 特定のポート用にエンドポイントを作成しない限り、受信トラフィックのその他すべてのポートはブロックされます。 既定で、送信トラフィックは許可されています。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7462.Network-Isolation-Options--Img1.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7462.Network-Isolation-Options--Img1.png" border="0"></a>


  ネットワーク ACL を使用すると、次の操作を実行できます。

  <ul>
   <li>リモート サブネット IPv4 アドレスの範囲に基づいて、仮想マシン入力エンドポイントに対する受信トラフィックを選択して許可または拒否する。</li>
   <li>IP アドレスをブラックリストに登録する</li>
   <li>仮想マシンのエンドポイントごとに複数のルールを作成する</li>
   <li>仮想マシンのエンドポイントごとに最大で 50 個の ACL ルールを指定する</li>
   <li>ルールの順序 (最低から最高) を使用して、特定の仮想マシン エンドポイントに適用される正しいルール セットを構成します。</li>
   <li>特定のリモート サブネットの IPv4 アドレスの ACL を指定します。</li>
  </ul>

  そのため、ネットワーク ACL は、仮想マシンのパブリック エンドポイントを保護し、その種類のアクセスを制御するための鍵です。現時点では、IaaS 仮想マシン入力エンドポイントのネットワーク ACL を指定できます。このエンドポイントを使用すると、インターネットから各仮想マシンへのアクセスを制御できます。エンドポイントを指定しない限り、仮想ネットワーク内の仮想マシンは着信トラフィックを受信しません。これは、仮想マシンごとにオーバーライドできるネットワーク レベルの既定の拒否 ACL を持つことと同じです。現在、仮想ネットワークに含まれる特定のサブネットで ACL を指定することはできません。今後、これを確認しています。

  <h6>オプション 1: 1 つのサブネット内のサブネットVirtual Network</h6>

  現在、Windows Azure では、単一の仮想ネットワーク内のサブネット間のルーティングが提供されますが、内部 DIP アドレスに関して、どの種類のネットワーク ACL 機能も提供しません。そのため、1 つの仮想ネットワーク内のマシンへのアクセスを制限するには、次の図に示す Windows Firewall with Advanced Security を利用する必要があります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6574.ashwin-VN.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6574.ashwin-VN.png" border="0"></a>


  サーバーをセキュリティで保護するために、Windowsファイアウォールを構成してすべての受信接続をブロックし、受信規則を設定して以下を決定します。


  1) 接続を受け入れるローカル ポート、


  2) 接続を受け入れるリモート ポート、


  3) 受け入れられるリモート IP アドレス


  4) 承認されたユーザーが接続できるもの、


  5) 承認されたコンピューターが接続できるもの


  この場合、ファイアウォールの例外には、独自のサブネット内および仮想ネットワーク用に構成された他のサブネット間のローカル動的 IP (DIP) アドレスが含まれます。パブリック エンドポイントは、ネットワーク ACL で保護されます。もちろん、ファイアウォールの例外には、ネットワーク ACL で確立されたパブリック エンドポイントのプライベート ポートを含める必要があります。

  <h6>オプション 2: 異なる仮想ネットワーク内のサブネット</h6>

  他の Azure 仮想ネットワークにデプロイされた他のマシン、または仮想ネットワークに関連付けされていない他の Azure クラウド サービス内のマシン、または Windows Azure プラットフォームの外部のマシンから仮想マシンを保護するために、Windows Azure ネットワーク ACL 機能を使用して、仮想マシンへのアクセス制御が提供されます。これは、アプリケーションの分離のために Windows Azure で最も自然なシナリオです。既定では、仮想マシンで許可されるアクセスは、既定で提供される RDP およびリモート PowerShell パブリック エンドポイントだけであるからです。別の仮想ネットワーク内の別の仮想マシンにアクセスする Azure 仮想マシン (PaaS または IaaS) の場合、その仮想 IP (VIP) アドレスは、1 つの仮想ネットワーク内の DIP アドレスとは異なると見なされます。そのため、許可 ACL が特定の仮想マシン エンドポイントに設定されている場合、その ACL は、接続を行う必要があるマシンのパブリック VIP を考慮します。これは次の図で確認できます。


  "許可" または "拒否" を指定する規則を作成することで、仮想マシン入力エンドポイントのネットワーク トラフィック (管理ポータルまたは PowerShell) を選択的に許可または拒否できます。 既定では、エンドポイントが作成されると、すべてのトラフィックがエンドポイントに対して許可されます。そのため、許可/拒否ルールを作成し、適切な優先順位に配置して、仮想マシン エンドポイントへの到達を許可するネットワーク トラフィックをきめ細かく制御する方法を理解することが重要です。1 つ以上の "許可" 範囲を追加すると、既定で他のすべての範囲<em></em>が表示されます。 最初の許可範囲から先に進<em></em>むと、許可された IP 範囲からのパケットだけが仮想マシン エンドポイントと通信できます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8360.ashwin-subscription.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8360.ashwin-subscription.png" border="0"></a>


  ここでは、同じクラウド サービス内に 2 つのフロントエンド仮想マシンと、SQL Server を備える 1 つのバック エンド仮想マシンを含む例を実際に使用する方法を見てみないようにしましょう。これら 2 つのフロントエンド マシンSQL Serverアクセスできるよう、セキュリティ保護を行いたいと思っています。次のスクリーンショットでは、パブリック VIP アドレス 168.62.207.83 の canis-testvms という名前のクラウド サービスが表示されています。このサービスには、<strong>canis-testvm1 と canis-testvm2</strong> という名前<strong></strong>の 2 つのフロントエンド仮想マシンが含まれているものがあります。<strong></strong>


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6320.Network-Isolation-Options--Img2.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6320.Network-Isolation-Options--Img2.png" border="0"></a>


  次のスクリーンショットでは、<strong>frontEnd</strong> サブネットに、2 つのフロントエンド マシン <strong>canis-testvm1</strong> と <strong>canis-testvm2participating</strong> が、<strong>testvirtualnetwork</strong> というタイトルの仮想ネットワークに表示されています。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5050.Network-Isolation-Options--Img3.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5050.Network-Isolation-Options--Img3.png" border="0"></a>


  次に示すのは、<strong>BackEndSubnet</strong> サブネット内の <strong>waltervirtualnetwork</strong> というタイトルの仮想ネットワークに参加する、バック エンド SQL Server マシン <strong>sql12-01</strong> のスクリーンショットです。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2627.Network-Isolation-Options--Img4.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2627.Network-Isolation-Options--Img4.png" border="0"></a>


  次に、仮想マシンへのアクセスを構成SQL Server必要があります。以下に示す最初の操作は、パブリック ポートとして 14333 を使用してプライベート ポート 1433 のパブリック エンドポイントを確立する方法です。上で説明したように、既定の ACL では、リモート アドレスがエンドポイントにアクセスできるので、ネットワーク ACL を使用してこれを解決する必要があります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6787.Network-Isolation-Options--Img5.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6787.Network-Isolation-Options--Img5.png" border="0"></a>


  次に、下部にある <strong>[ACL</strong> の管理] ボタンを選択すると、次に示す [エンドポイント <strong>ACL</strong> の管理] ダイアログが表示されます。最初に追加する ACL は、すべてのリモート アドレスをロックアウトする "拒否" アクションで既定の ACL をオーバーライドする ACL です。 次に、フロントエンド マシンを含むクラウド サービスの VIP アドレスを指定するために、さらに高い ACL を追加します。これを/32 ネットワーク (168.62.207.83/32) を使用して CIDR 形式で入力します。これは、フロントエンド マシンを使用するクラウド サービスによって表される単一の IP アドレスにマップされます。SQL サーバーの観点から見ると、両方のフロントエンド クライアントには、クラウド サービス内の NAT である 168.62.207.83 IP アドレスがあります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1780.Network-Isolation-Options--Img6.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1780.Network-Isolation-Options--Img6.png" border="0"></a>


  そのため、パブリック VIP アドレスを使用して VPN 接続を使用せずに仮想ネットワーク全体のエンドポイントをセキュリティで保護する方法、または VPN 接続を使用しているが、DIP アドレスを利用するためにオンプレミスルーターを経由してルーティングしたくない場合は、この方法を使用します。次のオプションでは、VPN が追加された DIP について説明します。

  <h6>オプション 3: 異なる仮想ネットワークと VPN 内のサブネット</h6>

  VPN 接続が関係する場合、仮想ネットワークの既定の分離は変更されませんが、ネットワーク接続の追加オプションが表示されます。この具体的な例については、こちらを参照してください。このシナリオでは、複数の仮想ネットワークに参加するオンプレミスのサブネットは、ファイアウォール規則によってブロックされていない場合に、DIP アドレスを介して両方の仮想ネットワーク内の仮想マシンにフル アクセスできます。そのため、ここでは、互いにアドレス空間にアクセスする必要があるオンプレミスの場所で 2 つの仮想ネットワークを終了します。これを実現するには、"スポーク対スポーク" 構成で、オンプレミスルーターをハブとして構成します。ルーターはハブであり、"スポーク" は Azure 側でサイト間接続を終了する VPN デバイスです。


  スポーク対スポーク構成を機能させるには、まず、Azure 側のゲートウェイで特定の仮想ネットワークに対応するローカル ネットワークを構成する必要があります。このネットワークを使用すると、その仮想ネットワークが他の仮想ネットワークのアドレス空間にアクセスできます (もちろん、別のアドレス空間にする必要があります)。これは、管理ポータルのローカル ネットワーク構成で以下で確認できます。ローカル ネットワークごとに、各仮想ネットワークがアクセスする必要があるオンプレミスの 192.168.1.0/24 ローカル ネットワーク アドレス空間があります。また、アクセスする他の仮想ネットワークに対応する仮想ネットワークごとに追加のアドレス空間があります。<em></em>


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3036.Network-Isolation-Options--Img7.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3036.Network-Isolation-Options--Img7.png" border="0"></a>


  次に、オンプレミスの VPN デバイス (Cisco ASA 5505) を構成する必要があります。これは基本的に、一方の仮想ネットワークから、両方の側のもう一方の仮想ネットワークにアクセス リストを既存のアクセス リストに追加する必要があります。たとえば、ローカルのオンプレミス ネットワークに 192.168.1.0/24 アドレス空間がある場合、 仮想ネットワークの 1 つには 10.5.0.0/16 アドレス空間があります。その後、ローカル ネットワークから仮想ネットワークへのアクセス リスト エントリ (通常は既に設定されている) と、10.5.0.0.0/16 仮想ネットワークから 10.4.0.0/16 仮想ネットワークへの別のアクセス リスト エントリが必要です。 次に示します。


  access-list AzureAccess 拡張許可 IP 192.168.1.0 255.255.255.0 10.4.0.0 255.255.0.0


  access-list AzureAccess 拡張許可 IP 10.5.0.0 255.255.0.0 10.4.0.0 255.255.0.0


  次に、次に示す 10.5.0.0/16 仮想ネットワークに対して同じことを行い、10.4.0.0/16 仮想ネットワークから 10.5.0.0/16 ネットワークへのアクセス リスト エントリを作成します。


  access-list AzureAccess2 拡張許可 IP 192.168.1.0 255.255.255.0 10.5.0.0 255.255.0.0


  access-list AzureAccess2 拡張許可 IP 10.4.0.0 255.255.0.0 10.5.0.0 255.255.0.0


  次の手順では、次に示す 2 つの "外部" ネットワーク間に NAT を設定します。


  オブジェクト グループ ネットワーク VPN_OUT_AZ1


  network-object 10.4.0.0 255.255.0.0


  object-group network VPN_OUT_AZ2


  network-object 10.5.0.0 255.255.0.0


  nat (外部、外部) 1 ソースの静的VPN_OUT_AZ1 VPN_OUT_AZ1、宛先VPN_OUT_AZ2 VPN_OUT_AZ2プロキシ arp ルート参照なし


  このため、各仮想ネットワークは DIP アドレスを使用して VPN ゲートウェイ経由で別の仮想ネットワークにアクセスできます (これは、上記の <em>1 つの Virtual Network シナリオ内のサブネット </em>に相当します)。ファイアウォールルールによって禁止されることはありません。これは、ネットワークトラフィックがハブを経由して転送され、トランザクションのコストと待機時間が増加するため、一部のシナリオには適していませんが<em> 、外部エンド</em> ポイントを公開したくない組織では、これは許容できるトレードオフである可能性があります。また、パブリックエンドポイントを使用して2つ (またはそれ以上) の仮想ネットワーク間の接続を確立し、IPsec とグループポリシーオブジェクトを使用してパブリックエンドポイントをさらにセキュリティで保護することもできます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4087.Ashwin-Subscription-_2800_2_2900_.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4087.Ashwin-Subscription-_2800_2_2900_.png" border="0"></a>

  <h6>Windows ファイアウォール/IPsec を使用したエンドツーエンドのネットワーク通信のセキュリティ保護</h6>

  IPsec 統合を使用すると、セキュリティが強化された Windows ファイアウォールによって、認証されたエンドツーエンドのネットワーク通信を強制する簡単な方法が提供されます。 信頼されたネットワーク リソースへのスケーラブルで多層型のアクセスを提供して、データの整合性を維持し、必要に応じてデータの機密性を保護します。インターネットプロトコルセキュリティ (IPsec) では、暗号化セキュリティサービスを使用して、インターネットプロトコル (IP) ネットワーク経由の通信を保護します。


  次の図に2つの仮想ネットワークがある例として、"セキュリティが強化されたファイアウォール Windows、または PowerShell を使用してコンピューターをセキュリティで保護する IPsec 証明書を使用して、DIP アドレス10.5.1.5 がオンプレミスドメインに参加していないコンピューターが表示されます。これは、保護されたポートにアクセスするすべてのコンピューターに IPsec 証明書も必要になることを意味します。また、10.4.1.6 と10.5.1.4 という2つのドメインに参加しているマシンもあります。これは Windows ファイアウォール、PowerShell スクリプト、またはグループポリシーを介して IPsec 接続を要求するように構成できます。これらのマシンは、内部 DIP アドレス経由でアクセスしたか、パブリック VIP アドレスを介してアクセスされたかにかかわらず、完全に保護できます。パブリック VIP アドレスの場合は、ネットワーク Acl 機能を利用して、許可される外部 IP アドレスのホワイトリストを作成します。これらの外部クライアントコンピューターには IPsec 証明書が必要です。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7558.ashwin-sbscription-_2800_3_2900_.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7558.ashwin-sbscription-_2800_3_2900_.png" border="0"></a>

  <h6>IPsec を1台の仮想マシンに手動で適用する</h6>

  仮想ネットワーク内の仮想マシンに対して最大限の保護を提供するために、Windows ファイアウォールを最初にアクティブ化して、すべての受信接続をブロックするように構成することができます。その後、必要に応じてポートを開き、セキュリティで保護された接続を適用するために IPsec を追加して、それらの接続を暗号化することもできます。Windows Server 2008 以降で IPsec を手動で構成するには Windows ファイアウォールを起動し、[受信の規則] ノードを選択して、次のように新しい規則を作成します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7853.Network-Isolation-Options--Img8.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7853.Network-Isolation-Options--Img8.png" border="0"></a>


  次に示すように、IPsec でセキュリティ保護する特定のポートを選択できます。


  次に、目的のポートへの接続をセキュリティで保護するように指定します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8420.Network-Isolation-Options--Img10.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8420.Network-Isolation-Options--Img10.png" border="0"></a>


  [ <strong>カスタマイズ...</strong> 次に示すように、表示されるダイアログで IPsec 設定を指定します。ここからウィザードを続行し、ルールに名前を付けます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4532.Network-Isolation-Options--Img10.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4532.Network-Isolation-Options--Img10.png" border="0"></a>


  [ <strong>カスタマイズ...</strong> 次に示すように、表示されるダイアログで IPsec 設定を指定します。ここからウィザードを続行し、ルールに名前を付けます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0474.Network-Isolation-Options-Img11.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0474.Network-Isolation-Options-Img11.png" border="0"></a>


  PowerShell を使用した IPsec 構成のスクリプト作成に関心がある場合は、 <a href="https://technet.microsoft.com/en-us/library/hh831755.aspx">こちら</a>のリンクを参照してください。

  <h6>ドメインでグループポリシーを使用して Virtual Machines の IPsec ポリシーを設定する</h6>

  VPN 接続を介してオンプレミスのネットワークに接続されている仮想ネットワークの場合、仮想ネットワーク内のコンピューターはオンプレミスのドメインに参加できます。オンプレミスドメインに参加している場合は、IPsec ポリシーにグループポリシーを適用して複数のコンピューターを構成し、組織のポリシーに基づいてこれらのコンピューターを確実に保護することができます。IPsec ポリシーの作成の詳細についてはグループポリシー <a href="https://technet.microsoft.com/en-us/library/cc730656.aspx">こちら</a>を参照してください。


  ドメインコントローラーから Windows azure のドメインに参加しているサーバーに特定のポリシーを適用したいので、最初のタスクでは、次に示すように、これらのマシンを<strong>azure servers</strong>という名前の独自の OU に追加します。このチュートリアルでは、 <strong>canis-01</strong> という名前の仮想マシンを使用します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6622.Network-Isolation-Options-Img12.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6622.Network-Isolation-Options-Img12.png" border="0"></a>


  仮想マシンの現在のファイアウォールの状態は、sql12-01 です。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7041.Network-Isolation-Options--Img13.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7041.Network-Isolation-Options--Img13.png" border="0"></a>


  ドメインコントローラーに戻り、[<em>管理ツール</em> ] メニューからグループポリシー管理コンソールを起動します。次に、ドメイン canisnetworks.com を展開し、[グループポリシー Objects] ノードを選択して右クリックします。次に示すように、 <em>新しい</em> メニュー項目を選択します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4150.Network-Isolation-Options-Img14.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4150.Network-Isolation-Options-Img14.png" border="0"></a>


  [ <strong>新しい gpo</strong> ] ダイアログボックスで、新しい gpo にわかりやすい名前を入力し、[ <strong>OK</strong> ] をクリックします。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5734.Network-Isolation-Options--Img15.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5734.Network-Isolation-Options--Img15.png" border="0"></a>


  Gpo が GPO オブジェクトの一覧に追加されたので、次に示すように、右クリックして [ <em>編集</em> ] メニュー項目を選択して構成する必要があります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6560.Network-Isolation-Options--Img16.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6560.Network-Isolation-Options--Img16.png" border="0"></a>


  グループポリシー管理エディターが表示されるようになりました。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6082.Network-Isolation-Options--Img17.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6082.Network-Isolation-Options--Img17.png" border="0"></a>


  次のように2つの Gpo を追加します。

  <ol>
   <li>ドメインプロファイルを有効にします。</li>
   <li>IPsec によって保護されるように SCOM 監視ポート5723を構成します。(これにより、オンプレミスの SCOM インストールから安全に外部 IP アドレスを使用して、この GPO が適用されているコンピューターを監視できるようになります)。</li>
  </ol>

  次に、コンピューターの構成を拡張しました。ポリシー |設定ツリーを Windows Windows、[セキュリティが強化されたファイアウォール] ノードに移動します。次に、[ <em>Windows ファイアウォールのプロパティ</em>] リンクを選択します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1425.Network-Isolation-Options--Img18.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1425.Network-Isolation-Options--Img18.png" border="0"></a>


  下に表示されるダイアログでは、ドメインプロファイルのファイアウォールの状態を "オフ" から "オン (推奨)" に変更します。次に、[ <strong>OK</strong> ] をクリックします。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4403.Network-Isolation-Options--Img19.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4403.Network-Isolation-Options--Img19.png" border="0"></a>


  次に、ドメインプロファイルで Windows ファイアウォールがオンになっていることがわかります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1307.Network-Isolation-Options--Img20.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1307.Network-Isolation-Options--Img20.png" border="0"></a>


  次に示すように、左側の [ <em>Windows ファイアウォール</em>] ノードを展開し、[<em>受信の規則</em>] ノードを選択します。現在、ルールは存在しないため、ルールの一覧は空です。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4555.Network-Isolation-Options-_2D00_-Img21.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4555.Network-Isolation-Options-_2D00_-Img21.png" border="0"></a>


  [<em>受信の規則</em>] ノードを右クリックし、[<em>新しい規則</em>] を選択します。 ポップアップメニューから、次のように表示されます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0317.Network-Isolation-Options-Img22.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0317.Network-Isolation-Options-Img22.png" border="0"></a>


  IPsec を使用してポートをセキュリティで保護するために個々のコンピューターでルールを作成したときと同じように、 <strong>新しい受信の規則ウィザード</strong> で同じ手動の手順を実行します。次に、ポートの規則を選択します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6646.Network-Isolation-Options--Img23.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6646.Network-Isolation-Options--Img23.png" border="0"></a>


  [ <strong>プロトコルおよびポート</strong> ] ウィザードページで、目的のポートを入力します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2654.Network-Isolation-Options--Img24.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2654.Network-Isolation-Options--Img24.png" border="0"></a>


  <strong>操作</strong>ウィザードページで、[<em>セキュリティで保護されている場合は接続を許可する] オプション</em>を選択し、[<strong>カスタマイズ...</strong> ] を選択します。 を追加します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0552.Network-Isolation-Options-Img25.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0552.Network-Isolation-Options-Img25.png" border="0"></a>


  次に示すように、ダイアログの [認証と整合性の保護を強制する] オプションを選択して、セキュリティ設定を選択します。次に、[ <strong>OK</strong> ] をクリックします。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5277.Network-Isolation-Options--Img26.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5277.Network-Isolation-Options--Img26.png" border="0"></a>


  [ <strong>次へ</strong> ] ボタンを選択し、[ <strong>ユーザー</strong> と <strong>コンピューター</strong> ] ウィザードページの既定値をそのまま使用します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2654.Network-Isolation-Options-Img27.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2654.Network-Isolation-Options-Img27.png" border="0"></a>


  <strong>プロファイル</strong>ウィザードページで、次のようにドメインプロファイルを選択します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5305.Network-Isolation-Options-Img28.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5305.Network-Isolation-Options-Img28.png" border="0"></a>


  最後に、次に示すように、新しい受信規則に名前を付けます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4861.Network-Isolation-Options--Img29.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4861.Network-Isolation-Options--Img29.png" border="0"></a>


  これで GPO の設定が完了したので、新しい受信規則がグループポリシー管理エディターの受信規則の一覧に表示されるようになりました。次に、元のグループポリシー管理コンソールに戻るエディターを閉じます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8540.Network-Isolation-Options-Img30.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8540.Network-Isolation-Options-Img30.png" border="0"></a>


  これで、GPO のセットアップが完了したので、この GPO を Azure servers OU にリンクする必要があります。ここで、Azure Servers OU を右クリックし、[<em>既存の GPO のリンク</em>] を選択します。 ポップアップメニューから、次のように表示されます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1031.Network-Isolation-Options--Img31.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/1031.Network-Isolation-Options--Img31.png" border="0"></a>


  <strong>[Gpo の選択</strong>] ダイアログで、[新しい gpo] を選択し、ダイアログを閉じます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7558.Network-Isolation-Options-Img32.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7558.Network-Isolation-Options-Img32.png" border="0"></a>


  これで、次に示すように、GPO が Azure Servers OU に関連付けられます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2018.Network-Isolation-Options--Img33.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2018.Network-Isolation-Options--Img33.png" border="0"></a>


  ここで、仮想マシン (canis-01) に戻り、GPO を適用して、GPO が適用されたことを確認します。次に、コマンドプロンプトで、 <strong>gpupdate/force</strong> コマンドを入力します。ポリシーの更新が正常に完了したことを以下に示します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7823.Network-Isolation-Options--Img34.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7823.Network-Isolation-Options--Img34.png" border="0"></a>


  GPO が適用されたことを確認するために、次に示すように、 <strong>gpresult/r/scope computer</strong>コマンドを入力します。ご覧のとおり、GPO が適用されていることを確認しました。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7802.Network-Isolation-Options--Img35.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7802.Network-Isolation-Options--Img35.png" border="0"></a>


  ここで Windows ファイアウォールを開き、両方の GPO オブジェクトを確認してみましょう。Windows ファイアウォールの最上位ノードから、ドメインプロファイルの Windows ファイアウォールがオンになっていることを確認できます。また、ファイアウォールの状態にグループポリシー設定が適用されていることを示す通知が表示されます (具体的には、ドメインプロファイルの場合)。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5875.Network-Isolation-Options--Img36.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5875.Network-Isolation-Options--Img36.png" border="0"></a>


  [ <em>受信の規則</em> ] ノードを選択した場合は、次に示すように、IPSec の受信規則がポート5723に適用されていることを確認できます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3487.Network-Isolation-Options--Img37.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3487.Network-Isolation-Options--Img37.png" border="0"></a>

  <h6>Virtual Machines からの発信インターネット接続の制限</h6>

  一般的な理由として、企業のお客様は、サーバーからの送信インターネットアクセスを制限するのが一般的です。特に、社外で共有されている場合には、中規模または高レベルのビジネスに影響を与える機密データを含むバックエンドサーバーです。パブリッククラウドでは、企業のお客様がクラウドプラットフォームについて検討することによってクラウドプロバイダーに多くの信頼を既に持っているため、これはより顕著になります。また、セキュリティ制御がオンプレミスより堅牢であるとは言えません。さいわいにも、Azure 仮想マシンと PaaS コンピューター Windows ドメインに参加しており、既に説明したとおりに適用グループポリシーことができるため、エンタープライズカスタムは使い慣れた手法を使用してサーバーを保護し、サーバー自体が機密情報を共有できないようにすることができます。このチュートリアルでは、仮想マシンからの発信インターネット接続を制限する方法について説明します。ここではグループポリシーを使用しませんが、IPsec の場合と同じ方法で適用されます。


  まず、次に示すように、前のセクションで使用した SQL Server 仮想マシンから始めます。グループポリシーを適用した後に、セキュリティが強化されたファイアウォールを Windows しました。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4024.Network-Isolation-Options-Img38.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4024.Network-Isolation-Options-Img38.png" border="0"></a>


  このコンピューターは現在インターネットにアクセスできます。また、SQL Server Management Studio から別のオンプレミスの SQL Server にアクセスすることもできます。VPN の構成で定義されているオンプレミスのサブネット (192.168.1.0/24) にのみアクセスできるように、仮想マシンを制限したいと考えています。最上位ノードを右クリックして [プロパティ] ページを表示し、次に示すように、既定で送信接続が許可されていることを確認しました。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3060.Network-Isolation-Options--Img39.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3060.Network-Isolation-Options--Img39.png" border="0"></a>


  次に示すように、これを "Block" に変更します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0243.Network-Isolation-Options-Img40.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/0243.Network-Isolation-Options-Img40.png" border="0"></a>


  次に示すように、オンプレミスの SQL Server やインターネットにアクセスできなくなります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7065.Network-Isolation-Options-Img42.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7065.Network-Isolation-Options-Img42.png" border="0"></a>


  ここで Windows ファイアウォールの [<em>送信の規則</em>] ノードをクリックし、右クリックして、[<em>新しい規則</em>] を選択します。をポップアップメニューから開始します。次に示すように、<strong>新しい送信の規則ウィザード</strong>の [<strong>規則の種類</strong>] ページでカスタム規則を選択します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2541.Network-Isolation-Options--Img43.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2541.Network-Isolation-Options--Img43.png" border="0"></a>


  [ <strong>プログラム</strong> ] ページで、既定値をそのまま使用します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2110.Network-Isolation-Options-Img44.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2110.Network-Isolation-Options-Img44.png" border="0"></a>


  [ <strong>プロトコルおよびポート</strong> ] ページで、次のように TCP プロトコルを選択します。


  次に、[ <strong>スコープ</strong> ] ページがあります。リモート IP アドレスのオプションを "これらの IP アドレス:" に変更し、[<strong>追加</strong>] を選択します。 を追加します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4544.Network-Isolation-Options-Img46.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/4544.Network-Isolation-Options-Img46.png" border="0"></a>


  表示されるダイアログでは、次に示すように、この仮想マシンがアクセスできる唯一の IP アドレスセットとして、オンプレミスのサブネットを指定します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8787.Network-Isolation-Options-Img47.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8787.Network-Isolation-Options-Img47.png" border="0"></a>


  最終的な <strong>スコープ</strong> ページは次のようになります。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2727.Network-Isolation-Options-Img48.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2727.Network-Isolation-Options-Img48.png" border="0"></a>


  [ <strong>操作</strong> ] ページで、[接続を許可する] オプションを選択します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6318.Network-Isolation-Options-_2D00_-Img49.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6318.Network-Isolation-Options-_2D00_-Img49.png" border="0"></a>


  次に、[プロファイル <strong>] ページ</strong> が表示されます。ここで、目的のためにドメイン プロファイルのみを選択します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6470.Network-Isolation-Options--Img50.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6470.Network-Isolation-Options--Img50.png" border="0"></a>


  最後の [ <strong>名前] ページ</strong> で、次に示す "オンプレミス サブネットへの送信接続" という名前を新しい規則に付けます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3884.Network-Isolation-Options-Img51.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/3884.Network-Isolation-Options-Img51.png" border="0"></a>


  送信規則ウィザードが完了し、次の新しい規則が表示されます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7345.Network-Isolation-Options-Img52.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7345.Network-Isolation-Options-Img52.png" border="0"></a>


  これで、オンプレミスの SQL Server またはオンプレミス サブネット内の他のサーバーに接続できますが、必要に応じてインターネットに接続できません。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8345.Network-Isolation-Options--Img53.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8345.Network-Isolation-Options--Img53.png" border="0"></a>


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7673.Network-Isolation-Options--Img54.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/7673.Network-Isolation-Options--Img54.png" border="0"></a>


  そのため、この仮想マシンがインターネットにアクセスするのを実質的に制限しました。しかし、現在は、Azure 環境内の他のWindowsにアクセスできません。これは、先に作成した送信規則に個々の IP アドレスまたは IP アドレス範囲を追加することで解決できます。たとえば、次に示す URL pcv94pjwnj.database.windows.net を使用して Azure SQL Database サーバーにアクセスするには、この仮想マシンで SQL Server Management Studio を使用するとします。<strong></strong>


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6518.Network-Isolation-Options-Img55.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/6518.Network-Isolation-Options-Img55.png" border="0"></a>


  サーバーに ping を実行し、次に示す IP アドレスを見つける。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5756.Network-Isolation-Options--Img56.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/5756.Network-Isolation-Options--Img56.png" border="0"></a>


  次に、次に示すリモート IP アドレスのホワイトリストに個々の IP アドレスを追加します。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8176.Network-Isolation-Options--Img57.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8176.Network-Isolation-Options--Img57.png" border="0"></a>


  その後、サーバーにアクセスできます。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8585.Network-Isolation-Options--Img58.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/8585.Network-Isolation-Options--Img58.png" border="0"></a>


  Azure プラットフォームから IP アドレス範囲をWindowsする場合は、Azure データセンターの IP 範囲の一覧をここからダウンロード<a href="">できます</a>。選択できる範囲は多数あるので、選択して、実際に使用するデータセンターに適用されるエントリのみを追加する方が最適です。私は主に米国西部データセンターを使用していますが、米国北部に古いデータベース サーバーがまだいくつかあるので、この例では、仮想マシンが米国北部のすべてにアクセスできる次のエントリを追加することもできます。送信規則に追加したデータベース サーバーを含む次の範囲が強調表示されています。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2744.ashwin-last-code.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1727/2744.ashwin-last-code.png" border="0"></a>


  そのため、仮想マシンの送信アクセスのロックダウンに関して、すべて設定する必要があります。また、Azure アドレス範囲は定期的に変更されます。そのため、これらの範囲は数か月ごとにチェックする必要があります。または、ホワイトリストに登録された IP アドレスにある Azure リソースが突然使用できなくなった場合にも注意してください。

  <h6>まとめ</h6>

  このドキュメントでは、IaaS 仮想マシンをセキュリティで保護するための多くの方法について説明しました。実際、Windows Azure IaaS 環境は、オンプレミス ネットワークの拡張機能として効果的に構成することができるため、Windows Azure で拡張された既存のオンプレミスセキュリティコンストラクトの使い慣れた機能を利用して、エンタープライズ アプリケーションを実行している Azure にデプロイした仮想マシンを効果的にセキュリティで保護することができます。ネットワーク ACL、仮想ネットワーク、および高度なセキュリティWindowsファイアウォールは、すべて一緒に機能し、堅牢なセキュリティ シナリオを確保します。

  <h6>リファレンス</h6>

  <ul>
   <li><strong>Windows Azure ネットワーク セキュリティに関するホワイトペーパー</strong>:<a href="https://download.microsoft.com/download/4/3/9/43902EC9-410E-4875-8800-0788BE146A3D/Windows%20Azure%20Network%20Security%20Whitepaper%20-%20FINAL.docx">https://download.microsoft.com/download/4/3/9/43902EC9-410E-4875-8800-0788BE146A3D/Windows%20Azure%20Network%20Security%20Whitepaper%20-%20FINAL.docx</a></li>
   <li><strong>ネットワーク Access Controlリスト (ACL) について</strong>:  <a href=""></a></li>
   <li><strong>仮想マシンにエンドポイントを設定する方法</strong>:  <a href="https://azure.microsoft.com/en-us/manage/windows/how-to-guides/setup-endpoints/">https://azure.microsoft.com/en-us/manage/windows/how-to-guides/setup-endpoints/</a></li>
   <li><strong>Azure Access Controlのネットワーク Windows一覧機能</strong>: Powershell<a href=""></a></li>
   <li><strong>Azure でのエンドポイント ACL Windows設定:</strong> VMhttps://convective.wordpress.com/2013/06/08/setting-an-endpoint-acl-on-a-windows-azure-vm/</li>
   <li><strong>次の方法で IKEv2</strong> を使用してエンド Windows Server 2012。<a href="https://technet.microsoft.com/en-us/library/hh831807.aspx#BKMK_Step2">https://technet.microsoft.com/en-us/library/hh831807.aspx#BKMK_Step2</a></li>
   <li><strong>Windows IPsec ポリシー展開のステップ バイ ステップ ガイド</strong>:<a href="https://technet.microsoft.com/en-us/library/deploy-ipsec-firewall-policies-step-by-step%28v=WS.10%29.aspx">https://technet.microsoft.com/en-us/library/deploy-ipsec-firewall-policies-step-by-step%28v=WS.10%29.aspx</a></li>
   <li><strong>Windowsを使用した高度なセキュリティ管理を使用したファイアウォールのWindows PowerShell</strong>:  <a href="https://technet.microsoft.com/en-us/library/hh831755.aspx">https://technet.microsoft.com/en-us/library/hh831755.aspx</a></li>
   <li><strong>Windows Azure Datacenter の IP 範囲</strong>:  </li>
  </ul>

  AshwinKar


  Windows Azure ネットワーク チーム
