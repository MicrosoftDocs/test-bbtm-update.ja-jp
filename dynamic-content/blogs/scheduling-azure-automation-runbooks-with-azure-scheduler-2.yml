### YamlMime:Yaml
ms.openlocfilehash: f4673e6bfcb0f9dadb13923ea4b5ebfdd9f3dc22
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892689"
Slug: scheduling-azure-automation-runbooks-with-azure-scheduler-2
Title: Azure Scheduler を使用した Azure Automation Runbook のスケジュール設定
Summary: Azure Scheduler を使用して runbook を Azure Automation するためのより高度なスケジュールを作成する方法について説明します。
Content: >-
  Runbook のスケジュールを設定できることは、IT 組織の自動化戦略の重要なコンポーネントです。Azure Automation を使用すると、1回実行するか、指定された時間数または日数ごとに繰り返し実行するように <a href="https://azure.microsoft.com/en-us/documentation/articles/automation-scheduling-a-runbook/" target="_blank">runbook をスケジュール</a> することができます。この機能は優れていますが、その他のユーザーは、繰り返しの runbook を1分以内にスケジュールできるなど、より高度な機能を必要とします。


  今年の前半では、 <a href="https://azure.microsoft.com/blog/2015/01/27/scheduling-azure-automation-runbooks-with-azure-scheduler/" target="_blank">Azure Scheduler を使用して Azure Automation runbook をスケジュール</a>する方法については、eamon 共のブログをご覧になっています。このプロセスは、受け取ったコメントの一部と <a href="https://azure.microsoft.com/en-in/documentation/articles/automation-webhooks/" target="_blank">webhook</a>の導入に基づいて、はるかに簡単になりました。では、見てみましょう。

  <h2>Azure Scheduler を使用した Automation Runbook のスケジュール設定</h2>

  大まかに言えば、このプロセスには2つの原則となる手順しか含まれていません。まず、スケジュールする runbook の webhook を作成します。次に、必要な時間に webhook を実行する Azure Scheduler ジョブを作成します。このスケジュールを設定するには、次の手順を実行します。

  <h3>Automation Webhook の作成</h3>

  <ol>

  <br><li><a href="https://portal.azure.com" target="_blank">https://portal.azure.com</a>組織の Azure サブスクリプションを参照してログインします。ここで、[すべて参照] – &gt; [Automation アカウント] の順にクリックします。</li>


  <br><li>[Automation アカウント] ブレードで、スケジュールするアカウントと runbook を選択します。</li>

  <br><li>Runbook から、[Webhook – &gt; Add webhook – &gt; 新しい webhook の作成] をクリックします。名前を付け、[作成] をクリックします。

  <br><strong><span style="color: #ff0000;">注</span></strong>: [作成] をクリックした後に、URL を保存したことを確認してください。


  <br><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="cmank-SchedulingAzureAutomationRunbookswithAzureScheduler-Azさくせい Createwebhook" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AzAuCreateWebhook.png" alt="Scheduling Azure Automation Runbooks with Azure Scheduler" width="610" height="201" border="0" /></li>

  <h3>Azure Scheduler ジョブを作成する</h3>

  <ol start="4">

  <br><li>この記事の執筆時点では、Azure Scheduler は新しい Azure portal ではまだ利用できません。既存のポータルでこのサービスにアクセスするには、組織の Azure サブスクリプションに移動 <a href="https://manage.windowsazure.com" target="_blank">https://manage.windowsazure.com</a> してログインします。左側のナビゲーションで、[Scheduler] をクリックします。</li>


  <br><li>下部のドロアーで [新規– &gt; App Services – &gt; スケジューラ– &gt; カスタム作成] をクリックします。<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="cmank-SchedulingAzureAutomationRunbookswithAzureScheduler-AzAuCreateNewSchedule" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AzAuCreateNewSchedule.png" alt="Scheduling Azure Automation Runbooks with Azure Scheduler" width="610" height="252" border="0" /></li>

  <br><li>これにより、ジョブの作成ウィザードが開きます。[ジョブコレクション] ページで、ジョブコレクションの次の値を入力し、次へ進む矢印をクリックします。<br>


  <br><strong>サブスクリプション</strong>: 利用可能なサブスクリプション <strong>リージョン</strong>の1つを選択します。使用可能なリージョンのいずれかを選択します。 <strong>ジョブコレクション</strong>: 既存のコレクションを選択するか、新しい <strong>ジョブコレクション名</strong>を新規作成します。新しいコレクションの作成を選択した場合は、ジョブコレクションを識別する一意の名前を入力します。


  <br><strong><span style="color: #ff0000;">注</span></strong>: コレクションは、サブスクリプションとリージョンごとにスコープが設定されます。つまり、既存のコレクションとまったく同じサブスクリプションとリージョンを選択しない限り、既存のコレクションは使用できません。


  <br><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="cmank-SchedulingAzureAutomationRunbookswithAzureScheduler-Az Jobcollection" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AzAuJobCollection.png" alt="Scheduling Azure Automation Runbooks with Azure Scheduler" width="360" height="327" border="0" /></li>

  <br><li>[ジョブアクション] ページで、ジョブスケジュールの次の値を入力し、次へ進む矢印をクリックします。<br>


  <br><strong>名前</strong>: ジョブスケジュール <strong>アクションの種類</strong>を識別するための一意の名前を入力します: HTTPS <strong>メソッド</strong>: POST <strong>URI</strong>: [ <strong>本文</strong>の前 #3 手順で作成した webhook URL を入力します。] runbook は webhook を使用して実行されるため、実行時に runbook に渡す任意のデータを入力できます。このデータは、文字列、JSON、XML など、選択した形式にすることができます。 詳細については、 <a href="https://azure.microsoft.com/en-us/documentation/articles/automation-webhooks/" target="_blank">Azure Automation webhook</a> のドキュメントを参照してください。


  <br><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="cmank-SchedulingAzureAutomationRunbookswithAzureScheduler-AzAuJobAction" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AzAuJobAction.png" alt="Scheduling Azure Automation Runbooks with Azure Scheduler" width="360" height="328" border="0" />


  <br><strong><span style="color: #ff0000;">注</span></strong>: ジョブの作成ウィザードでは、要求のヘッダーを構成するオプションは提供されません。ただし、POST メソッドを選択すると、ウィザードによって次のヘッダーが自動的に追加されます。ジョブスケジュールを作成したら、ジョブのプロパティを参照し、必要に応じて追加のヘッダーを構成できます。


  <br><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="cmank-SchedulingAzureAutomationRunbookswithAzureScheduler-Az/Jobheaders" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AzAuJobHeaders.png" alt="Scheduling Azure Automation Runbooks with Azure Scheduler" width="480" height="58" border="0" /></li>

  <br><li>[スケジュールの定義] ページで、個々のニーズに基づいてスケジュールを構成します。次のサンプルでは、スケジュールは7月の終わりまで5分ごとに実行するように設定されています。必要なスケジュールを構成したら、チェックマークをクリックしてジョブスケジュールを作成します。


  <br><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="cmank-SchedulingAzureAutomationRunbookswithAzureScheduler-Az/ていぎ Easchedule" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AzAuDefineASchedule.png" alt="Scheduling Azure Automation Runbooks with Azure Scheduler" width="360" height="327" border="0" /></li>

  <br><li>Runbook は、構成時に実行するようにスケジュールされています。特定のジョブスケジュールの履歴を表示するには、コレクションの [履歴] タブをクリックし、ジョブの結果を表示します。</li>

  <br><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="cmank-SchedulingAzureAutomationRunbookswithAzureScheduler-Az/Jobschedulehistory" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/AzAuJobScheduleHistory.png" alt="Scheduling Azure Automation Runbooks with Azure Scheduler" width="610" height="295" border="0" />

  </ol>

  And there you have it!  Using the combination of Azure Automation webhooks and the Azure Scheduler, you can now easily build schedules around your runbook automations.  Well done!


  Azure Automation を使い始めたばかりですか?<a href="https://aka.ms/Q2p1ap" target="_blank">ここで</a>サービスについて説明し、 <a href="https://twitter.com/AzureAutomation" target="_blank">Twitter</a>の Azure Automation に従います。


  <i><span style="font-family: Calibri;">このゲストのブログ投稿は、Concurrency, inc. の Christopher Mank によって提供されました。Azure ブログに掲載されている Azure Automation について、興味深いアイデアをお寄せください。Twitter の Joe 氏によりにお問い合わせください</span></i> <a href="https://twitter.com/jodoglevy" target="_blank"><i></i></a><i><span style="font-family: Calibri;">。</span></i>
