### YamlMime:Yaml
ms.openlocfilehash: 0d132208efe635518368cb7b0926ca3bfeedee3a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892953"
Slug: java-manage-azure-managed-disks
Title: 'Java: Azure リソースのManaged Disks'
Summary: Azure Management Libraries for Java を使用して、Azure 管理ライブラリをManaged Disks。
Content: "<p>Azure Management Libraries for Java のベータ 5 を発表します。 ベータ 5 では、Azure Managed Disks のサポートが追加されます。</p>\n\n<p>本日、Microsoft <a href=\"https://azure.microsoft.com/en-us/blog/announcing-general-availability-of-managed-disks-and-larger-scale-sets/\">は</a> Azure サービスの一般提供を発表 &ndash; Managed Disks、Azure サービスの管理とスケーリングをVirtual Machines。 データ のサイズとディスクを指定Virtual Machines。 ストレージ アカウントの作成と管理についても気にする必要はありません。</p>\n\n<p><a href=\"https://github.com/azure/azure-sdk-for-java\">Azure Management Libraries for Java を使用して、Azure 管理</a>ライブラリをManaged Disks。</p>\n\n<h2><a href=\"https://github.com/azure/azure-sdk-for-java\" title=\"https://github.com/azure/azure-sdk-for-java\">https://github.com/azure/azure-sdk-for-java</a></h2>\n\n<p>ベータ版 5 を使用するには、Maven POM ファイル次のコードを追加します。</p>\n\n<pre class=\"prettyprint\">\n&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n    &lt;artifactId&gt;azure&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-beta5&lt;/version&gt;\n&lt;/dependency&gt;</pre>\n\n<h2>仮想マシンと仮想マシンのManaged Disks</h2>\n\n<p>define() create() &hellip; メソッド チェーンを使用して、オペレーティング システム用の暗黙的なマネージド ディスクとデータManaged Disksを使用して仮想マシンを作成できます。 マネージド ディスクを暗黙的に作成することで、作成が簡素化されます。ディスクの詳細をすべて指定する必要はありません。 ストレージ アカウントの作成と管理についても気にする必要はありません。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachine linuxVM1 = azure.virtualMachines()\n  .define(linuxVM1Name)\n  .withRegion(Region.US_EAST)\n  .withNewResourceGroup(rgName)\n  .withNewPrimaryNetwork(&quot;10.0.0.0/28&quot;)\n  .withPrimaryPrivateIpAddressDynamic()\n  .withNewPrimaryPublicIpAddress(linuxVM1Pip)\n  .withPopularLinuxImage(KnownLinuxVirtualMachineImage.UBUNTU_SERVER_16_04_LTS)\n  .withRootUsername(&ldquo;tirekicker&rdquo;)\n  .withSsh(sshkey)\n  .withNewDataDisk(100)\n  .withSize(VirtualMachineSizeTypes.STANDARD_D3_V2)\n  .create();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/compute-java-manage-vm\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>仮想マシン スケール セットを作成するには、次のManaged Disks</h2>\n\n<p>define() create() &hellip; メソッド チェーンを使用して、オペレーティング システムの暗黙的なManaged Disksとデータの明示的なManaged Disksを使用して、仮想マシン スケール セットを作成できます。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachineScaleSet vmScaleSet = azure.virtualMachineScaleSets()\n  .define(vmssName)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withSku(VirtualMachineScaleSetSkuTypes.STANDARD_D5_V2)\n  .withExistingPrimaryNetworkSubnet(network, &quot;subnet1&quot;)\n  .withExistingPrimaryInternetFacingLoadBalancer(publicLoadBalancer)\n  .withoutPrimaryInternalLoadBalancer()\n  .withPopularLinuxImage(KnownLinuxVirtualMachineImage.UBUNTU_SERVER_16_04_LTS)\n  .withRootUsername(&quot;tirekicker&quot;)\n  .withSsh(sshkey)\n  .withNewDataDisk(100)\n  .withNewDataDisk(100, 1, CachingTypes.READ_WRITE)\n  .withNewDataDisk(100, 2, CachingTypes.READ_ONLY)\n  .withCapacity(10)\n  .create();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/compute-java-manage-virtual-machine-scale-sets\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>空のマネージド ディスクを作成して仮想マシンにアタッチする</h2>\n\n<p>define() create() メソッド チェーンを使用して、空 &hellip; のマネージド ディスクを作成できます。</p>\n\n<pre class=\"prettyprint\">\nDisk dataDisk = azure.disks().define(dataDiskName)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withData()\n  .withSizeInGB(50)\n  .create();</pre>\n\n<p>別の define() ... を使用して、空のマネージド ディスクを仮想マシンにアタッチできます。create() メソッド チェーン。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachine linuxVM2 = azure.virtualMachines().define(linuxVmName2)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withNewPrimaryNetwork(&quot;10.0.0.0/28&quot;)\n  .withPrimaryPrivateIpAddressDynamic()\n  .withNewPrimaryPublicIpAddress(publicIpDnsLabel2)\n  .withPopularLinuxImage(KnownLinuxVirtualMachineImage.UBUNTU_SERVER_16_04_LTS)\n  .withRootUsername(&quot;tirekicker&quot;)\n  .withSsh(sshkey)\n  .withNewDataDisk(100)\n  .withNewDataDisk(100, 1, CachingTypes.READ_WRITE)\n  .withExistingDataDisk(dataDisk)\n  .withSize(VirtualMachineSizeTypes.STANDARD_D3_V2)\n  .create();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/compute-java-manage-vm\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>仮想マシンを更新する</h2>\n\n<p>update() apply() Managed Disksを使用してManaged Disksをデタッチし、新しい &hellip; データをアタッチできます。</p>\n\n<pre class=\"prettyprint\">\nlinuxVM2.update()\n  .withoutDataDisk(2)\n  .withNewDataDisk(200)\n  .apply();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/compute-java-manage-virtual-machine-with-disks\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>特殊化された VHD から仮想マシンを作成する</h2>\n\n<p>define() create() &hellip; メソッド チェーンを使用して、特殊化された VHD から仮想マシンを作成できます。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachine linuxVM3 = azure.virtualMachines().define(linuxVmName3)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withNewPrimaryNetwork(&quot;10.0.0.0/28&quot;)\n  .withPrimaryPrivateIpAddressDynamic()\n  .withoutPrimaryPublicIpAddress()\n  .withSpecializedOsUnmanagedDisk(specializedVhd, OperatingSystemTypes.LINUX) \n  .withSize(VirtualMachineSizeTypes.STANDARD_D3_V2)\n  .create();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/managed-disk-java-create-virtual-machine-using-specialized-disk-from-VHD\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>カスタム イメージを使用して仮想マシンを作成する</h2>\n\n<p>define() create() &hellip; メソッド チェーンを使用して、割り当ておよび一般化された仮想マシンからカスタム イメージを作成できます。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachineCustomImage virtualMachineCustomImage = azure.virtualMachineCustomImages()\n  .define(customImageName)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .fromVirtualMachine(linuxVM) // from a de-allocated and generalized Virtual Machine\n  .create();</pre>\n\n<p>別の define() create() &hellip; メソッド チェーンを使用して、カスタム イメージから仮想マシンを作成できます。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachine linuxVM4 = azure.virtualMachines().define(linuxVmName4)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withNewPrimaryNetwork(&quot;10.0.0.0/28&quot;)\n  .withPrimaryPrivateIpAddressDynamic()\n  .withoutPrimaryPublicIpAddress()\n  .withLinuxCustomImage(virtualMachineCustomImage.id())\n  .withRootUsername(&quot;tirekicker&quot;)\n  .withSsh(sshKey)\n  .withSize(VirtualMachineSizeTypes.STANDARD_D3_V2)\n  .create();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/managed-disk-java-create-virtual-machine-using-custom-image\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>スナップショットから特殊化されたディスクを使用して仮想マシンを作成する</h2>\n\n<p>オペレーティング システム ディスクのマネージド ディスク スナップショットを作成できます。</p>\n\n<p>&nbsp;</p>\n\n<pre class=\"prettyprint\">\n// Create a Snapshot for an operating system disk\nDisk osDisk = azure.disks().getById(linuxVM.osDiskId());\nSnapshot osSnapshot = azure.snapshots().define(managedOSSnapshotName)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withLinuxFromDisk(osDisk)\n  .create();</pre>\n\n<pre class=\"prettyprint\">\n// Create a Managed Disk from the Snapshot for the operating system disk\nDisk newOSDisk = azure.disks().define(managedNewOSDiskName)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withLinuxFromSnapshot(osSnapshot)\n  .withSizeInGB(100)\n  .create();</pre>\n\n<p>データ ディスクのマネージド ディスク スナップショットを作成できます。</p>\n\n<pre class=\"prettyprint\">\n// Create a Snapshot for a data disk\nSnapshot dataSnapshot = azure.snapshots().define(managedDataDiskSnapshotName)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withDataFromDisk(dataDisk)\n  .withSku(DiskSkuTypes.STANDARD_LRS)\n  .create();</pre>\n\n<pre class=\"prettyprint\">\n// Create a Managed Disk from the Snapshot for the data disk\nDisk newDataDisk = azure.disks().define(managedNewDataDiskName)\n  .withRegion(Region.US_EAST)\n  .withExistingResourceGroup(rgName)\n  .withData()\n  .fromSnapshot(dataSnapshot)\n  .create();</pre>\n\n<p>define() create() &hellip; メソッド チェーンを使用して、これらの特殊化されたディスクから仮想マシンを作成できます。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachine linuxVM5 = azure.virtualMachines().define(linuxVmName5)\n  .withRegion(region)\n  .withExistingResourceGroup(rgName)\n  .withNewPrimaryNetwork(&quot;10.0.0.0/28&quot;)\n  .withPrimaryPrivateIpAddressDynamic()\n  .withoutPrimaryPublicIpAddress()\n  .withSpecializedOsDisk(newOSDisk, OperatingSystemTypes.LINUX)\n  .withExistingDataDisk(newDataDisk)\n  .withSize(VirtualMachineSizeTypes.STANDARD_D3_V2)\n  .create();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/managed-disk-java-create-virtual-machine-using-specialized-disk-from-snapshot\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>1 回の再起動で仮想マシンManaged Disks仮想マシンを使用する</h2>\n\n<p>アンマネージド ディスク (Storage アカウント ベース) を持つ仮想マシンを、1 回の再起動Managed Disksに変換できます。</p>\n\n<pre class=\"prettyprint\">\nVirtualMachine linuxVM6 = azure.virtualMachines().define(linuxVmName6)\n  .withRegion(Region.US_EAST)\n  .withNewResourceGroup(rgName)\n  .withNewPrimaryNetwork(&quot;10.0.0.0/28&quot;)\n  .withPrimaryPrivateIpAddressDynamic()\n  .withNewPrimaryPublicIpAddress(publicIpDnsLabel6)\n  .withPopularLinuxImage(KnownLinuxVirtualMachineImage.UBUNTU_SERVER_16_04_LTS)\n  .withRootUsername(&quot;tirekicker&quot;)\n  .withSsh(sshKey)\n  .withUnmanagedDisks() // uses storage accounts\n  .withNewUnmanagedDataDisk(100)\n  .withSize(VirtualMachineSizeTypes.STANDARD_D3_V2)\n  .create();\n\nlinuxVM6.deallocate();\nlinuxVM6.convertToManaged();</pre>\n\n<p>すぐに <a href=\"https://github.com/Azure-Samples/managed-disk-java-convert-existing-virtual-machines-to-use-managed-disks\">実行できる</a> 完全なサンプル コードをダウンロードできます。</p>\n\n<h2>使ってみる</h2>\n\n<p>上記のサンプルを実行するか、自分のサンプル GitHub<a href=\"https://github.com/Azure/azure-sdk-for-java\">できます</a>。 お試しのうえ、ご意見をお寄せください (以下の <a>電子メールまたはコメント</a> を介して)。 今後数週間で、より多くの Azure サービスのサポートを追加し、API に最後のタッチを適用する予定です。</p>\n\n<p>Azure 上の Java に関する多くの追加情報については、 を参照してください <a href=\"https://azure.com/java\">https://azure.com/java</a>。</p>"
