### YamlMime:Yaml
ms.openlocfilehash: 34bd89f1710767c5dee9b92238ab8c652b3e0482
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139888968"
Slug: unicode-works-better-with-ssis
Title: SSIS での Unicode の機能強化
Summary: '[この記事は SQL Azure チームによって提供されました。]SQL Server データを SQL Azure に移動することに決めたので、varchar (max) データ型と text データ型を nvarchar (...'
Content: "<p>[この記事は SQL Azure チームによって提供されました。]</p><p>SQL Server データを SQL Azure に移動することに決めたので、 <b>varchar (max)</b>データ型と<b>text</b>データ型を<b>nvarchar (max)</b>型に変更することをお勧めします。 データ型を Unicode に変更すると、SQL Server Integration Services (SSIS) を使用すると、SQL Server から SQL Azure への移行が容易になります。</p>  <p>SSIS を使用して SQL Server から SQL Azure に移行する場合は、2つの異なるデータソースを使用する必要があります。 <b>SQL Server Native Client 10.0</b>データソースは、SQL Server とに接続するために使用する必要があり<b>.NET FrameworkSqlServer</b>データソースが SQL Azure に接続するための Data Provider。 これらのデータ型を使用する場合、SSIS は Unicode 以外のデータ型 (<b>varchar</b> と <b>Text</b>) を unicode に変換し、再度バックします。これは、列のデータの長さが8000文字よりも短い場合には正常に機能します。 ただし、テキストが8000文字を超えると、次のようなエラーが表示されます。</p>  <p><font color=\"#ff0000\">エラー 0xc0204016: SSIS。パイプライン: 出力列 &quot; State_Text &quot; (168) &quot; の &quot; 長さが無効です。長さは 0 ~ 8000 の範囲で指定する必要があります。(SQL Server インポートおよびエクスポートウィザード)</font></p>  <p>変換元と変換先の列を変更し、 <b>varchar (max)</b> および <b>text</b> を <b>nvarchar (max)</b> に変更した場合、SSIS では、2つのの間で文字列を変換する必要がなくなり、列は正常に移動します。</p>  <h2>コード例</h2>  <p>Unicode 以外の1つのテーブルを次に示します。</p>  <pre class=\"csharpcode\"><span class=\"kwrd\">CREATE</span> <span class=\"kwrd\">TABLE</span> [<span class=\"kwrd\">State</span>] (State_Id <span class=\"kwrd\">int</span>, State_Text <span class=\"kwrd\">varchar</span>(<span class=\"kwrd\">max</span>))</pre>      <p>列の型を変更する Transact SQL の例を次に示します。</p>    <pre class=\"csharpcode\"><span class=\"kwrd\">ALTER</span> <span class=\"kwrd\">TABLE</span> [<span class=\"kwrd\">State</span>] <span class=\"kwrd\">ADD</span> [Temp] nvarchar(<span class=\"kwrd\">max</span>) <span class=\"kwrd\">NULL</span>    <span class=\"kwrd\">GO</span>    <span class=\"kwrd\">UPDATE</span> [<span class=\"kwrd\">State</span>]    <span class=\"kwrd\">SET</span> [<span class=\"kwrd\">State</span>].[Temp] = [State_Text]    <span class=\"kwrd\">ALTER</span> <span class=\"kwrd\">TABLE</span> [<span class=\"kwrd\">State</span>] <span class=\"kwrd\">DROP</span> <span class=\"kwrd\">COLUMN</span> [State_Text]    <span class=\"kwrd\">EXECUTE</span> sp_RENAME <span class=\"str\">'[State].[Temp]'</span> , <span class=\"str\">'State_Text'</span>, <span class=\"str\">'COLUMN'</span></pre>      <p>この例では、 <b>State</b> という名前のテーブルと、データ型が Text の <b>State_Text</b> という名前の列があります。</p>    <h2>まとめ</h2>    <p>理解していない場合は、ローカライズのサポートを強化するためにすべての列を Unicode にする必要があります。また、この投稿では、別の理由で変更を行う必要があります。 SQL Server エクスポート/インポートウィザードを実行する前に実行し、SQL Server をクラウドに移動するプロセスははるかに簡単になります。</p>"
