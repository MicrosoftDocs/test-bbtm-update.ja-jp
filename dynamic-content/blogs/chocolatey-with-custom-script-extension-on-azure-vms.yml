### YamlMime:Yaml
ms.openlocfilehash: de3b27e6fab15a59fa1c8a4c790d1c5f6df1117e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139889230"
Slug: chocolatey-with-custom-script-extension-on-azure-vms
Title: Azure VM 上のカスタム スクリプト拡張機能を使用した Chocolatey
Summary: このブログでは、カスタム スクリプト拡張機能を使用してリモートの Azure VM で Chocolatey コマンドを実行する方法の概要を説明します。
Content: "このブログでは、カスタム スクリプト拡張機能を使用してリモートの Azure VM で Chocolatey コマンドを実行する方法の概要を説明します。\n\n<a href=\"https://chocolatey.org/packages\">Chocolatey</a> は、Azure のお客様がパッケージのインストールに使用するウィンドウ (Yum/Apt-Get と同様) のパッケージ マネージャーです。 このパッケージのインストールを自動化する方法は多数ありますが、このブログ記事ではカスタム スクリプト拡張機能 (CSE) を使用して行います。 Windows 用のカスタム スクリプト拡張機能は、リモート VM で PowerShell スクリプトを実行するためのメカニズムです。追加のポートを開く必要や、VM でスクリプトを手動でダウンロードする必要はありません。 VM 拡張機能と同様に、VM のプロビジョニング中または VM の実行中にいつでも VM に追加できます。 拡張機能は、Azure Portal、 <a href=\"https://azure.microsoft.com/blog/2014/04/24/automating-vm-customization-tasks-using-custom-script-extension/\">PowerShell</a> コマンドレット、および Azure Xplat CLI REST APIから追加できます。\n\nChocolatey コマンドは PowerShell から既に実行できるので、CSE を使用した Chocolatey コマンドレットの実行は実際には非常に簡単です。\n\nChocolatey を使用してリモート VM にAzure PowerShell<a href=\"https://azure.microsoft.com/en-us/documentation/articles/install-configure-powershell/\">コマンドレット</a>をインストールするシナリオを見てみる。\n\n1. 次のコマンド.ps1ファイルを作成します。\n<pre class=\"prettyprint\">iex ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1')) \nchoco install WindowsAzurePowershell</pre>\n最初のコマンドでは Chocolatey が VM にインストールされ、2 番目のコマンドはAzure PowerShellします。 次に、VM を作成し、リモート実行用のスクリプトを追加します。 スクリプト ファイルをローカルに保存します。\n2. Azure Portal から VM にアクセスし、保存したスクリプトを入力として指定してカスタム スクリプト拡張機能を追加します。\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/19/Chocolatey-CSE.png\"><img title=\"Chocolatey-CSE\" alt=\"Chocolatey-CSE\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/Chocolatey-CSE_thumb.png\" width=\"614\" height=\"210\" /></a>\n\n3. スクリプトの実行が完了すると、UI の [拡張機能] ブレードにスクリプト出力を表示できます。\n\n<a href=\"https://acom.azurecomcdn.net/80C57D/blogmedia/blogmedia/2014/11/12/ExtensionOutput.png\"><img title=\"ExtensionOutput\" alt=\"ExtensionOutput\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ExtensionOutput_thumb.png\" width=\"647\" height=\"304\" /></a>\n\nChocolatey とカスタム スクリプト拡張機能の組み合わせで、多くのデプロイ シナリオを自動化できます。 前のブログ記事で説明したように、上記の手順はすべて、Azure PowerShellコマンドレットを使用して<a href=\"https://azure.microsoft.com/blog/2014/04/24/automating-vm-customization-tasks-using-custom-script-extension/\">自動化できます</a>。"
