### YamlMime:Yaml
ms.openlocfilehash: ca78f50d9e32828b9cb4a199b2616c19b4b4a944
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904002"
Slug: optimize-performance-using-azure-database-for-postgresql-recommendations
Title: 推奨事項を使用してパフォーマンスAzure Database for PostgreSQL最適化する
Summary: データベースを最適化するために、データベースの専門家である必要がなくなりました。 ジョブを簡単にし、現在、Azure Database for PostgreSQL Database for PostgreSQL Microsoft Azure推奨事項を活用し始める。
Content: >-
  <p>現在の開発者は、心配する必要がある多くのことを持っています。 顧客向けゲームを変えるアプリを構築するために、対応する必要がある新しいテクノロジ、フレームワーク、デプロイ モデルがあります。 しかし、1 日の終わりには、データベースが機能し、パフォーマンスを維持しながら、価値を高め、機能の開発に集中する必要があります。 過去には、DBA によってデータベースのパフォーマンスが管理されますが、現在では、その責任を多くのロールで共有できます。</p>


  <p>データベースを最適化するために、データベースの専門家である必要がなくなりました。 ジョブを簡単にし、今日の推奨事項Azure Database for PostgreSQL&nbsp;活用 <a href="https://azure.microsoft.com/en-us/services/postgresql/" target="_blank">Azure Database for PostgreSQL開始します。</a></p>


  <h2>ワークロードの分析と推奨事項の作成 = <img alt="heart" height="23" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/heart.png" title="心" width="23"></h2>


  <p>サーバー上のワークロードを分析することで、推奨事項機能を使用すると、パフォーマンスを最適化できる Azure Database for PostgreSQL リソースに関する毎日の分析情報を得られるのです。 これらの推奨事項は、Azure Advisor内でベスト プラクティスを直接提供するために、Azure portal。 <a href="https://azure.microsoft.com/en-us/services/advisor/">Azure Advisor</a> は、Azure デプロイを最適化するためのガイドラインに従うのに役立つ、パーソナライズされたクラウド コンサルタントです。</p>


  <p>現在 Azure&rsquo; で Postgres&rsquo;&rsquo; アプリケーションを実行している場合、Azure Database for PostgreSQL リソースの最適化に役立つ推奨事項を確認したい場合は、簡単です。 次のページの [パフォーマンスに関する推奨事項] タブAzure Advisor。</p>


  <h2>推奨事項を作成する設定の種類</h2>


  <p>推奨事項機能は、データベース サーバー&#39; テレメトリを継続的に監視および分析して、<a href="https://docs.microsoft.com/en-us/azure/postgresql/concepts-monitoring"></a>1 つ以上のリソース設定を構成することでワークロードのパフォーマンスを向上させるかどうかを判断します。 現在、お客様のデプロイに対して 4 種類の設定を監視、分析、およびAzure Database for PostgreSQLしています。</p>


  <ul>
   <li><strong>CPU のボトルネック</strong> &ndash; 長期の CPU 使用率が非常に高くなると、ワークロードのクエリ パフォーマンスが低下する可能性があります。 CPU サイズを大きくすると、データベース クエリの実行時間を最適化し、全体的なパフォーマンスを向上させるのに役立つ可能性があります。 CPU の制約付きワークロードを実行している可能性が高い CPU 使用率の高いサーバーを特定し、コンピューティングのスケーリングをお勧めします。</li>
   <li><strong>接続の制約</strong> &ndash; Postgres への新しい接続ごとに、一部のメモリが占有されます。 メモリの上限&#39;サーバーへの接続が失敗すると、データベース サーバーのパフォーマンス <a href="https://docs.microsoft.com/en-us/azure/postgresql/concepts-limits">が低下します</a> 。 多数の接続エラーが発生しているサーバーを特定し、コンピューティングをスケールアップするか、コアあたりのメモリが多いメモリ最適化 SKU を使用して、サーバー&#39;の接続制限をアップグレードして、より多くのメモリをサーバーに提供することをお勧めします。</li>
   <li><strong>メモリ制約</strong> &ndash; キャッシュ ヒット率が低い場合、クエリのパフォーマンスが低下し、IOPS が増加する可能性があります。 これは、不適切なクエリ プランやメモリ負荷の高いワークロードの実行が原因になっている場合があります。 クエリ プランを修正したり <a href="https://docs.microsoft.com/en-us/azure/postgresql/concepts-pricing-tiers">、サーバーのメモリ</a> を増やしたりすると、データベース ワークロードの実行を最適化するのに役立ちます。&nbsp;Azure Database for PostgreSQL推奨事項では、この高バッファー プールチャーンが原因で影響を受けるサーバーを識別し、クエリ プランを修正するか、メモリが多い上位 SKU に移行するか、またはストレージ サイズを増やして IOPS を増やのどちらかをお勧めします。</li>
   <li><strong>読み取り集中型ワークロード</strong> &ndash; 新しい Azure Database for PostgreSQL機能では、過去 7 日間のサーバーでの書き込みに対する読み取り比率など、ワークロードベースのヒューリスティックが活用されます。 読み取り/書き込み比率が非常に高い PostgreSQL リソースでは、CPU やメモリの問題が発生し、クエリのパフォーマンスが低下する可能性があります。 レプリカを<a href="https://docs.microsoft.com/en-us/azure/postgresql/howto-read-replicas-portal">追加すると</a>、レプリカ サーバーへの読み取りをスケールアウトし、プライマリ サーバーの CPU やメモリの制約を防ぐのに役立ちます。&nbsp;Azure Database for PostgreSQLでは、このような読み取り集中型のワークロードが多いサーバーを識別し、<a href="https://docs.microsoft.com/en-us/azure/postgresql/concepts-read-replicas"></a>読み取りワークロードの一部をオフロードする読み取りレプリカを追加することをお勧めします。</li>
  </ul>


  <h2>推奨事項機能の使用を開始する</h2>


  <p>使用を開始する場合の&nbsp;唯Azure Database for PostgreSQL前提条件は、 のインスタンスが何らかの負荷 <a href="https://docs.microsoft.com/en-us/azure/postgresql/quickstart-create-server-database-portal">Azure Database for PostgreSQL実行されている</a> 場合です。</p>


  <h3>アクセス&nbsp;Azure Database for PostgreSQLの推奨事項Azure portal</h3>


  <p>既定では、追加コストを使用して推奨事項機能にアクセスできます。 次の図 1 と図 2 に示すように、サーバーに対して提供される推奨事項には、Azure Advisors&rsquo; ページまたはサーバーの概要ページからアクセスできます。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/847c7893-c836-45b8-aa71-0b0a7d15c4f8.png"><img alt="fig1" border="0" height="605" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d8cf905e-1263-4973-b8e4-cb0d59c2310c.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="fig1" width="1160"></a></p>


  <p align="center">図 1:Azure Database for PostgreSQL&nbsp;ポータルの [Azure Advisor&rsquo; の推奨事項]</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/60f501b7-493b-43a0-b7e3-def50bda2a01.png"><img alt="Screenshot of Azure Recommendations from the overview blade of your PostgreSQL resource" border="0" height="777" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5a8d14b6-60a4-4356-96d1-02ca6a65c8fc.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="PostgreSQL リソースの概要ブレードからの Azure Recommendations のスクリーンショット" width="1256"></a></p>


  <p align="center">図 2:Azure Database for PostgreSQL&nbsp; PostgreSQL リソースの概要ブレードからの推奨事項</p>


  <h3>詳細については、以下の推奨事項を参照Azure portal</h3>


  <p>推奨事項の種類にアクセスした後、特定の推奨事項を選択する必要があります。 推奨事項の種類に基づいて、サーバーのパフォーマンス制約に対処するために特定のアクションを実行できます。 推奨事項の種類を選択すると、推奨事項の詳細が表示されます (図 3 のラベル 1)。 これにより、Azure リソースを最適化するために必要な詳細が提供されます。 さらに、推奨されるアクション (図 3 のラベル 2) <strong></strong> を選択することで、推奨事項に基付けできます。</p>


  <p align="center"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b5408cb7-8ccb-4b25-bd47-c1efa30967f8.png"><img alt="fig3" border="0" height="671" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/6cbbcf6d-f05c-4450-bf37-169b3b38d780.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="fig3" width="1173"></a></p>


  <p align="center">図 3: 推奨事項の詳細を収集してアクションを実行する</p>


  <p>Azure Advisor、ポータルから離れることなく推奨事項を選択して実装するための便利な方法であるインライン アクションがAzure Advisorされます。</p>


  <p>すぐに行動&rsquo;する予定がない場合は、推奨事項を<strong></strong>一期間延期できます。 推奨事項を <strong>閉じて</strong> 、表示されなくなったものにできます。 特定のサブスクリプションまたはリソース グループに関する推奨事項を受け取りたくない場合は、ポータルまたは <a href="https://docs.microsoft.com/en-us/cli/azure/advisor?view=azure-cli-latest">CLI</a> を使用して<a href="https://docs.microsoft.com/en-us/azure/advisor/advisor-overview"></a>、指定した推奨事項のみを生成する Azure Advisor を構成できます。 アプリケーションの使用の詳細についてはAzure Advisorの使用に関する <a href="https://docs.microsoft.com/en-us/azure/advisor/advisor-get-started">記事概要参照Azure Advisor</a>。</p>


  <p>推奨事項を実装した後は、パフォーマンスを評価して、行った変更の影響を測定してください。</p>


  <h2>新しいレコメンド機能に関するフィードバック</h2>


  <p>Azure Database for PostgreSQLのレコメンド機能の初期ユーザーは <a href="https://docs.microsoft.com/en-us/azure/postgresql/quickstart-create-server-database-portal">、推奨事項と</a> 結果として得られるパフォーマンスの向上の恩恵を受ける可能性があります。 この目標は、データベース サーバーのパフォーマンスを気にすることなく、アプリケーションに集中しやすくなります。</p>


  <p>そのため、次のAzure Database for PostgreSQL&nbsp;推奨事項を確認Azure portal。 問題を特定する場合、または機能の提案を行う場合は、Ask Azure DB for PostgreSQL <a href="mailto:AskAzureDBforPostgreSQL@service.microsoft.com">エイリアスにお問い合わせください</a>。 Azure Database for PostgreSQL の Azure フィードバック フォーラムで、お問い <a href="https://feedback.azure.com/forums/597976-azure-database-for-postgresql">合わせも可能です</a>。</p>


  <p>皆様のご意見をお待ちしております。</p>
