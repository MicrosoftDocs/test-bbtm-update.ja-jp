### YamlMime:Yaml
ms.openlocfilehash: b14d2d47982d5e887dabde1dd59000707cfb201e
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896943"
Slug: advancing-azure-active-directory-availability
Title: Azure Active Directory の可用性の進化
Summary: Azure の信頼性に関するシリーズは、可用性の向上を続けるための主要な取り組みに関してできるだけ透過的に行うことができます。本日は、次のことに注目して Azure Active Directory
Content: >-
  <p>&ldquo;Azure の<a href="https://www.aka.ms/advancingreliability" target="_blank">信頼性</a>に関するシリーズは、可用性の向上を続けるための主要な取り組みに関してできるだけ透過的に行うことができます。現在、Azure Active Directory に注目します。 Microsoft Azure Active Directory (Azure AD) は、2億5000万か月間のアクティブユーザーへのセキュリティで保護されたアクセスを提供するクラウド id サービスであり、140万固有のアプリケーションを接続し、300億の認証要求を介して処理します。 これにより、最大規模のエンタープライズ id およびアクセス管理ソリューションだけでなく、世界 &rsquo; 最大規模のサービスの1つを簡単に使用できるように Azure AD ます。 次の投稿は、このような取り組みを進めているエンジニアリングのパートナーディレクターである N氏 m Abdo によって作成されました。 &rdquo; -Mark Russinovich、CTO、Azure</p>


  <hr>

  <p>&nbsp;</p>


  <p>お客様は、すべてのアプリケーションとサービスへのセキュリティで保護されたアクセスを管理するために Azure AD を信頼しています。 これは、すべての認証要求がミッションクリティカルな操作であることを意味します。 サービスの重要な性質と規模を考えると、id チーム &rsquo; の最優先事項は、サービスの信頼性とセキュリティです。 Azure AD は、真のクラウドネイティブ、ハイパースケール、マルチテナントアーキテクチャを使用して可用性とセキュリティを実現するように設計されており、チームは信頼性とセキュリティに関するバーを継続的に提供しています。</p>


  <h2>Azure AD: コア可用性の原則</h2>


  <p>このスケール、複雑さ、およびミッションクリティカル性のサービスをエンジニアリングすることにより、環境内で構築されるすべてのものが複雑なタスクになる可能性があります。</p>


  <p>回復力の投資は、以下の一連の信頼性の原則に基づいて構成されています。</p>


  <p><img alt="o  Azure AD resilience investments are organized around this set of reliability principles" border="0" height="295" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/79639571-4f8a-49d3-ba27-6244be5994b2.png" style="border: 0px currentcolor; border-image: none; display: inline; background-image: none;" title="" width="624"></p>


  <p>可用性の取り組みでは、お客様が見られる障害の可能性をできるだけ減らすために、多層防御アプローチを採用しています。障害が発生した場合は、可能な限りその障害の影響を絞り込むことができます。最後に、障害をできるだけ復旧し、軽減するためにかかる時間を短縮します。</p>


  <p>今後数週間にわたって、各原則の設計および検証方法について詳しく説明すると共に、お客様にとっての機能の例を紹介します。</p>


  <h2>非常に冗長</h2>


  <p>Azure AD は、複数レベルの内部冗長性と自動回復性を備えたグローバルサービスです。 Azure AD は、世界各地の30を超えるデータセンターにデプロイされており、Azure Availability Zones を活用しています。 この数は、追加の Azure リージョンがデプロイされると急速に成長しています。</p>


  <p>持続性を確保するために、Azure AD に書き込まれるデータは、テナントの構成に応じて、少なくとも4つから最大13のデータセンターにレプリケートされます。 データセンター内では、データが持続性を確保するために少なくとも9回レプリケートされますが、認証の負荷に対応するために容量をスケールアウトすることもできます。 これを示すために、最小限のリージョンで、サービス内で使用可能なディレクトリデータのコピーが少なくとも36個あることを示し &mdash; ます。 持続性を確保するために、Azure AD への書き込みは、リージョン外のデータセンターへのコミットが成功するまで完了しません。</p>


  <p>このアプローチにより、データの持続性と大量の冗長性 &mdash; が提供され、複数のネットワークパスとデータセンターが特定の承認要求に対応できます。また、データセンター内およびデータセンター間で障害が発生した場合に、システムによって自動的かつインテリジェントに再試行されます。</p>


  <p>これを検証するために、フォールト挿入を定期的に実行し、システムが構築され Azure AD システムコンポーネントの障害に対するシステム &rsquo; の回復性を検証します。 これにより、データセンター全体を定期的に取得することができるので、顧客への影響なしにデータセンターの損失をシステムが許容できることを確認できます。</p>


  <h2>単一障害点なし (SPOF)</h2>


  <p>前述のように、Azure AD 自体は複数のレベルの内部回復性を使用して構築されていますが、この原則は、外部のすべての依存関係の復元力をさらに高めます。 これは、「単一障害点 (SPOF) の原則」で表現されています。</p>


  <p>当社のサービス &rsquo; の重要度により、spofs は、分散名サービス (DNS)、content delivery network (CDN)、または多要素認証 (MFA) を (SMS や音声を含む) を転送する電気通信プロバイダーなどの重要な外部システムで受け入れられません。 これらの各システムについて、アクティブ/アクティブ構成で構成された複数の冗長システムを使用します。</p>


  <p>この原則での作業の多くは、昨年に完了することになっています。また、最近の大規模な DNS プロバイダーで障害が発生した場合は、代替プロバイダーへのアクティブ/アクティブパスを持っていたため、Azure AD はまったく影響を受けませんでした。</p>


  <h2>弾力的スケール</h2>


  <p>Azure AD は、既に30万の CPU コアで実行されている大規模システムであり、Azure クラウドの大規模なスケーラビリティを利用して、要求に応じて動的かつ迅速にスケールアップすることができます。 これには、特定のリージョンでの認証の午前9時ピークなど、トラフィックの自然な増加を含めることができます。また、世界 &rsquo; 最大規模のイベントの一部を実現し、多くの場合に rushes の新しいユーザーを確認するために、Azure AD B2C によって提供される新しいトラフィックにも大きな負荷がかかることがあります。</p>


  <p>さらに、回復力のレベルとして、Azure AD オーバーオーバーによって容量がプロビジョニングされます。設計ポイントとは、データセンター全体のフェールオーバーによって、再配布された負荷を処理するための容量の追加プロビジョニングが不要になることです。 これにより、緊急時に必要なすべての容量が既に用意されていることを知ることができます。</p>


  <h2>セーフの展開</h2>


  <p>セーフの展開により、内部的な自動化から Microsoft の自己ホストリングから実稼働環境への変更 (コードまたは構成) の進行を徐々に進めることができます。 実稼働環境では、変更にさらされているユーザーの割合を大幅に段階的に増やしています。自動的な正常性チェックによって、デプロイの1つのリングから次のリングに進むことができます。 このプロセス全体には1週間かかり、実稼働環境全体にわたって変更が完全にロールアウトされ、最新の既知の正常な状態に迅速にロールバックすることができます。</p>


  <p>このシステムでは、Microsoft が完全に内部にある早期のリング &rsquo; を呼び出し &lsquo; て、お客様または運用環境のトラフィックに影響する可能性があるリングへのロールアウトを防ぐことによって、潜在的な障害を定期的にキャッチします。</p>


  <h2>最新の検証</h2>


  <p>ゲートセーフなデプロイをサポートし、エンジニアリングチームがシステムの正常性を把握できるようにするため、Azure AD は、システムの正常性を監視するために使用される大量の内部テレメトリ、メトリック、およびシグナルを生成します。 この規模では、自動化された正常性監視システムにフィードされる、11ペタバイトを超える信号が提供されます。 これらのシステムでは、自動化に関するアラートがトリガーされ、可用性またはサービス品質 (QoS) の潜在的な低下に対応する、24/7/365 のエンジニアがチームによって通知されるようになります。</p>


  <p>ここでは、製品利用統計情報を拡張して、サービスの正常性だけでなく、特定のテナントの特定のシナリオのエンドツーエンドの正常性を正確に表すメトリックを提供しています。 Microsoft のチームは、これらのメトリックに対して既にアラートを発行しています。 Azure Portal で、テナントごとの正常性データを顧客に直接公開する方法を評価して &rsquo; います。</p>


  <h2>パーティション分割と粒度の細かい障害ドメイン</h2>


  <p>Azure AD について理解を深めるには、他のコンパートメントまたは容器全体の整合性に影響を与えることなくフラッドできるように設計された海底のコンパートメントです。</p>


  <p>Azure AD に相当するのは障害ドメインです。障害ドメイン内の一連のテナントにサービスを提供するスケールユニットは、他の障害ドメイン &rsquo; s スケールユニットから完全に分離されるように設計されています。 これらの障害ドメインを使用すると、障害の原因が特定の障害ドメインに含まれるように、 &lsquo; &rsquo; 障害の多くのクラスをハードに分離できます。</p>


  <p>これまで Azure AD には、5つの異なる障害ドメインがありました。 昨年、この数は50の障害ドメインに増加し、Azure Multi-Factor Authentication (MFA) などの多くのサービスは、同じ障害ドメインで完全に分離されるように移行されています。</p>


  <p>このハードパーティション分割作業は、すべての障害または障害が発生した場合に、ユーザーの1/50 または最大2% を超えないようにするための最終的なキャッチになるように設計されています。 この目標は、次の年の数百の障害ドメインにさらに増加することを目的としています。</p>


  <h2>提供される内容 &rsquo; のプレビュー</h2>


  <p>上記の原則は、コア Azure AD サービスを強化することを目的としています。 Azure AD の重要な性質を考えると、 &rsquo; 今後の投稿では、運用環境へのロールアウトを含む新しい投資 &rsquo; について説明してい &mdash; ます。このサービスは、プライマリ Azure AD サービスで障害が発生した場合にシームレスな代替認証をサポートするために、完全な障害 decorrelated id サービスを提供します。</p>


  <p>これはバックアップジェネレーターまたは無停電電源装置 (UPS) システムに相当するものと考えてください。これは、主な電源グリッドが影響を受ける場合に、カバレッジと保護を提供できます。 このシステムは完全に透過的で、エンドユーザーにとってシームレスであり、M365 ワークロードのセットに関する重要な認証フローの一部を運用環境で保護しています。 さらに多くのシナリオやワークロードに対応するために、その適用性を急速に拡大していき &rsquo; ます。</p>


  <p><a href="https://www.aka.ms/identityblog" target="_blank">Azure Active Directory id ブログ</a>で、今後の投稿に関する質問やトピックをお寄せください。</p>
