### YamlMime:Yaml
ms.openlocfilehash: 0f11e78e68598e95d0f284b5450f42710a6ae922
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139895657"
Slug: apache-spark-to-azure-cosmosdb-connector-is-now-generally-available
Title: 'Apache Spark Azure #CosmosDB コネクタへのアクセスが一般提供される'
Summary: Azure Apache Spark DB コネクタへのCosmosが一般提供されたのでお知らせします。 これにより、リアルタイムのデータ分析とデータ サイエンス、機械学習、探索が可能です。
Content: "<p>Azure Apache Spark <a href=\"https://aka.ms/spark-documentdb\" target=\"_blank\">DB コネクタへのCosmos一</a>般提供が行われ、お知らせします。 これにより、Azure Cosmos DB のグローバルに分散されたデータに対するリアルタイムのデータ分析とデータ サイエンス、機械学習、探索が可能です。 Azure Apache Spark DB&rsquo; Cosmos に接続すると、お客様は、Azure Cosmos DB を使用してデータをすばやく永続化して照会できる、移動の速いデータ サイエンスの問題を解決する能力が向上します。 Azure Apache Spark Cosmos DB コネクタでは、<a href=\"https://github.com/Azure/azure-documentdb-spark/wiki\" target=\"_blank\">IoT</a>、データ サイエンス、分析のシナリオに至るまで、急速に変化するグローバル分散データに対して分析とプッシュダウン述語のフィルター処理を実行するときに、更新可能な列を有効にするネイティブの Azure Cosmos DB マネージド インデックスを効率的に利用します。 Azure Apache Spark DB コネクタCosmos、Db <a href=\"https://github.com/Azure/azure-documentdb-rxjava\" target=\"_blank\">SDK 用の Java Reactive Extension (Rx) Microsoft Azure Cosmos使用します</a>。</p>\n\n<p><a href=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/ccc8eb43-4199-4427-9792-65d5fe68b264.png\"><img alt=\"Azure-DocumentDB-Spark_Connector\" border=\"0\" height=\"528\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/97bc4145-21de-47f4-b1ef-12bd4635c47a.png\" style=\"border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;\" title=\"Azure-DocumentDB-Spark_Connector\" width=\"1191\"></a></p>\n\n<p><em>図 1: Apache Spark Connector for Azure Cosmos DB では、Apache Spark ワーカー ノードと Azure Cosmos DB データ パーティションの間でデータが並列化されます。</em></p>\n\n<p>Azure Cosmos DB 用 Spark コネクタを使用すると、Azure Cosmos DB データ パーティション内のデータの場所を詳しく説明するメタデータが Spark マスター ノードに提供されます (手順 1 と 2)。 そのため、処理時に、Spark ワーカー ノードと Azure Cosmos DB データ パーティションの間でデータが並列化されます (手順 3 と 4)。 そのため、データは Azure Cosmos DB に格納されるため、Apache Spark で機械学習とデータ サイエンスの問題を解決するときに、Azure Cosmos DB によってサポートされるパフォーマンス、スケーラビリティ、スループット、整合性が得されます。</p>\n\n<p>今すぐ<a href=\"https://aka.ms/spark-documentdb\" target=\"_blank\">始めて</a>、Spark コネクタをダウンロード<a href=\"https://github.com/Azure/azure-documentdb-spark\" target=\"_blank\">GitHub。</a> <a href=\"https://github.com/azure/azure-cosmosdb-spark/\" target=\"_blank\">azure-cosmosdb-spark GitHub</a>には、次のサンプル <a href=\"https://github.com/Azure/azure-cosmosdb-spark/tree/master/samples/notebooks\" target=\"_blank\">ノートブックも含</a>まれています。</p>\n\n<ul>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/blob/master/samples/notebooks/On-Time Flight Performance with Spark and Cosmos DB - Seattle.ipynb\" target=\"_blank\">Apache Spark と Azure Cosmos DB</a> を使用したオンタイム フライト パフォーマンス: このノートブックには、分散分析、GraphFrames、および ML (ロジスティック回帰) の例も含まれています。</li>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/blob/master/samples/notebooks/Spark-to-CosmosDB_Connector.ipynb\" target=\"_blank\">Apache Spark Azure Cosmos DB</a> 変更フィード Apache Spark: このノートブックでは、Azure Cosmos DB 変更フィードとやり取りする方法の例を示します。</li>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/blob/master/samples/notebooks/Twitter with Spark and Azure Cosmos DB Change Feed.ipynb\" target=\"_blank\">Apache Spark と Azure Cosmos DB</a> 変更フィードを含む Twitter: Azure Cosmos DB 変更フィード ノートブックにリアルタイムの Twitter ソースを含めるスーパー課金。</li>\n <li>Apache Spark を使用して <a href=\"https://github.com/Azure/azure-cosmosdb-spark/blob/master/samples/notebooks/Using Apache Spark to query Cosmos DB Graphs.ipynb\" target=\"_blank\">Azure Cosmos DB Graphs</a> にクエリを実行する: Azure Cosmos DB グラフ コンテナーに対して gremlin クエリを実行し、Core API を介して Apache Spark を使用して同じコンテナーに対してクエリを実行できるマルチモデルの例。</li>\n</ul>\n\n<h2>パフォーマンスの向上</h2>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/cosmos-db/spark-connector\" target=\"_blank\">年の初めに Spark</a> コネクタを発表して以来、<a href=\"https://github.com/Azure/azure-cosmosdb-spark/issues\" target=\"_blank\">azure-cosmosdb-spark GitHub</a> の問題を通じて多くのフィードバックを受け取り、 を介して直接やり取りを行いました<a target=\"_blank\">askcosmosdb@microsoft.com</a>。 プレビューは次のようなパフォーマンスを向上させるために、Spark コネクタの最も重要な改善セットの 1 つを明確に示しました。</p>\n\n<ul>\n <li>Spark コネクタ接続ポリシーの構成を追加しました。 詳細については、構成リファレンスを <a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Configuration-references\" target=\"_blank\">参照してください</a>。</li>\n <li>複数の Spark バージョンのサポートを追加しました</li>\n <li>Azure Cosmos DB への書き込み時のスループットの向上</li>\n <li>Azure Cosmos DB 変更フィードのサポートを追加しました</li>\n <li>さまざまなバグ修正に対処しました</li>\n</ul>\n\n<h2>構造化ストリーミングのサポート</h2>\n\n<p>機能の観点から、最も要求された質問は、構造化ストリーミングのサポートを有効にでした。&nbsp;たとえば、次のコード サンプルでは、Spark 構造化ストリーミングと Azure Cosmos DB 変更フィードを使用して間隔数を実行し、出力をコンソールにプッシュする方法を示します。</p>\n\n<pre>\nimport com.microsoft.azure.cosmosdb.spark._\nimport com.microsoft.azure.cosmosdb.spark.schema._\nimport com.microsoft.azure.cosmosdb.spark.config.Config\nimport org.codehaus.jackson.map.ObjectMapper\nimport com.microsoft.azure.cosmosdb.spark.streaming._\nimport java.time._\n\n \nval sourceConfigMap = Map(\n&quot;Endpoint&quot; -&gt; &quot;COSMOS DB ENDPOINT&quot;,\n&quot;Masterkey&quot; -&gt; &quot;COSMOS DB KEY&quot;,\n&quot;Database&quot; -&gt; &quot;DATABASE&quot;,\n&quot;Collection&quot; -&gt; &quot;COLLECTION&quot;,\n&quot;ConnectionMode&quot; -&gt; &quot;Gateway&quot;,\n&quot;ChangeFeedCheckpointLocation&quot; -&gt; &quot;checkpointlocation&quot;,\n&quot;changefeedqueryname&quot; -&gt; &quot;Streaming Query from Azure Cosmos DB Change Feed Internal Count&quot;)\n \n\n// Start reading change feed as a stream\nvar streamData = spark.readStream.format(classOf[CosmosDBSourceProvider].getName).options(sourceConfigMap).load()\n\n\n// Start streaming query to console sink\nval query = streamData.withColumn(&quot;countcol&quot;, streamData.col(&quot;id&quot;).substr(0, 0)).groupBy(&quot;countcol&quot;).count().writeStream.outputMode(&quot;complete&quot;).format(&quot;console&quot;).start()</pre>\n\n<p>ストリーミング出力は、この場合、Azure Cosmos DB にデータをプッシュする Twitter ストリームを使用しています。次のようになります。</p>\n\n<pre>\n-------------------------------------------\nBatch: 0\n-------------------------------------------\n+--------+-----+\n|countcol|count|\n+--------+-----+\n+--------+-----+\n\n-------------------------------------------\nBatch: 1\n-------------------------------------------\n+--------+-----+\n|countcol|count|\n+--------+-----+\n+--------+-----+\n...\n\n-------------------------------------------\nBatch: 5\n-------------------------------------------\n+--------+-----+\n|countcol|count|\n+--------+-----+\n|        | 8108|\n+--------+-----+\n\n-------------------------------------------\nBatch: 6\n-------------------------------------------\n+--------+-----+\n|countcol|count|\n+--------+-----+\n|        |21040|\n+--------+-----+\n...\n\n-------------------------------------------\nBatch: 13\n-------------------------------------------\n+--------+-----+\n|countcol|count|\n+--------+-----+\n|        |99907|\n+--------+-----+</pre>\n\n<div>&nbsp;</div>\n\n<p>詳細については、以下を参照してください。</p>\n\n<ul>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Structured-Stream-demos\" target=\"_blank\">azure-cosmosdb-spark 構造化ストリームデモ</a></li>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Stream-Processing-Changes-using-Azure-Cosmos-DB-Change-Feed-and-Apache-Spark\" target=\"_blank\">Azure Cosmos DB 変更フィードと Apache Spark を使用したストリーム処理の変更</a></li>\n</ul>\n\n<h2>次の手順</h2>\n\n<p>Azure Apache Spark DB コネクタCosmosを使用すると、リアルタイムビッグ データに対するアドホック クエリと対話型クエリ、および高度な分析、データ サイエンス、機械学習、人工知能の両方が可能です。 Azure Cosmos DB は、世界中のさまざまなソースから増分収集されるデータをキャプチャするために使用できます。 これには、ソーシャル分析、時系列、ゲームまたはアプリケーションのテレメトリ、小売カタログ、最新の傾向とカウンター、監査ログ システムが含まれます。 すべてのシナリオについて詳しくは、<a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki\" target=\"_blank\">azure-cosmosdb-spark</a> の wiki を参照GitHubください。</p>\n\n<ul>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Azure-Cosmos-DB-Spark-Connector-User-Guide\" target=\"_blank\">Azure Cosmos DB Spark Connecter ユーザー ガイド</a></li>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Aggregations-Examples\" target=\"_blank\">分散集計の例</a></li>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Stream-Processing-Changes-using-Azure-Cosmos-DB-Change-Feed-and-Apache-Spark\" target=\"_blank\">Azure Cosmos DB 変更フィードと Apache Spark を使用したストリーム処理の変更</a></li>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Change-Feed-demos\" target=\"_blank\">変更フィードのデモ</a></li>\n <li><a href=\"https://github.com/Azure/azure-cosmosdb-spark/wiki/Structured-Stream-demos\" target=\"_blank\">構造化されたストリームデモ</a></li>\n</ul>\n\n<p>クエリの実行を開始するには、Azure Portal から新しい <a href=\"https://portal.azure.com/#create/Microsoft.DocumentDB\" target=\"_blank\">Azure Cosmos DB</a> アカウントを作成し、<a href=\"https://github.com/Azure/azure-documentdb-spark\" target=\"_blank\">azure-cosmosdb-spark</a> GitHub のプロジェクトを使用します。 Azure サブスクリプションを必要とせず、課金や契約もなく <a href=\"https://azure.microsoft.com/try/cosmosdb/\" target=\"_blank\">Azure Cosmos DB を無料で試す</a>ことができます。</p>\n\n<p>サポートが必要な場合、またはご質問やフィードバックがある場合は、開発者フォーラム (Stack Overflow) にお問 <a href=\"https://stackoverflow.com/questions/tagged/azure-cosmosdb\" target=\"_blank\">い合わせください</a>。 最新の Azure Cosmos DB のニュースと機能については、Twitter <a href=\"https://twitter.com/search?q=%23CosmosDB&amp;src=typd\" target=\"_blank\">#CosmosDB と に関するページをご覧</a>ください<a href=\"https://twitter.com/AzureCosmosDB\" target=\"_blank\">@AzureCosmosDB</a>。</p>\n\n<p>&nbsp;</p>\n\n<p>&mdash;Azure Cosmos DB <a href=\"https://twitter.com/AzureCosmosDB\" target=\"_blank\">(@AzureCosmosDB</a>、<a href=\"https://twitter.com/search?q=%23CosmosDB&amp;src=typd\" target=\"_blank\">#CosmosDB) の友人</a></p>"
