### YamlMime:Yaml
ms.openlocfilehash: 7fdc94c86018acd09df3d8cbd8d8199d28fc253a
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139892741"
Slug: sap-on-azure-designing-for-efficiency-operations
Title: SAP on Azure –効率と操作のための設計
Summary: >-
  堅牢な SAP on Azure アーキテクチャは、セキュリティ、パフォーマンスとスケーラビリティ、可用性と回復性、および効率と操作の柱に基づいて構築されています。


  このブログでは、さまざまな azure サービスと、azure で実行される SAP アプリケーションの運用効率をサポートできる新しい GitHub リポジトリについて説明します。
Content: >-
  <p>これは、優れた SAP on Azure アーキテクチャの設計に関する4部構成のシリーズの最後のブログです。</p>


  <p>堅牢な SAP on Azure アーキテクチャは、 <a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-architecture-designing-for-security/" target="_blank">セキュリティ</a>、 <a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-architecture-designing-for-performance-and-scalability/" target="_blank">パフォーマンスとスケーラビリティ</a>、 <a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-designing-for-availability-and-recoverability/" target="_blank">可用性と回復性</a>、および効率と操作の柱に基づいて構築されています。</p>


  <p>このブログでは、さまざまな azure サービスと、azure で実行される SAP アプリケーションの運用効率をサポートできる新しい GitHub リポジトリについて説明します。</p>


  <p>では、始めましょう &rsquo; 。</p>


  <h2>Azure NetApp Files を使用した SAP Shared Storage アーキテクチャの簡素化</h2>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7ab2afed-2216-4cc0-88e2-40d389017d03.jpg"><img alt="A diagram showing the simplified SAP Shared Storage architecture." src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/9d1dc755-f144-45b6-a5c0-d581e72690fc.jpg" style="margin: 0px 12px; border: 0px currentcolor; display: inline; background-image: none; width: 640px; height: 419px;" title="clip_image002"></a></p>


  <p>Azure NetApp Files (anf) を使用すると、SAP on Azure デプロイアーキテクチャを簡素化し、Enterprise NFS に基づく SAP 共有ファイルの高可用性 (HA) に優れたユースケースを提供できます。</p>


  <p>SAP 共有ファイルは、高可用性を必要とする SAP システムと複数のアプリケーションサーバーに不可欠です。 また、スケールアウトシステム SAP HANA は、共有ファイルの共通セットも必要とします。</p>


  <ul>
   <li>&nbsp;/sapmnt は、SAP カーネルファイル、プロファイル、ジョブログを格納します。</li>
   <li>&nbsp;/共有。 SAP HANA スケールアウトのためのバイナリ、構成ファイル、およびトレースを格納します。</li>
  </ul>


  <p>Azure NetApp Files する前に、高可用性を必要とする Linux を実行しているお客様は SAP on Azure、Pacemaker クラスターを使用して SAP 共有ファイルを保護し、レプリケーションデバイスをブロックする必要がありました。 これらの設定は管理が複雑であり、高度な技術スキルを管理する必要がありました。 Azure NetApp Files の導入により、Pacemaker クラスターをアーキテクチャから削除することができます。これにより、ランドスケープの拡散とメンテナンスの労力が軽減されます。 さらに、ディスクをストライピングしたり、SAP 共有ファイルのブロックレプリケーションテクノロジを構成したりする必要がなくなりました。 代わりに、Azure NetApp Files ボリュームは、Azure Portal、Azure CLI または PowerShell を使用して構成し、SAP Central Services クラスターにマウントすることができます。 Azure NetApp Files ボリュームは、ストレージスナップショットを使用して即座にサイズを変更し、保護することもできます。</p>


  <p>SAP on Azure デプロイアーキテクチャを簡単にするために、SAP System Central Services と SAP 共有ファイルの高可用性を実現するための2つのシナリオを、Azure NetApp Files NFS と共に公開しました。</p>


  <p>&bull;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/high-availability-guide-rhel-netapp-files" target="_blank">Red Hat Enterprise Linux 上の Azure vm での sap NetWeaver の高可用性に関する Azure NetApp Files と sap アプリケーション</a></p>


  <p>&bull;<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/high-availability-guide-suse-netapp-files" target="_blank">SUSE Linux Enterprise Server 上の Azure vm での sap NetWeaver の高可用性に関する Azure NetApp Files と sap アプリケーション</a></p>


  <h2>Azure Connector for SAP LaMa を使用した開発、テスト、サンドボックスデプロイの最適化</h2>


  <p>一般的な SAP 資産では、多くの場合、ERP、SCM、BW などのアプリケーションランドスケープがデプロイされています。また、SAP システムのコピーと SAP システムの更新を実行する必要があります。つまり、技術的/アプリケーションリリース用に新しい SAP プロジェクトシステムを作成したり、運用コピーから QA システムを定期的に更新したりします。 SAP システムのコピーと更新を行うためのエンドツーエンドのプロセスには、時間と労力がかかることがあります。</p>


  <p>sap LaMa Enterprise Edition は、sap システムのコピーまたは更新に必要ないくつかの手順を自動化できる、この分野の運用効率をサポートできます。 <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/lama-installation" target="_blank">Azure Connector For LaMa を</a>使用すると、sap オペレーションチームが sap システムのコピーやシステムの更新を実行して手動での作業を迅速に削減できるように、azure Managed Disks のコピー、削除、再配置が可能になります。</p>


  <p>仮想マシン (Vm) の操作に関しては、azure Connector for LaMa を使用して、Azure での SAP 資産の実行コストを削減できます。 SAP 仮想マシンを停止 (割り当て解除) して開始することができます。これにより、使用率の低いプロファイルを使用して特定のワークロードを実行できます。ただし、LaMa インターフェイスでは、SAP S/4HANA サンドボックスの仮想マシンを08:00-18:00 から、24時間ではなく10時間でオンラインにするようにスケジュールします。 さらに、Azure Connector for LaMa では、LaMa 内からパフォーマンスの需要が直接発生した場合に、仮想マシンのサイズを変更することもできます。</p>


  <h2>SAP のデプロイを自動化して時間を節約し、エラーを減らす</h2>


  <p>SAP インフラストラクチャとソフトウェアのインストールを手動でデプロイすると、時間と手間がかかり、エラーが発生しやすくなります。 Azure の主な利点の1つは、sap インフラストラクチャのデプロイ (仮想マシン、ストレージ、SAP ソフトウェアのインストールなど) を自動化できることです。 自動化により、エラーと偏差が削減され、プログラムと高速の SAP デプロイが容易になります。 お客様は、Azure Resource Manager テンプレートなど、Azure でネイティブに利用できる幅広い自動化ツールを使用できます。また、PowerShell と Azure CLI の両方を使用してデプロイスクリプトを作成することもできます。 さらに、お気に入りの <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/infrastructure-automation" target="_blank">構成管理ツール</a>を利用することもできます。</p>


  <p>SAP デプロイ用の Azure automation についての開始スターターとして、以下のリンクがいくつか含まれています。</p>


  <ul>
   <li>&nbsp;<a href="https://github.com/AzureCAT-GSI/SAP-HANA-ARM" target="_blank">ARM テンプレートのサンプル</a>:</li>
   <li>&nbsp;<a href="https://azure.microsoft.com/en-us/blog/automating-sap-deployments-in-microsoft-azure-using-terraform-and-ansible/" target="_blank">Terraform のサンプルと</a></li>
   <li>&nbsp;<a href="https://azure.microsoft.com/en-us/blog/accelerate-your-sap-on-azure-hana-project-with-suse-microsoft-solution-templates/" target="_blank">サンプル SUSE ソリューションテンプレート</a></li>
  </ul>


  <h2>Azure Monitor for SAP Solutions で包括的なビューを取得する</h2>


  <p>SAP on Azure のお客様は、インフラストラクチャのテレメトリだけでなくデータベースのメトリックを一元的に監視できるようになりました。 SAP ソリューションの監視を含むように、Azure Monitor 機能を強化しました。 この Azure Monitor の機能強化により、SAP on Azure 仮想マシン (Vm) とベアメタルの <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/hana-overview-architecture" target="_blank">HANA l インスタンス (HLI) オファリング</a>の両方がカバーされます。 SAP ソリューションの機能の Azure Monitor は次のとおりです。</p>


  <ul>
   <li>&nbsp;インフラストラクチャの正常性 &amp; 使用率の監視</li>
   <li>&nbsp;トラブルシューティングのためのインフラストラクチャと SAP データベース間のデータの相関関係</li>
   <li>&nbsp;分析データを使用して、プロアクティブな修復を可能にするパターンを特定する</li>
  </ul>


  <p>Azure Monitor for SAP Solutions では、SAP HANA VM または hli でエージェントは実行されません。 代わりに、顧客サブスクリプション内にマネージリソースグループをデプロイします。このリソースには、SAP HANA サーバーからテレメトリを収集し、そのデータを Azure &rsquo; Log Analytics に取り込むためのリソースが含まれています。</p>


  <p>マネージリソースグループにデプロイされるコンポーネントには、次のようなものがあります。</p>


  <ul>
   <li>データベースの資格情報などの顧客のシークレットを格納するために使用 Azure Key Vault &ndash;</li>
   <li>アクセスポリシーとして Key Vault に割り当てられた User-Assigned Id &ndash;</li>
   <li>監視テレメトリを収集して分析するための Log Analytics &ndash; ワークスペース</li>
   <li>コレクター仮想マシン &ndash; は、SAP HANA データベースサーバーからテレメトリを収集するためのロジックを実行します。</li>
  </ul>


  <p>ここでのビジョンは、インフラストラクチャと SAP テレメトリが一致して問題の識別を容易にし、致命的な停止が発生する前に修復を実装できるようにするための、単一ポイントの監視と分析を可能にすることです。 単純な例として、メモリ使用量の軌道が重大になり SAP HANA が列のアンロードを開始する場合があります。この場合、問題が発生する前に管理者に通知するアラートがトリガーされます。</p>


  <p>2019年10月に、SAP の Azure Monitor は SAP HANA から統計情報を収集でき、現在はプライベートプレビューのため、このサービスに関心がある場合は、Microsoft アカウントチームにお問い合わせください。</p>


  <h2>SAP デプロイの最適化に関するその他のリソース</h2>


  <p>AzureCAT SAP デプロイエンジニアリングチームは、顧客のプロジェクトに対してディープなエンゲージメントを提供します。お客様は、お客様の SAP アプリケーションを品質に応じて Azure に正常にデプロイできます。 プロジェクトライフサイクル全体にわたって、顧客 &rsquo; の SAP デプロイアーキテクチャの修復または最適化が必要になる場合があります。 次に例を示します。</p>


  <ul>
   <li>&nbsp;SAP デプロイアーキテクチャの復元力を活用します。</li>
  </ul>


  <p>シナリオは、Azure 可用性セット (SLA 99.95%) を使用した高可用性構成ではなく、単一インスタンスの仮想マシン (SLA 99.9%) で SAP システムをデプロイした場合に発生する可能性があります。 現在、お客様は既存のネットワーク (IP、vNIC) およびデータディスクを維持しながら、可用性セットの構成に移行する必要があります。</p>


  <ul>
   <li>パフォーマンスの最適化:</li>
  </ul>


  <p>SAP on Azure のお客様は既に運用環境で実行されています。また、お客様の SAP アプリケーションとデータベース仮想マシン間のネットワークパフォーマンスを最適化するために、近接配置グループの恩恵を受けたいと考えています。</p>


  <ul>
   <li>&nbsp;Availability Zones の選択:</li>
  </ul>


  <p>顧客は、ネットワークラウンドトリップ時間を最小限に抑え、SAP データベースの回復ポイントの目標をゼロ (同期) にするために、最適な Azure Availability Zones を選択するためのガイダンスを必要とします。</p>


  <p>上記のトピック (およびその他) に対処するために、新しい<a href="https://github.com/Azure/SAP-on-Azure-Scripts-and-Utilities" target="_blank">GitHub リポジトリ</a>を作成しました。 このリポジトリは永続的になり、お客様とパートナーは、Azure での SAP デプロイの運用効率をサポートするために、新しいスクリプトを継続的に導入することを期待できます。</p>


  <h2>閉じる</h2>


  <p>このブログでは、優れた SAP on Azure アーキテクチャの設計に関するシリーズを終了します。 Azure 上の SAP 資産を効率的に運用するための最新のサービスをご利用いただけること &rsquo; を願っています。変更はクラウドの世界において唯一の定数であり、変更に対応し、よりシンプルにすることができます。</p>


  <p>次の手順として、SAP on Azure <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/sap/get-started" target="_blank">はじめに</a> ページをチェックアウトすることをお勧めします。</p>


  <p>シリーズの前のブログについては、以下のリンクを参照してください。</p>


  <ul>
   <li><a href="https://azure.microsoft.com/en-gb/blog/sap-on-azure-architecture-designing-for-security/" target="_blank">セキュリティのための設計</a></li>
   <li><a href="https://azure.microsoft.com/en-gb/blog/sap-on-azure-architecture-designing-for-performance-and-scalability/" target="_blank">パフォーマンスとスケーラビリティのための設計</a></li>
   <li><a href="https://azure.microsoft.com/en-us/blog/sap-on-azure-designing-for-availability-and-recoverability/" target="_blank">可用性と回復性のための設計</a></li>
  </ul>
