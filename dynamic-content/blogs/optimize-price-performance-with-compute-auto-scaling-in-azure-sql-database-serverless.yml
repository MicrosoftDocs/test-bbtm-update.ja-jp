### YamlMime:Yaml
ms.openlocfilehash: a372d2d6fdb537f11204cbf06e16efc1063dacd6
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904001"
Slug: optimize-price-performance-with-compute-auto-scaling-in-azure-sql-database-serverless
Title: Azure SQL Database サーバーレスでのコンピューティング自動スケールを使用した価格パフォーマンスの最適化
Summary: コンピューティングリソースの割り当てを最適化してパフォーマンスの目標を達成することは、特に複雑な使用パターンを持つデータベースワークロードに対しては、困難なバランスを取ることができます。 SQL Database サーバーレスは、ワークロードの需要と1秒間に使用されるコンピューティングの請求に基づいて、コンピューティングを自動的にスケーリングします。
Content: >-
  <p>コンピューティングリソースの割り当てを最適化してパフォーマンスの目標を達成することは、特に複雑な使用パターンを持つデータベースワークロードに対しては、困難なバランスを取ることができます。 これらの課題に対処するために、Azure SQL Database サーバーレスのプレビューについてお知らせします。 SQL Database サーバーレス (プレビュー) は、価格パフォーマンスを最適化し、断続的で予測できない使用量があるデータベースのパフォーマンス管理を簡略化する新しいコンピューティング層です。 基幹業務アプリケーション、開発/テストデータベース、コンテンツ管理、e コマースシステムは、多くの場合、SQL Database サーバーレスに最適な使用パターンに適合する、さまざまなアプリケーションの一例にすぎません。 SQL Database サーバーレスは、コンピューティングサイズの不確実性や、コストを削減するために頻繁に再スケーリングを必要とするワークロードを備えた新しいアプリケーションにも適しています。 サーバーレスコンピューティング層は、SQL Database の完全に管理された組み込みのインテリジェンス特典を活用して、アプリケーション開発を迅速化し、運用上の複雑さを最小化し、総コストを削減します。</p>


  <h2>コンピューティングの自動スケーリング</h2>


  <p>SQL Database サーバーレスは、1秒間に使用されたコンピューティングのワークロードの需要と請求に基づいて、単一のデータベースのコンピューティングを自動的にスケーリングします。 サーバーレスと SQL Database のプロビジョニングされたコンピューティング層では、固定価格で固定量のコンピューティングリソースを割り当て、1時間ごとに課金されます。 短時間スケールでは、プロビジョニングされたコンピューティングデータベースは、ピーク時の使用量やプロビジョニング中のリソースに対応するために、コストをかけてリソースを過剰にプロビジョニングする必要があり、パフォーマンスが低下します。 より長い時間スケールでは、プロビジョニングされたコンピューティングデータベースをスケールことができますが、このソリューションでは、使用パターンの予測や、スケジュールやパフォーマンスメトリックに基づいた再スケーリング操作をトリガーするカスタムロジックの作成が必要になる場合があります。 これにより、開発と運用の複雑さが増します。 サーバーレスでは、構成可能な制限内のコンピューティングスケーリングがサービスによって管理され、リソースのサイズを継続的に適切に調整できます。 サーバーレスでは、非アクティブな使用期間中にデータベースを自動的に一時停止し、アクティビティが戻ったときに自動的に再開するオプションも提供されます。</p>


  <h2>使用したコンピューティングに対してのみ課金されます</h2>


  <p>SQL Database サーバーレスでは、compute は、1秒あたりに使用された CPU とメモリの量に基づいて課金されます。 &nbsp;データベースが一時停止されている間は、ストレージのみが課金され、追加の価格最適化の特典が提供されます。</p>


  <p>たとえば、夜間にアイドル状態になっているが、1日に複数コアのバースティングヘッドルームを必要とする基幹業務アプリケーションまたは開発/テストデータベースがあるとします。 自動一時停止と自動スケーリングを4個の仮想コアに対応するように構成されたサーバーレスデータベースを使用しており、24時間にわたって次の使用パターンを使用しているとします。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/163fe6da-77fa-4247-86b7-785735ab65d7.png"><img alt="Graph display of usage patterns for SQL Database serverless over a 24 hour period" border="0" height="380" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0df33977-d0bd-42d7-a55b-ad28263fe766.png" style="border: 0px currentcolor; border-image: none; margin-right: auto; margin-left: auto; float: none; display: block; background-image: none;" title="24時間にわたる SQL Database サーバーレスの使用パターンの Graph 表示" width="1308"></a></p>


  <p>ご覧のように、データベースの使用量は、計算されたコンピューティングの量に相当します。これは、仮想コアの秒単位で測定され、24時間にわたって46k の仮想コアの秒単位で測定されます。 サーバーレスデータベースのコンピューティングユニット価格が、$ 0.000073/vcore/秒を中心としているとします。 この1日の期間のコンピューティング料金は、$3.40 未満です。 これは、コンピューティングユニットの価格に、累積された仮想コアの合計秒数を掛けることによって計算されます。 この期間中、データベースはアイドル状態で自動一時停止され、ユーザーの介入なしで最大80% の仮想コアのバースティングエピソードを利用できるようになりました。 この例では、同じ4つの仮想コア制限で構成されたプロビジョニング済みのコンピューティングデータベースと比較して、サーバーレスを使用した価格の節約が重要です。&nbsp;&nbsp;</p>


  <p><em>プレビューの価格は割引されていることに注意してください。この例では、価格は2019年5月の米国東部リージョンに基づいており、変更される可能性があります。</em>最新の価格については、 <a href="https://azure.microsoft.com/en-us/pricing/details/sql-database/single/" target="_blank"><em>Azure SQL Database の価格</em></a>に関するページを参照してください<em>。</em></p>


  <h2>価格-パフォーマンスのトレードオフ</h2>


  <p>SQL Database サーバーレスを使用する場合は、コストパフォーマンスのトレードオフを考慮する必要があります。 これらのトレードオフは、コンピューティングユニットの価格と、低またはアイドルの使用期間後のコンピューティングのウォームアップによるアプリケーションのパフォーマンスへの影響に関連しています。</p>


  <h3>コンピューティングユニット価格</h3>


  <p>サーバーレスは、使用パターンが断続的なワークロードに最適化されているため、プロビジョニングされたコンピューティングデータベースの場合と比べて、サーバーレスデータベースのコンピューティングユニット価格は高くなります。 CPU またはメモリの使用率が十分に高く、十分な時間が確保されていれば、プロビジョニングされたコンピューティング層のコストが低くなる可能性があります。</p>


  <h3>使用率が低い後にウォームアップを計算する</h3>


  <p>サーバーレスデータベースがオンラインになっている間、CPU またはメモリの使用量が十分に少ないほど、メモリが徐々に解放されます。 ワークロードアクティビティが返された場合、SQL バッファープールにデータページを復元するためにディスク IO が必要になることがあります。また、クエリプランを再コンパイルする必要がある場合もあります。 低使用率に基づいてキャッシュを回収するこのメモリ管理ポリシーは SQL Database サーバーレスに固有であり、顧客のコストを制御するために実行されますが、パフォーマンスに影響を与える可能性があります。 低使用率に基づくメモリの回収は、単一データベースまたはエラスティックプールのプロビジョニングされたコンピューティングレベルでは発生しません。このような影響は回避できます。</p>


  <h3>一時停止後にウォームアップを計算する</h3>


  <p>サーバーレスデータベースを一時停止および再開するための待機時間は、通常、データベースがオフラインになっている間、約1分以内です。 データベースを再開した後で、メモリキャッシュを復元する必要があります。これにより、最適なパフォーマンス条件が返される前に待機時間が増加します。 自動一時停止が発生するまでに経過する必要のあるアイドル期間は、このパフォーマンスへの影響を補うように構成することができます。 または、この影響を受けやすいワークロードに対して自動一時停止を無効にしても、自動スケールによってメリットが得られます。 計算の最小数は、使用量に関係なくデータベースがオンラインのときに課金されるため、自動一時停止を無効にするとコストが増加します。</p>


  <h2>詳細情報</h2>


  <p>Azure SQL Database サーバーレスは、単一データベースの General Purpose 層でサポートされています。</p>


  <ul>
   <li><a href="https://go.microsoft.com/fwlink/?linkid=2085062" target="_blank">Azure SQL Database サーバーレス (プレビュー)</a>の詳細については、こちらを参照してください。</li>
   <li>サーバーレスコンピューティング層 (プレビュー) の<a href="https://azure.microsoft.com/en-us/pricing/details/sql-database/single" target="_blank">Azure SQL Database 料金</a>の詳細については、こちらを参照してください。</li>
  </ul>
