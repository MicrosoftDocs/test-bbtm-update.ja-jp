### YamlMime:Yaml
ms.openlocfilehash: 007d2b7d47ffe62b8c2bb58e3f4f4285fa6bc9eb
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139908997"
Slug: get-started-with-scheduled-events
Title: メンテナンス イベントへの対応...発生する前に
Summary: VM の可用性に影響を与える可能性がある今後のイベントについて学習し、必要に応じて計画を立てたらどうなるでしょうか。  Azure を使用するとScheduled Eventsできます。
Content: "<h2>Scheduled Events一般提供&nbsp;</h2>\n\n<p>VM の可用性に影響を与える可能性がある今後のイベントについて学習し、必要に応じて計画を立てたらどうなるでしょうか。 Azure Scheduled Eventsを使用できます。</p>\n\n<p>Scheduled Eventsは、Azure Metadata Serviceのサブサービスの 1 つで、今後のイベント (再起動など) に関する情報が表示されます。 Scheduled Eventsイベントの影響を最小限に抑えるために、予防タスクを実行するのに十分な時間をアプリケーションに与える必要があります。 スケジュールされたイベントは、VM 内から REST エンドポイントを使用して表示され、その情報は、VM の外部に公開されないという、ログアウトできない IP を介して提供されます。</p>\n\n<h2>データの説明Scheduled Events</h2>\n\n<ul>\n    <li>VM のメンテナンスの保持 (インセット &ndash; VM 移行とも呼ばれる)。 このクラスのメンテナンス操作は、VM を再起動せずにホスティング環境 (ハイパーバイザーとエージェント) に修正プログラムを適用および更新するために使用されます。 <a href=\"https://docs.microsoft.com/en-us/azure/virtual-machines/linux/maintenance-in-place\">VM のメンテナンスを維持すると</a>、開いているファイルやネットワーク接続を失わずに、VM が最大 30 秒間フリーズします。 最新のほとんどのアプリケーションはこのような短い一時停止の影響を受けず、一部のワークロード (ゲームなど) は機密性が高すぎて、これを停止と見なします。 このScheduled Events、アプリケーションは、イベントの種類が Freeze であるこのようなメンテナンスについて学習できます。</li>\n    <li>VM の再起動メンテナンス。 ほとんどの更新プログラムは仮想マシンにほとんどまたは全く影響しませんが、仮想マシンを再起動する必要がある場合があります。 アプリケーションScheduled Events、イベントの種類が [再起動] または [再デプロイ] に設定されているこのようなシナリオを検出できます。</li>\n    <li>ユーザー操作。 実稼働サーバーを手動で再起動することはできませんが、フェールオーバー ロジックをテストするために、テスト VM を再起動または再デプロイすることもできます。 どちらの場合も、スケジュールされたイベントが表示され、イベントの種類が [再起動] または [再デプロイ] に設定されます。</li>\n</ul>\n\n<h2>アプリケーションのScheduled Events</h2>\n\n<p>次の例を使用して、いくつかの使用例をScheduled Events。</p>\n\n<ul>\n    <li>プロアクティブ フェールオーバー: アプリケーション、SLB、またはトラフィック マネージャーが問題を検出するのを待機する代わりに、別のノードに事前にフェールオーバーできます。 場合によっては、VM が間もなく戻ってくることを知ることにより、アプリケーション ロジックは、パーティション/レプリカをフェールオーバーするのではなく、変更の蓄積とログ記録を開始するのに役立ちます。</li>\n    <li>ノードをドレインする: 実行中のジョブを失敗させる代わりに、VM が新しいジョブを受け入れるのをブロックし、既に開始されているジョブをドレインすることができます。</li>\n    <li>ログと監査: VM が Azure によって中断されたことを知ることにより、可用性の問題の根本原因分析を簡略化できます。</li>\n    <li>通知と関連付け: 管理者 (人間) または監視ソフトウェアに通知を送信し、スケジュールされたイベントを他のシグナルと関連付ける。</li>\n</ul>\n\n<h2>はじめにを使用Scheduled Events</h2>\n\n<p>VNET 対応 VM 内から次の呼び出しを行うだけで、スケジュールされたイベントのクエリを実行できます。</p>\n\n<pre>\n<code>curl -H Metadata:true <code><a href=\"\"></a> </code></code></pre>\n\n<p>応答には、スケジュールされたイベントの配列が含まれています。 空の配列は、現在スケジュールされているイベントがないことを意味します。 スケジュールされたイベントがある場合は、応答にイベントの配列が含まれます。</p>\n\n<pre>\n<code>{\n &quot;DocumentIncarnation&quot;:{IncarnationID},\n &quot;Events&quot;:[\n      {\n            &quot;EventId&quot;:{eventID},\n            &quot;EventType&quot;:&quot;Reboot&quot; | &quot;Redeploy&quot; | &quot;Freeze&quot;,\n            &quot;ResourceType&quot;:&quot;VirtualMachine&quot;,\n            &quot;Resources&quot;:[{resourceName}],\n            &quot;EventStatus&quot;:&quot;Scheduled&quot; | &quot;Started&quot;,\n            &quot;NotBefore&quot;:{timeInUTC},              \n     }\n ]\n}\n</code></pre>\n\n<p>VM でスケジュールされたイベントを処理するロジックをトリガーしてテストするには、単に vm の [再起動] または [再デプロイ] Azure portalに移動します。</p>\n\n<h2>次の手順</h2>\n\n<ul>\n    <li>詳細については <a href=\"https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-scheduled-events\">、Azure Scheduled Eventsドキュメント</a> を参照してください。</li>\n    <li>Azure Event Hub を使用 <a href=\"https://github.com/Azure-Samples/virtual-machines-python-scheduled-events-central-logging\">して複数の VM から</a> スケジュールされたイベントを収集する次のサンプルをご覧ください。</li>\n</ul>"
