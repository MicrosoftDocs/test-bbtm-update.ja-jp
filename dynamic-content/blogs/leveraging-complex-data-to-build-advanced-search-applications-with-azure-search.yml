### YamlMime:Yaml
ms.openlocfilehash: 49e4951f2bd5fd7f1f17b2ec49184f4cda6450ae
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139896715"
Slug: leveraging-complex-data-to-build-advanced-search-applications-with-azure-search
Title: 複雑なデータを活用して、Azure Search を使用した高度な検索アプリケーションを構築する
Summary: データはごく単純なものではありません。  データのすべての部分が、行と列の1つの Excel ワークシートに適切に適合するとは限りません。  データには、1人の顧客の複数の場所や電話番号、1冊の書籍の複数の著者とジャンルなど、さまざまな関係があります。
Content: >-
  <p>データはごく単純なものではありません。 データのすべての部分が、行と列の1つの Excel ワークシートに適切に適合するとは限りません。 データには、1人の顧客の複数の場所や電話番号、1冊の書籍の複数の著者とジャンルなど、さまざまな関係があります。 もちろん、リレーションシップは通常、これよりも複雑です。また、AI を利用してデータを理解するために、追加の学習によって、リレーションシップの複雑さにのみ追加されます。 そのため、データを検索して探索できるように、データをフラット化する必要があります。これは、多くの場合、現実的ではありません。 私たちはこのようなことをよく耳にしていましたが、 <a href="https://feedback.azure.com/forums/263029-azure-search/suggestions/6670910-modelling-complex-types-in-indexes" target="_blank">1 つの Azure Search 機能が要求され</a>ています。 このため、Azure Search での複合型のサポートの一般提供を発表しました。 この記事では、Azure Search に追加される複合型と、この機能を使用して構築できる項目の種類について、少し時間を取って説明します。&nbsp;</p>


  <p>Azure Search は、開発者が独自のクラウド検索ソリューションを作成するのに役立つ、サービスとしてのプラットフォームです。</p>


  <h2>複雑なデータとは何ですか。</h2>


  <p>複合データは、表形式の行セットに正しく分割されない階層構造または入れ子になったサブ構造体を含むデータで構成されます。 たとえば、複数の著者が存在する書籍では、各著者は複数の属性を持つことができますが、オブジェクトのコレクションとして作成者をモデル化する方法がない限り、1行のデータとして表すことはでき &rsquo; ません。 複合型はこの機能を提供し、文字列や整数などの単純なフィールド構造でデータをモデル化できない場合に使用できます。</p>


  <h2>複合型の適用性</h2>


  <p>Microsoft ビルド2019では、 &nbsp; <a href="https://mybuild.techcommunity.microsoft.com/sessions/76964?source=sessions">効果的な検索アプリケーションを構築</a>するために複合型を活用する方法を説明しました。 このセッションでは、stackexchange でサポートされている多くのオンラインコミュニティの1つであるトラベルスタック Exchange サイトを見てきました。</p>


  <p>StackExchange のデータは、Azure Search に簡単に取り込むことができるように、JSON 構造でモデル化されています。 このサイトへの最初の投稿を見て、最初のいくつかのフィールドに注目した場合は、 <a href="https://docs.microsoft.com/en-us/rest/api/searchservice/supported-data-types">コレクション</a>としてモデル化できるタグや文字列の配列など、単純なデータ型を使用して、すべてをモデル化できることがわかります。</p>


  <pre>

  {
     &quot;id&quot;: &quot;1&quot;,
      &quot;CreationDate&quot;: &quot;2011-06-21T20:19:34.73&quot;,
      &quot;Score&quot;: 8,
      &quot;ViewCount&quot;: 462,
      &quot;BodyHTML&quot;: &quot;&lt;p&gt;My fianc&eacute;e and I are looking for a good Caribbean cruise in October and were wondering which
      &quot;Body&quot;: &quot;my fianc&eacute;e and i are looking for a good caribbean cruise in october and were wondering which islands
      &quot;OwnerUserId&quot;: 9,
      &quot;LastEditorUserId&quot;: 101,
      &quot;LastEditDate&quot;: &quot;2011-12-28T21:36:43.91&quot;,
      &quot;LastActivityDate&quot;: &quot;2012-05-24T14:52:14.76&quot;,
      &quot;Title&quot;: &quot;What are some Caribbean cruises for October?&quot;,
      &quot;Tags&quot;: [
          &quot;caribbean&quot;,
          &quot;cruising&quot;,
          &quot;vacations&quot;
      ],
      &quot;AnswerCount&quot;: 4,
      &quot;CommentCount&quot;: 4,
      &quot;CloseDate&quot;: &quot;0001-01-01T00:00:00&quot;,</pre>

  <p>ただし、このデータセットをさらに見ていくと、データがより複雑になり、フラット構造にマップできなくなることがわかります。 たとえば、1つのドキュメントに関連付けられているコメントや回答が多数存在する場合があります。 &nbsp; ここでも、投票は複合型として定義されています (技術的にはフラット化されていても、データを変換するための作業が追加される可能性もあります)。</p>


  <pre>

  &quot;CloseDate&quot;: &quot;0001-01-01T00:00:00&quot;,
      &quot;Comments&quot;: [
          {
              &quot;Score&quot;: 0,
              &quot;Text&quot;: &quot;To help with the cruise line question: Where are you located? My wife and I live in New Orlea
              &quot;CreationDate&quot;: &quot;2011-06-21T20:25:14.257&quot;,
             &quot;UserId&quot;: 12
          },
          {
              &quot;Score&quot;: 0,
              &quot;Text&quot;: &quot;Toronto, Ontario. We can fly out of anywhere though.&quot;,
              &quot;CreationDate&quot;: &quot;2011-06-21T20:27:35.3&quot;,
              &quot;UserId&quot;: 9
          },
          {
              &quot;Score&quot;: 3,
              &quot;Text&quot;: &quot;\&quot;Best\&quot; for what?  Please read [this page](
              &quot;UserId&quot;: 20
          },
          {
              &quot;Score&quot;: 2,
              &quot;Text&quot;: &quot;What do you want out of a cruise? To relax on a boat? To visit islands? Culture? Adventure?
              &quot;CreationDate&quot;: &quot;2011-06-24T05:07:16.643&quot;,
              &quot;UserId&quot;: 65
          }
      ],
      &quot;Votes&quot;: {
          &quot;UpVotes&quot;: 10,
          &quot;DownVotes&quot;: 2
      },
      &quot;Answers&quot;: [
          {
              &quot;IsAcceptedAnswer&quot;: &quot;True&quot;,
              &quot;Body&quot;: &quot;This is less than an answer, but more than a comment&hellip;\n\nA large percentage of your travel b
              &quot;Score&quot;: 7,
              &quot;CreationDate&quot;: &quot;2011-06-24T05:12:01.133&quot;,
              &quot;OwnerUserId&quot;: 74</pre>

  <p>これらのデータはすべて、検索エクスペリエンスにとって重要です。 たとえば、次の操作を行います。</p>


  <ul>
      <li>元の質問だけでなく、コメントの中でも、語句<a href="https://docs.microsoft.com/rest/api/searchservice/search-documents" target="_blank">を検索して強調表示</a>します。</li>
      <li><a href="https://docs.microsoft.com/azure/search/search-filters" target="_blank">ドキュメント</a> &nbsp; を制限する特定のユーザーによって回答が提供された場所に移動します。</li>
      <li><a href="https://docs.microsoft.com/azure/search/index-add-scoring-profiles" target="_blank">特定のドキュメント</a> &nbsp; をブーストするより多くの投票がある場合の検索結果の上位。</li>
  </ul>


  <p>実際には、ユーザーが検索ボックスに入力したときに<a href="https://docs.microsoft.com/rest/api/searchservice/autocomplete" target="_blank">オートコンプリート</a>用の語句を指定するために<a href="https://azure.microsoft.com/en-us/blog/announcing-cognitive-search-azure-search-cognitive-capabilities/" target="_blank">Cognitive Search</a>を利用して、既存の stackexchange search インターフェイスを向上させることもできます。</p>


  <p>これで、このデータを複雑な構造にマップできるだけでなく、検索クエリでもこの拡張構造がサポートされるため、検索エクスペリエンスが向上します。</p>


  <h2>次の手順</h2>


  <p>Azure Search 複合型の詳細については、 <a href="https://docs.microsoft.com/azure/search/search-howto-complex-data-types" target="_blank">ドキュメント</a>を参照するか、この旅行 stackexchange データに調査ている <a href="https://mybuild.techcommunity.microsoft.com/sessions/76964?source=sessions" target="_blank">ビデオ</a> と関連する <a href="https://github.com/liamca/build2019aidemos" target="_blank">コード</a> をご覧ください。</p>
