### YamlMime:Yaml
ms.openlocfilehash: 065817ccd354f741f66625285504d16d478466e0
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139893013"
Slug: iis-reset-on-windows-azure-web-role
Title: Azure Web ロールでの IIS Windowsリセット
Summary: Web 開発者の場合は、誤動作する IIS ホストをリセットするために 、"quick-and-easy" iisreset コマンドを使用している可能性が最も高い可能性があります。 この方法は、通常、サーバー VM のクラシック Windowsに機能します。 しかし。。。
Content: >-
  Web 開発者の場合は、"quick-and-easy"  <em>iisresetcommand</em>  を使用して、動作の誤った IIS ホストをリセットした可能性が最も高い可能性があります。 この方法は、通常、サーバー VM のクラシック Windowsに機能します。 ただし、Azure でアプリケーションを実行している場合はWindows  <strong>iisreset を実行しない必要があります</strong>。


  この記事を読んでいる場合は、すべてのブログ記事を参照してください。これは非常にクールです。Microsoft Azure で次のアプリケーションを開発する場合に役立つ情報を見つけられていると思います。 そのため、そのうちの 1 人である場合は、非常に大きな感謝の言葉を言いたいと思います。


  ただし、ブログの投稿が閲覧者のダイジェストや定時の読み取りを完全に知り得ない場合は、Microsoft Azure VM で IIS を手動でリセットしようとしたため、現在は Web サイトに到達できない状態にある可能性が最も高い可能性があります。 そのような場合は、まだ迅速かつ簡単に修正できます (ただし、今後は Microsoft Azure Web ロールで IIS のリセットを実行しないという約束があります)。

  <h4><strong>Azure で IIS リセットを実行しない理由</strong></h4>

  IIS リセットを実行すると、クライアントを Web サイトに接続するサービスである Windows World Wide Web Publishing Service (W3SVC) が停止します。


  クラシック Windows Server では、W3SVC の "スタートアップの種類" は自動です。 したがって、W3SVC サービスは自動的に再起動され、すべてが正常に動作します。


  ただしWindows Azure では、Web ロール内で実行される Windows Azure エージェントがロールを開始する前に W3SVC を構成できるよう、W3SVC は "demand start" に設定されます。 クラシック Windows Server の IIS とは異なり、Azure の IIS ロールは常に実行されるのではなく、そのライフサイクルが Azure プラットフォームによって制御されます。

  <h4><strong>IIS リセットではない場合、何が起こっていますか?</strong></h4>

  Windows Azure でホストされている Web アプリケーションで問題が発生し、問題が IIS ホストに関連している可能性がある場合は、次の一部のアクションをお勧めします。

  <ol>
   <li>一時的に症状を緩和するのではなく、障害の根本原因を特定してみてください。   <a href="https://blogs.msdn.com/b/kwill/archive/2013/09/19/troubleshooting-scenario-5-internal-server-error-500-in-webrole.aspx">https://blogs.msdn.com/b/kwill/archive/2013/09/19/troubleshooting-scenario-5-internal-server-error-500-in-webrole.aspx</a> を開始する場合や、リモート デバッグを実行Visual Studioを使用する場合があります <a href=""></a>。問題の根 <a href="https://azure.microsoft.com/en-us/support/options/"></a>  <a href="https://social.msdn.microsoft.com/Forums/windowsazure/en-US/home?forum=windowsazuredevelopment"></a> 本原因が見つからない場合は、サポート チームが問題の特定を支援できる、Microsoft Azure サポート担当者への投稿を検討してください。</li>
   <li>Azure ロード バランサーが正常なインスタンスに着信トラフィックを送信できるよう、1 つ以上のロール インスタンスを持っている必要があります。またLoad Balancer、Azure でロールが正常と見なされているが IIS が正しく動作していない場合に、ロード バランサーがトラフィックを正しく送信できるカスタムの  <a href="https://msdn.microsoft.com/en-us/library/jj151530.aspx">Probeso</a>  の実装を検討する必要があります。</li>
   <li>最後の方法として、Web サイトをすばやくオンラインに戻す必要があるだけで、後で問題のデバッグについて心配したい場合は、iisreset ではなく Windows Azure 管理ポータル を使用してロールの再起動または再起動を実行します。</li>
  </ol>

  <h4><strong>Web サイトをバックアップするには、次の手順に従います。</strong></h4>

  <ol>
   <li>[Web ロール] Microsoft Azure Worker ロール内から、[サービスの&gt;開始].msc に移動します。</li>
   <li>[サービス (ローカル) ] の一覧で、下にスクロールして [発行サービスWorld Wide Web検索します。 見つかりましたか?</li>
   <li>次に、[発行サービスの開始] を右World Wide Webクリックし、[開始] をクリックします。 多田！ Web サイトがバックアップされている必要があります。</li>
  </ol>

  <div><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1790/8540.IIS-1.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1790/8540.IIS-1.png" border="0"></a></div>

  <div>


  ただし、Web サイトにまだ到達できない場合は、Azure 管理ポータル に戻り、クラウド サービスの [インスタンス] タブに移動し、次のように Web ロールで [再起動] をクリックして VM を再起動することをお勧めします (複数のロール インスタンスがある場合は、"iisreset" を実行したインスタンスを再起動する必要があります)。


  <a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1790/2705.IIS-2.png"><img alt="" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/1790/2705.IIS-2.png" border="0"></a>


  これが役に立ちます。


  </div>
