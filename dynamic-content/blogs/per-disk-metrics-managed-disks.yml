### YamlMime:Yaml
ms.openlocfilehash: 75403a18e04710ecfd0b9fe1a0dd7548c59b6439
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139891428"
Slug: per-disk-metrics-managed-disks
Title: Managed & 非管理対象ディスクのディスクメトリックごとにパブリックプレビューが開始
Summary: 現在、管理対象のすべての & 非管理対象ディスクについて、ディスクメトリックごとのパブリックプレビューを共有しています。 これにより、アプリケーションの使用状況に合わせて適切なディスク選択を厳密に監視し、その選択を行うことができます...
Content: >-
  <p>&rsquo;現在、管理されていないすべての非管理対象 &amp; ディスクについて、ディスクメトリックごとのパブリックプレビューを共有しています。 これにより、アプリケーションの使用パターンを厳密に監視して適切なディスク選択を行うことができます。 さらに、それを使用して、アラート、診断、およびビルド自動化も作成できます。</p>


  <p>この前に、仮想マシン (VM) に接続されているすべてのディスクの集計メトリックを取得できます。これにより、特にワークロードが接続されているすべてのディスクに均等に分散されていない場合に、アプリケーションのパフォーマンス特性に関する洞察が制限されます。 &nbsp;このリリースでは、特定のディスクにドリルダウンして、ワークロードのパフォーマンス特性を把握することが非常に簡単になりました。</p>


  <p>現在&#39;s preview で有効にし&#39;新しいメトリックは次のとおりです。</p>


  <ul>
   <li>OS ディスク読み取り操作数/秒</li>
   <li>OS ディスク書き込み操作数/秒</li>
   <li>OS ディスク読み取りバイト数/秒</li>
   <li>OS ディスク書き込みバイト数/秒</li>
   <li>OS ディスク QD</li>
   <li>データ ディスク読み取り操作数/秒</li>
   <li>データ ディスク書き込み操作数/秒</li>
   <li>データ ディスク読み取りバイト数/秒</li>
   <li>データ ディスク書き込みバイト数/秒</li>
   <li>データディスク QD</li>
  </ul>


  <p>次の GIF は、Azure portal 内の特定のディスクのメトリックダッシュボードを簡単に作成できることを示しています。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/851331a9-4efe-4c12-bc5e-606167e7e124.gif"><img alt="2018-04-02_14-22-12" height="550" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5c706072-4d06-4537-ae21-86ae3b352181.gif" style="margin-right: auto; margin-left: auto; float: none; display: block;" title="2018-04-02 (14-22-12)" width="1000"></a></p>


  <p>さらに、 <a href="https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitor-send-to-grafana">Grafana との統合が Azure Monitor</a>ため、 &rsquo; これらのメトリックを使用して Grafana ダッシュボードを非常に簡単に構築できます。 ここで &rsquo; は、1つの OS ディスクと3つのデータディスクを備えた VM からのメトリックを使用して Grafana ダッシュボードを設定する GIF を示します。</p>


  <p><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0734aaab-4c98-45e5-a789-e3b3d8eece5a.gif"><img alt="2018-04-02_17-06-26" height="517" src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/10a03200-090e-473a-8f03-1e4c9054af71.gif" style="margin-right: auto; margin-left: auto; float: none; display: block;" title="2018-04-02 17-06-26" width="1000"></a></p>


  <h2>Azure CLI</h2>


  <p>Azure CLI &rsquo; を使用すると、メトリック値をプログラムによって簡単に取得できます。 &nbsp;まず、特定のリソースのメトリック定義の一覧を取得する必要があります。</p>


  <pre style="margin-left: 0.5in;">

  ➜  ~ az monitor metrics list-definitions --resource /subscriptions/&lt;sub-id&gt;/resourceGroups/metric-rg/providers/Microsoft.Compute/virtualMachines/metric-md


  Display Name                    Metric Name                       Unit            Type     Dimension Required    Dimensions

  ------------------------------  --------------------------------  --------------  -------  --------------------  ------------

  Percentage CPU                  Percentage CPU                    Percent         Average  False

  Network In                      Network In                        Bytes           Total    False

  Network Out                     Network Out                       Bytes           Total    False

  Disk Read Bytes                 Disk Read Bytes                   Bytes           Total    False

  Disk Write Bytes                Disk Write Bytes                  Bytes           Total    False

  Disk Read Operations/Sec        Disk Read Operations/Sec          CountPerSecond  Average  False

  Disk Write Operations/Sec       Disk Write Operations/Sec         CountPerSecond  Average  False

  CPU Credits Remaining           CPU Credits Remaining             Count           Average  False

  CPU Credits Consumed            CPU Credits Consumed              Count           Average  False

  Data Disk Read Bytes/Sec        Per Disk Read Bytes/sec           CountPerSecond  Average  False                 SlotId

  Data Disk Write Bytes/Sec       Per Disk Write Bytes/sec          CountPerSecond  Average  False                 SlotId

  Data Disk Read Operations/Sec   Per Disk Read Operations/Sec      CountPerSecond  Average  False                 SlotId

  Data Disk Write Operations/Sec  Per Disk Write Operations/Sec     CountPerSecond  Average  False                 SlotId

  Data Disk QD                    Per Disk QD                       Count           Average  False                 SlotId

  OS Disk Read Bytes/Sec          OS Per Disk Read Bytes/sec        CountPerSecond  Average  False

  OS Disk Write Bytes/Sec         OS Per Disk Write Bytes/sec       CountPerSecond  Average  False

  OS Disk Read Operations/Sec     OS Per Disk Read Operations/Sec   CountPerSecond  Average  False

  OS Disk Write Operations/Sec    OS Per Disk Write Operations/Sec  CountPerSecond  Average  False

  OS Disk QD                      OS Per Disk QD                    Count           Average  False</pre>


  <p>メトリックの一覧が表示されたら、特定のメトリックの値を取得できます (この場合のデータディスク書き込みバイト数/秒など)。</p>


  <pre style="margin-left: 40px;">

  ➜ ~ az monitor metrics list --resource /subscriptions/&lt;sub-id&gt;/resourceGroups/metric-rg/providers/Microsoft.Compute/virtualMachines/metric-md --metric &#39;Per Disk Write Bytes/Sec&#39; --aggregation Maximum --filter &quot;SlotId eq &#39;1&#39;&quot; --interval PT1M --start-time 2018-04-02T21:35:09Z --end-time 2018-04-03T00:49:09Z


  Timestamp            Name                         Slotid      Maximum

  -------------------  -------------------------  --------  -----------

  2018-04-02 21:35:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:36:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:37:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:38:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:39:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:40:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:41:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:42:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:43:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:44:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:45:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:46:00  Data Disk Write Bytes/Sec         1

  2018-04-02 21:47:00  Data Disk Write Bytes/Sec         1  1.01974e+08

  2018-04-02 21:48:00  Data Disk Write Bytes/Sec         1  1.02015e+08

  2018-04-02 21:49:00  Data Disk Write Bytes/Sec         1  1.02041e+08

  2018-04-02 21:50:00  Data Disk Write Bytes/Sec         1  1.01976e+08

  2018-04-02 21:51:00  Data Disk Write Bytes/Sec         1  6.37246e+07</pre>
