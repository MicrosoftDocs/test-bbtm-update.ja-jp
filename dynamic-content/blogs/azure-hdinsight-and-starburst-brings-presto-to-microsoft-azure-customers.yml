### YamlMime:Yaml
ms.openlocfilehash: 93f40f05e657bb51e650fc380f7c9e75ea8ec63b
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139890567"
Slug: azure-hdinsight-and-starburst-brings-presto-to-microsoft-azure-customers
Title: Azure HDInsight Starburst を使用して Presto を顧客Microsoft Azureする
Summary: Microsoft と Starburst は、Starburst Presto が Azure HDInsight Application Platform に追加されました。 Azure HDInsight Application Platform を使用して、Microsoft は、お客様が 1 回のクリックで展開できるよう、広範なビッグ データと高度な分析ソリューションを有効にしました。
Content: >-
  <p><em>このブログの投稿は、<a href="https://www.linkedin.com/in/mfuller/" target="_blank">Starburst の Vp Co-Founderが&amp;</a>共同作成しました</em></p>


  <p>Microsoft と Starburst は、Starburst Presto が Azure HDInsight Application Platform に追加されました。 <a href="https://azure.microsoft.com/en-us/services/hdinsight/partner-ecosystem/" target="_blank">Azure HDInsight Application Platform</a> を使用して、Microsoft では、お客様が 1 回のクリックで展開できるよう、広範なビッグ データと高度な分析ソリューションを有効にしています。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/4d554fe1-accf-4bf1-a272-cbba7af484f3.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>Presto は、高速でスケーラブルな分散 SQL クエリ エンジンです。 ストレージとコンピューティングを分離するように設計された Presto では、Azure Blob Storage、Azure Data Lake Storage、SQL、NoSQL データベース、その他のデータ ソースのデータに対して簡単にクエリを実行できます。</p>


  <p>Presto を追加すると、HDInsight ユーザーに次の 2 つのことが提供されます。</p>


  <ol>
   <li>
   <p>Azure Blob と Azure Data Lake SQL内のデータへの高速でスケーラブルで対話型のインターフェイスStorage。</p>
   </li>
  </ol>


  <ol start="2">
   <li>
   <p>Prestos&rsquo; の膨大なデータ コネクタ ポートフォリオを活用することで、Azure BLOB と Azure Data Lake Storage のデータを他のソースと統合するクエリを簡単に作成できます。</p>
   </li>
  </ol>


  <p>新しい Presto オプションは、HBase、Storm、Spark、R、Kafka、Interactive Query などの HDInsight 上の他の既存のオープン ソース コンポーネントを補完します。 これにより、お客様はワークロードに最も適したオープン ソース ツールを使用できます。</p>


  <p>Starburst Presto ディストリビューションでは、高速なパフォーマンス (コストベースのクエリ最適化によって有効)、強化されたセキュリティ機能、次のような Azure および HDInsight サービスとの統合が提供されます。</p>


  <ul>
   <li>
   <p>Azure Blob Storage</p>
   </li>
  </ul>


  <ul>
   <li>
   <p>Azure Data Lake Storage</p>
   </li>
   <li>
   <p>外部の Hive メタストア</p>
   </li>
   <li>
   <p>Microsoft PowerBI</p>
   </li>
  </ul>


  <p>Starburst Presto on Azure HDInsightは、次のページ  <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/apps/starburst.starburst-presto-203?tab=Overview" target="_blank">Azure Marketplace</a>。 この記事の残りの部分では、アーキテクチャの概念と、Starburst Presto の使用を開始する方法について説明Azure HDInsight。</p>


  <h2>しくみ</h2>


  <p>Presto は Azure HDInsight にアプリケーションとしてデプロイされ、Azure Blob Storage または Azure Data Lake Storage でデータのクエリをすぐに開始するように構成できます。 HDInsight  <a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-use-external-metadata-stores" target="_blank">のexternal metastorefeature</a>  を活用することで、Presto は Hive や Spark などの他のクラスターとメタデータを共有できます。</p>


  <p>HDInsight 用 Presto は、Microsofts&rsquo; PowerBI や Tableau などのツールで使用できます。 また&rsquo;、HDInsight で [Presto] を選択すると自動的にインストールされ、実行されるオープン ソース  <a href="https://superset.incubator.apache.org/" target="_blank">の Apache Supersetfor</a>  Business Intelligence にもパッケージ化されています。 Presto&rsquo; を初めて試す簡単な視覚的な方法です。</p>


  <p>Presto コーディネーターと  <a href="https://www.starburstdata.com/learn-presto/reference-architectures/" target="_blank">Workerarchitecture は</a> 、HDInsights&rsquo; ヘッド ノードとワーカー ノードのアーキテクチャに似ています。 HDInsight にアプリケーションとして Presto をデプロイすると、Presto コーディネーターが HDInsights&rsquo; ヘッド ノードの 1 つにデプロイされ、Presto ワーカーが HDInsights&rsquo; ワーカー ノードにデプロイされます。 さらに、デプロイされるエッジ ノードには、Presto コマンド ライン インターフェイス (CLI) と Apache Superset が含まれている。</p>


  <p>非常に便利な機能の 1 つは、外部 Hive メタストアに接続する機能です。 Presto、Hive、Spark&rsquo; などのさまざまなツール間でメタデータが共有され、Presto クラスターのライフサイクルとは独立しています。 これにより、コストを節約するために使用されていないときに Presto HDInsight クラスターをシャットダウンできます。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d080f20c-f05c-4ff9-a889-92be8ad9ff0e.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>HDInsight のもう 1 つの便利な機能は、スケールアップまたはスケールダウンによってクラスターを管理する機能です。 Presto は、ストレージとコンピューティングを分離するために、一から設計されました。 これにより、Presto は HDInsight とシームレスに連携し、ビジネスの需要に応じて柔軟にスケールアップまたはスケールダウンできます。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/71793555-ff90-4531-b470-225d7106e8ac.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>Starburst には、Presto 構成の更新などの一般的な操作のためのスクリプト アクションのセットも用意されています。 たとえば、 からクエリを実行する新しいコネクタを構成Microsoft SQL Server。 これにより、RDBMS と Azure Blob Storage の間でフェデレーション クエリを実行できます。 スクリプト アクションの詳細については、このページ <a href="https://docs.starburstdata.com/" target="_blank">を参照してください</a>。 また、現在の <a href="https://github.com/starburstdata" target="_blank">スクリプト GitHub</a> については、この記事を参照してください。投稿は大歓迎です。</p>


  <h2>HDInsight での Presto の使用</h2>


  <p>Starburst Presto は、アプリでアプリケーションとして選択Azure HDInsight。 [Starburst Presto] を選択し、HDInsight のセットアップを続行します。</p>


  <p>さらに、Azure HDInsight の Starburst  <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/apps/starburst.starburst-presto-203?tab=Overview" target="_blank"></a>  Presto は Azure Marketplace HdInsight 用 Presto 固有のパラメーターが事前に入力された Azure Portal にリダイレクトされ、ユーザーのセットアップ エクスペリエンスがさらに簡単になります。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/0959631f-6db3-404c-802a-bb1844520f1b.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"><a href="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/7b5d4a44-4bba-478e-9ca5-19805927d7c6.png"><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/b2316190-9a24-4d71-ab13-9fbc450d9d1f.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></a></p>


  <p>HDInsight と Presto がデプロイされた後は、インストールされているアプリケーションとして Presto を表示できます</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/96207903-8ab3-487a-b0ae-afed92590bd4.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <h2>Azure Data Lake Storage および Azure BLOB に対する Starburst Presto のサポートの構成</h2>


  <p>HDInsight 用の Presto は、Azure Blob Storage と Azure Data Lake Storage に対してクエリを実行するように構成できます。 Azure BLOB には、WINDOWS AZURE STORAGE BLOB (WASB) を介してアクセスされます。 このレイヤーは HDFS API の上に構築され、クラスターからストレージを分離できます。 これは、ストレージとは別に Presto と HDInsight をスケーリングする場合に重要です。 セットアップ中に、目的のストレージ アカウントを選択するだけで&rsquo;、自動的に構成されます。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/3bce3e4f-3664-44b2-9e59-d0dc9f2753bd.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>hive.properties を手動で実行すると、Presto 構成ファイルは次のように表示されます。</p>


  <p>hive.azure.wasb-storage-account=&lt;account-name&gt;<br>

  hive.azure.wasb-access-key=&lt;access-key&gt;</p>


  <p>同様に、Azure Data Lake Storage hive.properties の場合、Presto の構成は次のように表示されます。</p>


  <p>hive.azure.adl-client-id=&lt;application-id&gt;<br>

  hive.azure.adl-credential=&lt;key&gt;</p>


  <p>hive.azure.adl-refresh-url=&lt;token-endpoint&gt;</p>


  <h2>パフォーマンス ベンチマークの結果</h2>


  <p>Azure HDInsight での Presto の準備の一環として、Starburst は、以前に公開された HDInsight ベンチマーク Azure HDInsight パフォーマンス ベンチマーク <a href="https://azure.microsoft.com/en-us/blog/hdinsight-interactive-query-performance-benchmarks-and-integration-with-power-bi-direct-query/" target="_blank">: Interactive Query、Spark、Presto</a> を見直しました。 その時点では、Presto では、すべての TPC-DS クエリがサポートされているのではなく、コスト ベースのオプティマイザーもサポートされていませんでした。 更新されたベンチマーク&rsquo;では、TPC-DS クエリ セット全体を実行できる Presto (0.203) のはるかに新しいバージョンを使用しています。 実験では、元のブログ投稿と同じクラスター サイズとデータ サイズを使用しました。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/d19f42b5-779a-44ad-bd64-aa26eb979017.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>既定の構成で、コスト ベースオプティマイザー (CBO) を有効にした TPC-DS ベンチマークから派生したベンチマークを実行しました。 CBO を無効にした状態でテストを再度実行すると、最初に気付いたのは、7 つのクエリが完了できなかったことです。 CBO を使用しない場合、Presto (または他の SQL エンジン) には、効率的なクエリ プランを作成するための十分な情報が存在しない。 クエリが失敗した場合、Presto は最適でないプランを実行し、リソースの量が不十分になります。</p>


  <p>これは、Presto で実行できるクエリが 45 件のみだった元のブログよりも、 よりもはるかに優れた機能です。 CBO を使用すると、すべてのクエリが完了します。</p>


  <p>次に、ベンチマークの完了時間の合計を確認しました。 CBO&rsquo; によって平均約 2.4 倍のパフォーマンスが向上しているのが分かっています。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/dd1adb12-4d37-4453-8ba6-822b2f02bd37.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>これらは未確認の結果であり、公式に公開された TPC-DS の結果と比較できない点に注意してください。</p>


  <p>今後の投稿で、Starburst Prestos のパフォーマンスについて詳しく&rsquo;調べる予定です。</p>


  <h2>結論と次の手順</h2>


  <p>HDInsight には、多数のオープン ソース エンジンが含まれています。 各ツールには、使用事例に応じて固有の適合があります。 対話型のSQL分析が必要な場合は、Presto が最適です。 さらに、Presto には、Azure 内の異なるデータ ソース間でフェデレーションを行う独自の機能があります。</p>


  <p>今後のリリースでは、Starburst は HDInsight Enterprise セキュリティ パッケージと統合され、Presto クラスターを自動的にセキュリティで保護して構成します。 これには、Active Directory と Apache Ranger の統合を使用した認証と承認が含まれます。</p>


  <p><img src="https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/046c47d8-7d90-4696-89eb-30d229ed67a3.png" style="margin-right: auto; margin-left: auto; float: none; display: block;"></p>


  <p>さらに、Presto を Azure の他の Microsoft サービス と統合し、Azure Cosmos DB や SQL Data Warehouse 用など、より多くのコネクタを構築する予定です。</p>


  <p>Starburst と Microsoft では、&rsquo;オープンソースの Presto プロジェクトを進めることにコミットしました。 Presto に今すぐ試Azure Marketplace  <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/apps/starburst.starburst-presto-203?tab=Overview" target="_blank">。</a></p>
