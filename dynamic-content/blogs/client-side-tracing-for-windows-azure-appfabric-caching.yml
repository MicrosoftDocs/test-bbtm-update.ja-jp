### YamlMime:Yaml
ms.openlocfilehash: 4beb6397711e27a4a53f723e66f7e8c1eb886893
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139893144"
Slug: client-side-tracing-for-windows-azure-appfabric-caching
Title: Windows Azure AppFabric キャッシュのクライアント側のトレース
Summary: この記事では、AppFabric キャッシュサービスのクライアント側のトレースを有効にする方法について説明します。 また、同じものを試す際に直面する可能性のある基本的な問題についても触れます。  構成するには...
Content: '<p>この記事では、AppFabric キャッシュサービスのクライアント側のトレースを有効にする方法について説明します。 また、同じものを試す際に直面する可能性のある基本的な問題についても触れます。</p>  <p>AppFabric キャッシュに関連するトレースを生成するようにキャッシュクライアントを構成するには、次の手順に従ってください。</p>  <h4>構成ファイルオプション</h4>  <p>app.config/web.config で、次のケースに従って、トレース sinkType = "DiagnosticSink" traceLevel = "Verbose"/ &gt; を適切な場所に追加 &lt; する必要があります。</p>  <h4>。 &nbsp; &nbsp; &nbsp; &nbsp;DataCacheClients セクション</h4>  <p>app.config/web.config ファイルの [ &lt; 構成 &gt; ] セクションに dataCacheClients &rsquo; セクションが &lsquo; ある場合は、次のようにトレースセクションを追加します。</p>  <p>&lt;構成&gt;</p>  <p>&nbsp;&lt;configsections&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&lt;section name = "dataCacheClients" type = "DataCacheClientsSection, ApplicationServer" allowLocation = "true" Allowlocation = "すべての場所"/で指定します。&gt;</p>  <p>&nbsp;&lt;/configsections&gt;</p>  <p>&nbsp; &lt;dataCacheClients&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&lt;!--traceLevel の値は、Verbose、Info、Warning、Error、Off のいずれかになります。&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&lt;Tracing sinkType = "DiagnosticSink" traceLevel = "Verbose"/&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&lt;datacacheclient 名 = "default"&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ホスト&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;host name = "[YOUR CACHE ENDPOINT]" cachePort = "22233"/&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ホスト&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;securityproperties モード = "Message"&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MessageSecurity authorizationInfo = "[YOUR TOKEN]"&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/messageSecurity&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/securityproperties&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&lt;/datacachクライアント&gt;</p>  <p>&nbsp;&lt;/dataCacheClients&gt;</p>  <p>&nbsp; ...</p>  <p>&lt;/構成&gt;</p>  <p><span style="text-decoration: underline;">注</span>: トレースセクションは、dataCacheClients &gt; セクションの直接の子である必要があります。 dataCacheClients &gt; セクションが存在する場合 &lt; は、datacacheclient &gt; セクションの &lt; 下 &lt; に追加しないでください。</p>  <h4>b。 &nbsp; &nbsp; &nbsp; &nbsp;DataCacheClient セクション</h4>  <p>DataCacheClients &gt; セクションがなく &lt; 、app.config/web.config に datacacheclient &gt; セクションしか &lt; ない場合は、次のようにトレースセクションを追加します。</p>  <p>&lt;構成&gt;</p>  <p>&nbsp;&lt;configsections&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&lt;section name = "dataCacheClient" type = "ApplicationServer" allowLocation = "true" Allowlocation = "すべての場所"/で "DataCacheClientSection" を指定します。&gt;</p>  <p>&nbsp;&lt;/configsections&gt;</p>  <p>&nbsp; &lt;dataCacheClient&gt;</p>  <p>&lt;!--traceLevel の値は、Verbose、Info、Warning、Error、Off のいずれかになります。&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Tracing sinkType = "DiagnosticSink" traceLevel = "Verbose"/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>  <p>&lt;配置&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;host name = "[YOUR CACHE ENDPOINT]" cachePort = "22233"/&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ホスト&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;securityproperties モード = "Message"&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MessageSecurity authorizationInfo = "[YOUR TOKEN]"&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/messageSecurity&gt;</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/securityproperties&gt;</p>  <p>&nbsp;&lt;/datacachクライアント&gt;</p>  <p>&nbsp;&nbsp;&nbsp; ...</p>  <p>&lt;/構成&gt;</p>  <h4>プログラムオプション</h4>  <p>また、次のメソッドを任意の時点で呼び出して、キャッシュクライアントのトレースをプログラムで設定することもできます。</p>  <p>引数1は、トレースを使用することを指定します。</p>  <p>引数2トレースレベルフィルターを指定します。</p>  <p>DataCacheClientLogManager (DataCacheTraceSink、DiagnosticSink、TraceLevel) を返します。。</p>  <p><br> トレースログがフィルター処理されるレベルを変更することもできます。これを行うには、次の方法を任意の段階で呼び出します (サービスが開始されて安定した後の5分として、キャッシュクライアントのトレースレベルを Verbose ではなく警告に設定することもできます)。</p>  <p>DataCacheClientLogManager (ChangeLogLevel (TraceLevel));</p>  <h4>トラブルシューティング</h4>  <p>Azure SDK 1.3 以降を使用していて、DevelopmentFabric 環境で上記のメカニズムを使用して Web ロール内のキャッシュクライアント側トレースを取得しようとすると、開発ファブリック Emulator (または devfabric UI) でキャッシュクライアントのトレースを確認できなくなります。</p>  <p><strong>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 指定された動作の理由と説明</strong></p>  <p>SDK 1.3 では、IIS (ロールランタイム) は web ロール (ASP.Net セッション状態プロバイダーシナリオの場合) とは別のプロセスで実行され、Web ロールに関連するすべてのログは DevFabric UI で確認できます。ただし、キャッシュクライアント側のトレースは、IIS の一部として動作します。つまり、ロールランタイムです。 devfabric Emulator は、既定で独自のリスナー &ldquo; DevelopmentFabricTraceListener &rdquo; をアタッチし、その UI はこのリスナーによってのみ聞こえるログを出力します。 IIS は別のプロセスにあるため、このリスナーは存在せず、DevFabric UI でログを表示することはできません。</p>  <p><strong>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 解決</strong></p>  <p><span style="text-decoration: underline;">注</span>: 以下の解決策は、devfabric シナリオのログのみを表示するためのものです。そうしないと、ログは xstore (Azure Storage Account) に完全に記録されます。 プロジェクトについては、次のを web.config の [ &lt; system. diagnostics \& &gt; lt; trace &gt; \& lt; listeners &gt; ] セクションに追加します。</p>  <p>&lt;add type = "DevelopmentFabricTraceListener, DevelopmentFabric, Version = 1.0.0.0, Culture = ニュートラル, PublicKeyToken = 31bf3856ad364e35" name = "DevFabricListener" という名前を追加し、type = "DevelopmentFabric" を追加します。&gt;<br> &nbsp;&nbsp;&lt;フィルターの種類 = ""/&gt;<br> &lt;/add&gt;</p>  <p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; これは Web.Debug.config に対してのみ追加することができます。これにより、実際に Azure 環境にデプロイするときに、Web.Release.config ファイルを使用するため、このセクションは追加されません。</p>  <p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;また、DLL &ldquo;Microsoft.ServiceHosting.Tools.DevelopmentFabric.Runtime.dll&rdquo; に参照を追加する必要もあり *ません*。これは、開発ファブリックに配置するコンピューターでは、この dll が GAC に存在する必要があります (この Dll を%windir%\assembly ですで検索します)。</p>  <p>-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DevFabric にサンプルをデプロイすると、開発ファブリック UI でキャッシュトレースを確認できるようになります。</p>  <p>キャッシュサービスに関する質問またはフィードバックについては、 <a target="_blank" href="https://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/threads">Windows Azure Storage、CDN およびキャッシュ</a>に関するフォーラムを参照してください。</p>  <p>Sharad Agrawal-AppFabric チームの代理</p>  <p><iframe src="https://www.facebook.com/plugins/like.php?href= https://blogs.msdn.com/b/windowsazure/archive/2011/06/29/client-side-tracing-for-windows-azure-appfabric-caching.aspx;layout=box_count&amp;show_faces=false&amp;width=300&amp;action=like&amp;font=segoe+ui&amp;colorscheme=light&amp;height=50" style="overflow: hidden; width: 300px; height: 50px;" frameborder="0" scrolling="no"></iframe><br>ツイートします  <script type="text/javascript"></script>  </p>'
