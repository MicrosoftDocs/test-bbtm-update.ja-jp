### YamlMime:Yaml
ms.openlocfilehash: ce7ad34c5fae449c701ac3fceeeee4344a482458
ms.sourcegitcommit: d03bdc7fe5447adb6530886aab848b75fe8fa8ee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/11/2022
ms.locfileid: "139904179"
Slug: finding-your-clustered-indexes
Title: クラスター化インデックスの検索
Summary: '[この記事は SQL Azure チームによって提供されました。]SQL Azure に SQL Server スキーマを移行する前に、すべてのテーブルにクラスター化インデックスを作成する必要があります。 このブログの理由については、「」を参照してください。'
Content: "<p>[この記事は SQL Azure チームによって提供されました。]</p><p>SQL Azure に SQL Server スキーマを移行する前に、すべてのテーブルにクラスター化インデックスを作成する必要があります。 その理由については、このブログ投稿を参照してください。 この記事では、クラスター化インデックスを持たないすべてのテーブルを検索する方法について説明します。</p>  <p>移行の手法の1つとして、SQL Server データベースを更新して、そのスキーマが SQL Azure と互換性があるようにします。次に、このブログの投稿で説明したように、スクリプト生成ウィザードを使用して、同じスキーマを SQL Azure に転送します。 これは、2つの異なるスキーマ間での移行とは異なります。1つは SQL Server、もう1つは SQL Azure です。 </p>  <p>最初の方法を使用している場合は、SQL Server に対してこのスクリプトを使用すると、クラスター化インデックスのないすべてのテーブルを検索できます。</p>  <pre class=\"csharpcode\"><span class=\"kwrd\">SELECT</span> <span class=\"kwrd\">DISTINCT</span> [<span class=\"kwrd\">TABLE</span>] = OBJECT_NAME(OBJECT_ID)  <span class=\"kwrd\">FROM</span> SYS.INDEXES  <span class=\"kwrd\">WHERE</span> INDEX_ID = 0 <span class=\"kwrd\">AND</span> OBJECTPROPERTY(OBJECT_ID,<span class=\"str\">'IsUserTable'</span>) = 1  <span class=\"kwrd\">ORDER</span> <span class=\"kwrd\">BY</span> [<span class=\"kwrd\">TABLE</span>]</pre>      <p>リストを作成したら、クラスター化インデックスを必要とするテーブルを対象にすることができます。 データ型と格納されているデータの種類によっては、クラスター化インデックスを簡単にクラスター化インデックスに変換する方法があります。 これは SQL Server Management Studio で行うことができます。 以下に、その方法を示します。</p>    <ol>    <li>テーブル、テーブルのインデックスの順に展開します。 </li>      <li>クラスター化インデックスに変換する非クラスター化インデックスを選択します。 </li>      <li>そのインデックスを右クリックし、[<b>インデックスをスクリプト</b>化]、[DROP]、[ <b>CREATE</b>]、[<b>新しいクエリエディターウィンドウ]</b>の順に選択します。         <p><a href=\"\"><img style=\"border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px\" title=\"clip_image002\" border=\"0\" alt=\"clip_image002\" src=\"https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/5226.clip_5F00_image002_5F00_thumb_5F00_080269F6.jpg\" width=\"780\" height=\"310\"></a></p>    </li>      <li>SQL Server によって、インデックスを削除して再作成するための transact-sql SQL スクリプトが生成されます。 </li>      <li><strong>CREATE INDEX</strong>ステートメントで<strong>非クラスター化</strong>参照を検索し、<strong>クラスター化</strong>に変換します。 </li>  </ol>    <p>6) スクリプトを実行します。</p>    <p>SQL Server Management Studio によって作成されたスクリプトの例を次に示します。</p>    <pre class=\"csharpcode\">/****** <span class=\"kwrd\">Object</span>:  <span class=\"kwrd\">Index</span> [PK_GroupFeature]      Script <span class=\"kwrd\">Date</span>: 06/01/2010 17:00:47 ******/  <span class=\"kwrd\">IF</span>  <span class=\"kwrd\">EXISTS</span> (<span class=\"kwrd\">SELECT</span> * <span class=\"kwrd\">FROM</span> sys.indexes       <span class=\"kwrd\">WHERE</span> object_id = OBJECT_ID(N<span class=\"str\">'[dbo].[GroupFeature]'</span>)       <span class=\"kwrd\">AND</span> name = N<span class=\"str\">'PK_GroupFeature'</span>)  <span class=\"kwrd\">ALTER</span> <span class=\"kwrd\">TABLE</span> [dbo].[GroupFeature]   <span class=\"kwrd\">DROP</span> <span class=\"kwrd\">CONSTRAINT</span> [PK_GroupFeature]  <span class=\"kwrd\">GO</span>    <span class=\"kwrd\">USE</span> [Kulshan]  <span class=\"kwrd\">GO</span>    /****** <span class=\"kwrd\">Object</span>:  <span class=\"kwrd\">Index</span> [PK_GroupFeature]      Script <span class=\"kwrd\">Date</span>: 06/01/2010 17:00:48 ******/  <span class=\"kwrd\">ALTER</span> <span class=\"kwrd\">TABLE</span> [dbo].[GroupFeature] <span class=\"kwrd\">ADD</span>    <span class=\"kwrd\">CONSTRAINT</span> [PK_GroupFeature]     <span class=\"kwrd\">PRIMARY</span> <span class=\"kwrd\">KEY</span> <font color=\"#ff0000\"><span style=\"background-color: yellow\" class=\"kwrd\">CLUSTERED</span> </font>  (      [GroupFeature_Id] <span class=\"kwrd\">ASC</span>  )<span class=\"kwrd\">WITH</span> (PAD_INDEX  = <span class=\"kwrd\">OFF</span>,       STATISTICS_NORECOMPUTE  = <span class=\"kwrd\">OFF</span>,      SORT_IN_TEMPDB = <span class=\"kwrd\">OFF</span>,      IGNORE_DUP_KEY = <span class=\"kwrd\">OFF</span>, ONLINE = <span class=\"kwrd\">OFF</span>,       ALLOW_ROW_LOCKS  = <span class=\"kwrd\">ON</span>,      ALLOW_PAGE_LOCKS  = <span class=\"kwrd\">ON</span>) <span class=\"kwrd\">ON</span> [<span class=\"kwrd\">PRIMARY</span>]  GO</pre>      <p>SQL Server からに移行するすべてのテーブルに対してクラスター化インデックスを作成した後 SQL Azure SQL Azure へのデプロイについては、1つの手順に進みます。 質問、懸念事項、コメントがありますか。 これらを下に投稿してください。</p>"
